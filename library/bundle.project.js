require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"biz-socket":[function(require,module,exports){
cc._RFpush(module, '462a1boOOpB3pCoZ/FvwZch', 'biz-socket');
// biz/socket/biz-socket.js

'use strict';

var socketIO = require('../../lib/socket.io');

var BizSocket = (function () {
    var URI = '10.10.1.29:3000/tankControllers';
    var UID = 'lisheng';

    var ws = socketIO(URI + '?uid=' + UID);

    var connect = function connect() {
        ws.emit('c-enter');
    };

    var disconnect = function disconnect() {
        ws.emit('c-leave');
    };

    var on = ws.on.bind(ws);

    var emit = function emit(eventName, eventObj) {
        ws.emit(eventName, {
            uid: UID,
            data: eventObj
        });
    };

    return {
        connect: connect,
        disconnect: disconnect,
        on: on,
        emit: emit
    };
})();

module.exports = BizSocket;

cc._RFpop();
},{"../../lib/socket.io":"socket.io"}],"controller":[function(require,module,exports){
cc._RFpush(module, 'f2d90q40wZO0r33JeQe1sFf', 'controller');
// biz/controller/script/controller.js

'use strict';

var bizSocket = require('../../socket/biz-socket');

cc.Class({
    'extends': cc.Component,

    properties: {},

    backToMain: function backToMain() {
        bizSocket.disconnect();
        cc.director.loadScene('main');
    },

    onLoad: function onLoad() {},

    update: function update(dt) {}
});

cc._RFpop();
},{"../../socket/biz-socket":"biz-socket"}],"data":[function(require,module,exports){
cc._RFpush(module, '19a03pBgr9P6KEGg7IRtEDG', 'data');
// biz/main/script/data.js

'use strict';

var updateData = function updateData(object) {};

var initArchives = function initArchives() {};

var updateArchives = function updateArchives() {};

var getArchives = function getArchives() {};

var data = {
    username: '',

    tankHead: 0,
    tankBody: 0,
    tankWheel: 0,

    money: 0,
    scoreKill: 0,
    scoreDeal: 0

};

module.exports = data;

cc._RFpop();
},{}],"directionCtrl":[function(require,module,exports){
cc._RFpush(module, '8dfd11I/pBAD7XnN4iH9tiV', 'directionCtrl');
// biz/controller/script/directionCtrl.js

'use strict';

var bizSocket = require('../../socket/biz-socket');

cc.Class({
    'extends': cc.Component,

    properties: {
        follower: {
            'default': null,
            type: cc.Node
        },
        followSpeed: 0
    },

    onLoad: function onLoad() {
        this.setTouchControl();
        this.node.on('direction', function (event) {
            console.log(event.detail.direction);
            bizSocket.emit('c-direction', {
                direction: event.detail.direction
            });
        });
    },

    setTouchControl: function setTouchControl() {
        var self = this;
        cc.eventManager.addListener({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            onTouchBegan: self.onTouchBegan.bind(self),
            onTouchMoved: self.onTouchMoved.bind(self),
            onTouchEnded: self.onTouchEnded.bind(self)
        }, self.node);
    },

    __getAngle: function __getAngle(pos) {
        this.angle = Math.atan2(pos.y, pos.x) / cc.PI * 180;
        return this.angle;
    },

    __getRadians: function __getRadians(pos) {
        this.radians = Math.atan2(pos.y, pos.x);
        return this.radians;
    },

    __getLength: function __getLength(pos) {
        return Math.sqrt(pos.x * pos.x + pos.y * pos.y);
    },

    onUpdateDirection: function onUpdateDirection(position) {
        if (this.angle < 0) this.angle = this.angle + 360;

        if (this.angle > -45 && this.angle <= 45) this.direction = 'RIGHT';
        if (this.angle > 45 && this.angle <= 135) this.direction = 'UP';
        if (this.angle > 135 && this.angle <= 225) this.direction = 'LEFT';
        if (this.angle > 225 && this.angle <= 315) this.direction = 'DOWN';

        this.node.emit('direction', {
            direction: this.direction
        });
    },

    onTouchBegan: function onTouchBegan(touch, event) {
        var target = this.follower;
        var touchLoc = touch.getLocation();

        var locInNode = this.node.convertToNodeSpaceAR(touchLoc);
        var tmpLength = this.__getLength(locInNode);

        return tmpLength < 103;
    },

    onTouchMoved: function onTouchMoved(touch, event) {
        var target = this.follower;
        var touchLoc = touch.getLocation();

        var locInNode = this.node.convertToNodeSpaceAR(touchLoc);
        this.__getAngle(locInNode);
        this.__getRadians(locInNode);
        this.onUpdateDirection(locInNode);

        var tmpLength = this.__getLength(locInNode);

        if (tmpLength < 103) {
            target.setPosition(locInNode);
        } else {
            var x = Math.cos(this.radians) * 103;
            var y = Math.sin(this.radians) * 103;
            target.setPosition(cc.p(x, y));
        }
    },

    onTouchEnded: function onTouchEnded(touch, event) {
        var target = this.follower;
        target.setPosition({ x: 0, y: 0 });
    },

    update: function update(dt) {}
});

cc._RFpop();
},{"../../socket/biz-socket":"biz-socket"}],"fireCtrl":[function(require,module,exports){
cc._RFpush(module, 'a4023/XIFtI1Z1hB/fMjLNJ', 'fireCtrl');
// biz/controller/script/fireCtrl.js

'use strict';

var bizSocket = require('../../socket/biz-socket');

cc.Class({
    'extends': cc.Component,

    properties: {},

    onLoad: function onLoad() {},

    fire: function fire() {
        bizSocket.emit('c-fire', {
            fire: 'fire'
        });
    }
});

cc._RFpop();
},{"../../socket/biz-socket":"biz-socket"}],"index":[function(require,module,exports){
cc._RFpush(module, '626b7lEiD1Im5v5puIImRDy', 'index');
// utils/index.js

'use strict';

exports.getUid = function () {
    // return window.localStorage.getItem('uid');
    return 'lisheng';
};

cc._RFpop();
},{}],"lodash":[function(require,module,exports){
(function (global){
cc._RFpush(module, '9f2f1hkSF9Nk6WvHxAs9uqP', 'lodash');
// lib/lodash.js

"use strict";(function(){var undefined;var VERSION="4.2.0";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,FLIP_FLAG=512;var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1 / 0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=0 / 0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH - 1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH >>> 1;var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0x/i;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsQuoteRange="\\u2018\\u2019\\u201c\\u201d",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange + rsNonCharRange + rsQuoteRange + rsSpaceRange;var rsAstral="[" + rsAstralRange + "]",rsBreak="[" + rsBreakRange + "]",rsCombo="[" + rsComboMarksRange + rsComboSymbolsRange + "]",rsDigits="\\d+",rsDingbat="[" + rsDingbatRange + "]",rsLower="[" + rsLowerRange + "]",rsMisc="[^" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + "]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:" + rsCombo + "|" + rsFitz + ")",rsNonAstral="[^" + rsAstralRange + "]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[" + rsUpperRange + "]",rsZWJ="\\u200d";var rsLowerMisc="(?:" + rsLower + "|" + rsMisc + ")",rsUpperMisc="(?:" + rsUpper + "|" + rsMisc + ")",reOptMod=rsModifier + "?",rsOptVar="[" + rsVarRange + "]?",rsOptJoin="(?:" + rsZWJ + "(?:" + [rsNonAstral,rsRegional,rsSurrPair].join("|") + ")" + rsOptVar + reOptMod + ")*",rsSeq=rsOptVar + reOptMod + rsOptJoin,rsEmoji="(?:" + [rsDingbat,rsRegional,rsSurrPair].join("|") + ")" + rsSeq,rsSymbol="(?:" + [rsNonAstral + rsCombo + "?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|") + ")";var reComboMark=RegExp(rsCombo,"g");var reComplexSymbol=RegExp(rsFitz + "(?=" + rsFitz + ")|" + rsSymbol + rsSeq,"g");var reHasComplexSymbol=RegExp("[" + rsZWJ + rsAstralRange + rsComboMarksRange + rsComboSymbolsRange + rsVarRange + "]");var reBasicWord=/[a-zA-Z0-9]+/g;var reComplexWord=RegExp([rsUpper + "?" + rsLower + "+(?=" + [rsBreak,rsUpper,"$"].join("|") + ")",rsUpperMisc + "+(?=" + [rsBreak,rsUpper + rsLowerMisc,"$"].join("|") + ")",rsUpper + "?" + rsLowerMisc + "+",rsUpper + "+",rsDigits,rsEmoji].join("|"),"g");var reHasComplexWord=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;var cloneableTags={};cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;var deburredLetters={"脌":"A","脕":"A","脗":"A","脙":"A","脛":"A","脜":"A","脿":"a","谩":"a","芒":"a","茫":"a","盲":"a","氓":"a","脟":"C","莽":"c","脨":"D","冒":"d","脠":"E","脡":"E","脢":"E","脣":"E","猫":"e","茅":"e","锚":"e","毛":"e","脤":"I","脥":"I","脦":"I","脧":"I","矛":"i","铆":"i","卯":"i","茂":"i","脩":"N","帽":"n","脪":"O","脫":"O","脭":"O","脮":"O","脰":"O","脴":"O","貌":"o","贸":"o","么":"o","玫":"o","枚":"o","酶":"o","脵":"U","脷":"U","脹":"U","脺":"U","霉":"u","煤":"u","没":"u","眉":"u","脻":"Y","媒":"y","每":"y","脝":"Ae","忙":"ae","脼":"Th","镁":"th","脽":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeExports=objectTypes[typeof exports] && exports && !exports.nodeType?exports:null;var freeModule=objectTypes[typeof module] && module && !module.nodeType?module:null;var freeGlobal=checkGlobal(freeExports && freeModule && typeof global == "object" && global);var freeSelf=checkGlobal(objectTypes[typeof self] && self);var freeWindow=checkGlobal(objectTypes[typeof window] && window);var moduleExports=freeModule && freeModule.exports === freeExports?freeExports:null;var thisGlobal=checkGlobal(objectTypes[typeof this] && this);var root=freeGlobal || freeWindow !== (thisGlobal && thisGlobal.window) && freeWindow || freeSelf || thisGlobal || Function("return this")();function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map;}function addSetEntry(set,value){set.add(value);return set;}function apply(func,thisArg,args){var length=args.length;switch(length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array.length;while(++index < length) {var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length + othLength);while(++index < length) {result[index] = array[index];}while(++othIndex < othLength) {result[index++] = other[othIndex];}return result;}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index < length) {if(iteratee(array[index],index,array) === false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array.length;while(length--) {if(iteratee(array[length],length,array) === false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index < length) {if(!predicate(array[index],index,array)){return false;}}return true;}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index < length) {var value=array[index];if(predicate(value,index,array)){result[++resIndex] = value;}}return result;}function arrayIncludes(array,value){return !!array.length && baseIndexOf(array,value,0) > -1;}function arrayIncludesWith(array,value,comparator){var index=-1,length=array.length;while(++index < length) {if(comparator(value,array[index])){return true;}}return false;}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index < length) {result[index] = iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index < length) {array[offset + index] = values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length;if(initAccum && length){accumulator = array[++index];}while(++index < length) {accumulator = iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array.length;if(initAccum && length){accumulator = array[--length];}while(length--) {accumulator = iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array.length;while(++index < length) {if(predicate(array[index],index,array)){return true;}}return false;}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index < length) {var value=array[index],current=iteratee(value);if(current != null && (computed === undefined?current === current:comparator(current,computed))){var computed=current,result=value;}}return result;}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result = retKey?key:value;return false;}});return result;}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index < length) {if(predicate(array[index],index,array)){return index;}}return -1;}function baseIndexOf(array,value,fromIndex){if(value !== value){return indexOfNaN(array,fromIndex);}var index=fromIndex - 1,length=array.length;while(++index < length) {if(array[index] === value){return index;}}return -1;}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator = initAccum?(initAccum = false,value):iteratee(accumulator,value,index,collection);});return accumulator;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--) {array[length] = array[length].value;}return array;}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index < length) {var current=iteratee(array[index]);if(current !== undefined){result = result === undefined?current:result + current;}}return result;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index < n) {result[index] = iteratee(index);}return result;}function baseToPairs(object,props){return arrayMap(props,function(key){return [key,object[key]];});}function baseUnary(func){return function(value){return func(value);};}function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index < length && baseIndexOf(chrSymbols,strSymbols[index],0) > -1) {}return index;}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index-- && baseIndexOf(chrSymbols,strSymbols[index],0) > -1) {}return index;}function checkGlobal(value){return value && value.Object === Object?value:null;}function compareAscending(value,other){if(value !== other){var valIsNull=value === null,valIsUndef=value === undefined,valIsReflexive=value === value;var othIsNull=other === null,othIsUndef=other === undefined,othIsReflexive=other === other;if(value > other && !othIsNull || !valIsReflexive || valIsNull && !othIsUndef && othIsReflexive || valIsUndef && othIsReflexive){return 1;}if(value < other && !valIsNull || !othIsReflexive || othIsNull && !valIsUndef && valIsReflexive || othIsUndef && valIsReflexive){return -1;}}return 0;}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index < length) {var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index >= ordersLength){return result;}var order=orders[index];return result * (order == "desc"?-1:1);}}return object.index - other.index;}function deburrLetter(letter){return deburredLetters[letter];}function escapeHtmlChar(chr){return htmlEscapes[chr];}function escapeStringChar(chr){return "\\" + stringEscapes[chr];}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex + (fromRight?0:-1);while(fromRight?index--:++index < length) {var other=array[index];if(other !== other){return index;}}return -1;}function isHostObject(value){var result=false;if(value != null && typeof value.toString != "function"){try{result = !!(value + "");}catch(e) {}}return result;}function isIndex(value,length){value = typeof value == "number" || reIsUint.test(value)?+value:-1;length = length == null?MAX_SAFE_INTEGER:length;return value > -1 && value % 1 == 0 && value < length;}function iteratorToArray(iterator){var data,result=[];while(!(data = iterator.next()).done) {result.push(data.value);}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index] = [key,value];});return result;}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index < length) {if(array[index] === placeholder){array[index] = PLACEHOLDER;result[++resIndex] = index;}}return result;}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index] = value;});return result;}function stringSize(string){if(!(string && reHasComplexSymbol.test(string))){return string.length;}var result=reComplexSymbol.lastIndex = 0;while(reComplexSymbol.test(string)) {result++;}return result;}function stringToArray(string){return string.match(reComplexSymbol);}function unescapeHtmlChar(chr){return htmlUnescapes[chr];}function runInContext(context){context = context?_.defaults({},context,_.pick(root,contextProps)):root;var Date=context.Date,Error=context.Error,Math=context.Math,RegExp=context.RegExp,TypeError=context.TypeError;var arrayProto=context.Array.prototype,objectProto=context.Object.prototype;var funcToString=context.Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objectCtorString=funcToString.call(Object);var objectToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp("^" + funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?") + "$");var Reflect=context.Reflect,Symbol=context.Symbol,Uint8Array=context.Uint8Array,clearTimeout=context.clearTimeout,enumerate=Reflect?Reflect.enumerate:undefined,getPrototypeOf=Object.getPrototypeOf,getOwnPropertySymbols=Object.getOwnPropertySymbols,iteratorSymbol=typeof (iteratorSymbol = Symbol && Symbol.iterator) == "symbol"?iteratorSymbol:undefined,propertyIsEnumerable=objectProto.propertyIsEnumerable,setTimeout=context.setTimeout,splice=arrayProto.splice;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=Object.keys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var Map=getNative(context,"Map"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap && new WeakMap();var mapCtorString=Map?funcToString.call(Map):"",setCtorString=Set?funcToString.call(Set):"";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=Symbol?symbolProto.valueOf:undefined,symbolToString=Symbol?symbolProto.toString:undefined;var realNames={};function lodash(value){if(isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value);}}return new LodashWrapper(value);}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__ = value;this.__actions__ = [];this.__chain__ = !!chainAll;this.__index__ = 0;this.__values__ = undefined;}lodash.templateSettings = {escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__ = value;this.__actions__ = [];this.__dir__ = 1;this.__filtered__ = false;this.__iteratees__ = [];this.__takeCount__ = MAX_ARRAY_LENGTH;this.__views__ = [];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__ = copyArray(this.__actions__);result.__dir__ = this.__dir__;result.__filtered__ = this.__filtered__;result.__iteratees__ = copyArray(this.__iteratees__);result.__takeCount__ = this.__takeCount__;result.__views__ = copyArray(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__ = -1;result.__filtered__ = true;}else {result = this.clone();result.__dir__ *= -1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir < 0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end - start,index=isRight?end:start - 1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr || arrLength < LARGE_ARRAY_SIZE || arrLength == length && takeCount == length){return baseWrapperValue(array,this.__actions__);}var result=[];outer: while(length-- && resIndex < takeCount) {index += dir;var iterIndex=-1,value=array[index];while(++iterIndex < iterLength) {var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type == LAZY_MAP_FLAG){value = computed;}else if(!computed){if(type == LAZY_FILTER_FLAG){continue outer;}else {break outer;}}}result[resIndex++] = value;}return result;}function Hash(){}function hashDelete(hash,key){return hashHas(hash,key) && delete hash[key];}function hashGet(hash,key){if(nativeCreate){var result=hash[key];return result === HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(hash,key)?hash[key]:undefined;}function hashHas(hash,key){return nativeCreate?hash[key] !== undefined:hasOwnProperty.call(hash,key);}function hashSet(hash,key,value){hash[key] = nativeCreate && value === undefined?HASH_UNDEFINED:value;}function MapCache(values){var index=-1,length=values?values.length:0;this.clear();while(++index < length) {var entry=values[index];this.set(entry[0],entry[1]);}}function mapClear(){this.__data__ = {hash:new Hash(),map:Map?new Map():[],string:new Hash()};}function mapDelete(key){var data=this.__data__;if(isKeyable(key)){return hashDelete(typeof key == "string"?data.string:data.hash,key);}return Map?data.map["delete"](key):assocDelete(data.map,key);}function mapGet(key){var data=this.__data__;if(isKeyable(key)){return hashGet(typeof key == "string"?data.string:data.hash,key);}return Map?data.map.get(key):assocGet(data.map,key);}function mapHas(key){var data=this.__data__;if(isKeyable(key)){return hashHas(typeof key == "string"?data.string:data.hash,key);}return Map?data.map.has(key):assocHas(data.map,key);}function mapSet(key,value){var data=this.__data__;if(isKeyable(key)){hashSet(typeof key == "string"?data.string:data.hash,key,value);}else if(Map){data.map.set(key,value);}else {assocSet(data.map,key,value);}return this;}function SetCache(values){var index=-1,length=values?values.length:0;this.__data__ = new MapCache();while(++index < length) {this.push(values[index]);}}function cacheHas(cache,value){var map=cache.__data__;if(isKeyable(value)){var data=map.__data__,hash=typeof value == "string"?data.string:data.hash;return hash[value] === HASH_UNDEFINED;}return map.has(value);}function cachePush(value){var map=this.__data__;if(isKeyable(value)){var data=map.__data__,hash=typeof value == "string"?data.string:data.hash;hash[value] = HASH_UNDEFINED;}else {map.set(value,HASH_UNDEFINED);}}function Stack(values){var index=-1,length=values?values.length:0;this.clear();while(++index < length) {var entry=values[index];this.set(entry[0],entry[1]);}}function stackClear(){this.__data__ = {array:[],map:null};}function stackDelete(key){var data=this.__data__,array=data.array;return array?assocDelete(array,key):data.map["delete"](key);}function stackGet(key){var data=this.__data__,array=data.array;return array?assocGet(array,key):data.map.get(key);}function stackHas(key){var data=this.__data__,array=data.array;return array?assocHas(array,key):data.map.has(key);}function stackSet(key,value){var data=this.__data__,array=data.array;if(array){if(array.length < LARGE_ARRAY_SIZE - 1){assocSet(array,key,value);}else {data.array = null;data.map = new MapCache(array);}}var map=data.map;if(map){map.set(key,value);}return this;}function assocDelete(array,key){var index=assocIndexOf(array,key);if(index < 0){return false;}var lastIndex=array.length - 1;if(index == lastIndex){array.pop();}else {splice.call(array,index,1);}return true;}function assocGet(array,key){var index=assocIndexOf(array,key);return index < 0?undefined:array[index][1];}function assocHas(array,key){return assocIndexOf(array,key) > -1;}function assocIndexOf(array,key){var length=array.length;while(length--) {if(eq(array[length][0],key)){return length;}}return -1;}function assocSet(array,key,value){var index=assocIndexOf(array,key);if(index < 0){array.push([key,value]);}else {array[index][1] = value;}}function assignInDefaults(objValue,srcValue,key,object){if(objValue === undefined || eq(objValue,objectProto[key]) && !hasOwnProperty.call(object,key)){return srcValue;}return objValue;}function assignMergeValue(object,key,value){if(value !== undefined && !eq(object[key],value) || typeof key == "number" && value === undefined && !(key in object)){object[key] = value;}}function assignValue(object,key,value){var objValue=object[key];if(!eq(objValue,value) || eq(objValue,objectProto[key]) && !hasOwnProperty.call(object,key) || value === undefined && !(key in object)){object[key] = value;}}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection);});return accumulator;}function baseAssign(object,source){return object && copyObject(source,keys(source),object);}function baseAt(object,paths){var index=-1,isNil=object == null,length=paths.length,result=Array(length);while(++index < length) {result[index] = isNil?undefined:get(object,paths[index]);}return result;}function baseClamp(number,lower,upper){if(number === number){if(upper !== undefined){number = number <= upper?number:upper;}if(lower !== undefined){number = number >= lower?number:lower;}}return number;}function baseClone(value,isDeep,customizer,key,object,stack){var result;if(customizer){result = object?customizer(value,key,object,stack):customizer(value);}if(result !== undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result = initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else {var tag=getTag(value),isFunc=tag == funcTag || tag == genTag;if(tag == objectTag || tag == argsTag || isFunc && !object){if(isHostObject(value)){return object?value:{};}result = initCloneObject(isFunc?{}:value);if(!isDeep){return copySymbols(value,baseAssign(result,value));}}else {return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};}}stack || (stack = new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){assignValue(result,key,baseClone(subValue,isDeep,customizer,key,value,stack));});return isArr?result:copySymbols(value,result);}function baseConforms(source){var props=keys(source),length=props.length;return function(object){if(object == null){return !length;}var index=length;while(index--) {var key=props[index],predicate=source[key],value=object[key];if(value === undefined && !(key in Object(object)) || !predicate(value)){return false;}}return true;};}var baseCreate=(function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype = prototype;var result=new object();object.prototype = undefined;}return result || {};};})();function baseDelay(func,wait,args){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result;}if(iteratee){values = arrayMap(values,baseUnary(iteratee));}if(comparator){includes = arrayIncludesWith;isCommon = false;}else if(values.length >= LARGE_ARRAY_SIZE){includes = cacheHas;isCommon = false;values = new SetCache(values);}outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(isCommon && computed === computed){var valuesIndex=valuesLength;while(valuesIndex--) {if(values[valuesIndex] === computed){continue outer;}}result.push(value);}else if(!includes(values,computed,comparator)){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result = !!predicate(value,index,collection);return result;});return result;}function baseFill(array,value,start,end){var length=array.length;start = toInteger(start);if(start < 0){start = -start > length?0:length + start;}end = end === undefined || end > length?length:toInteger(end);if(end < 0){end += length;}end = start > end?0:toLength(end);while(start < end) {array[start++] = value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFlatten(array,isDeep,isStrict,result){result || (result = []);var index=-1,length=array.length;while(++index < length) {var value=array[index];if(isArrayLikeObject(value) && (isStrict || isArray(value) || isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result);}else {arrayPush(result,value);}}else if(!isStrict){result[result.length] = value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return object == null?object:baseFor(object,iteratee,keysIn);}function baseForOwn(object,iteratee){return object && baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return object && baseForRight(object,iteratee,keys);}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key]);});}function baseGet(object,path){path = isKey(path,object)?[path + ""]:baseToPath(path);var index=0,length=path.length;while(object != null && index < length) {object = object[path[index++]];}return index && index == length?object:undefined;}function baseHas(object,key){return hasOwnProperty.call(object,key) || typeof object == "object" && key in object && getPrototypeOf(object) === null;}function baseHasIn(object,key){return key in Object(object);}function baseInRange(number,start,end){return number >= nativeMin(start,end) && number < nativeMax(start,end);}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),result=[];while(othIndex--) {var array=arrays[othIndex];if(othIndex && iteratee){array = arrayMap(array,baseUnary(iteratee));}caches[othIndex] = !comparator && (iteratee || array.length >= 120)?new SetCache(othIndex && array):undefined;}array = arrays[0];var index=-1,length=array.length,seen=caches[0];outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){var othIndex=othLength;while(--othIndex) {var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer;}}if(seen){seen.push(computed);}result.push(value);}}return result;}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object);});return accumulator;}function baseInvoke(object,path,args){if(!isKey(path,object)){path = baseToPath(path);object = parent(object,path);path = last(path);}var func=object == null?object:object[path];return func == null?undefined:apply(func,object,args);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value === other){return true;}if(value == null || other == null || !isObject(value) && !isObjectLike(other)){return value !== value && other !== other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag = getTag(object);if(objTag == argsTag){objTag = objectTag;}else if(objTag != objectTag){objIsArr = isTypedArray(object);}}if(!othIsArr){othTag = getTag(other);if(othTag == argsTag){othTag = objectTag;}else if(othTag != objectTag){othIsArr = isTypedArray(other);}}var objIsObj=objTag == objectTag && !isHostObject(object),othIsObj=othTag == objectTag && !isHostObject(other),isSameTag=objTag == othTag;if(isSameTag && !(objIsArr || objIsObj)){return equalByTag(object,other,objTag,equalFunc,customizer,bitmask);}var isPartial=bitmask & PARTIAL_COMPARE_FLAG;if(!isPartial){var objIsWrapped=objIsObj && hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj && hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped || othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack || (stack = new Stack());return (objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,bitmask,stack);}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object == null){return !length;}object = Object(object);while(index--) {var data=matchData[index];if(noCustomizer && data[2]?data[1] !== object[data[0]]:!(data[0] in object)){return false;}}while(++index < length) {data = matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer && data[2]){if(objValue === undefined && !(key in object)){return false;}}else {var stack=new Stack(),result=customizer?customizer(objValue,srcValue,key,object,source,stack):undefined;if(!(result === undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG,stack):result)){return false;}}}return true;}function baseIteratee(value){var type=typeof value;if(type == "function"){return value;}if(value == null){return identity;}if(type == "object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){return nativeKeys(Object(object));}function baseKeysIn(object){object = object == null?object:Object(object);var result=[];for(var key in object) {result.push(key);}return result;}if(enumerate && !propertyIsEnumerable.call({valueOf:1},"valueOf")){baseKeysIn = function(object){return iteratorToArray(enumerate(object));};}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index] = iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length == 1 && matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object == null){return false;}return object[key] === value && (value !== undefined || key in Object(object));};}return function(object){return object === source || baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){return function(object){var objValue=get(object,path);return objValue === undefined && objValue === srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);};}function baseMerge(object,source,srcIndex,customizer,stack){if(object === source){return;}var props=isArray(source) || isTypedArray(source)?undefined:keysIn(source);arrayEach(props || source,function(srcValue,key){if(props){key = srcValue;srcValue = source[key];}if(isObject(srcValue)){stack || (stack = new Stack());baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else {var newValue=customizer?customizer(object[key],srcValue,key + "",object,source,stack):undefined;if(newValue === undefined){newValue = srcValue;}assignMergeValue(object,key,newValue);}});}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key + "",object,source,stack):undefined,isCommon=newValue === undefined;if(isCommon){newValue = srcValue;if(isArray(srcValue) || isTypedArray(srcValue)){if(isArray(objValue)){newValue = srcIndex?copyArray(objValue):objValue;}else if(isArrayLikeObject(objValue)){newValue = copyArray(objValue);}else {isCommon = false;newValue = baseClone(srcValue);}}else if(isPlainObject(srcValue) || isArguments(srcValue)){if(isArguments(objValue)){newValue = toPlainObject(objValue);}else if(!isObject(objValue) || srcIndex && isFunction(objValue)){isCommon = false;newValue = baseClone(srcValue);}else {newValue = srcIndex?baseClone(objValue):objValue;}}else {isCommon = false;}}stack.set(srcValue,newValue);if(isCommon){mergeFunc(newValue,srcValue,srcIndex,customizer,stack);}assignMergeValue(object,key,newValue);}function baseOrderBy(collection,iteratees,orders){var index=-1,toIteratee=getIteratee();iteratees = arrayMap(iteratees.length?iteratees:Array(1),function(iteratee){return toIteratee(iteratee);});var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return {criteria:criteria,index:++index,value:value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function basePick(object,props){object = Object(object);return arrayReduce(props,function(result,key){if(key in object){result[key] = object[key];}return result;},{});}function basePickBy(object,predicate){var result={};baseForIn(object,function(value,key){if(predicate(value,key)){result[key] = value;}});return result;}function baseProperty(key){return function(object){return object == null?undefined:object[key];};}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function basePullAll(array,values){return basePullAllBy(array,values);}function basePullAllBy(array,values,iteratee){var index=-1,length=values.length,seen=array;if(iteratee){seen = arrayMap(array,function(value){return iteratee(value);});}while(++index < length) {var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex = baseIndexOf(seen,computed,fromIndex)) > -1) {if(seen !== array){splice.call(seen,fromIndex,1);}splice.call(array,fromIndex,1);}}return array;}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length - 1;while(length--) {var index=indexes[length];if(lastIndex == length || index != previous){var previous=index;if(isIndex(index)){splice.call(array,index,1);}else if(!isKey(index,array)){var path=baseToPath(index),object=parent(array,path);if(object != null){delete object[last(path)];}}else {delete array[index];}}}return array;}function baseRandom(lower,upper){return lower + nativeFloor(nativeRandom() * (upper - lower + 1));}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end - start) / (step || 1)),0),result=Array(length);while(length--) {result[fromRight?length:++index] = start;start += step;}return result;}function baseSet(object,path,value,customizer){path = isKey(path,object)?[path + ""]:baseToPath(path);var index=-1,length=path.length,lastIndex=length - 1,nested=object;while(nested != null && ++index < length) {var key=path[index];if(isObject(nested)){var newValue=value;if(index != lastIndex){var objValue=nested[key];newValue = customizer?customizer(objValue,key,nested):undefined;if(newValue === undefined){newValue = objValue == null?isIndex(path[index + 1])?[]:{}:objValue;}}assignValue(nested,key,newValue);}nested = nested[key];}return object;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};function baseSlice(array,start,end){var index=-1,length=array.length;if(start < 0){start = -start > length?0:length + start;}end = end > length?length:end;if(end < 0){end += length;}length = start > end?0:end - start >>> 0;start >>>= 0;var result=Array(length);while(++index < length) {result[index] = array[index + start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result = predicate(value,index,collection);return !result;});return !!result;}function baseSortedIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value == "number" && value === value && high <= HALF_MAX_ARRAY_LENGTH){while(low < high) {var mid=low + high >>> 1,computed=array[mid];if((retHighest?computed <= value:computed < value) && computed !== null){low = mid + 1;}else {high = mid;}}return high;}return baseSortedIndexBy(array,value,identity,retHighest);}function baseSortedIndexBy(array,value,iteratee,retHighest){value = iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value !== value,valIsNull=value === null,valIsUndef=value === undefined;while(low < high) {var mid=nativeFloor((low + high) / 2),computed=iteratee(array[mid]),isDef=computed !== undefined,isReflexive=computed === computed;if(valIsNaN){var setLow=isReflexive || retHighest;}else if(valIsNull){setLow = isReflexive && isDef && (retHighest || computed != null);}else if(valIsUndef){setLow = isReflexive && (retHighest || isDef);}else if(computed == null){setLow = false;}else {setLow = retHighest?computed <= value:computed < value;}if(setLow){low = mid + 1;}else {high = mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function baseSortedUniq(array){return baseSortedUniqBy(array);}function baseSortedUniqBy(array,iteratee){var index=0,length=array.length,value=array[0],computed=iteratee?iteratee(value):value,seen=computed,resIndex=0,result=[value];while(++index < length) {value = array[index],computed = iteratee?iteratee(value):value;if(!eq(computed,seen)){seen = computed;result[++resIndex] = value;}}return result;}function baseToPath(value){return isArray(value)?value:stringToPath(value);}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon = false;includes = arrayIncludesWith;}else if(length >= LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set);}isCommon = false;includes = cacheHas;seen = new SetCache();}else {seen = iteratee?[]:result;}outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(isCommon && computed === computed){var seenIndex=seen.length;while(seenIndex--) {if(seen[seenIndex] === computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(!includes(seen,computed,comparator)){if(seen !== result){seen.push(computed);}result.push(value);}}return result;}function baseUnset(object,path){path = isKey(path,object)?[path + ""]:baseToPath(path);object = parent(object,path);var key=last(path);return object != null && has(object,key)?delete object[key]:true;}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index < length) && predicate(array[index],index,array)) {}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index + 1:length):baseSlice(array,fromRight?index + 1:0,fromRight?length:index);}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result = result.value();}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args));},result);}function baseXor(arrays,iteratee,comparator){var index=-1,length=arrays.length;while(++index < length) {var result=result?arrayPush(baseDifference(result,arrays[index],iteratee,comparator),baseDifference(arrays[index],result,iteratee,comparator)):arrays[index];}return result && result.length?baseUniq(result,iteratee,comparator):[];}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index < length) {assignFunc(result,props[index],index < valsLength?values[index]:undefined);}return result;}function cloneBuffer(buffer){var Ctor=buffer.constructor,result=new Ctor(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result;}function cloneMap(map){var Ctor=map.constructor;return arrayReduce(mapToArray(map),addMapEntry,new Ctor());}function cloneRegExp(regexp){var Ctor=regexp.constructor,result=new Ctor(regexp.source,reFlags.exec(regexp));result.lastIndex = regexp.lastIndex;return result;}function cloneSet(set){var Ctor=set.constructor;return arrayReduce(setToArray(set),addSetEntry,new Ctor());}function cloneSymbol(symbol){return Symbol?Object(symbolValueOf.call(symbol)):{};}function cloneTypedArray(typedArray,isDeep){var buffer=typedArray.buffer,Ctor=typedArray.constructor;return new Ctor(isDeep?cloneBuffer(buffer):buffer,typedArray.byteOffset,typedArray.length);}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length - holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength + argsLength);while(++leftIndex < leftLength) {result[leftIndex] = partials[leftIndex];}while(++argsIndex < holdersLength) {result[holders[argsIndex]] = args[argsIndex];}while(argsLength--) {result[leftIndex++] = args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length - holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength + rightLength);while(++argsIndex < argsLength) {result[argsIndex] = args[argsIndex];}var offset=argsIndex;while(++rightIndex < rightLength) {result[offset + rightIndex] = partials[rightIndex];}while(++holdersIndex < holdersLength) {result[offset + holders[holdersIndex]] = args[argsIndex++];}return result;}function copyArray(source,array){var index=-1,length=source.length;array || (array = Array(length));while(++index < length) {array[index] = source[index];}return array;}function copyObject(source,props,object){return copyObjectWith(source,props,object);}function copyObjectWith(source,props,object,customizer){object || (object = {});var index=-1,length=props.length;while(++index < length) {var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key];assignValue(object,key,newValue);}return object;}function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee),accumulator);};}function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length > 1?sources[length - 1]:undefined,guard=length > 2?sources[2]:undefined;customizer = typeof customizer == "function"?(length--,customizer):undefined;if(guard && isIterateeCall(sources[0],sources[1],guard)){customizer = length < 3?undefined:customizer;length = 1;}object = Object(object);while(++index < length) {var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection == null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index < length) {if(iteratee(iterable[index],index,iterable) === false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--) {var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable) === false){break;}}return object;};}function createBaseWrapper(func,bitmask,thisArg){var isBind=bitmask & BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var fn=this && this !== root && this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);}return wrapper;}function createCaseFirst(methodName){return function(string){string = toString(string);var strSymbols=reHasComplexSymbol.test(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?strSymbols.slice(1).join(""):string.slice(1);return chr[methodName]() + trailing;};}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string)),callback,"");};}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurryWrapper(func,bitmask,arity){var Ctor=createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length),fn=this && this !== root && this instanceof wrapper?Ctor:func,placeholder=wrapper.placeholder;while(index--) {args[index] = arguments[index];}var holders=length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder?[]:replaceHolders(args,placeholder);length -= holders.length;return length < arity?createRecurryWrapper(func,bitmask,createHybridWrapper,placeholder,undefined,args,holders,undefined,undefined,arity - length):apply(fn,this,args);}return wrapper;}function createFlow(fromRight){return rest(function(funcs){funcs = baseFlatten(funcs);var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse();}while(index--) {var func=funcs[index];if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}if(prereq && !wrapper && getFuncName(func) == "wrapper"){var wrapper=new LodashWrapper([],true);}}index = wrapper?index:length;while(++index < length) {func = funcs[index];var funcName=getFuncName(func),data=funcName == "wrapper"?getData(func):undefined;if(data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1){wrapper = wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else {wrapper = func.length == 1 && isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index < length) {result = funcs[index].call(this,result);}return result;};});}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask & ARY_FLAG,isBind=bitmask & BIND_FLAG,isBindKey=bitmask & BIND_KEY_FLAG,isCurry=bitmask & CURRY_FLAG,isCurryRight=bitmask & CURRY_RIGHT_FLAG,isFlip=bitmask & FLIP_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--) {args[index] = arguments[index];}if(partials){args = composeArgs(args,partials,holders);}if(partialsRight){args = composeArgsRight(args,partialsRight,holdersRight);}if(isCurry || isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length -= argsHolders.length;if(length < arity){return createRecurryWrapper(func,bitmask,createHybridWrapper,placeholder,thisArg,args,argsHolders,argPos,ary,arity - length);}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args = reorder(args,argPos);}else if(isFlip && args.length > 1){args.reverse();}if(isAry && ary < args.length){args.length = ary;}if(this && this !== root && this instanceof wrapper){fn = Ctor || createCtorWrapper(fn);}return fn.apply(thisBinding,args);}return wrapper;}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{});};}function createOver(arrayFunc){return rest(function(iteratees){iteratees = arrayMap(baseFlatten(iteratees),getIteratee());return rest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args);});});});}function createPadding(string,length,chars){length = toInteger(length);var strLength=stringSize(string);if(!length || strLength >= length){return "";}var padLength=length - strLength;chars = chars === undefined?" ":chars + "";var result=repeat(chars,nativeCeil(padLength / stringSize(chars)));return reHasComplexSymbol.test(chars)?stringToArray(result).slice(0,padLength).join(""):result.slice(0,padLength);}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask & BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength + argsLength),fn=this && this !== root && this instanceof wrapper?Ctor:func;while(++leftIndex < leftLength) {args[leftIndex] = partials[leftIndex];}while(argsLength--) {args[leftIndex++] = arguments[++argsIndex];}return apply(fn,isBind?thisArg:this,args);}return wrapper;}function createRange(fromRight){return function(start,end,step){if(step && typeof step != "number" && isIterateeCall(start,end,step)){end = step = undefined;}start = toNumber(start);start = start === start?start:0;if(end === undefined){end = start;start = 0;}else {end = toNumber(end) || 0;}step = step === undefined?start < end?1:-1:toNumber(step) || 0;return baseRange(start,end,step,fromRight);};}function createRecurryWrapper(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask & CURRY_FLAG,newArgPos=argPos?copyArray(argPos):undefined,newsHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask |= isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask &= ~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!(bitmask & CURRY_BOUND_FLAG)){bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,arity],result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder = placeholder;return result;}function createRound(methodName){var func=Math[methodName];return function(number,precision){number = toNumber(number);precision = toInteger(precision);if(precision){var pair=(toString(number) + "e").split("e"),value=func(pair[0] + "e" + (+pair[1] + precision));pair = (toString(value) + "e").split("e");return +(pair[0] + "e" + (+pair[1] - precision));}return func(number);};}var createSet=!(Set && new Set([1,2]).size === 2)?noop:function(values){return new Set(values);};function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask & BIND_KEY_FLAG;if(!isBindKey && typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);partials = holders = undefined;}ary = ary === undefined?ary:nativeMax(toInteger(ary),0);arity = arity === undefined?arity:toInteger(arity);length -= holders?holders.length:0;if(bitmask & PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials = holders = undefined;}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);}func = newData[0];bitmask = newData[1];thisArg = newData[2];partials = newData[3];holders = newData[4];arity = newData[9] = newData[9] == null?isBindKey?0:func.length:nativeMax(newData[9] - length,0);if(!arity && bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG)){bitmask &= ~(CURRY_FLAG | CURRY_RIGHT_FLAG);}if(!bitmask || bitmask == BIND_FLAG){var result=createBaseWrapper(func,bitmask,thisArg);}else if(bitmask == CURRY_FLAG || bitmask == CURRY_RIGHT_FLAG){result = createCurryWrapper(func,bitmask,arity);}else if((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !holders.length){result = createPartialWrapper(func,bitmask,thisArg,partials);}else {result = createHybridWrapper.apply(undefined,newData);}var setter=data?baseSetData:setData;return setter(result,newData);}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var index=-1,isPartial=bitmask & PARTIAL_COMPARE_FLAG,isUnordered=bitmask & UNORDERED_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength != othLength && !(isPartial && othLength > arrLength)){return false;}var stacked=stack.get(array);if(stacked){return stacked == other;}var result=true;stack.set(array,other);while(++index < arrLength) {var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared !== undefined){if(compared){continue;}result = false;break;}if(isUnordered){if(!arraySome(other,function(othValue){return arrValue === othValue || equalFunc(arrValue,othValue,customizer,bitmask,stack);})){result = false;break;}}else if(!(arrValue === othValue || equalFunc(arrValue,othValue,customizer,bitmask,stack))){result = false;break;}}stack["delete"](array);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask){switch(tag){case arrayBufferTag:if(object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:return +object == +other;case errorTag:return object.name == other.name && object.message == other.message;case numberTag:return object != +object?other != +other:object == +other;case regexpTag:case stringTag:return object == other + "";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask & PARTIAL_COMPARE_FLAG;convert || (convert = setToArray);return (isPartial || object.size == other.size) && equalFunc(convert(object),convert(other),customizer,bitmask | UNORDERED_COMPARE_FLAG);case symbolTag:return !!Symbol && symbolValueOf.call(object) == symbolValueOf.call(other);}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask & PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength != othLength && !isPartial){return false;}var index=objLength;while(index--) {var key=objProps[index];if(!(isPartial?key in other:baseHas(other,key))){return false;}}var stacked=stack.get(object);if(stacked){return stacked == other;}var result=true;stack.set(object,other);var skipCtor=isPartial;while(++index < objLength) {key = objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared === undefined?objValue === othValue || equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result = false;break;}skipCtor || (skipCtor = key == "constructor");}if(result && !skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor != othCtor && "constructor" in object && "constructor" in other && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)){result = false;}}stack["delete"](object);return result;}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name + "",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--) {var data=array[length],otherFunc=data.func;if(otherFunc == null || otherFunc == func){return data.name;}}return result;}function getIteratee(){var result=lodash.iteratee || iteratee;result = result === iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result;}var getLength=baseProperty("length");function getMatchData(object){var result=toPairs(object),length=result.length;while(length--) {result[length][2] = isStrictComparable(result[length][1]);}return result;}function getNative(object,key){var value=object == null?undefined:object[key];return isNative(value)?value:undefined;}var getSymbols=getOwnPropertySymbols || function(){return [];};function getTag(value){return objectToString.call(value);}if(Map && getTag(new Map()) != mapTag || Set && getTag(new Set()) != setTag){getTag = function(value){var result=objectToString.call(value),Ctor=result == objectTag?value.constructor:null,ctorString=typeof Ctor == "function"?funcToString.call(Ctor):"";if(ctorString){if(ctorString == mapCtorString){return mapTag;}if(ctorString == setCtorString){return setTag;}}return result;};}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index < length) {var data=transforms[index],size=data.size;switch(data.type){case "drop":start += size;break;case "dropRight":end -= size;break;case "take":end = nativeMin(end,start + size);break;case "takeRight":start = nativeMax(start,end - size);break;}}return {start:start,end:end};}function hasPath(object,path,hasFunc){if(object == null){return false;}var result=hasFunc(object,path);if(!result && !isKey(path)){path = baseToPath(path);object = parent(object,path);if(object != null){path = last(path);result = hasFunc(object,path);}}var length=object?object.length:undefined;return result || !!length && isLength(length) && isIndex(path,length) && (isArray(object) || isString(object) || isArguments(object));}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length && typeof array[0] == "string" && hasOwnProperty.call(array,"index")){result.index = array.index;result.input = array.input;}return result;}function initCloneObject(object){if(isPrototype(object)){return {};}var Ctor=object.constructor;return baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object);case symbolTag:return cloneSymbol(object);}}function indexKeys(object){var length=object?object.length:undefined;if(isLength(length) && (isArray(object) || isString(object) || isArguments(object))){return baseTimes(length,String);}return null;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type == "number"?isArrayLike(object) && isIndex(index,object.length):type == "string" && index in object){return eq(object[index],value);}return false;}function isKey(value,object){if(typeof value == "number"){return true;}return !isArray(value) && (reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object));}function isKeyable(value){var type=typeof value;return type == "number" || type == "boolean" || type == "string" && value !== "__proto__" || value == null;}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other != "function" || !(funcName in LazyWrapper.prototype)){return false;}if(func === other){return true;}var data=getData(other);return !!data && func === data[0];}function isPrototype(value){var Ctor=value && value.constructor,proto=typeof Ctor == "function" && Ctor.prototype || objectProto;return value === proto;}function isStrictComparable(value){return value === value && !isObject(value);}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask | srcBitmask,isCommon=newBitmask < (BIND_FLAG | BIND_KEY_FLAG | ARY_FLAG);var isCombo=srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG || srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8] || srcBitmask == (ARY_FLAG | REARG_FLAG) && source[7].length <= source[8] && bitmask == CURRY_FLAG;if(!(isCommon || isCombo)){return data;}if(srcBitmask & BIND_FLAG){data[2] = source[2];newBitmask |= bitmask & BIND_FLAG?0:CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3] = partials?composeArgs(partials,value,source[4]):copyArray(value);data[4] = partials?replaceHolders(data[3],PLACEHOLDER):copyArray(source[4]);}value = source[5];if(value){partials = data[5];data[5] = partials?composeArgsRight(partials,value,source[6]):copyArray(value);data[6] = partials?replaceHolders(data[5],PLACEHOLDER):copyArray(source[6]);}value = source[7];if(value){data[7] = copyArray(value);}if(srcBitmask & ARY_FLAG){data[8] = data[8] == null?source[8]:nativeMin(data[8],source[8]);}if(data[9] == null){data[9] = source[9];}data[0] = source[0];data[1] = newBitmask;return data;}function mergeDefaults(objValue,srcValue,key,object,source,stack){if(isObject(objValue) && isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,mergeDefaults,stack);}return objValue;}function parent(object,path){return path.length == 1?object:get(object,baseSlice(path,0,-1));}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--) {var index=indexes[length];array[length] = isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}var setData=(function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN - (stamp - lastCalled);lastCalled = stamp;if(remaining > 0){if(++count >= HOT_COUNT){return key;}}else {count = 0;}return baseSetData(key,value);};})();function stringToPath(string){var result=[];toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number || match);});return result;}function toArrayLikeObject(value){return isArrayLikeObject(value)?value:[];}function toFunction(value){return typeof value == "function"?value:identity;}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone();}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__ = copyArray(wrapper.__actions__);result.__index__ = wrapper.__index__;result.__values__ = wrapper.__values__;return result;}function chunk(array,size){size = nativeMax(toInteger(size),0);var length=array?array.length:0;if(!length || size < 1){return [];}var index=0,resIndex=-1,result=Array(nativeCeil(length / size));while(index < length) {result[++resIndex] = baseSlice(array,index,index += size);}return result;}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index < length) {var value=array[index];if(value){result[++resIndex] = value;}}return result;}var concat=rest(function(array,values){if(!isArray(array)){array = array == null?[]:[Object(array)];}values = baseFlatten(values);return arrayConcat(array,values);});var difference=rest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true)):[];});var differenceBy=rest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true),getIteratee(iteratee)):[];});var differenceWith=rest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator = undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true),undefined,comparator):[];});function drop(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);return baseSlice(array,n < 0?0:n,length);}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);n = length - n;return baseSlice(array,0,n < 0?0:n);}function dropRightWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),true,true):[];}function dropWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),true):[];}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return [];}if(start && typeof start != "number" && isIterateeCall(array,value,start)){start = 0;end = length;}return baseFill(array,value,start,end);}function findIndex(array,predicate){return array && array.length?baseFindIndex(array,getIteratee(predicate,3)):-1;}function findLastIndex(array,predicate){return array && array.length?baseFindIndex(array,getIteratee(predicate,3),true):-1;}function flatten(array){var length=array?array.length:0;return length?baseFlatten(array):[];}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[];}function fromPairs(pairs){var index=-1,length=pairs?pairs.length:0,result={};while(++index < length) {var pair=pairs[index];result[pair[0]] = pair[1];}return result;}function head(array){return array?array[0]:undefined;}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return -1;}fromIndex = toInteger(fromIndex);if(fromIndex < 0){fromIndex = nativeMax(length + fromIndex,0);}return baseIndexOf(array,value,fromIndex);}function initial(array){return dropRight(array,1);}var intersection=rest(function(arrays){var mapped=arrayMap(arrays,toArrayLikeObject);return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped):[];});var intersectionBy=rest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,toArrayLikeObject);if(iteratee === last(mapped)){iteratee = undefined;}else {mapped.pop();}return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped,getIteratee(iteratee)):[];});var intersectionWith=rest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,toArrayLikeObject);if(comparator === last(mapped)){comparator = undefined;}else {mapped.pop();}return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped,undefined,comparator):[];});function join(array,separator){return array?nativeJoin.call(array,separator):"";}function last(array){var length=array?array.length:0;return length?array[length - 1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return -1;}var index=length;if(fromIndex !== undefined){index = toInteger(fromIndex);index = (index < 0?nativeMax(length + index,0):nativeMin(index,length - 1)) + 1;}if(value !== value){return indexOfNaN(array,index,true);}while(index--) {if(array[index] === value){return index;}}return -1;}var pull=rest(pullAll);function pullAll(array,values){return array && array.length && values && values.length?basePullAll(array,values):array;}function pullAllBy(array,values,iteratee){return array && array.length && values && values.length?basePullAllBy(array,values,getIteratee(iteratee)):array;}var pullAt=rest(function(array,indexes){indexes = arrayMap(baseFlatten(indexes),String);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(compareAscending));return result;});function remove(array,predicate){var result=[];if(!(array && array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate = getIteratee(predicate,3);while(++index < length) {var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function reverse(array){return array?nativeReverse.call(array):array;}function slice(array,start,end){var length=array?array.length:0;if(!length){return [];}if(end && typeof end != "number" && isIterateeCall(array,start,end)){start = 0;end = length;}else {start = start == null?0:toInteger(start);end = end === undefined?length:toInteger(end);}return baseSlice(array,start,end);}function sortedIndex(array,value){return baseSortedIndex(array,value);}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee));}function sortedIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value);if(index < length && eq(array[index],value)){return index;}}return -1;}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true);}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee),true);}function sortedLastIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value,true) - 1;if(eq(array[index],value)){return index;}}return -1;}function sortedUniq(array){return array && array.length?baseSortedUniq(array):[];}function sortedUniqBy(array,iteratee){return array && array.length?baseSortedUniqBy(array,getIteratee(iteratee)):[];}function tail(array){return drop(array,1);}function take(array,n,guard){if(!(array && array.length)){return [];}n = guard || n === undefined?1:toInteger(n);return baseSlice(array,0,n < 0?0:n);}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);n = length - n;return baseSlice(array,n < 0?0:n,length);}function takeRightWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),false,true):[];}function takeWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3)):[];}var union=rest(function(arrays){return baseUniq(baseFlatten(arrays,false,true));});var unionBy=rest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return baseUniq(baseFlatten(arrays,false,true),getIteratee(iteratee));});var unionWith=rest(function(arrays){var comparator=last(arrays);if(isArrayLikeObject(comparator)){comparator = undefined;}return baseUniq(baseFlatten(arrays,false,true),undefined,comparator);});function uniq(array){return array && array.length?baseUniq(array):[];}function uniqBy(array,iteratee){return array && array.length?baseUniq(array,getIteratee(iteratee)):[];}function uniqWith(array,comparator){return array && array.length?baseUniq(array,undefined,comparator):[];}function unzip(array){if(!(array && array.length)){return [];}var length=0;array = arrayFilter(array,function(group){if(isArrayLikeObject(group)){length = nativeMax(group.length,length);return true;}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index));});}function unzipWith(array,iteratee){if(!(array && array.length)){return [];}var result=unzip(array);if(iteratee == null){return result;}return arrayMap(result,function(group){return apply(iteratee,undefined,group);});}var without=rest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];});var xor=rest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject));});var xorBy=rest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee));});var xorWith=rest(function(arrays){var comparator=last(arrays);if(isArrayLikeObject(comparator)){comparator = undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator);});var zip=rest(unzip);function zipObject(props,values){return baseZipObject(props || [],values || [],assignValue);}function zipObjectDeep(props,values){return baseZipObject(props || [],values || [],baseSet);}var zipWith=rest(function(arrays){var length=arrays.length,iteratee=length > 1?arrays[length - 1]:undefined;iteratee = typeof iteratee == "function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee);});function chain(value){var result=lodash(value);result.__chain__ = true;return result;}function tap(value,interceptor){interceptor(value);return value;}function thru(value,interceptor){return interceptor(value);}var wrapperAt=rest(function(paths){paths = baseFlatten(paths);var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function interceptor(object){return baseAt(object,paths);};if(length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex(start)){return this.thru(interceptor);}value = value.slice(start,+start + (length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length && !array.length){array.push(undefined);}return array;});});function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}function wrapperFlatMap(iteratee){return this.map(iteratee).flatten();}function wrapperNext(){if(this.__values__ === undefined){this.__values__ = toArray(this.value());}var done=this.__index__ >= this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return {done:done,value:value};}function wrapperToIterator(){return this;}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash) {var clone=wrapperClone(parent);clone.__index__ = 0;clone.__values__ = undefined;if(result){previous.__wrapped__ = clone;}else {result = clone;}var previous=clone;parent = parent.__wrapped__;}previous.__wrapped__ = value;return result;}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped = new LazyWrapper(this);}wrapped = wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(reverse);}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key] = 1;});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard && isIterateeCall(collection,predicate,guard)){predicate = undefined;}return func(collection,getIteratee(predicate,3));}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3));}function find(collection,predicate){predicate = getIteratee(predicate,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate);return index > -1?collection[index]:undefined;}return baseFind(collection,predicate,baseEach);}function findLast(collection,predicate){predicate = getIteratee(predicate,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,true);return index > -1?collection[index]:undefined;}return baseFind(collection,predicate,baseEachRight);}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee));}function forEach(collection,iteratee){return typeof iteratee == "function" && isArray(collection)?arrayEach(collection,iteratee):baseEach(collection,toFunction(iteratee));}function forEachRight(collection,iteratee){return typeof iteratee == "function" && isArray(collection)?arrayEachRight(collection,iteratee):baseEachRight(collection,toFunction(iteratee));}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else {result[key] = [value];}});function includes(collection,value,fromIndex,guard){collection = isArrayLike(collection)?collection:values(collection);fromIndex = fromIndex && !guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex < 0){fromIndex = nativeMax(length + fromIndex,0);}return isString(collection)?fromIndex <= length && collection.indexOf(value,fromIndex) > -1:!!length && baseIndexOf(collection,value,fromIndex) > -1;}var invokeMap=rest(function(collection,path,args){var index=-1,isFunc=typeof path == "function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp && value != null?value[path]:undefined;result[++index] = func?apply(func,value,args):baseInvoke(value,path,args);});return result;});var keyBy=createAggregator(function(result,value,key){result[key] = value;});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3));}function orderBy(collection,iteratees,orders,guard){if(collection == null){return [];}if(!isArray(iteratees)){iteratees = iteratees == null?[]:[iteratees];}orders = guard?undefined:orders;if(!isArray(orders)){orders = orders == null?[]:[orders];}return baseOrderBy(collection,iteratees,orders);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return [[],[]];});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length < 3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach);}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length < 3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight);}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;predicate = getIteratee(predicate,3);return func(collection,function(value,index,collection){return !predicate(value,index,collection);});}function sample(collection){var array=isArrayLike(collection)?collection:values(collection),length=array.length;return length > 0?array[baseRandom(0,length - 1)]:undefined;}function sampleSize(collection,n){var index=-1,result=toArray(collection),length=result.length,lastIndex=length - 1;n = baseClamp(toInteger(n),0,length);while(++index < n) {var rand=baseRandom(index,lastIndex),value=result[rand];result[rand] = result[index];result[index] = value;}result.length = n;return result;}function shuffle(collection){return sampleSize(collection,MAX_ARRAY_LENGTH);}function size(collection){if(collection == null){return 0;}if(isArrayLike(collection)){var result=collection.length;return result && isString(collection)?stringSize(collection):result;}return keys(collection).length;}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard && isIterateeCall(collection,predicate,guard)){predicate = undefined;}return func(collection,getIteratee(predicate,3));}var sortBy=rest(function(collection,iteratees){if(collection == null){return [];}var length=iteratees.length;if(length > 1 && isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees = [];}else if(length > 2 && isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees.length = 1;}return baseOrderBy(collection,baseFlatten(iteratees),[]);});var now=Date.now;function after(n,func){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}n = toInteger(n);return function(){if(--n < 1){return func.apply(this,arguments);}};}function ary(func,n,guard){n = guard?undefined:n;n = func && n == null?func.length:n;return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}n = toInteger(n);return function(){if(--n > 0){result = func.apply(this,arguments);}if(n <= 1){func = undefined;}return result;};}var bind=rest(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask |= PARTIAL_FLAG;}return createWrapper(func,bitmask,thisArg,partials,holders);});var bindKey=rest(function(object,key,partials){var bitmask=BIND_FLAG | BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask |= PARTIAL_FLAG;}return createWrapper(key,bitmask,object,partials,holders);});function curry(func,arity,guard){arity = guard?undefined:arity;var result=createWrapper(func,CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder = curry.placeholder;return result;}function curryRight(func,arity,guard){arity = guard?undefined:arity;var result=createWrapper(func,CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder = curryRight.placeholder;return result;}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,leading=false,maxWait=false,trailing=true;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}wait = toNumber(wait) || 0;if(isObject(options)){leading = !!options.leading;maxWait = "maxWait" in options && nativeMax(toNumber(options.maxWait) || 0,wait);trailing = "trailing" in options?!!options.trailing:trailing;}function cancel(){if(timeoutId){clearTimeout(timeoutId);}if(maxTimeoutId){clearTimeout(maxTimeoutId);}lastCalled = 0;args = maxTimeoutId = thisArg = timeoutId = trailingCall = undefined;}function complete(isCalled,id){if(id){clearTimeout(id);}maxTimeoutId = timeoutId = trailingCall = undefined;if(isCalled){lastCalled = now();result = func.apply(thisArg,args);if(!timeoutId && !maxTimeoutId){args = thisArg = undefined;}}}function delayed(){var remaining=wait - (now() - stamp);if(remaining <= 0 || remaining > wait){complete(trailingCall,maxTimeoutId);}else {timeoutId = setTimeout(delayed,remaining);}}function flush(){if(timeoutId && trailingCall || maxTimeoutId && trailing){result = func.apply(thisArg,args);}cancel();return result;}function maxDelayed(){complete(trailing,timeoutId);}function debounced(){args = arguments;stamp = now();thisArg = this;trailingCall = trailing && (timeoutId || !leading);if(maxWait === false){var leadingCall=leading && !timeoutId;}else {if(!maxTimeoutId && !leading){lastCalled = stamp;}var remaining=maxWait - (stamp - lastCalled),isCalled=remaining <= 0 || remaining > maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId = clearTimeout(maxTimeoutId);}lastCalled = stamp;result = func.apply(thisArg,args);}else if(!maxTimeoutId){maxTimeoutId = setTimeout(maxDelayed,remaining);}}if(isCalled && timeoutId){timeoutId = clearTimeout(timeoutId);}else if(!timeoutId && wait !== maxWait){timeoutId = setTimeout(delayed,wait);}if(leadingCall){isCalled = true;result = func.apply(thisArg,args);}if(isCalled && !timeoutId && !maxTimeoutId){args = thisArg = undefined;}return result;}debounced.cancel = cancel;debounced.flush = flush;return debounced;}var defer=rest(function(func,args){return baseDelay(func,1,args);});var delay=rest(function(func,wait,args){return baseDelay(func,toNumber(wait) || 0,args);});function flip(func){return createWrapper(func,FLIP_FLAG);}function memoize(func,resolver){if(typeof func != "function" || resolver && typeof resolver != "function"){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache = cache.set(key,result);return result;};memoized.cache = new memoize.Cache();return memoized;}function negate(predicate){if(typeof predicate != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return function(){return !predicate.apply(this,arguments);};}function once(func){return before(2,func);}var overArgs=rest(function(func,transforms){transforms = arrayMap(baseFlatten(transforms),getIteratee());var funcsLength=transforms.length;return rest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index < length) {args[index] = transforms[index].call(this,args[index]);}return apply(func,this,args);});});var partial=rest(function(func,partials){var holders=replaceHolders(partials,partial.placeholder);return createWrapper(func,PARTIAL_FLAG,undefined,partials,holders);});var partialRight=rest(function(func,partials){var holders=replaceHolders(partials,partialRight.placeholder);return createWrapper(func,PARTIAL_RIGHT_FLAG,undefined,partials,holders);});var rearg=rest(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes));});function rest(func,start){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}start = nativeMax(start === undefined?func.length - 1:toInteger(start),0);return function(){var args=arguments,index=-1,length=nativeMax(args.length - start,0),array=Array(length);while(++index < length) {array[index] = args[start + index];}switch(start){case 0:return func.call(this,array);case 1:return func.call(this,args[0],array);case 2:return func.call(this,args[0],args[1],array);}var otherArgs=Array(start + 1);index = -1;while(++index < start) {otherArgs[index] = args[index];}otherArgs[start] = array;return apply(func,this,otherArgs);};}function spread(func,start){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}start = start === undefined?0:nativeMax(toInteger(start),0);return rest(function(args){var array=args[start],otherArgs=args.slice(0,start);if(array){arrayPush(otherArgs,array);}return apply(func,this,otherArgs);});}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading = "leading" in options?!!options.leading:leading;trailing = "trailing" in options?!!options.trailing:trailing;}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing});}function unary(func){return ary(func,1);}function wrap(value,wrapper){wrapper = wrapper == null?identity:wrapper;return partial(wrapper,value);}function clone(value){return baseClone(value);}function cloneWith(value,customizer){return baseClone(value,false,customizer);}function cloneDeep(value){return baseClone(value,true);}function cloneDeepWith(value,customizer){return baseClone(value,true,customizer);}function eq(value,other){return value === other || value !== value && other !== other;}function gt(value,other){return value > other;}function gte(value,other){return value >= other;}function isArguments(value){return isArrayLikeObject(value) && hasOwnProperty.call(value,"callee") && (!propertyIsEnumerable.call(value,"callee") || objectToString.call(value) == argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value != null && !(typeof value == "function" && isFunction(value)) && isLength(getLength(value));}function isArrayLikeObject(value){return isObjectLike(value) && isArrayLike(value);}function isBoolean(value){return value === true || value === false || isObjectLike(value) && objectToString.call(value) == boolTag;}function isDate(value){return isObjectLike(value) && objectToString.call(value) == dateTag;}function isElement(value){return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);}function isEmpty(value){if(isArrayLike(value) && (isArray(value) || isString(value) || isFunction(value.splice) || isArguments(value))){return !value.length;}for(var key in value) {if(hasOwnProperty.call(value,key)){return false;}}return true;}function isEqual(value,other){return baseIsEqual(value,other);}function isEqualWith(value,other,customizer){customizer = typeof customizer == "function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result === undefined?baseIsEqual(value,other,customizer):!!result;}function isError(value){return isObjectLike(value) && typeof value.message == "string" && objectToString.call(value) == errorTag;}function isFinite(value){return typeof value == "number" && nativeIsFinite(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag == funcTag || tag == genTag;}function isInteger(value){return typeof value == "number" && value == toInteger(value);}function isLength(value){return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return !!value && (type == "object" || type == "function");}function isObjectLike(value){return !!value && typeof value == "object";}function isMatch(object,source){return object === source || baseIsMatch(object,source,getMatchData(source));}function isMatchWith(object,source,customizer){customizer = typeof customizer == "function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer);}function isNaN(value){return isNumber(value) && value != +value;}function isNative(value){if(value == null){return false;}if(isFunction(value)){return reIsNative.test(funcToString.call(value));}return isObjectLike(value) && (isHostObject(value)?reIsNative:reIsHostCtor).test(value);}function isNull(value){return value === null;}function isNil(value){return value == null;}function isNumber(value){return typeof value == "number" || isObjectLike(value) && objectToString.call(value) == numberTag;}function isPlainObject(value){if(!isObjectLike(value) || objectToString.call(value) != objectTag || isHostObject(value)){return false;}var proto=objectProto;if(typeof value.constructor == "function"){proto = getPrototypeOf(value);}if(proto === null){return true;}var Ctor=proto.constructor;return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;}function isRegExp(value){return isObject(value) && objectToString.call(value) == regexpTag;}function isSafeInteger(value){return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;}function isString(value){return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;}function isSymbol(value){return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;}function isTypedArray(value){return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objectToString.call(value)];}function isUndefined(value){return value === undefined;}function lt(value,other){return value < other;}function lte(value,other){return value <= other;}function toArray(value){if(!value){return [];}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value);}if(iteratorSymbol && value[iteratorSymbol]){return iteratorToArray(value[iteratorSymbol]());}var tag=getTag(value),func=tag == mapTag?mapToArray:tag == setTag?setToArray:values;return func(value);}function toInteger(value){if(!value){return value === 0?value:0;}value = toNumber(value);if(value === INFINITY || value === -INFINITY){var sign=value < 0?-1:1;return sign * MAX_INTEGER;}var remainder=value % 1;return value === value?remainder?value - remainder:value:0;}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0;}function toNumber(value){if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value = isObject(other)?other + "":other;}if(typeof value != "string"){return value === 0?value:+value;}value = value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary || reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toPlainObject(value){return copyObject(value,keysIn(value));}function toSafeInteger(value){return baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);}function toString(value){if(typeof value == "string"){return value;}if(value == null){return "";}if(isSymbol(value)){return Symbol?symbolToString.call(value):"";}var result=value + "";return result == "0" && 1 / value == -INFINITY?"-0":result;}var assign=createAssigner(function(object,source){copyObject(source,keys(source),object);});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keysIn(source),object,customizer);});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keys(source),object,customizer);});var at=rest(function(object,paths){return baseAt(object,baseFlatten(paths));});function create(prototype,properties){var result=baseCreate(prototype);return properties?baseAssign(result,properties):result;}var defaults=rest(function(args){args.push(undefined,assignInDefaults);return apply(assignInWith,undefined,args);});var defaultsDeep=rest(function(args){args.push(undefined,mergeDefaults);return apply(mergeWith,undefined,args);});function findKey(object,predicate){return baseFind(object,getIteratee(predicate,3),baseForOwn,true);}function findLastKey(object,predicate){return baseFind(object,getIteratee(predicate,3),baseForOwnRight,true);}function forIn(object,iteratee){return object == null?object:baseFor(object,toFunction(iteratee),keysIn);}function forInRight(object,iteratee){return object == null?object:baseForRight(object,toFunction(iteratee),keysIn);}function forOwn(object,iteratee){return object && baseForOwn(object,toFunction(iteratee));}function forOwnRight(object,iteratee){return object && baseForOwnRight(object,toFunction(iteratee));}function functions(object){return object == null?[]:baseFunctions(object,keys(object));}function functionsIn(object){return object == null?[]:baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object == null?undefined:baseGet(object,path);return result === undefined?defaultValue:result;}function has(object,path){return hasPath(object,path,baseHas);}function hasIn(object,path){return hasPath(object,path,baseHasIn);}var invert=createInverter(function(result,value,key){result[value] = key;},constant(identity));var invertBy=createInverter(function(result,value,key){if(hasOwnProperty.call(result,value)){result[value].push(key);}else {result[value] = [key];}},getIteratee);var invoke=rest(baseInvoke);function keys(object){var isProto=isPrototype(object);if(!(isProto || isArrayLike(object))){return baseKeys(object);}var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes || [],length=result.length;for(var key in object) {if(baseHas(object,key) && !(skipIndexes && (key == "length" || isIndex(key,length))) && !(isProto && key == "constructor")){result.push(key);}}return result;}function keysIn(object){var index=-1,isProto=isPrototype(object),props=baseKeysIn(object),propsLength=props.length,indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes || [],length=result.length;while(++index < propsLength) {var key=props[index];if(!(skipIndexes && (key == "length" || isIndex(key,length))) && !(key == "constructor" && (isProto || !hasOwnProperty.call(object,key)))){result.push(key);}}return result;}function mapKeys(object,iteratee){var result={};iteratee = getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){result[iteratee(value,key,object)] = value;});return result;}function mapValues(object,iteratee){var result={};iteratee = getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){result[key] = iteratee(value,key,object);});return result;}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer);});var omit=rest(function(object,props){if(object == null){return {};}props = arrayMap(baseFlatten(props),String);return basePick(object,baseDifference(keysIn(object),props));});function omitBy(object,predicate){predicate = getIteratee(predicate,2);return basePickBy(object,function(value,key){return !predicate(value,key);});}var pick=rest(function(object,props){return object == null?{}:basePick(object,baseFlatten(props));});function pickBy(object,predicate){return object == null?{}:basePickBy(object,getIteratee(predicate,2));}function result(object,path,defaultValue){if(!isKey(path,object)){path = baseToPath(path);var result=get(object,path);object = parent(object,path);}else {result = object == null?undefined:object[path];}if(result === undefined){result = defaultValue;}return isFunction(result)?result.call(object):result;}function set(object,path,value){return object == null?object:baseSet(object,path,value);}function setWith(object,path,value,customizer){customizer = typeof customizer == "function"?customizer:undefined;return object == null?object:baseSet(object,path,value,customizer);}function toPairs(object){return baseToPairs(object,keys(object));}function toPairsIn(object){return baseToPairs(object,keysIn(object));}function transform(object,iteratee,accumulator){var isArr=isArray(object) || isTypedArray(object);iteratee = getIteratee(iteratee,4);if(accumulator == null){if(isArr || isObject(object)){var Ctor=object.constructor;if(isArr){accumulator = isArray(object)?new Ctor():[];}else {accumulator = baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}}else {accumulator = {};}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function unset(object,path){return object == null?true:baseUnset(object,path);}function values(object){return object?baseValues(object,keys(object)):[];}function valuesIn(object){return object == null?baseValues(object,keysIn(object)):[];}function clamp(number,lower,upper){if(upper === undefined){upper = lower;lower = undefined;}if(upper !== undefined){upper = toNumber(upper);upper = upper === upper?upper:0;}if(lower !== undefined){lower = toNumber(lower);lower = lower === lower?lower:0;}return baseClamp(toNumber(number),lower,upper);}function inRange(number,start,end){start = toNumber(start) || 0;if(end === undefined){end = start;start = 0;}else {end = toNumber(end) || 0;}number = toNumber(number);return baseInRange(number,start,end);}function random(lower,upper,floating){if(floating && typeof floating != "boolean" && isIterateeCall(lower,upper,floating)){upper = floating = undefined;}if(floating === undefined){if(typeof upper == "boolean"){floating = upper;upper = undefined;}else if(typeof lower == "boolean"){floating = lower;lower = undefined;}}if(lower === undefined && upper === undefined){lower = 0;upper = 1;}else {lower = toNumber(lower) || 0;if(upper === undefined){upper = lower;lower = 0;}else {upper = toNumber(upper) || 0;}}if(lower > upper){var temp=lower;lower = upper;upper = temp;}if(floating || lower % 1 || upper % 1){var rand=nativeRandom();return nativeMin(lower + rand * (upper - lower + freeParseFloat("1e-" + ((rand + "").length - 1))),upper);}return baseRandom(lower,upper);}var camelCase=createCompounder(function(result,word,index){word = word.toLowerCase();return result + (index?capitalize(word):word);});function capitalize(string){return upperFirst(toString(string).toLowerCase());}function deburr(string){string = toString(string);return string && string.replace(reLatin1,deburrLetter).replace(reComboMark,"");}function endsWith(string,target,position){string = toString(string);target = typeof target == "string"?target:target + "";var length=string.length;position = position === undefined?length:baseClamp(toInteger(position),0,length);position -= target.length;return position >= 0 && string.indexOf(target,position) == position;}function escape(string){string = toString(string);return string && reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string = toString(string);return string && reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string;}var kebabCase=createCompounder(function(result,word,index){return result + (index?"-":"") + word.toLowerCase();});var lowerCase=createCompounder(function(result,word,index){return result + (index?" ":"") + word.toLowerCase();});var lowerFirst=createCaseFirst("toLowerCase");var upperFirst=createCaseFirst("toUpperCase");function pad(string,length,chars){string = toString(string);length = toInteger(length);var strLength=stringSize(string);if(!length || strLength >= length){return string;}var mid=(length - strLength) / 2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);return createPadding("",leftLength,chars) + string + createPadding("",rightLength,chars);}function padEnd(string,length,chars){string = toString(string);return string + createPadding(string,length,chars);}function padStart(string,length,chars){string = toString(string);return createPadding(string,length,chars) + string;}function parseInt(string,radix,guard){if(guard || radix == null){radix = 0;}else if(radix){radix = +radix;}string = toString(string).replace(reTrim,"");return nativeParseInt(string,radix || (reHasHexPrefix.test(string)?16:10));}function repeat(string,n){string = toString(string);n = toInteger(n);var result="";if(!string || n < 1 || n > MAX_SAFE_INTEGER){return result;}do {if(n % 2){result += string;}n = nativeFloor(n / 2);string += string;}while(n);return result;}function replace(){var args=arguments,string=toString(args[0]);return args.length < 3?string:string.replace(args[1],args[2]);}var snakeCase=createCompounder(function(result,word,index){return result + (index?"_":"") + word.toLowerCase();});function split(string,separator,limit){return toString(string).split(separator,limit);}var startCase=createCompounder(function(result,word,index){return result + (index?" ":"") + capitalize(word);});function startsWith(string,target,position){string = toString(string);position = baseClamp(toInteger(position),0,string.length);return string.lastIndexOf(target,position) == position;}function template(string,options,guard){var settings=lodash.templateSettings;if(guard && isIterateeCall(string,options,guard)){options = undefined;}string = toString(string);options = assignInWith({},options,settings,assignInDefaults);var imports=assignInWith({},options.imports,settings.imports,assignInDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate || reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape || reNoMatch).source + "|" + interpolate.source + "|" + (interpolate === reInterpolate?reEsTemplate:reNoMatch).source + "|" + (options.evaluate || reNoMatch).source + "|$","g");var sourceURL="//# sourceURL=" + ("sourceURL" in options?options.sourceURL:"lodash.templateSources[" + ++templateCounter + "]") + "\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue || (interpolateValue = esTemplateValue);source += string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping = true;source += "' +\n__e(" + escapeValue + ") +\n'";}if(evaluateValue){isEvaluating = true;source += "';\n" + evaluateValue + ";\n__p += '";}if(interpolateValue){source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";}index = offset + match.length;return match;});source += "';\n";var variable=options.variable;if(!variable){source = "with (obj) {\n" + source + "\n}\n";}source = (isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source = "function(" + (variable || "obj") + ") {\n" + (variable?"":"obj || (obj = {});\n") + "var __t, __p = ''" + (isEscaping?", __e = _.escape":"") + (isEvaluating?", __j = Array.prototype.join;\n" + "function print() { __p += __j.call(arguments, '') }\n":";\n") + source + "return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL + "return " + source).apply(undefined,importsValues);});result.source = source;if(isError(result)){throw result;}return result;}function toLower(value){return toString(value).toLowerCase();}function toUpper(value){return toString(value).toUpperCase();}function trim(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrim,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return strSymbols.slice(charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols) + 1).join("");}function trimEnd(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrimEnd,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string);return strSymbols.slice(0,charsEndIndex(strSymbols,stringToArray(chars)) + 1).join("");}function trimStart(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrimStart,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string);return strSymbols.slice(charsStartIndex(strSymbols,stringToArray(chars))).join("");}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator" in options?options.separator:separator;length = "length" in options?toInteger(options.length):length;omission = "omission" in options?toString(options.omission):omission;}string = toString(string);var strLength=string.length;if(reHasComplexSymbol.test(string)){var strSymbols=stringToArray(string);strLength = strSymbols.length;}if(length >= strLength){return string;}var end=length - stringSize(omission);if(end < 1){return omission;}var result=strSymbols?strSymbols.slice(0,end).join(""):string.slice(0,end);if(separator === undefined){return result + omission;}if(strSymbols){end += result.length - end;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator = RegExp(separator.source,toString(reFlags.exec(separator)) + "g");}separator.lastIndex = 0;while(match = separator.exec(substring)) {var newEnd=match.index;}result = result.slice(0,newEnd === undefined?end:newEnd);}}else if(string.indexOf(separator,end) != end){var index=result.lastIndexOf(separator);if(index > -1){result = result.slice(0,index);}}return result + omission;}function unescape(string){string = toString(string);return string && reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;}var upperCase=createCompounder(function(result,word,index){return result + (index?" ":"") + word.toUpperCase();});function words(string,pattern,guard){string = toString(string);pattern = guard?undefined:pattern;if(pattern === undefined){pattern = reHasComplexWord.test(string)?reComplexWord:reBasicWord;}return string.match(pattern) || [];}var attempt=rest(function(func,args){try{return apply(func,undefined,args);}catch(e) {return isObject(e)?e:new Error(e);}});var bindAll=rest(function(object,methodNames){arrayEach(baseFlatten(methodNames),function(key){object[key] = bind(object[key],object);});return object;});function cond(pairs){var length=pairs?pairs.length:0,toIteratee=getIteratee();pairs = !length?[]:arrayMap(pairs,function(pair){if(typeof pair[1] != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return [toIteratee(pair[0]),pair[1]];});return rest(function(args){var index=-1;while(++index < length) {var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args);}}});}function conforms(source){return baseConforms(baseClone(source,true));}function constant(value){return function(){return value;};}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value;}function iteratee(func){return baseIteratee(typeof func == "function"?func:baseClone(func,true));}function matches(source){return baseMatches(baseClone(source,true));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true));}var method=rest(function(path,args){return function(object){return baseInvoke(object,path,args);};});var methodOf=rest(function(object,args){return function(path){return baseInvoke(object,path,args);};});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options == null && !(isObject(source) && (methodNames.length || !props.length))){options = source;source = object;object = this;methodNames = baseFunctions(source,keys(source));}var chain=isObject(options) && "chain" in options?options.chain:true,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName] = func;if(isFunc){object.prototype[methodName] = function(){var chainAll=this.__chain__;if(chain || chainAll){var result=object(this.__wrapped__),actions=result.__actions__ = copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__ = chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}});return object;}function noConflict(){if(root._ === this){root._ = oldDash;}return this;}function noop(){}function nthArg(n){n = toInteger(n);return function(){return arguments[n];};}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path);}function propertyOf(object){return function(path){return object == null?undefined:baseGet(object,path);};}var range=createRange();var rangeRight=createRange(true);function times(n,iteratee){n = toInteger(n);if(n < 1 || n > MAX_SAFE_INTEGER){return [];}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee = toFunction(iteratee);n -= MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index < n) {iteratee(index);}return result;}function toPath(value){return isArray(value)?arrayMap(value,String):stringToPath(value);}function uniqueId(prefix){var id=++idCounter;return toString(prefix) + id;}function add(augend,addend){var result;if(augend !== undefined){result = augend;}if(addend !== undefined){result = result === undefined?addend:result + addend;}return result;}var ceil=createRound("ceil");var floor=createRound("floor");function max(array){return array && array.length?baseExtremum(array,identity,gt):undefined;}function maxBy(array,iteratee){return array && array.length?baseExtremum(array,getIteratee(iteratee),gt):undefined;}function mean(array){return sum(array) / (array?array.length:0);}function min(array){return array && array.length?baseExtremum(array,identity,lt):undefined;}function minBy(array,iteratee){return array && array.length?baseExtremum(array,getIteratee(iteratee),lt):undefined;}var round=createRound("round");function subtract(minuend,subtrahend){var result;if(minuend !== undefined){result = minuend;}if(subtrahend !== undefined){result = result === undefined?subtrahend:result - subtrahend;}return result;}function sum(array){return array && array.length?baseSum(array,identity):0;}function sumBy(array,iteratee){return array && array.length?baseSum(array,getIteratee(iteratee)):0;}lodash.prototype = baseLodash.prototype;LodashWrapper.prototype = baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor = LodashWrapper;LazyWrapper.prototype = baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor = LazyWrapper;Hash.prototype = nativeCreate?nativeCreate(null):objectProto;MapCache.prototype.clear = mapClear;MapCache.prototype["delete"] = mapDelete;MapCache.prototype.get = mapGet;MapCache.prototype.has = mapHas;MapCache.prototype.set = mapSet;SetCache.prototype.push = cachePush;Stack.prototype.clear = stackClear;Stack.prototype["delete"] = stackDelete;Stack.prototype.get = stackGet;Stack.prototype.has = stackHas;Stack.prototype.set = stackSet;memoize.Cache = MapCache;lodash.after = after;lodash.ary = ary;lodash.assign = assign;lodash.assignIn = assignIn;lodash.assignInWith = assignInWith;lodash.assignWith = assignWith;lodash.at = at;lodash.before = before;lodash.bind = bind;lodash.bindAll = bindAll;lodash.bindKey = bindKey;lodash.chain = chain;lodash.chunk = chunk;lodash.compact = compact;lodash.concat = concat;lodash.cond = cond;lodash.conforms = conforms;lodash.constant = constant;lodash.countBy = countBy;lodash.create = create;lodash.curry = curry;lodash.curryRight = curryRight;lodash.debounce = debounce;lodash.defaults = defaults;lodash.defaultsDeep = defaultsDeep;lodash.defer = defer;lodash.delay = delay;lodash.difference = difference;lodash.differenceBy = differenceBy;lodash.differenceWith = differenceWith;lodash.drop = drop;lodash.dropRight = dropRight;lodash.dropRightWhile = dropRightWhile;lodash.dropWhile = dropWhile;lodash.fill = fill;lodash.filter = filter;lodash.flatMap = flatMap;lodash.flatten = flatten;lodash.flattenDeep = flattenDeep;lodash.flip = flip;lodash.flow = flow;lodash.flowRight = flowRight;lodash.fromPairs = fromPairs;lodash.functions = functions;lodash.functionsIn = functionsIn;lodash.groupBy = groupBy;lodash.initial = initial;lodash.intersection = intersection;lodash.intersectionBy = intersectionBy;lodash.intersectionWith = intersectionWith;lodash.invert = invert;lodash.invertBy = invertBy;lodash.invokeMap = invokeMap;lodash.iteratee = iteratee;lodash.keyBy = keyBy;lodash.keys = keys;lodash.keysIn = keysIn;lodash.map = map;lodash.mapKeys = mapKeys;lodash.mapValues = mapValues;lodash.matches = matches;lodash.matchesProperty = matchesProperty;lodash.memoize = memoize;lodash.merge = merge;lodash.mergeWith = mergeWith;lodash.method = method;lodash.methodOf = methodOf;lodash.mixin = mixin;lodash.negate = negate;lodash.nthArg = nthArg;lodash.omit = omit;lodash.omitBy = omitBy;lodash.once = once;lodash.orderBy = orderBy;lodash.over = over;lodash.overArgs = overArgs;lodash.overEvery = overEvery;lodash.overSome = overSome;lodash.partial = partial;lodash.partialRight = partialRight;lodash.partition = partition;lodash.pick = pick;lodash.pickBy = pickBy;lodash.property = property;lodash.propertyOf = propertyOf;lodash.pull = pull;lodash.pullAll = pullAll;lodash.pullAllBy = pullAllBy;lodash.pullAt = pullAt;lodash.range = range;lodash.rangeRight = rangeRight;lodash.rearg = rearg;lodash.reject = reject;lodash.remove = remove;lodash.rest = rest;lodash.reverse = reverse;lodash.sampleSize = sampleSize;lodash.set = set;lodash.setWith = setWith;lodash.shuffle = shuffle;lodash.slice = slice;lodash.sortBy = sortBy;lodash.sortedUniq = sortedUniq;lodash.sortedUniqBy = sortedUniqBy;lodash.split = split;lodash.spread = spread;lodash.tail = tail;lodash.take = take;lodash.takeRight = takeRight;lodash.takeRightWhile = takeRightWhile;lodash.takeWhile = takeWhile;lodash.tap = tap;lodash.throttle = throttle;lodash.thru = thru;lodash.toArray = toArray;lodash.toPairs = toPairs;lodash.toPairsIn = toPairsIn;lodash.toPath = toPath;lodash.toPlainObject = toPlainObject;lodash.transform = transform;lodash.unary = unary;lodash.union = union;lodash.unionBy = unionBy;lodash.unionWith = unionWith;lodash.uniq = uniq;lodash.uniqBy = uniqBy;lodash.uniqWith = uniqWith;lodash.unset = unset;lodash.unzip = unzip;lodash.unzipWith = unzipWith;lodash.values = values;lodash.valuesIn = valuesIn;lodash.without = without;lodash.words = words;lodash.wrap = wrap;lodash.xor = xor;lodash.xorBy = xorBy;lodash.xorWith = xorWith;lodash.zip = zip;lodash.zipObject = zipObject;lodash.zipObjectDeep = zipObjectDeep;lodash.zipWith = zipWith;lodash.extend = assignIn;lodash.extendWith = assignInWith;mixin(lodash,lodash);lodash.add = add;lodash.attempt = attempt;lodash.camelCase = camelCase;lodash.capitalize = capitalize;lodash.ceil = ceil;lodash.clamp = clamp;lodash.clone = clone;lodash.cloneDeep = cloneDeep;lodash.cloneDeepWith = cloneDeepWith;lodash.cloneWith = cloneWith;lodash.deburr = deburr;lodash.endsWith = endsWith;lodash.eq = eq;lodash.escape = escape;lodash.escapeRegExp = escapeRegExp;lodash.every = every;lodash.find = find;lodash.findIndex = findIndex;lodash.findKey = findKey;lodash.findLast = findLast;lodash.findLastIndex = findLastIndex;lodash.findLastKey = findLastKey;lodash.floor = floor;lodash.forEach = forEach;lodash.forEachRight = forEachRight;lodash.forIn = forIn;lodash.forInRight = forInRight;lodash.forOwn = forOwn;lodash.forOwnRight = forOwnRight;lodash.get = get;lodash.gt = gt;lodash.gte = gte;lodash.has = has;lodash.hasIn = hasIn;lodash.head = head;lodash.identity = identity;lodash.includes = includes;lodash.indexOf = indexOf;lodash.inRange = inRange;lodash.invoke = invoke;lodash.isArguments = isArguments;lodash.isArray = isArray;lodash.isArrayLike = isArrayLike;lodash.isArrayLikeObject = isArrayLikeObject;lodash.isBoolean = isBoolean;lodash.isDate = isDate;lodash.isElement = isElement;lodash.isEmpty = isEmpty;lodash.isEqual = isEqual;lodash.isEqualWith = isEqualWith;lodash.isError = isError;lodash.isFinite = isFinite;lodash.isFunction = isFunction;lodash.isInteger = isInteger;lodash.isLength = isLength;lodash.isMatch = isMatch;lodash.isMatchWith = isMatchWith;lodash.isNaN = isNaN;lodash.isNative = isNative;lodash.isNil = isNil;lodash.isNull = isNull;lodash.isNumber = isNumber;lodash.isObject = isObject;lodash.isObjectLike = isObjectLike;lodash.isPlainObject = isPlainObject;lodash.isRegExp = isRegExp;lodash.isSafeInteger = isSafeInteger;lodash.isString = isString;lodash.isSymbol = isSymbol;lodash.isTypedArray = isTypedArray;lodash.isUndefined = isUndefined;lodash.join = join;lodash.kebabCase = kebabCase;lodash.last = last;lodash.lastIndexOf = lastIndexOf;lodash.lowerCase = lowerCase;lodash.lowerFirst = lowerFirst;lodash.lt = lt;lodash.lte = lte;lodash.max = max;lodash.maxBy = maxBy;lodash.mean = mean;lodash.min = min;lodash.minBy = minBy;lodash.noConflict = noConflict;lodash.noop = noop;lodash.now = now;lodash.pad = pad;lodash.padEnd = padEnd;lodash.padStart = padStart;lodash.parseInt = parseInt;lodash.random = random;lodash.reduce = reduce;lodash.reduceRight = reduceRight;lodash.repeat = repeat;lodash.replace = replace;lodash.result = result;lodash.round = round;lodash.runInContext = runInContext;lodash.sample = sample;lodash.size = size;lodash.snakeCase = snakeCase;lodash.some = some;lodash.sortedIndex = sortedIndex;lodash.sortedIndexBy = sortedIndexBy;lodash.sortedIndexOf = sortedIndexOf;lodash.sortedLastIndex = sortedLastIndex;lodash.sortedLastIndexBy = sortedLastIndexBy;lodash.sortedLastIndexOf = sortedLastIndexOf;lodash.startCase = startCase;lodash.startsWith = startsWith;lodash.subtract = subtract;lodash.sum = sum;lodash.sumBy = sumBy;lodash.template = template;lodash.times = times;lodash.toInteger = toInteger;lodash.toLength = toLength;lodash.toLower = toLower;lodash.toNumber = toNumber;lodash.toSafeInteger = toSafeInteger;lodash.toString = toString;lodash.toUpper = toUpper;lodash.trim = trim;lodash.trimEnd = trimEnd;lodash.trimStart = trimStart;lodash.truncate = truncate;lodash.unescape = unescape;lodash.uniqueId = uniqueId;lodash.upperCase = upperCase;lodash.upperFirst = upperFirst;lodash.each = forEach;lodash.eachRight = forEachRight;lodash.first = head;mixin(lodash,(function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName] = func;}});return source;})(),{chain:false});lodash.VERSION = VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder = lodash;});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName] = function(n){var filtered=this.__filtered__;if(filtered && !index){return new LazyWrapper(this);}n = n === undefined?1:nativeMax(toInteger(n),0);var result=this.clone();if(filtered){result.__takeCount__ = nativeMin(n,result.__takeCount__);}else {result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName + (result.__dir__ < 0?"Right":"")});}return result;};LazyWrapper.prototype[methodName + "Right"] = function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index + 1,isFilter=type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName] = function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__ = result.__filtered__ || isFilter;return result;};});arrayEach(["head","last"],function(methodName,index){var takeName="take" + (index?"Right":"");LazyWrapper.prototype[methodName] = function(){return this[takeName](1).value()[0];};});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop" + (index?"":"Right");LazyWrapper.prototype[methodName] = function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});LazyWrapper.prototype.compact = function(){return this.filter(identity);};LazyWrapper.prototype.find = function(predicate){return this.filter(predicate).head();};LazyWrapper.prototype.findLast = function(predicate){return this.reverse().find(predicate);};LazyWrapper.prototype.invokeMap = rest(function(path,args){if(typeof path == "function"){return new LazyWrapper(this);}return this.map(function(value){return baseInvoke(value,path,args);});});LazyWrapper.prototype.reject = function(predicate){predicate = getIteratee(predicate,3);return this.filter(function(value){return !predicate(value);});};LazyWrapper.prototype.slice = function(start,end){start = toInteger(start);var result=this;if(result.__filtered__ && (start > 0 || end < 0)){return new LazyWrapper(result);}if(start < 0){result = result.takeRight(-start);}else if(start){result = result.drop(start);}if(end !== undefined){end = toInteger(end);result = end < 0?result.dropRight(-end):result.take(end - start);}return result;};LazyWrapper.prototype.takeRightWhile = function(predicate){return this.reverse().takeWhile(predicate).reverse();};LazyWrapper.prototype.toArray = function(){return this.take(MAX_ARRAY_LENGTH);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take" + (methodName == "last"?"Right":""):methodName],retUnwrapped=isTaker || /^find/.test(methodName);if(!lodashFunc){return;}lodash.prototype[methodName] = function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy || isArray(value);var interceptor=function interceptor(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker && chainAll?result[0]:result;};if(useLazy && checkIteratee && typeof iteratee == "function" && iteratee.length != 1){isLazy = useLazy = false;}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped && !chainAll,onlyLazy=isLazy && !isHybrid;if(!retUnwrapped && useLazy){value = onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(result,chainAll);}if(isUnwrapped && onlyLazy){return func.apply(this,args);}result = this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result;};});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName] = function(){var args=arguments;if(retUnwrapped && !this.__chain__){return func.apply(this.value(),args);}return this[chainName](function(value){return func.apply(value,args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name + "",names=realNames[key] || (realNames[key] = []);names.push({name:methodName,func:lodashFunc});}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name] = [{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone = lazyClone;LazyWrapper.prototype.reverse = lazyReverse;LazyWrapper.prototype.value = lazyValue;lodash.prototype.at = wrapperAt;lodash.prototype.chain = wrapperChain;lodash.prototype.commit = wrapperCommit;lodash.prototype.flatMap = wrapperFlatMap;lodash.prototype.next = wrapperNext;lodash.prototype.plant = wrapperPlant;lodash.prototype.reverse = wrapperReverse;lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;if(iteratorSymbol){lodash.prototype[iteratorSymbol] = wrapperToIterator;}return lodash;}var _=runInContext();(freeWindow || freeSelf || {})._ = _;if(typeof define == "function" && typeof define.amd == "object" && define.amd){define(function(){return _;});}else if(freeExports && freeModule){if(moduleExports){(freeModule.exports = _)._ = _;}freeExports._ = _;}else {root._ = _;}}).call(undefined);

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"main":[function(require,module,exports){
cc._RFpush(module, '4788eVMSFhL2qgCgTN1rpuj', 'main');
// biz/main/script/main.js

'use strict';

var bizSocket = require('../../socket/biz-socket');

cc.Class({
    'extends': cc.Component,

    properties: {},

    enterAction: function enterAction() {
        cc.director.loadScene('controller');
        bizSocket.connect();
    },

    onLoad: function onLoad() {},

    update: function update(dt) {}
});

cc._RFpop();
},{"../../socket/biz-socket":"biz-socket"}],"socket.io":[function(require,module,exports){
(function (global){
cc._RFpush(module, '342756pPltPvItiKud7zucD', 'socket.io');
// lib/socket.io.js

"use strict";

(function (f) {
  if (typeof exports === "object" && typeof module !== "undefined") {
    module.exports = f();
  } else if (typeof define === "function" && define.amd) {
    define([], f);
  } else {
    var g;if (typeof window !== "undefined") {
      g = window;
    } else if (typeof global !== "undefined") {
      g = global;
    } else if (typeof self !== "undefined") {
      g = self;
    } else {
      g = this;
    }g.io = f();
  }
})(function () {
  var define, module, exports;return (function e(t, n, r) {
    function s(o, u) {
      if (!n[o]) {
        if (!t[o]) {
          var a = typeof require == "function" && require;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error("Cannot find module '" + o + "'");throw (f.code = "MODULE_NOT_FOUND", f);
        }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {
          var n = t[o][1][e];return s(n ? n : e);
        }, l, l.exports, e, t, n, r);
      }return n[o].exports;
    }var i = typeof require == "function" && require;for (var o = 0; o < r.length; o++) s(r[o]);return s;
  })({ 1: [function (_dereq_, module, exports) {
      module.exports = _dereq_("./lib/");
    }, { "./lib/": 2 }], 2: [function (_dereq_, module, exports) {
      module.exports = _dereq_("./socket");module.exports.parser = _dereq_("engine.io-parser");
    }, { "./socket": 3, "engine.io-parser": 19 }], 3: [function (_dereq_, module, exports) {
      (function (global) {
        var transports = _dereq_("./transports");var Emitter = _dereq_("component-emitter");var debug = _dereq_("debug")("engine.io-client:socket");var index = _dereq_("indexof");var parser = _dereq_("engine.io-parser");var parseuri = _dereq_("parseuri");var parsejson = _dereq_("parsejson");var parseqs = _dereq_("parseqs");module.exports = Socket;function noop() {}function Socket(uri, opts) {
          if (!(this instanceof Socket)) return new Socket(uri, opts);opts = opts || {};if (uri && "object" == typeof uri) {
            opts = uri;uri = null;
          }if (uri) {
            uri = parseuri(uri);opts.hostname = uri.host;opts.secure = uri.protocol == "https" || uri.protocol == "wss";opts.port = uri.port;if (uri.query) opts.query = uri.query;
          } else if (opts.host) {
            opts.hostname = parseuri(opts.host).host;
          }this.secure = null != opts.secure ? opts.secure : global.location && "https:" == location.protocol;if (opts.hostname && !opts.port) {
            opts.port = this.secure ? "443" : "80";
          }this.agent = opts.agent || false;this.hostname = opts.hostname || (global.location ? location.hostname : "localhost");this.port = opts.port || (global.location && location.port ? location.port : this.secure ? 443 : 80);this.query = opts.query || {};if ("string" == typeof this.query) this.query = parseqs.decode(this.query);this.upgrade = false !== opts.upgrade;this.path = (opts.path || "/engine.io").replace(/\/$/, "") + "/";this.forceJSONP = !!opts.forceJSONP;this.jsonp = false !== opts.jsonp;this.forceBase64 = !!opts.forceBase64;this.enablesXDR = !!opts.enablesXDR;this.timestampParam = opts.timestampParam || "t";this.timestampRequests = opts.timestampRequests;this.transports = opts.transports || ["polling", "websocket"];this.readyState = "";this.writeBuffer = [];this.policyPort = opts.policyPort || 843;this.rememberUpgrade = opts.rememberUpgrade || false;this.binaryType = null;this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;this.perMessageDeflate = false !== opts.perMessageDeflate ? opts.perMessageDeflate || {} : false;if (true === this.perMessageDeflate) this.perMessageDeflate = {};if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {
            this.perMessageDeflate.threshold = 1024;
          }this.pfx = opts.pfx || null;this.key = opts.key || null;this.passphrase = opts.passphrase || null;this.cert = opts.cert || null;this.ca = opts.ca || null;this.ciphers = opts.ciphers || null;this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? null : opts.rejectUnauthorized;var freeGlobal = typeof global == "object" && global;if (freeGlobal.global === freeGlobal) {
            if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {
              this.extraHeaders = opts.extraHeaders;
            }
          }this.open();
        }Socket.priorWebsocketSuccess = false;Emitter(Socket.prototype);Socket.protocol = parser.protocol;Socket.Socket = Socket;Socket.Transport = _dereq_("./transport");Socket.transports = _dereq_("./transports");Socket.parser = _dereq_("engine.io-parser");Socket.prototype.createTransport = function (name) {
          debug('creating transport "%s"', name);var query = clone(this.query);query.EIO = parser.protocol;query.transport = name;if (this.id) query.sid = this.id;var transport = new transports[name]({ agent: this.agent, hostname: this.hostname, port: this.port, secure: this.secure, path: this.path, query: query, forceJSONP: this.forceJSONP, jsonp: this.jsonp, forceBase64: this.forceBase64, enablesXDR: this.enablesXDR, timestampRequests: this.timestampRequests, timestampParam: this.timestampParam, policyPort: this.policyPort, socket: this, pfx: this.pfx, key: this.key, passphrase: this.passphrase, cert: this.cert, ca: this.ca, ciphers: this.ciphers, rejectUnauthorized: this.rejectUnauthorized, perMessageDeflate: this.perMessageDeflate, extraHeaders: this.extraHeaders });return transport;
        };function clone(obj) {
          var o = {};for (var i in obj) {
            if (obj.hasOwnProperty(i)) {
              o[i] = obj[i];
            }
          }return o;
        }Socket.prototype.open = function () {
          var transport;if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf("websocket") != -1) {
            transport = "websocket";
          } else if (0 === this.transports.length) {
            var self = this;setTimeout(function () {
              self.emit("error", "No transports available");
            }, 0);return;
          } else {
            transport = this.transports[0];
          }this.readyState = "opening";try {
            transport = this.createTransport(transport);
          } catch (e) {
            this.transports.shift();this.open();return;
          }transport.open();this.setTransport(transport);
        };Socket.prototype.setTransport = function (transport) {
          debug("setting transport %s", transport.name);var self = this;if (this.transport) {
            debug("clearing existing transport %s", this.transport.name);this.transport.removeAllListeners();
          }this.transport = transport;transport.on("drain", function () {
            self.onDrain();
          }).on("packet", function (packet) {
            self.onPacket(packet);
          }).on("error", function (e) {
            self.onError(e);
          }).on("close", function () {
            self.onClose("transport close");
          });
        };Socket.prototype.probe = function (name) {
          debug('probing transport "%s"', name);var transport = this.createTransport(name, { probe: 1 }),
              failed = false,
              self = this;Socket.priorWebsocketSuccess = false;function onTransportOpen() {
            if (self.onlyBinaryUpgrades) {
              var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;failed = failed || upgradeLosesBinary;
            }if (failed) return;debug('probe transport "%s" opened', name);transport.send([{ type: "ping", data: "probe" }]);transport.once("packet", function (msg) {
              if (failed) return;if ("pong" == msg.type && "probe" == msg.data) {
                debug('probe transport "%s" pong', name);self.upgrading = true;self.emit("upgrading", transport);if (!transport) return;Socket.priorWebsocketSuccess = "websocket" == transport.name;debug('pausing current transport "%s"', self.transport.name);self.transport.pause(function () {
                  if (failed) return;if ("closed" == self.readyState) return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{ type: "upgrade" }]);self.emit("upgrade", transport);transport = null;self.upgrading = false;self.flush();
                });
              } else {
                debug('probe transport "%s" failed', name);var err = new Error("probe error");err.transport = transport.name;self.emit("upgradeError", err);
              }
            });
          }function freezeTransport() {
            if (failed) return;failed = true;cleanup();transport.close();transport = null;
          }function onerror(err) {
            var error = new Error("probe error: " + err);error.transport = transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s', name, err);self.emit("upgradeError", error);
          }function onTransportClose() {
            onerror("transport closed");
          }function onclose() {
            onerror("socket closed");
          }function onupgrade(to) {
            if (transport && to.name != transport.name) {
              debug('"%s" works - aborting "%s"', to.name, transport.name);freezeTransport();
            }
          }function cleanup() {
            transport.removeListener("open", onTransportOpen);transport.removeListener("error", onerror);transport.removeListener("close", onTransportClose);self.removeListener("close", onclose);self.removeListener("upgrading", onupgrade);
          }transport.once("open", onTransportOpen);transport.once("error", onerror);transport.once("close", onTransportClose);this.once("close", onclose);this.once("upgrading", onupgrade);transport.open();
        };Socket.prototype.onOpen = function () {
          debug("socket open");this.readyState = "open";Socket.priorWebsocketSuccess = "websocket" == this.transport.name;this.emit("open");this.flush();if ("open" == this.readyState && this.upgrade && this.transport.pause) {
            debug("starting upgrade probes");for (var i = 0, l = this.upgrades.length; i < l; i++) {
              this.probe(this.upgrades[i]);
            }
          }
        };Socket.prototype.onPacket = function (packet) {
          if ("opening" == this.readyState || "open" == this.readyState) {
            debug('socket receive: type "%s", data "%s"', packet.type, packet.data);this.emit("packet", packet);this.emit("heartbeat");switch (packet.type) {case "open":
                this.onHandshake(parsejson(packet.data));break;case "pong":
                this.setPing();this.emit("pong");break;case "error":
                var err = new Error("server error");err.code = packet.data;this.onError(err);break;case "message":
                this.emit("data", packet.data);this.emit("message", packet.data);break;}
          } else {
            debug('packet received with socket readyState "%s"', this.readyState);
          }
        };Socket.prototype.onHandshake = function (data) {
          this.emit("handshake", data);this.id = data.sid;this.transport.query.sid = data.sid;this.upgrades = this.filterUpgrades(data.upgrades);this.pingInterval = data.pingInterval;this.pingTimeout = data.pingTimeout;this.onOpen();if ("closed" == this.readyState) return;this.setPing();this.removeListener("heartbeat", this.onHeartbeat);this.on("heartbeat", this.onHeartbeat);
        };Socket.prototype.onHeartbeat = function (timeout) {
          clearTimeout(this.pingTimeoutTimer);var self = this;self.pingTimeoutTimer = setTimeout(function () {
            if ("closed" == self.readyState) return;self.onClose("ping timeout");
          }, timeout || self.pingInterval + self.pingTimeout);
        };Socket.prototype.setPing = function () {
          var self = this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer = setTimeout(function () {
            debug("writing ping packet - expecting pong within %sms", self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout);
          }, self.pingInterval);
        };Socket.prototype.ping = function () {
          var self = this;this.sendPacket("ping", function () {
            self.emit("ping");
          });
        };Socket.prototype.onDrain = function () {
          this.writeBuffer.splice(0, this.prevBufferLen);this.prevBufferLen = 0;if (0 === this.writeBuffer.length) {
            this.emit("drain");
          } else {
            this.flush();
          }
        };Socket.prototype.flush = function () {
          if ("closed" != this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
            debug("flushing %d packets in socket", this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen = this.writeBuffer.length;this.emit("flush");
          }
        };Socket.prototype.write = Socket.prototype.send = function (msg, options, fn) {
          this.sendPacket("message", msg, options, fn);return this;
        };Socket.prototype.sendPacket = function (type, data, options, fn) {
          if ("function" == typeof data) {
            fn = data;data = undefined;
          }if ("function" == typeof options) {
            fn = options;options = null;
          }if ("closing" == this.readyState || "closed" == this.readyState) {
            return;
          }options = options || {};options.compress = false !== options.compress;var packet = { type: type, data: data, options: options };this.emit("packetCreate", packet);this.writeBuffer.push(packet);if (fn) this.once("flush", fn);this.flush();
        };Socket.prototype.close = function () {
          if ("opening" == this.readyState || "open" == this.readyState) {
            this.readyState = "closing";var self = this;if (this.writeBuffer.length) {
              this.once("drain", function () {
                if (this.upgrading) {
                  waitForUpgrade();
                } else {
                  close();
                }
              });
            } else if (this.upgrading) {
              waitForUpgrade();
            } else {
              close();
            }
          }function close() {
            self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close();
          }function cleanupAndClose() {
            self.removeListener("upgrade", cleanupAndClose);self.removeListener("upgradeError", cleanupAndClose);close();
          }function waitForUpgrade() {
            self.once("upgrade", cleanupAndClose);self.once("upgradeError", cleanupAndClose);
          }return this;
        };Socket.prototype.onError = function (err) {
          debug("socket error %j", err);Socket.priorWebsocketSuccess = false;this.emit("error", err);this.onClose("transport error", err);
        };Socket.prototype.onClose = function (reason, desc) {
          if ("opening" == this.readyState || "open" == this.readyState || "closing" == this.readyState) {
            debug('socket close with reason: "%s"', reason);var self = this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState = "closed";this.id = null;this.emit("close", reason, desc);self.writeBuffer = [];self.prevBufferLen = 0;
          }
        };Socket.prototype.filterUpgrades = function (upgrades) {
          var filteredUpgrades = [];for (var i = 0, j = upgrades.length; i < j; i++) {
            if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);
          }return filteredUpgrades;
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./transport": 4, "./transports": 5, "component-emitter": 15, debug: 17, "engine.io-parser": 19, indexof: 23, parsejson: 26, parseqs: 27, parseuri: 28 }], 4: [function (_dereq_, module, exports) {
      var parser = _dereq_("engine.io-parser");var Emitter = _dereq_("component-emitter");module.exports = Transport;function Transport(opts) {
        this.path = opts.path;this.hostname = opts.hostname;this.port = opts.port;this.secure = opts.secure;this.query = opts.query;this.timestampParam = opts.timestampParam;this.timestampRequests = opts.timestampRequests;this.readyState = "";this.agent = opts.agent || false;this.socket = opts.socket;this.enablesXDR = opts.enablesXDR;this.pfx = opts.pfx;this.key = opts.key;this.passphrase = opts.passphrase;this.cert = opts.cert;this.ca = opts.ca;this.ciphers = opts.ciphers;this.rejectUnauthorized = opts.rejectUnauthorized;this.extraHeaders = opts.extraHeaders;
      }Emitter(Transport.prototype);Transport.prototype.onError = function (msg, desc) {
        var err = new Error(msg);err.type = "TransportError";err.description = desc;this.emit("error", err);return this;
      };Transport.prototype.open = function () {
        if ("closed" == this.readyState || "" == this.readyState) {
          this.readyState = "opening";this.doOpen();
        }return this;
      };Transport.prototype.close = function () {
        if ("opening" == this.readyState || "open" == this.readyState) {
          this.doClose();this.onClose();
        }return this;
      };Transport.prototype.send = function (packets) {
        if ("open" == this.readyState) {
          this.write(packets);
        } else {
          throw new Error("Transport not open");
        }
      };Transport.prototype.onOpen = function () {
        this.readyState = "open";this.writable = true;this.emit("open");
      };Transport.prototype.onData = function (data) {
        var packet = parser.decodePacket(data, this.socket.binaryType);this.onPacket(packet);
      };Transport.prototype.onPacket = function (packet) {
        this.emit("packet", packet);
      };Transport.prototype.onClose = function () {
        this.readyState = "closed";this.emit("close");
      };
    }, { "component-emitter": 15, "engine.io-parser": 19 }], 5: [function (_dereq_, module, exports) {
      (function (global) {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var XHR = _dereq_("./polling-xhr");var JSONP = _dereq_("./polling-jsonp");var websocket = _dereq_("./websocket");exports.polling = polling;exports.websocket = websocket;function polling(opts) {
          var xhr;var xd = false;var xs = false;var jsonp = false !== opts.jsonp;if (global.location) {
            var isSSL = "https:" == location.protocol;var port = location.port;if (!port) {
              port = isSSL ? 443 : 80;
            }xd = opts.hostname != location.hostname || port != opts.port;xs = opts.secure != isSSL;
          }opts.xdomain = xd;opts.xscheme = xs;xhr = new XMLHttpRequest(opts);if ("open" in xhr && !opts.forceJSONP) {
            return new XHR(opts);
          } else {
            if (!jsonp) throw new Error("JSONP disabled");return new JSONP(opts);
          }
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling-jsonp": 6, "./polling-xhr": 7, "./websocket": 9, "xmlhttprequest-ssl": 10 }], 6: [function (_dereq_, module, exports) {
      (function (global) {
        var Polling = _dereq_("./polling");var inherit = _dereq_("component-inherit");module.exports = JSONPPolling;var rNewline = /\n/g;var rEscapedNewline = /\\n/g;var callbacks;var index = 0;function empty() {}function JSONPPolling(opts) {
          Polling.call(this, opts);this.query = this.query || {};if (!callbacks) {
            if (!global.___eio) global.___eio = [];callbacks = global.___eio;
          }this.index = callbacks.length;var self = this;callbacks.push(function (msg) {
            self.onData(msg);
          });this.query.j = this.index;if (global.document && global.addEventListener) {
            global.addEventListener("beforeunload", function () {
              if (self.script) self.script.onerror = empty;
            }, false);
          }
        }inherit(JSONPPolling, Polling);JSONPPolling.prototype.supportsBinary = false;JSONPPolling.prototype.doClose = function () {
          if (this.script) {
            this.script.parentNode.removeChild(this.script);this.script = null;
          }if (this.form) {
            this.form.parentNode.removeChild(this.form);this.form = null;this.iframe = null;
          }Polling.prototype.doClose.call(this);
        };JSONPPolling.prototype.doPoll = function () {
          var self = this;var script = document.createElement("script");if (this.script) {
            this.script.parentNode.removeChild(this.script);this.script = null;
          }script.async = true;script.src = this.uri();script.onerror = function (e) {
            self.onError("jsonp poll error", e);
          };var insertAt = document.getElementsByTagName("script")[0];if (insertAt) {
            insertAt.parentNode.insertBefore(script, insertAt);
          } else {
            (document.head || document.body).appendChild(script);
          }this.script = script;var isUAgecko = "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent);if (isUAgecko) {
            setTimeout(function () {
              var iframe = document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe);
            }, 100);
          }
        };JSONPPolling.prototype.doWrite = function (data, fn) {
          var self = this;if (!this.form) {
            var form = document.createElement("form");var area = document.createElement("textarea");var id = this.iframeId = "eio_iframe_" + this.index;var iframe;form.className = "socketio";form.style.position = "absolute";form.style.top = "-1000px";form.style.left = "-1000px";form.target = id;form.method = "POST";form.setAttribute("accept-charset", "utf-8");area.name = "d";form.appendChild(area);document.body.appendChild(form);this.form = form;this.area = area;
          }this.form.action = this.uri();function complete() {
            initIframe();fn();
          }function initIframe() {
            if (self.iframe) {
              try {
                self.form.removeChild(self.iframe);
              } catch (e) {
                self.onError("jsonp polling iframe removal error", e);
              }
            }try {
              var html = '<iframe src="javascript:0" name="' + self.iframeId + '">';iframe = document.createElement(html);
            } catch (e) {
              iframe = document.createElement("iframe");iframe.name = self.iframeId;iframe.src = "javascript:0";
            }iframe.id = self.iframeId;self.form.appendChild(iframe);self.iframe = iframe;
          }initIframe();data = data.replace(rEscapedNewline, "\\\n");this.area.value = data.replace(rNewline, "\\n");try {
            this.form.submit();
          } catch (e) {}if (this.iframe.attachEvent) {
            this.iframe.onreadystatechange = function () {
              if (self.iframe.readyState == "complete") {
                complete();
              }
            };
          } else {
            this.iframe.onload = complete;
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling": 8, "component-inherit": 16 }], 7: [function (_dereq_, module, exports) {
      (function (global) {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var Polling = _dereq_("./polling");var Emitter = _dereq_("component-emitter");var inherit = _dereq_("component-inherit");var debug = _dereq_("debug")("engine.io-client:polling-xhr");module.exports = XHR;module.exports.Request = Request;function empty() {}function XHR(opts) {
          Polling.call(this, opts);if (global.location) {
            var isSSL = "https:" == location.protocol;var port = location.port;if (!port) {
              port = isSSL ? 443 : 80;
            }this.xd = opts.hostname != global.location.hostname || port != opts.port;this.xs = opts.secure != isSSL;
          } else {
            this.extraHeaders = opts.extraHeaders;
          }
        }inherit(XHR, Polling);XHR.prototype.supportsBinary = true;XHR.prototype.request = function (opts) {
          opts = opts || {};opts.uri = this.uri();opts.xd = this.xd;opts.xs = this.xs;opts.agent = this.agent || false;opts.supportsBinary = this.supportsBinary;opts.enablesXDR = this.enablesXDR;opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;opts.extraHeaders = this.extraHeaders;return new Request(opts);
        };XHR.prototype.doWrite = function (data, fn) {
          var isBinary = typeof data !== "string" && data !== undefined;var req = this.request({ method: "POST", data: data, isBinary: isBinary });var self = this;req.on("success", fn);req.on("error", function (err) {
            self.onError("xhr post error", err);
          });this.sendXhr = req;
        };XHR.prototype.doPoll = function () {
          debug("xhr poll");var req = this.request();var self = this;req.on("data", function (data) {
            self.onData(data);
          });req.on("error", function (err) {
            self.onError("xhr poll error", err);
          });this.pollXhr = req;
        };function Request(opts) {
          this.method = opts.method || "GET";this.uri = opts.uri;this.xd = !!opts.xd;this.xs = !!opts.xs;this.async = false !== opts.async;this.data = undefined != opts.data ? opts.data : null;this.agent = opts.agent;this.isBinary = opts.isBinary;this.supportsBinary = opts.supportsBinary;this.enablesXDR = opts.enablesXDR;this.pfx = opts.pfx;this.key = opts.key;this.passphrase = opts.passphrase;this.cert = opts.cert;this.ca = opts.ca;this.ciphers = opts.ciphers;this.rejectUnauthorized = opts.rejectUnauthorized;this.extraHeaders = opts.extraHeaders;this.create();
        }Emitter(Request.prototype);Request.prototype.create = function () {
          var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;var xhr = this.xhr = new XMLHttpRequest(opts);var self = this;try {
            debug("xhr open %s: %s", this.method, this.uri);xhr.open(this.method, this.uri, this.async);try {
              if (this.extraHeaders) {
                xhr.setDisableHeaderCheck(true);for (var i in this.extraHeaders) {
                  if (this.extraHeaders.hasOwnProperty(i)) {
                    xhr.setRequestHeader(i, this.extraHeaders[i]);
                  }
                }
              }
            } catch (e) {}if (this.supportsBinary) {
              xhr.responseType = "arraybuffer";
            }if ("POST" == this.method) {
              try {
                if (this.isBinary) {
                  xhr.setRequestHeader("Content-type", "application/octet-stream");
                } else {
                  xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
                }
              } catch (e) {}
            }if ("withCredentials" in xhr) {
              xhr.withCredentials = true;
            }if (this.hasXDR()) {
              xhr.onload = function () {
                self.onLoad();
              };xhr.onerror = function () {
                self.onError(xhr.responseText);
              };
            } else {
              xhr.onreadystatechange = function () {
                if (4 != xhr.readyState) return;if (200 == xhr.status || 1223 == xhr.status) {
                  self.onLoad();
                } else {
                  setTimeout(function () {
                    self.onError(xhr.status);
                  }, 0);
                }
              };
            }debug("xhr data %s", this.data);xhr.send(this.data);
          } catch (e) {
            setTimeout(function () {
              self.onError(e);
            }, 0);return;
          }if (global.document) {
            this.index = Request.requestsCount++;Request.requests[this.index] = this;
          }
        };Request.prototype.onSuccess = function () {
          this.emit("success");this.cleanup();
        };Request.prototype.onData = function (data) {
          this.emit("data", data);this.onSuccess();
        };Request.prototype.onError = function (err) {
          this.emit("error", err);this.cleanup(true);
        };Request.prototype.cleanup = function (fromError) {
          if ("undefined" == typeof this.xhr || null === this.xhr) {
            return;
          }if (this.hasXDR()) {
            this.xhr.onload = this.xhr.onerror = empty;
          } else {
            this.xhr.onreadystatechange = empty;
          }if (fromError) {
            try {
              this.xhr.abort();
            } catch (e) {}
          }if (global.document) {
            delete Request.requests[this.index];
          }this.xhr = null;
        };Request.prototype.onLoad = function () {
          var data;try {
            var contentType;try {
              contentType = this.xhr.getResponseHeader("Content-Type").split(";")[0];
            } catch (e) {}if (contentType === "application/octet-stream") {
              data = this.xhr.response;
            } else {
              if (!this.supportsBinary) {
                data = this.xhr.responseText;
              } else {
                try {
                  data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));
                } catch (e) {
                  var ui8Arr = new Uint8Array(this.xhr.response);var dataArray = [];for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {
                    dataArray.push(ui8Arr[idx]);
                  }data = String.fromCharCode.apply(null, dataArray);
                }
              }
            }
          } catch (e) {
            this.onError(e);
          }if (null != data) {
            this.onData(data);
          }
        };Request.prototype.hasXDR = function () {
          return "undefined" !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;
        };Request.prototype.abort = function () {
          this.cleanup();
        };if (global.document) {
          Request.requestsCount = 0;Request.requests = {};if (global.attachEvent) {
            global.attachEvent("onunload", unloadHandler);
          } else if (global.addEventListener) {
            global.addEventListener("beforeunload", unloadHandler, false);
          }
        }function unloadHandler() {
          for (var i in Request.requests) {
            if (Request.requests.hasOwnProperty(i)) {
              Request.requests[i].abort();
            }
          }
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling": 8, "component-emitter": 15, "component-inherit": 16, debug: 17, "xmlhttprequest-ssl": 10 }], 8: [function (_dereq_, module, exports) {
      var Transport = _dereq_("../transport");var parseqs = _dereq_("parseqs");var parser = _dereq_("engine.io-parser");var inherit = _dereq_("component-inherit");var yeast = _dereq_("yeast");var debug = _dereq_("debug")("engine.io-client:polling");module.exports = Polling;var hasXHR2 = (function () {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var xhr = new XMLHttpRequest({ xdomain: false });return null != xhr.responseType;
      })();function Polling(opts) {
        var forceBase64 = opts && opts.forceBase64;if (!hasXHR2 || forceBase64) {
          this.supportsBinary = false;
        }Transport.call(this, opts);
      }inherit(Polling, Transport);Polling.prototype.name = "polling";Polling.prototype.doOpen = function () {
        this.poll();
      };Polling.prototype.pause = function (onPause) {
        var pending = 0;var self = this;this.readyState = "pausing";function pause() {
          debug("paused");self.readyState = "paused";onPause();
        }if (this.polling || !this.writable) {
          var total = 0;if (this.polling) {
            debug("we are currently polling - waiting to pause");total++;this.once("pollComplete", function () {
              debug("pre-pause polling complete");--total || pause();
            });
          }if (!this.writable) {
            debug("we are currently writing - waiting to pause");total++;this.once("drain", function () {
              debug("pre-pause writing complete");--total || pause();
            });
          }
        } else {
          pause();
        }
      };Polling.prototype.poll = function () {
        debug("polling");this.polling = true;this.doPoll();this.emit("poll");
      };Polling.prototype.onData = function (data) {
        var self = this;debug("polling got data %s", data);var callback = function callback(packet, index, total) {
          if ("opening" == self.readyState) {
            self.onOpen();
          }if ("close" == packet.type) {
            self.onClose();return false;
          }self.onPacket(packet);
        };parser.decodePayload(data, this.socket.binaryType, callback);if ("closed" != this.readyState) {
          this.polling = false;this.emit("pollComplete");if ("open" == this.readyState) {
            this.poll();
          } else {
            debug('ignoring poll - transport state "%s"', this.readyState);
          }
        }
      };Polling.prototype.doClose = function () {
        var self = this;function close() {
          debug("writing close packet");self.write([{ type: "close" }]);
        }if ("open" == this.readyState) {
          debug("transport open - closing");close();
        } else {
          debug("transport not open - deferring close");this.once("open", close);
        }
      };Polling.prototype.write = function (packets) {
        var self = this;this.writable = false;var callbackfn = function callbackfn() {
          self.writable = true;self.emit("drain");
        };var self = this;parser.encodePayload(packets, this.supportsBinary, function (data) {
          self.doWrite(data, callbackfn);
        });
      };Polling.prototype.uri = function () {
        var query = this.query || {};var schema = this.secure ? "https" : "http";var port = "";if (false !== this.timestampRequests) {
          query[this.timestampParam] = yeast();
        }if (!this.supportsBinary && !query.sid) {
          query.b64 = 1;
        }query = parseqs.encode(query);if (this.port && ("https" == schema && this.port != 443 || "http" == schema && this.port != 80)) {
          port = ":" + this.port;
        }if (query.length) {
          query = "?" + query;
        }var ipv6 = this.hostname.indexOf(":") !== -1;return schema + "://" + (ipv6 ? "[" + this.hostname + "]" : this.hostname) + port + this.path + query;
      };
    }, { "../transport": 4, "component-inherit": 16, debug: 17, "engine.io-parser": 19, parseqs: 27, "xmlhttprequest-ssl": 10, yeast: 30 }], 9: [function (_dereq_, module, exports) {
      (function (global) {
        var Transport = _dereq_("../transport");var parser = _dereq_("engine.io-parser");var parseqs = _dereq_("parseqs");var inherit = _dereq_("component-inherit");var yeast = _dereq_("yeast");var debug = _dereq_("debug")("engine.io-client:websocket");var BrowserWebSocket = global.WebSocket || global.MozWebSocket;var WebSocket = BrowserWebSocket;if (!WebSocket && typeof window === "undefined") {
          try {
            WebSocket = _dereq_("ws");
          } catch (e) {}
        }module.exports = WS;function WS(opts) {
          var forceBase64 = opts && opts.forceBase64;if (forceBase64) {
            this.supportsBinary = false;
          }this.perMessageDeflate = opts.perMessageDeflate;Transport.call(this, opts);
        }inherit(WS, Transport);WS.prototype.name = "websocket";WS.prototype.supportsBinary = true;WS.prototype.doOpen = function () {
          if (!this.check()) {
            return;
          }var self = this;var uri = this.uri();var protocols = void 0;var opts = { agent: this.agent, perMessageDeflate: this.perMessageDeflate };opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;if (this.extraHeaders) {
            opts.headers = this.extraHeaders;
          }this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);if (this.ws.binaryType === undefined) {
            this.supportsBinary = false;
          }if (this.ws.supports && this.ws.supports.binary) {
            this.supportsBinary = true;this.ws.binaryType = "buffer";
          } else {
            this.ws.binaryType = "arraybuffer";
          }this.addEventListeners();
        };WS.prototype.addEventListeners = function () {
          var self = this;this.ws.onopen = function () {
            self.onOpen();
          };this.ws.onclose = function () {
            self.onClose();
          };this.ws.onmessage = function (ev) {
            self.onData(ev.data);
          };this.ws.onerror = function (e) {
            self.onError("websocket error", e);
          };
        };if ("undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {
          WS.prototype.onData = function (data) {
            var self = this;setTimeout(function () {
              Transport.prototype.onData.call(self, data);
            }, 0);
          };
        }WS.prototype.write = function (packets) {
          var self = this;this.writable = false;var total = packets.length;for (var i = 0, l = total; i < l; i++) {
            (function (packet) {
              parser.encodePacket(packet, self.supportsBinary, function (data) {
                if (!BrowserWebSocket) {
                  var opts = {};if (packet.options) {
                    opts.compress = packet.options.compress;
                  }if (self.perMessageDeflate) {
                    var len = "string" == typeof data ? global.Buffer.byteLength(data) : data.length;if (len < self.perMessageDeflate.threshold) {
                      opts.compress = false;
                    }
                  }
                }try {
                  if (BrowserWebSocket) {
                    self.ws.send(data);
                  } else {
                    self.ws.send(data, opts);
                  }
                } catch (e) {
                  debug("websocket closed before onclose event");
                }--total || done();
              });
            })(packets[i]);
          }function done() {
            self.emit("flush");setTimeout(function () {
              self.writable = true;self.emit("drain");
            }, 0);
          }
        };WS.prototype.onClose = function () {
          Transport.prototype.onClose.call(this);
        };WS.prototype.doClose = function () {
          if (typeof this.ws !== "undefined") {
            this.ws.close();
          }
        };WS.prototype.uri = function () {
          var query = this.query || {};var schema = this.secure ? "wss" : "ws";var port = "";if (this.port && ("wss" == schema && this.port != 443 || "ws" == schema && this.port != 80)) {
            port = ":" + this.port;
          }if (this.timestampRequests) {
            query[this.timestampParam] = yeast();
          }if (!this.supportsBinary) {
            query.b64 = 1;
          }query = parseqs.encode(query);if (query.length) {
            query = "?" + query;
          }var ipv6 = this.hostname.indexOf(":") !== -1;return schema + "://" + (ipv6 ? "[" + this.hostname + "]" : this.hostname) + port + this.path + query;
        };WS.prototype.check = function () {
          return !!WebSocket && !("__initialize" in WebSocket && this.name === WS.prototype.name);
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "../transport": 4, "component-inherit": 16, debug: 17, "engine.io-parser": 19, parseqs: 27, ws: undefined, yeast: 30 }], 10: [function (_dereq_, module, exports) {
      var hasCORS = _dereq_("has-cors");module.exports = function (opts) {
        var xdomain = opts.xdomain;var xscheme = opts.xscheme;var enablesXDR = opts.enablesXDR;try {
          if ("undefined" != typeof XMLHttpRequest && (!xdomain || hasCORS)) {
            return new XMLHttpRequest();
          }
        } catch (e) {}try {
          if ("undefined" != typeof XDomainRequest && !xscheme && enablesXDR) {
            return new XDomainRequest();
          }
        } catch (e) {}if (!xdomain) {
          try {
            return new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e) {}
        }
      };
    }, { "has-cors": 22 }], 11: [function (_dereq_, module, exports) {
      module.exports = after;function after(count, callback, err_cb) {
        var bail = false;err_cb = err_cb || noop;proxy.count = count;return count === 0 ? callback() : proxy;function proxy(err, result) {
          if (proxy.count <= 0) {
            throw new Error("after called too many times");
          }--proxy.count;if (err) {
            bail = true;callback(err);callback = err_cb;
          } else if (proxy.count === 0 && !bail) {
            callback(null, result);
          }
        }
      }function noop() {}
    }, {}], 12: [function (_dereq_, module, exports) {
      module.exports = function (arraybuffer, start, end) {
        var bytes = arraybuffer.byteLength;start = start || 0;end = end || bytes;if (arraybuffer.slice) {
          return arraybuffer.slice(start, end);
        }if (start < 0) {
          start += bytes;
        }if (end < 0) {
          end += bytes;
        }if (end > bytes) {
          end = bytes;
        }if (start >= bytes || start >= end || bytes === 0) {
          return new ArrayBuffer(0);
        }var abv = new Uint8Array(arraybuffer);var result = new Uint8Array(end - start);for (var i = start, ii = 0; i < end; i++, ii++) {
          result[ii] = abv[i];
        }return result.buffer;
      };
    }, {}], 13: [function (_dereq_, module, exports) {
      (function (chars) {
        "use strict";exports.encode = function (arraybuffer) {
          var bytes = new Uint8Array(arraybuffer),
              i,
              len = bytes.length,
              base64 = "";for (i = 0; i < len; i += 3) {
            base64 += chars[bytes[i] >> 2];
            base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];base64 += chars[bytes[i + 2] & 63];
          }if (len % 3 === 2) {
            base64 = base64.substring(0, base64.length - 1) + "=";
          } else if (len % 3 === 1) {
            base64 = base64.substring(0, base64.length - 2) + "==";
          }return base64;
        };exports.decode = function (base64) {
          var bufferLength = base64.length * .75,
              len = base64.length,
              i,
              p = 0,
              encoded1,
              encoded2,
              encoded3,
              encoded4;if (base64[base64.length - 1] === "=") {
            bufferLength--;if (base64[base64.length - 2] === "=") {
              bufferLength--;
            }
          }var arraybuffer = new ArrayBuffer(bufferLength),
              bytes = new Uint8Array(arraybuffer);for (i = 0; i < len; i += 4) {
            encoded1 = chars.indexOf(base64[i]);encoded2 = chars.indexOf(base64[i + 1]);encoded3 = chars.indexOf(base64[i + 2]);encoded4 = chars.indexOf(base64[i + 3]);bytes[p++] = encoded1 << 2 | encoded2 >> 4;bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
          }return arraybuffer;
        };
      })("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");
    }, {}], 14: [function (_dereq_, module, exports) {
      (function (global) {
        var BlobBuilder = global.BlobBuilder || global.WebKitBlobBuilder || global.MSBlobBuilder || global.MozBlobBuilder;var blobSupported = (function () {
          try {
            var a = new Blob(["hi"]);return a.size === 2;
          } catch (e) {
            return false;
          }
        })();var blobSupportsArrayBufferView = blobSupported && (function () {
          try {
            var b = new Blob([new Uint8Array([1, 2])]);return b.size === 2;
          } catch (e) {
            return false;
          }
        })();var blobBuilderSupported = BlobBuilder && BlobBuilder.prototype.append && BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary) {
          for (var i = 0; i < ary.length; i++) {
            var chunk = ary[i];if (chunk.buffer instanceof ArrayBuffer) {
              var buf = chunk.buffer;if (chunk.byteLength !== buf.byteLength) {
                var copy = new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));buf = copy.buffer;
              }ary[i] = buf;
            }
          }
        }function BlobBuilderConstructor(ary, options) {
          options = options || {};var bb = new BlobBuilder();mapArrayBufferViews(ary);for (var i = 0; i < ary.length; i++) {
            bb.append(ary[i]);
          }return options.type ? bb.getBlob(options.type) : bb.getBlob();
        }function BlobConstructor(ary, options) {
          mapArrayBufferViews(ary);return new Blob(ary, options || {});
        }module.exports = (function () {
          if (blobSupported) {
            return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;
          } else if (blobBuilderSupported) {
            return BlobBuilderConstructor;
          } else {
            return undefined;
          }
        })();
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 15: [function (_dereq_, module, exports) {
      module.exports = Emitter;function Emitter(obj) {
        if (obj) return mixin(obj);
      }function mixin(obj) {
        for (var key in Emitter.prototype) {
          obj[key] = Emitter.prototype[key];
        }return obj;
      }Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};(this._callbacks[event] = this._callbacks[event] || []).push(fn);return this;
      };Emitter.prototype.once = function (event, fn) {
        var self = this;this._callbacks = this._callbacks || {};function on() {
          self.off(event, on);fn.apply(this, arguments);
        }on.fn = fn;this.on(event, on);return this;
      };Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};if (0 == arguments.length) {
          this._callbacks = {};return this;
        }var callbacks = this._callbacks[event];if (!callbacks) return this;if (1 == arguments.length) {
          delete this._callbacks[event];return this;
        }var cb;for (var i = 0; i < callbacks.length; i++) {
          cb = callbacks[i];if (cb === fn || cb.fn === fn) {
            callbacks.splice(i, 1);break;
          }
        }return this;
      };Emitter.prototype.emit = function (event) {
        this._callbacks = this._callbacks || {};var args = [].slice.call(arguments, 1),
            callbacks = this._callbacks[event];if (callbacks) {
          callbacks = callbacks.slice(0);for (var i = 0, len = callbacks.length; i < len; ++i) {
            callbacks[i].apply(this, args);
          }
        }return this;
      };Emitter.prototype.listeners = function (event) {
        this._callbacks = this._callbacks || {};return this._callbacks[event] || [];
      };Emitter.prototype.hasListeners = function (event) {
        return !!this.listeners(event).length;
      };
    }, {}], 16: [function (_dereq_, module, exports) {
      module.exports = function (a, b) {
        var fn = function fn() {};fn.prototype = b.prototype;a.prototype = new fn();a.prototype.constructor = a;
      };
    }, {}], 17: [function (_dereq_, module, exports) {
      exports = module.exports = _dereq_("./debug");exports.log = log;exports.formatArgs = formatArgs;exports.save = save;exports.load = load;exports.useColors = useColors;exports.storage = "undefined" != typeof chrome && "undefined" != typeof chrome.storage ? chrome.storage.local : localstorage();exports.colors = ["lightseagreen", "forestgreen", "goldenrod", "dodgerblue", "darkorchid", "crimson"];function useColors() {
        return "WebkitAppearance" in document.documentElement.style || window.console && (console.firebug || console.exception && console.table) || navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31;
      }exports.formatters.j = function (v) {
        return JSON.stringify(v);
      };function formatArgs() {
        var args = arguments;var useColors = this.useColors;args[0] = (useColors ? "%c" : "") + this.namespace + (useColors ? " %c" : " ") + args[0] + (useColors ? "%c " : " ") + "+" + exports.humanize(this.diff);if (!useColors) return args;var c = "color: " + this.color;args = [args[0], c, "color: inherit"].concat(Array.prototype.slice.call(args, 1));var index = 0;var lastC = 0;args[0].replace(/%[a-z%]/g, function (match) {
          if ("%%" === match) return;index++;if ("%c" === match) {
            lastC = index;
          }
        });args.splice(lastC, 0, c);return args;
      }function log() {
        return "object" === typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
      }function save(namespaces) {
        try {
          if (null == namespaces) {
            exports.storage.removeItem("debug");
          } else {
            exports.storage.debug = namespaces;
          }
        } catch (e) {}
      }function load() {
        var r;try {
          r = exports.storage.debug;
        } catch (e) {}return r;
      }exports.enable(load());function localstorage() {
        try {
          return window.localStorage;
        } catch (e) {}
      }
    }, { "./debug": 18 }], 18: [function (_dereq_, module, exports) {
      exports = module.exports = debug;exports.coerce = coerce;exports.disable = disable;exports.enable = enable;exports.enabled = enabled;exports.humanize = _dereq_("ms");exports.names = [];exports.skips = [];exports.formatters = {};var prevColor = 0;var prevTime;function selectColor() {
        return exports.colors[prevColor++ % exports.colors.length];
      }function debug(namespace) {
        function disabled() {}disabled.enabled = false;function enabled() {
          var self = enabled;var curr = +new Date();var ms = curr - (prevTime || curr);self.diff = ms;self.prev = prevTime;self.curr = curr;prevTime = curr;if (null == self.useColors) self.useColors = exports.useColors();if (null == self.color && self.useColors) self.color = selectColor();var args = Array.prototype.slice.call(arguments);args[0] = exports.coerce(args[0]);if ("string" !== typeof args[0]) {
            args = ["%o"].concat(args);
          }var index = 0;args[0] = args[0].replace(/%([a-z%])/g, function (match, format) {
            if (match === "%%") return match;index++;var formatter = exports.formatters[format];if ("function" === typeof formatter) {
              var val = args[index];match = formatter.call(self, val);args.splice(index, 1);index--;
            }return match;
          });if ("function" === typeof exports.formatArgs) {
            args = exports.formatArgs.apply(self, args);
          }var logFn = enabled.log || exports.log || console.log.bind(console);logFn.apply(self, args);
        }enabled.enabled = true;var fn = exports.enabled(namespace) ? enabled : disabled;fn.namespace = namespace;return fn;
      }function enable(namespaces) {
        exports.save(namespaces);var split = (namespaces || "").split(/[\s,]+/);var len = split.length;for (var i = 0; i < len; i++) {
          if (!split[i]) continue;namespaces = split[i].replace(/\*/g, ".*?");if (namespaces[0] === "-") {
            exports.skips.push(new RegExp("^" + namespaces.substr(1) + "$"));
          } else {
            exports.names.push(new RegExp("^" + namespaces + "$"));
          }
        }
      }function disable() {
        exports.enable("");
      }function enabled(name) {
        var i, len;for (i = 0, len = exports.skips.length; i < len; i++) {
          if (exports.skips[i].test(name)) {
            return false;
          }
        }for (i = 0, len = exports.names.length; i < len; i++) {
          if (exports.names[i].test(name)) {
            return true;
          }
        }return false;
      }function coerce(val) {
        if (val instanceof Error) return val.stack || val.message;return val;
      }
    }, { ms: 25 }], 19: [function (_dereq_, module, exports) {
      (function (global) {
        var keys = _dereq_("./keys");var hasBinary = _dereq_("has-binary");var sliceBuffer = _dereq_("arraybuffer.slice");var base64encoder = _dereq_("base64-arraybuffer");var after = _dereq_("after");var utf8 = _dereq_("utf8");var isAndroid = navigator.userAgent.match(/Android/i);var isPhantomJS = /PhantomJS/i.test(navigator.userAgent);var dontSendBlobs = isAndroid || isPhantomJS;exports.protocol = 3;var packets = exports.packets = { open: 0, close: 1, ping: 2, pong: 3, message: 4, upgrade: 5, noop: 6 };var packetslist = keys(packets);var err = { type: "error", data: "parser error" };var Blob = _dereq_("blob");exports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {
          if ("function" == typeof supportsBinary) {
            callback = supportsBinary;supportsBinary = false;
          }if ("function" == typeof utf8encode) {
            callback = utf8encode;utf8encode = null;
          }var data = packet.data === undefined ? undefined : packet.data.buffer || packet.data;if (global.ArrayBuffer && data instanceof ArrayBuffer) {
            return encodeArrayBuffer(packet, supportsBinary, callback);
          } else if (Blob && data instanceof global.Blob) {
            return encodeBlob(packet, supportsBinary, callback);
          }if (data && data.base64) {
            return encodeBase64Object(packet, callback);
          }var encoded = packets[packet.type];if (undefined !== packet.data) {
            encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);
          }return callback("" + encoded);
        };function encodeBase64Object(packet, callback) {
          var message = "b" + exports.packets[packet.type] + packet.data.data;return callback(message);
        }function encodeArrayBuffer(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }var data = packet.data;var contentArray = new Uint8Array(data);var resultBuffer = new Uint8Array(1 + data.byteLength);resultBuffer[0] = packets[packet.type];for (var i = 0; i < contentArray.length; i++) {
            resultBuffer[i + 1] = contentArray[i];
          }return callback(resultBuffer.buffer);
        }function encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }var fr = new FileReader();fr.onload = function () {
            packet.data = fr.result;exports.encodePacket(packet, supportsBinary, true, callback);
          };return fr.readAsArrayBuffer(packet.data);
        }function encodeBlob(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }if (dontSendBlobs) {
            return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);
          }var length = new Uint8Array(1);length[0] = packets[packet.type];var blob = new Blob([length.buffer, packet.data]);return callback(blob);
        }exports.encodeBase64Packet = function (packet, callback) {
          var message = "b" + exports.packets[packet.type];if (Blob && packet.data instanceof global.Blob) {
            var fr = new FileReader();fr.onload = function () {
              var b64 = fr.result.split(",")[1];callback(message + b64);
            };return fr.readAsDataURL(packet.data);
          }var b64data;try {
            b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));
          } catch (e) {
            var typed = new Uint8Array(packet.data);var basic = new Array(typed.length);for (var i = 0; i < typed.length; i++) {
              basic[i] = typed[i];
            }b64data = String.fromCharCode.apply(null, basic);
          }message += global.btoa(b64data);return callback(message);
        };exports.decodePacket = function (data, binaryType, utf8decode) {
          if (typeof data == "string" || data === undefined) {
            if (data.charAt(0) == "b") {
              return exports.decodeBase64Packet(data.substr(1), binaryType);
            }if (utf8decode) {
              try {
                data = utf8.decode(data);
              } catch (e) {
                return err;
              }
            }var type = data.charAt(0);if (Number(type) != type || !packetslist[type]) {
              return err;
            }if (data.length > 1) {
              return { type: packetslist[type], data: data.substring(1) };
            } else {
              return { type: packetslist[type] };
            }
          }var asArray = new Uint8Array(data);var type = asArray[0];var rest = sliceBuffer(data, 1);if (Blob && binaryType === "blob") {
            rest = new Blob([rest]);
          }return { type: packetslist[type], data: rest };
        };exports.decodeBase64Packet = function (msg, binaryType) {
          var type = packetslist[msg.charAt(0)];if (!global.ArrayBuffer) {
            return { type: type, data: { base64: true, data: msg.substr(1) } };
          }var data = base64encoder.decode(msg.substr(1));if (binaryType === "blob" && Blob) {
            data = new Blob([data]);
          }return { type: type, data: data };
        };exports.encodePayload = function (packets, supportsBinary, callback) {
          if (typeof supportsBinary == "function") {
            callback = supportsBinary;supportsBinary = null;
          }var isBinary = hasBinary(packets);if (supportsBinary && isBinary) {
            if (Blob && !dontSendBlobs) {
              return exports.encodePayloadAsBlob(packets, callback);
            }return exports.encodePayloadAsArrayBuffer(packets, callback);
          }if (!packets.length) {
            return callback("0:");
          }function setLengthHeader(message) {
            return message.length + ":" + message;
          }function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function (message) {
              doneCallback(null, setLengthHeader(message));
            });
          }map(packets, encodeOne, function (err, results) {
            return callback(results.join(""));
          });
        };function map(ary, each, done) {
          var result = new Array(ary.length);var next = after(ary.length, done);var eachWithIndex = function eachWithIndex(i, el, cb) {
            each(el, function (error, msg) {
              result[i] = msg;cb(error, result);
            });
          };for (var i = 0; i < ary.length; i++) {
            eachWithIndex(i, ary[i], next);
          }
        }exports.decodePayload = function (data, binaryType, callback) {
          if (typeof data != "string") {
            return exports.decodePayloadAsBinary(data, binaryType, callback);
          }if (typeof binaryType === "function") {
            callback = binaryType;binaryType = null;
          }var packet;if (data == "") {
            return callback(err, 0, 1);
          }var length = "",
              n,
              msg;for (var i = 0, l = data.length; i < l; i++) {
            var chr = data.charAt(i);if (":" != chr) {
              length += chr;
            } else {
              if ("" == length || length != (n = Number(length))) {
                return callback(err, 0, 1);
              }msg = data.substr(i + 1, n);if (length != msg.length) {
                return callback(err, 0, 1);
              }if (msg.length) {
                packet = exports.decodePacket(msg, binaryType, true);if (err.type == packet.type && err.data == packet.data) {
                  return callback(err, 0, 1);
                }var ret = callback(packet, i + n, l);if (false === ret) return;
              }i += n;length = "";
            }
          }if (length != "") {
            return callback(err, 0, 1);
          }
        };exports.encodePayloadAsArrayBuffer = function (packets, callback) {
          if (!packets.length) {
            return callback(new ArrayBuffer(0));
          }function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, true, true, function (data) {
              return doneCallback(null, data);
            });
          }map(packets, encodeOne, function (err, encodedPackets) {
            var totalLength = encodedPackets.reduce(function (acc, p) {
              var len;if (typeof p === "string") {
                len = p.length;
              } else {
                len = p.byteLength;
              }return acc + len.toString().length + len + 2;
            }, 0);var resultArray = new Uint8Array(totalLength);var bufferIndex = 0;encodedPackets.forEach(function (p) {
              var isString = typeof p === "string";var ab = p;if (isString) {
                var view = new Uint8Array(p.length);for (var i = 0; i < p.length; i++) {
                  view[i] = p.charCodeAt(i);
                }ab = view.buffer;
              }if (isString) {
                resultArray[bufferIndex++] = 0;
              } else {
                resultArray[bufferIndex++] = 1;
              }var lenStr = ab.byteLength.toString();for (var i = 0; i < lenStr.length; i++) {
                resultArray[bufferIndex++] = parseInt(lenStr[i]);
              }resultArray[bufferIndex++] = 255;var view = new Uint8Array(ab);for (var i = 0; i < view.length; i++) {
                resultArray[bufferIndex++] = view[i];
              }
            });return callback(resultArray.buffer);
          });
        };exports.encodePayloadAsBlob = function (packets, callback) {
          function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, true, true, function (encoded) {
              var binaryIdentifier = new Uint8Array(1);binaryIdentifier[0] = 1;if (typeof encoded === "string") {
                var view = new Uint8Array(encoded.length);for (var i = 0; i < encoded.length; i++) {
                  view[i] = encoded.charCodeAt(i);
                }encoded = view.buffer;binaryIdentifier[0] = 0;
              }var len = encoded instanceof ArrayBuffer ? encoded.byteLength : encoded.size;var lenStr = len.toString();var lengthAry = new Uint8Array(lenStr.length + 1);for (var i = 0; i < lenStr.length; i++) {
                lengthAry[i] = parseInt(lenStr[i]);
              }lengthAry[lenStr.length] = 255;if (Blob) {
                var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);doneCallback(null, blob);
              }
            });
          }map(packets, encodeOne, function (err, results) {
            return callback(new Blob(results));
          });
        };exports.decodePayloadAsBinary = function (data, binaryType, callback) {
          if (typeof binaryType === "function") {
            callback = binaryType;binaryType = null;
          }var bufferTail = data;var buffers = [];var numberTooLong = false;while (bufferTail.byteLength > 0) {
            var tailArray = new Uint8Array(bufferTail);var isString = tailArray[0] === 0;var msgLength = "";for (var i = 1;; i++) {
              if (tailArray[i] == 255) break;if (msgLength.length > 310) {
                numberTooLong = true;break;
              }msgLength += tailArray[i];
            }if (numberTooLong) return callback(err, 0, 1);bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);msgLength = parseInt(msgLength);var msg = sliceBuffer(bufferTail, 0, msgLength);if (isString) {
              try {
                msg = String.fromCharCode.apply(null, new Uint8Array(msg));
              } catch (e) {
                var typed = new Uint8Array(msg);msg = "";for (var i = 0; i < typed.length; i++) {
                  msg += String.fromCharCode(typed[i]);
                }
              }
            }buffers.push(msg);bufferTail = sliceBuffer(bufferTail, msgLength);
          }var total = buffers.length;buffers.forEach(function (buffer, i) {
            callback(exports.decodePacket(buffer, binaryType, true), i, total);
          });
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./keys": 20, after: 11, "arraybuffer.slice": 12, "base64-arraybuffer": 13, blob: 14, "has-binary": 21, utf8: 29 }], 20: [function (_dereq_, module, exports) {
      module.exports = Object.keys || function keys(obj) {
        var arr = [];var has = Object.prototype.hasOwnProperty;for (var i in obj) {
          if (has.call(obj, i)) {
            arr.push(i);
          }
        }return arr;
      };
    }, {}], 21: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");module.exports = hasBinary;function hasBinary(data) {
          function _hasBinary(obj) {
            if (!obj) return false;if (global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              return true;
            }if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                if (_hasBinary(obj[i])) {
                  return true;
                }
              }
            } else if (obj && "object" == typeof obj) {
              if (obj.toJSON) {
                obj = obj.toJSON();
              }for (var key in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {
                  return true;
                }
              }
            }return false;
          }return _hasBinary(data);
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { isarray: 24 }], 22: [function (_dereq_, module, exports) {
      try {
        module.exports = typeof XMLHttpRequest !== "undefined" && "withCredentials" in new XMLHttpRequest();
      } catch (err) {
        module.exports = false;
      }
    }, {}], 23: [function (_dereq_, module, exports) {
      var indexOf = [].indexOf;module.exports = function (arr, obj) {
        if (indexOf) return arr.indexOf(obj);for (var i = 0; i < arr.length; ++i) {
          if (arr[i] === obj) return i;
        }return -1;
      };
    }, {}], 24: [function (_dereq_, module, exports) {
      module.exports = Array.isArray || function (arr) {
        return Object.prototype.toString.call(arr) == "[object Array]";
      };
    }, {}], 25: [function (_dereq_, module, exports) {
      var s = 1e3;var m = s * 60;var h = m * 60;var d = h * 24;var y = d * 365.25;module.exports = function (val, options) {
        options = options || {};if ("string" == typeof val) return parse(val);return options.long ? long(val) : short(val);
      };function parse(str) {
        str = "" + str;if (str.length > 1e4) return;var match = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if (!match) return;var n = parseFloat(match[1]);var type = (match[2] || "ms").toLowerCase();switch (type) {case "years":case "year":case "yrs":case "yr":case "y":
            return n * y;case "days":case "day":case "d":
            return n * d;case "hours":case "hour":case "hrs":case "hr":case "h":
            return n * h;case "minutes":case "minute":case "mins":case "min":case "m":
            return n * m;case "seconds":case "second":case "secs":case "sec":case "s":
            return n * s;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":
            return n;}
      }function short(ms) {
        if (ms >= d) return Math.round(ms / d) + "d";if (ms >= h) return Math.round(ms / h) + "h";if (ms >= m) return Math.round(ms / m) + "m";if (ms >= s) return Math.round(ms / s) + "s";return ms + "ms";
      }function long(ms) {
        return plural(ms, d, "day") || plural(ms, h, "hour") || plural(ms, m, "minute") || plural(ms, s, "second") || ms + " ms";
      }function plural(ms, n, name) {
        if (ms < n) return;if (ms < n * 1.5) return Math.floor(ms / n) + " " + name;return Math.ceil(ms / n) + " " + name + "s";
      }
    }, {}], 26: [function (_dereq_, module, exports) {
      (function (global) {
        var rvalidchars = /^[\],:{}\s]*$/;var rvalidescape = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft = /^\s+/;var rtrimRight = /\s+$/;module.exports = function parsejson(data) {
          if ("string" != typeof data || !data) {
            return null;
          }data = data.replace(rtrimLeft, "").replace(rtrimRight, "");if (global.JSON && JSON.parse) {
            return JSON.parse(data);
          }if (rvalidchars.test(data.replace(rvalidescape, "@").replace(rvalidtokens, "]").replace(rvalidbraces, ""))) {
            return new Function("return " + data)();
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 27: [function (_dereq_, module, exports) {
      exports.encode = function (obj) {
        var str = "";for (var i in obj) {
          if (obj.hasOwnProperty(i)) {
            if (str.length) str += "&";str += encodeURIComponent(i) + "=" + encodeURIComponent(obj[i]);
          }
        }return str;
      };exports.decode = function (qs) {
        var qry = {};var pairs = qs.split("&");for (var i = 0, l = pairs.length; i < l; i++) {
          var pair = pairs[i].split("=");qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
        }return qry;
      };
    }, {}], 28: [function (_dereq_, module, exports) {
      var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];module.exports = function parseuri(str) {
        var src = str,
            b = str.indexOf("["),
            e = str.indexOf("]");if (b != -1 && e != -1) {
          str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ";") + str.substring(e, str.length);
        }var m = re.exec(str || ""),
            uri = {},
            i = 14;while (i--) {
          uri[parts[i]] = m[i] || "";
        }if (b != -1 && e != -1) {
          uri.source = src;uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ":");uri.authority = uri.authority.replace("[", "").replace("]", "").replace(/;/g, ":");uri.ipv6uri = true;
        }return uri;
      };
    }, {}], 29: [function (_dereq_, module, exports) {
      (function (global) {
        (function (root) {
          var freeExports = typeof exports == "object" && exports;var freeModule = typeof module == "object" && module && module.exports == freeExports && module;var freeGlobal = typeof global == "object" && global;if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {
            root = freeGlobal;
          }var stringFromCharCode = String.fromCharCode;function ucs2decode(string) {
            var output = [];var counter = 0;var length = string.length;var value;var extra;while (counter < length) {
              value = string.charCodeAt(counter++);if (value >= 55296 && value <= 56319 && counter < length) {
                extra = string.charCodeAt(counter++);if ((extra & 64512) == 56320) {
                  output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
                } else {
                  output.push(value);counter--;
                }
              } else {
                output.push(value);
              }
            }return output;
          }function ucs2encode(array) {
            var length = array.length;var index = -1;var value;var output = "";while (++index < length) {
              value = array[index];if (value > 65535) {
                value -= 65536;output += stringFromCharCode(value >>> 10 & 1023 | 55296);value = 56320 | value & 1023;
              }output += stringFromCharCode(value);
            }return output;
          }function checkScalarValue(codePoint) {
            if (codePoint >= 55296 && codePoint <= 57343) {
              throw Error("Lone surrogate U+" + codePoint.toString(16).toUpperCase() + " is not a scalar value");
            }
          }function createByte(codePoint, shift) {
            return stringFromCharCode(codePoint >> shift & 63 | 128);
          }function encodeCodePoint(codePoint) {
            if ((codePoint & 4294967168) == 0) {
              return stringFromCharCode(codePoint);
            }var symbol = "";if ((codePoint & 4294965248) == 0) {
              symbol = stringFromCharCode(codePoint >> 6 & 31 | 192);
            } else if ((codePoint & 4294901760) == 0) {
              checkScalarValue(codePoint);symbol = stringFromCharCode(codePoint >> 12 & 15 | 224);symbol += createByte(codePoint, 6);
            } else if ((codePoint & 4292870144) == 0) {
              symbol = stringFromCharCode(codePoint >> 18 & 7 | 240);symbol += createByte(codePoint, 12);symbol += createByte(codePoint, 6);
            }symbol += stringFromCharCode(codePoint & 63 | 128);return symbol;
          }function utf8encode(string) {
            var codePoints = ucs2decode(string);var length = codePoints.length;var index = -1;var codePoint;var byteString = "";while (++index < length) {
              codePoint = codePoints[index];byteString += encodeCodePoint(codePoint);
            }return byteString;
          }function readContinuationByte() {
            if (byteIndex >= byteCount) {
              throw Error("Invalid byte index");
            }var continuationByte = byteArray[byteIndex] & 255;byteIndex++;if ((continuationByte & 192) == 128) {
              return continuationByte & 63;
            }throw Error("Invalid continuation byte");
          }function decodeSymbol() {
            var byte1;var byte2;var byte3;var byte4;var codePoint;if (byteIndex > byteCount) {
              throw Error("Invalid byte index");
            }if (byteIndex == byteCount) {
              return false;
            }byte1 = byteArray[byteIndex] & 255;byteIndex++;if ((byte1 & 128) == 0) {
              return byte1;
            }if ((byte1 & 224) == 192) {
              var byte2 = readContinuationByte();codePoint = (byte1 & 31) << 6 | byte2;if (codePoint >= 128) {
                return codePoint;
              } else {
                throw Error("Invalid continuation byte");
              }
            }if ((byte1 & 240) == 224) {
              byte2 = readContinuationByte();byte3 = readContinuationByte();codePoint = (byte1 & 15) << 12 | byte2 << 6 | byte3;if (codePoint >= 2048) {
                checkScalarValue(codePoint);return codePoint;
              } else {
                throw Error("Invalid continuation byte");
              }
            }if ((byte1 & 248) == 240) {
              byte2 = readContinuationByte();byte3 = readContinuationByte();byte4 = readContinuationByte();codePoint = (byte1 & 15) << 18 | byte2 << 12 | byte3 << 6 | byte4;if (codePoint >= 65536 && codePoint <= 1114111) {
                return codePoint;
              }
            }throw Error("Invalid UTF-8 detected");
          }var byteArray;var byteCount;var byteIndex;function utf8decode(byteString) {
            byteArray = ucs2decode(byteString);byteCount = byteArray.length;byteIndex = 0;var codePoints = [];var tmp;while ((tmp = decodeSymbol()) !== false) {
              codePoints.push(tmp);
            }return ucs2encode(codePoints);
          }var utf8 = { version: "2.0.0", encode: utf8encode, decode: utf8decode };if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
            define(function () {
              return utf8;
            });
          } else if (freeExports && !freeExports.nodeType) {
            if (freeModule) {
              freeModule.exports = utf8;
            } else {
              var object = {};var hasOwnProperty = object.hasOwnProperty;for (var key in utf8) {
                hasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);
              }
            }
          } else {
            root.utf8 = utf8;
          }
        })(this);
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 30: [function (_dereq_, module, exports) {
      "use strict";var alphabet = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
          length = 64,
          map = {},
          seed = 0,
          i = 0,
          prev;function encode(num) {
        var encoded = "";do {
          encoded = alphabet[num % length] + encoded;num = Math.floor(num / length);
        } while (num > 0);return encoded;
      }function decode(str) {
        var decoded = 0;for (i = 0; i < str.length; i++) {
          decoded = decoded * length + map[str.charAt(i)];
        }return decoded;
      }function yeast() {
        var now = encode(+new Date());if (now !== prev) return seed = 0, prev = now;return now + "." + encode(seed++);
      }for (; i < length; i++) map[alphabet[i]] = i;yeast.encode = encode;yeast.decode = decode;module.exports = yeast;
    }, {}], 31: [function (_dereq_, module, exports) {
      var url = _dereq_("./url");var parser = _dereq_("socket.io-parser");var Manager = _dereq_("./manager");var debug = _dereq_("debug")("socket.io-client");module.exports = exports = lookup;var cache = exports.managers = {};function lookup(uri, opts) {
        if (typeof uri == "object") {
          opts = uri;uri = undefined;
        }opts = opts || {};var parsed = url(uri);var source = parsed.source;var id = parsed.id;var path = parsed.path;var sameNamespace = cache[id] && path in cache[id].nsps;var newConnection = opts.forceNew || opts["force new connection"] || false === opts.multiplex || sameNamespace;var io;if (newConnection) {
          debug("ignoring socket cache for %s", source);io = Manager(source, opts);
        } else {
          if (!cache[id]) {
            debug("new io instance for %s", source);cache[id] = Manager(source, opts);
          }io = cache[id];
        }return io.socket(parsed.path);
      }exports.protocol = parser.protocol;exports.connect = lookup;exports.Manager = _dereq_("./manager");exports.Socket = _dereq_("./socket");
    }, { "./manager": 32, "./socket": 34, "./url": 35, debug: 39, "socket.io-parser": 47 }], 32: [function (_dereq_, module, exports) {
      var eio = _dereq_("engine.io-client");var Socket = _dereq_("./socket");var Emitter = _dereq_("component-emitter");var parser = _dereq_("socket.io-parser");var on = _dereq_("./on");var bind = _dereq_("component-bind");var debug = _dereq_("debug")("socket.io-client:manager");var indexOf = _dereq_("indexof");var Backoff = _dereq_("backo2");var has = Object.prototype.hasOwnProperty;module.exports = Manager;function Manager(uri, opts) {
        if (!(this instanceof Manager)) return new Manager(uri, opts);if (uri && "object" == typeof uri) {
          opts = uri;uri = undefined;
        }opts = opts || {};opts.path = opts.path || "/socket.io";this.nsps = {};this.subs = [];this.opts = opts;this.reconnection(opts.reconnection !== false);this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);this.reconnectionDelay(opts.reconnectionDelay || 1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax || 5e3);this.randomizationFactor(opts.randomizationFactor || .5);this.backoff = new Backoff({ min: this.reconnectionDelay(), max: this.reconnectionDelayMax(), jitter: this.randomizationFactor() });this.timeout(null == opts.timeout ? 2e4 : opts.timeout);this.readyState = "closed";this.uri = uri;this.connecting = [];this.lastPing = null;this.encoding = false;this.packetBuffer = [];this.encoder = new parser.Encoder();this.decoder = new parser.Decoder();this.autoConnect = opts.autoConnect !== false;if (this.autoConnect) this.open();
      }Manager.prototype.emitAll = function () {
        this.emit.apply(this, arguments);for (var nsp in this.nsps) {
          if (has.call(this.nsps, nsp)) {
            this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);
          }
        }
      };Manager.prototype.updateSocketIds = function () {
        for (var nsp in this.nsps) {
          if (has.call(this.nsps, nsp)) {
            this.nsps[nsp].id = this.engine.id;
          }
        }
      };Emitter(Manager.prototype);Manager.prototype.reconnection = function (v) {
        if (!arguments.length) return this._reconnection;this._reconnection = !!v;return this;
      };Manager.prototype.reconnectionAttempts = function (v) {
        if (!arguments.length) return this._reconnectionAttempts;this._reconnectionAttempts = v;return this;
      };Manager.prototype.reconnectionDelay = function (v) {
        if (!arguments.length) return this._reconnectionDelay;this._reconnectionDelay = v;this.backoff && this.backoff.setMin(v);return this;
      };Manager.prototype.randomizationFactor = function (v) {
        if (!arguments.length) return this._randomizationFactor;this._randomizationFactor = v;this.backoff && this.backoff.setJitter(v);return this;
      };Manager.prototype.reconnectionDelayMax = function (v) {
        if (!arguments.length) return this._reconnectionDelayMax;this._reconnectionDelayMax = v;this.backoff && this.backoff.setMax(v);return this;
      };Manager.prototype.timeout = function (v) {
        if (!arguments.length) return this._timeout;this._timeout = v;return this;
      };Manager.prototype.maybeReconnectOnOpen = function () {
        if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {
          this.reconnect();
        }
      };Manager.prototype.open = Manager.prototype.connect = function (fn) {
        debug("readyState %s", this.readyState);if (~this.readyState.indexOf("open")) return this;debug("opening %s", this.uri);this.engine = eio(this.uri, this.opts);var socket = this.engine;var self = this;this.readyState = "opening";this.skipReconnect = false;var openSub = on(socket, "open", function () {
          self.onopen();fn && fn();
        });var errorSub = on(socket, "error", function (data) {
          debug("connect_error");self.cleanup();self.readyState = "closed";self.emitAll("connect_error", data);if (fn) {
            var err = new Error("Connection error");err.data = data;fn(err);
          } else {
            self.maybeReconnectOnOpen();
          }
        });if (false !== this._timeout) {
          var timeout = this._timeout;debug("connect attempt will timeout after %d", timeout);var timer = setTimeout(function () {
            debug("connect attempt timed out after %d", timeout);openSub.destroy();socket.close();socket.emit("error", "timeout");self.emitAll("connect_timeout", timeout);
          }, timeout);this.subs.push({ destroy: function destroy() {
              clearTimeout(timer);
            } });
        }this.subs.push(openSub);this.subs.push(errorSub);return this;
      };Manager.prototype.onopen = function () {
        debug("open");this.cleanup();this.readyState = "open";this.emit("open");var socket = this.engine;this.subs.push(on(socket, "data", bind(this, "ondata")));this.subs.push(on(socket, "ping", bind(this, "onping")));this.subs.push(on(socket, "pong", bind(this, "onpong")));this.subs.push(on(socket, "error", bind(this, "onerror")));this.subs.push(on(socket, "close", bind(this, "onclose")));this.subs.push(on(this.decoder, "decoded", bind(this, "ondecoded")));
      };Manager.prototype.onping = function () {
        this.lastPing = new Date();this.emitAll("ping");
      };Manager.prototype.onpong = function () {
        this.emitAll("pong", new Date() - this.lastPing);
      };Manager.prototype.ondata = function (data) {
        this.decoder.add(data);
      };Manager.prototype.ondecoded = function (packet) {
        this.emit("packet", packet);
      };Manager.prototype.onerror = function (err) {
        debug("error", err);this.emitAll("error", err);
      };Manager.prototype.socket = function (nsp) {
        var socket = this.nsps[nsp];if (!socket) {
          socket = new Socket(this, nsp);this.nsps[nsp] = socket;var self = this;socket.on("connecting", onConnecting);
          socket.on("connect", function () {
            socket.id = self.engine.id;
          });if (this.autoConnect) {
            onConnecting();
          }
        }function onConnecting() {
          if (! ~indexOf(self.connecting, socket)) {
            self.connecting.push(socket);
          }
        }return socket;
      };Manager.prototype.destroy = function (socket) {
        var index = indexOf(this.connecting, socket);if (~index) this.connecting.splice(index, 1);if (this.connecting.length) return;this.close();
      };Manager.prototype.packet = function (packet) {
        debug("writing packet %j", packet);var self = this;if (!self.encoding) {
          self.encoding = true;this.encoder.encode(packet, function (encodedPackets) {
            for (var i = 0; i < encodedPackets.length; i++) {
              self.engine.write(encodedPackets[i], packet.options);
            }self.encoding = false;self.processPacketQueue();
          });
        } else {
          self.packetBuffer.push(packet);
        }
      };Manager.prototype.processPacketQueue = function () {
        if (this.packetBuffer.length > 0 && !this.encoding) {
          var pack = this.packetBuffer.shift();this.packet(pack);
        }
      };Manager.prototype.cleanup = function () {
        debug("cleanup");var sub;while (sub = this.subs.shift()) sub.destroy();this.packetBuffer = [];this.encoding = false;this.lastPing = null;this.decoder.destroy();
      };Manager.prototype.close = Manager.prototype.disconnect = function () {
        debug("disconnect");this.skipReconnect = true;this.reconnecting = false;if ("opening" == this.readyState) {
          this.cleanup();
        }this.backoff.reset();this.readyState = "closed";if (this.engine) this.engine.close();
      };Manager.prototype.onclose = function (reason) {
        debug("onclose");this.cleanup();this.backoff.reset();this.readyState = "closed";this.emit("close", reason);if (this._reconnection && !this.skipReconnect) {
          this.reconnect();
        }
      };Manager.prototype.reconnect = function () {
        if (this.reconnecting || this.skipReconnect) return this;var self = this;if (this.backoff.attempts >= this._reconnectionAttempts) {
          debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting = false;
        } else {
          var delay = this.backoff.duration();debug("will wait %dms before reconnect attempt", delay);this.reconnecting = true;var timer = setTimeout(function () {
            if (self.skipReconnect) return;debug("attempting reconnect");self.emitAll("reconnect_attempt", self.backoff.attempts);self.emitAll("reconnecting", self.backoff.attempts);if (self.skipReconnect) return;self.open(function (err) {
              if (err) {
                debug("reconnect attempt error");self.reconnecting = false;self.reconnect();self.emitAll("reconnect_error", err.data);
              } else {
                debug("reconnect success");self.onreconnect();
              }
            });
          }, delay);this.subs.push({ destroy: function destroy() {
              clearTimeout(timer);
            } });
        }
      };Manager.prototype.onreconnect = function () {
        var attempt = this.backoff.attempts;this.reconnecting = false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect", attempt);
      };
    }, { "./on": 33, "./socket": 34, backo2: 36, "component-bind": 37, "component-emitter": 38, debug: 39, "engine.io-client": 1, indexof: 42, "socket.io-parser": 47 }], 33: [function (_dereq_, module, exports) {
      module.exports = on;function on(obj, ev, fn) {
        obj.on(ev, fn);return { destroy: function destroy() {
            obj.removeListener(ev, fn);
          } };
      }
    }, {}], 34: [function (_dereq_, module, exports) {
      var parser = _dereq_("socket.io-parser");var Emitter = _dereq_("component-emitter");var toArray = _dereq_("to-array");var on = _dereq_("./on");var bind = _dereq_("component-bind");var debug = _dereq_("debug")("socket.io-client:socket");var hasBin = _dereq_("has-binary");module.exports = exports = Socket;var events = { connect: 1, connect_error: 1, connect_timeout: 1, connecting: 1, disconnect: 1, error: 1, reconnect: 1, reconnect_attempt: 1, reconnect_failed: 1, reconnect_error: 1, reconnecting: 1, ping: 1, pong: 1 };var emit = Emitter.prototype.emit;function Socket(io, nsp) {
        this.io = io;this.nsp = nsp;this.json = this;this.ids = 0;this.acks = {};this.receiveBuffer = [];this.sendBuffer = [];this.connected = false;this.disconnected = true;if (this.io.autoConnect) this.open();
      }Emitter(Socket.prototype);Socket.prototype.subEvents = function () {
        if (this.subs) return;var io = this.io;this.subs = [on(io, "open", bind(this, "onopen")), on(io, "packet", bind(this, "onpacket")), on(io, "close", bind(this, "onclose"))];
      };Socket.prototype.open = Socket.prototype.connect = function () {
        if (this.connected) return this;this.subEvents();this.io.open();if ("open" == this.io.readyState) this.onopen();this.emit("connecting");return this;
      };Socket.prototype.send = function () {
        var args = toArray(arguments);args.unshift("message");this.emit.apply(this, args);return this;
      };Socket.prototype.emit = function (ev) {
        if (events.hasOwnProperty(ev)) {
          emit.apply(this, arguments);return this;
        }var args = toArray(arguments);var parserType = parser.EVENT;if (hasBin(args)) {
          parserType = parser.BINARY_EVENT;
        }var packet = { type: parserType, data: args };packet.options = {};packet.options.compress = !this.flags || false !== this.flags.compress;if ("function" == typeof args[args.length - 1]) {
          debug("emitting packet with ack id %d", this.ids);this.acks[this.ids] = args.pop();packet.id = this.ids++;
        }if (this.connected) {
          this.packet(packet);
        } else {
          this.sendBuffer.push(packet);
        }delete this.flags;return this;
      };Socket.prototype.packet = function (packet) {
        packet.nsp = this.nsp;this.io.packet(packet);
      };Socket.prototype.onopen = function () {
        debug("transport is open - connecting");if ("/" != this.nsp) {
          this.packet({ type: parser.CONNECT });
        }
      };Socket.prototype.onclose = function (reason) {
        debug("close (%s)", reason);this.connected = false;this.disconnected = true;delete this.id;this.emit("disconnect", reason);
      };Socket.prototype.onpacket = function (packet) {
        if (packet.nsp != this.nsp) return;switch (packet.type) {case parser.CONNECT:
            this.onconnect();break;case parser.EVENT:
            this.onevent(packet);break;case parser.BINARY_EVENT:
            this.onevent(packet);break;case parser.ACK:
            this.onack(packet);break;case parser.BINARY_ACK:
            this.onack(packet);break;case parser.DISCONNECT:
            this.ondisconnect();break;case parser.ERROR:
            this.emit("error", packet.data);break;}
      };Socket.prototype.onevent = function (packet) {
        var args = packet.data || [];debug("emitting event %j", args);if (null != packet.id) {
          debug("attaching ack callback to event");args.push(this.ack(packet.id));
        }if (this.connected) {
          emit.apply(this, args);
        } else {
          this.receiveBuffer.push(args);
        }
      };Socket.prototype.ack = function (id) {
        var self = this;var sent = false;return function () {
          if (sent) return;sent = true;var args = toArray(arguments);debug("sending ack %j", args);var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;self.packet({ type: type, id: id, data: args });
        };
      };Socket.prototype.onack = function (packet) {
        var ack = this.acks[packet.id];if ("function" == typeof ack) {
          debug("calling ack %s with %j", packet.id, packet.data);ack.apply(this, packet.data);delete this.acks[packet.id];
        } else {
          debug("bad ack %s", packet.id);
        }
      };Socket.prototype.onconnect = function () {
        this.connected = true;this.disconnected = false;this.emit("connect");this.emitBuffered();
      };Socket.prototype.emitBuffered = function () {
        var i;for (i = 0; i < this.receiveBuffer.length; i++) {
          emit.apply(this, this.receiveBuffer[i]);
        }this.receiveBuffer = [];for (i = 0; i < this.sendBuffer.length; i++) {
          this.packet(this.sendBuffer[i]);
        }this.sendBuffer = [];
      };Socket.prototype.ondisconnect = function () {
        debug("server disconnect (%s)", this.nsp);this.destroy();this.onclose("io server disconnect");
      };Socket.prototype.destroy = function () {
        if (this.subs) {
          for (var i = 0; i < this.subs.length; i++) {
            this.subs[i].destroy();
          }this.subs = null;
        }this.io.destroy(this);
      };Socket.prototype.close = Socket.prototype.disconnect = function () {
        if (this.connected) {
          debug("performing disconnect (%s)", this.nsp);this.packet({ type: parser.DISCONNECT });
        }this.destroy();if (this.connected) {
          this.onclose("io client disconnect");
        }return this;
      };Socket.prototype.compress = function (compress) {
        this.flags = this.flags || {};this.flags.compress = compress;return this;
      };
    }, { "./on": 33, "component-bind": 37, "component-emitter": 38, debug: 39, "has-binary": 41, "socket.io-parser": 47, "to-array": 51 }], 35: [function (_dereq_, module, exports) {
      (function (global) {
        var parseuri = _dereq_("parseuri");var debug = _dereq_("debug")("socket.io-client:url");module.exports = url;function url(uri, loc) {
          var obj = uri;var loc = loc || global.location;if (null == uri) uri = loc.protocol + "//" + loc.host;if ("string" == typeof uri) {
            if ("/" == uri.charAt(0)) {
              if ("/" == uri.charAt(1)) {
                uri = loc.protocol + uri;
              } else {
                uri = loc.host + uri;
              }
            }if (!/^(https?|wss?):\/\//.test(uri)) {
              debug("protocol-less url %s", uri);if ("undefined" != typeof loc) {
                uri = loc.protocol + "//" + uri;
              } else {
                uri = "https://" + uri;
              }
            }debug("parse %s", uri);obj = parseuri(uri);
          }if (!obj.port) {
            if (/^(http|ws)$/.test(obj.protocol)) {
              obj.port = "80";
            } else if (/^(http|ws)s$/.test(obj.protocol)) {
              obj.port = "443";
            }
          }obj.path = obj.path || "/";var ipv6 = obj.host.indexOf(":") !== -1;var host = ipv6 ? "[" + obj.host + "]" : obj.host;obj.id = obj.protocol + "://" + host + ":" + obj.port;obj.href = obj.protocol + "://" + host + (loc && loc.port == obj.port ? "" : ":" + obj.port);return obj;
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { debug: 39, parseuri: 45 }], 36: [function (_dereq_, module, exports) {
      module.exports = Backoff;function Backoff(opts) {
        opts = opts || {};this.ms = opts.min || 100;this.max = opts.max || 1e4;this.factor = opts.factor || 2;this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;this.attempts = 0;
      }Backoff.prototype.duration = function () {
        var ms = this.ms * Math.pow(this.factor, this.attempts++);if (this.jitter) {
          var rand = Math.random();var deviation = Math.floor(rand * this.jitter * ms);ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;
        }return Math.min(ms, this.max) | 0;
      };Backoff.prototype.reset = function () {
        this.attempts = 0;
      };Backoff.prototype.setMin = function (min) {
        this.ms = min;
      };Backoff.prototype.setMax = function (max) {
        this.max = max;
      };Backoff.prototype.setJitter = function (jitter) {
        this.jitter = jitter;
      };
    }, {}], 37: [function (_dereq_, module, exports) {
      var slice = [].slice;module.exports = function (obj, fn) {
        if ("string" == typeof fn) fn = obj[fn];if ("function" != typeof fn) throw new Error("bind() requires a function");var args = slice.call(arguments, 2);return function () {
          return fn.apply(obj, args.concat(slice.call(arguments)));
        };
      };
    }, {}], 38: [function (_dereq_, module, exports) {
      module.exports = Emitter;function Emitter(obj) {
        if (obj) return mixin(obj);
      }function mixin(obj) {
        for (var key in Emitter.prototype) {
          obj[key] = Emitter.prototype[key];
        }return obj;
      }Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};(this._callbacks["$" + event] = this._callbacks["$" + event] || []).push(fn);return this;
      };Emitter.prototype.once = function (event, fn) {
        function on() {
          this.off(event, on);fn.apply(this, arguments);
        }on.fn = fn;this.on(event, on);return this;
      };Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};if (0 == arguments.length) {
          this._callbacks = {};return this;
        }var callbacks = this._callbacks["$" + event];if (!callbacks) return this;if (1 == arguments.length) {
          delete this._callbacks["$" + event];return this;
        }var cb;for (var i = 0; i < callbacks.length; i++) {
          cb = callbacks[i];if (cb === fn || cb.fn === fn) {
            callbacks.splice(i, 1);break;
          }
        }return this;
      };Emitter.prototype.emit = function (event) {
        this._callbacks = this._callbacks || {};var args = [].slice.call(arguments, 1),
            callbacks = this._callbacks["$" + event];if (callbacks) {
          callbacks = callbacks.slice(0);for (var i = 0, len = callbacks.length; i < len; ++i) {
            callbacks[i].apply(this, args);
          }
        }return this;
      };Emitter.prototype.listeners = function (event) {
        this._callbacks = this._callbacks || {};return this._callbacks["$" + event] || [];
      };Emitter.prototype.hasListeners = function (event) {
        return !!this.listeners(event).length;
      };
    }, {}], 39: [function (_dereq_, module, exports) {
      arguments[4][17][0].apply(exports, arguments);
    }, { "./debug": 40, dup: 17 }], 40: [function (_dereq_, module, exports) {
      arguments[4][18][0].apply(exports, arguments);
    }, { dup: 18, ms: 44 }], 41: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");module.exports = hasBinary;function hasBinary(data) {
          function _hasBinary(obj) {
            if (!obj) return false;if (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              return true;
            }if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                if (_hasBinary(obj[i])) {
                  return true;
                }
              }
            } else if (obj && "object" == typeof obj) {
              if (obj.toJSON && "function" == typeof obj.toJSON) {
                obj = obj.toJSON();
              }for (var key in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {
                  return true;
                }
              }
            }return false;
          }return _hasBinary(data);
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { isarray: 43 }], 42: [function (_dereq_, module, exports) {
      arguments[4][23][0].apply(exports, arguments);
    }, { dup: 23 }], 43: [function (_dereq_, module, exports) {
      arguments[4][24][0].apply(exports, arguments);
    }, { dup: 24 }], 44: [function (_dereq_, module, exports) {
      arguments[4][25][0].apply(exports, arguments);
    }, { dup: 25 }], 45: [function (_dereq_, module, exports) {
      arguments[4][28][0].apply(exports, arguments);
    }, { dup: 28 }], 46: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");var isBuf = _dereq_("./is-buffer");exports.deconstructPacket = function (packet) {
          var buffers = [];var packetData = packet.data;function _deconstructPacket(data) {
            if (!data) return data;if (isBuf(data)) {
              var placeholder = { _placeholder: true, num: buffers.length };buffers.push(data);return placeholder;
            } else if (isArray(data)) {
              var newData = new Array(data.length);for (var i = 0; i < data.length; i++) {
                newData[i] = _deconstructPacket(data[i]);
              }return newData;
            } else if ("object" == typeof data && !(data instanceof Date)) {
              var newData = {};for (var key in data) {
                newData[key] = _deconstructPacket(data[key]);
              }return newData;
            }return data;
          }var pack = packet;pack.data = _deconstructPacket(packetData);pack.attachments = buffers.length;return { packet: pack, buffers: buffers };
        };exports.reconstructPacket = function (packet, buffers) {
          var curPlaceHolder = 0;function _reconstructPacket(data) {
            if (data && data._placeholder) {
              var buf = buffers[data.num];return buf;
            } else if (isArray(data)) {
              for (var i = 0; i < data.length; i++) {
                data[i] = _reconstructPacket(data[i]);
              }return data;
            } else if (data && "object" == typeof data) {
              for (var key in data) {
                data[key] = _reconstructPacket(data[key]);
              }return data;
            }return data;
          }packet.data = _reconstructPacket(packet.data);packet.attachments = undefined;return packet;
        };exports.removeBlobs = function (data, callback) {
          function _removeBlobs(obj, curKey, containingObject) {
            if (!obj) return obj;if (global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              pendingBlobs++;var fileReader = new FileReader();fileReader.onload = function () {
                if (containingObject) {
                  containingObject[curKey] = this.result;
                } else {
                  bloblessData = this.result;
                }if (! --pendingBlobs) {
                  callback(bloblessData);
                }
              };fileReader.readAsArrayBuffer(obj);
            } else if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                _removeBlobs(obj[i], i, obj);
              }
            } else if (obj && "object" == typeof obj && !isBuf(obj)) {
              for (var key in obj) {
                _removeBlobs(obj[key], key, obj);
              }
            }
          }var pendingBlobs = 0;var bloblessData = data;_removeBlobs(bloblessData);if (!pendingBlobs) {
            callback(bloblessData);
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./is-buffer": 48, isarray: 43 }], 47: [function (_dereq_, module, exports) {
      var debug = _dereq_("debug")("socket.io-parser");var json = _dereq_("json3");var isArray = _dereq_("isarray");var Emitter = _dereq_("component-emitter");var binary = _dereq_("./binary");var isBuf = _dereq_("./is-buffer");exports.protocol = 4;exports.types = ["CONNECT", "DISCONNECT", "EVENT", "BINARY_EVENT", "ACK", "BINARY_ACK", "ERROR"];exports.CONNECT = 0;exports.DISCONNECT = 1;exports.EVENT = 2;exports.ACK = 3;exports.ERROR = 4;exports.BINARY_EVENT = 5;exports.BINARY_ACK = 6;exports.Encoder = Encoder;exports.Decoder = Decoder;function Encoder() {}Encoder.prototype.encode = function (obj, callback) {
        debug("encoding packet %j", obj);if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {
          encodeAsBinary(obj, callback);
        } else {
          var encoding = encodeAsString(obj);callback([encoding]);
        }
      };function encodeAsString(obj) {
        var str = "";var nsp = false;str += obj.type;if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {
          str += obj.attachments;str += "-";
        }if (obj.nsp && "/" != obj.nsp) {
          nsp = true;str += obj.nsp;
        }if (null != obj.id) {
          if (nsp) {
            str += ",";nsp = false;
          }str += obj.id;
        }if (null != obj.data) {
          if (nsp) str += ",";str += json.stringify(obj.data);
        }debug("encoded %j as %s", obj, str);return str;
      }function encodeAsBinary(obj, callback) {
        function writeEncoding(bloblessData) {
          var deconstruction = binary.deconstructPacket(bloblessData);var pack = encodeAsString(deconstruction.packet);var buffers = deconstruction.buffers;buffers.unshift(pack);callback(buffers);
        }binary.removeBlobs(obj, writeEncoding);
      }function Decoder() {
        this.reconstructor = null;
      }Emitter(Decoder.prototype);Decoder.prototype.add = function (obj) {
        var packet;if ("string" == typeof obj) {
          packet = decodeString(obj);if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) {
            this.reconstructor = new BinaryReconstructor(packet);if (this.reconstructor.reconPack.attachments === 0) {
              this.emit("decoded", packet);
            }
          } else {
            this.emit("decoded", packet);
          }
        } else if (isBuf(obj) || obj.base64) {
          if (!this.reconstructor) {
            throw new Error("got binary data when not reconstructing a packet");
          } else {
            packet = this.reconstructor.takeBinaryData(obj);if (packet) {
              this.reconstructor = null;this.emit("decoded", packet);
            }
          }
        } else {
          throw new Error("Unknown type: " + obj);
        }
      };function decodeString(str) {
        var p = {};var i = 0;p.type = Number(str.charAt(0));if (null == exports.types[p.type]) return error();if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {
          var buf = "";while (str.charAt(++i) != "-") {
            buf += str.charAt(i);if (i == str.length) break;
          }if (buf != Number(buf) || str.charAt(i) != "-") {
            throw new Error("Illegal attachments");
          }p.attachments = Number(buf);
        }if ("/" == str.charAt(i + 1)) {
          p.nsp = "";while (++i) {
            var c = str.charAt(i);if ("," == c) break;p.nsp += c;if (i == str.length) break;
          }
        } else {
          p.nsp = "/";
        }var next = str.charAt(i + 1);if ("" !== next && Number(next) == next) {
          p.id = "";while (++i) {
            var c = str.charAt(i);if (null == c || Number(c) != c) {
              --i;break;
            }p.id += str.charAt(i);if (i == str.length) break;
          }p.id = Number(p.id);
        }if (str.charAt(++i)) {
          try {
            p.data = json.parse(str.substr(i));
          } catch (e) {
            return error();
          }
        }debug("decoded %s as %j", str, p);return p;
      }Decoder.prototype.destroy = function () {
        if (this.reconstructor) {
          this.reconstructor.finishedReconstruction();
        }
      };function BinaryReconstructor(packet) {
        this.reconPack = packet;this.buffers = [];
      }BinaryReconstructor.prototype.takeBinaryData = function (binData) {
        this.buffers.push(binData);if (this.buffers.length == this.reconPack.attachments) {
          var packet = binary.reconstructPacket(this.reconPack, this.buffers);this.finishedReconstruction();return packet;
        }return null;
      };BinaryReconstructor.prototype.finishedReconstruction = function () {
        this.reconPack = null;this.buffers = [];
      };function error(data) {
        return { type: exports.ERROR, data: "parser error" };
      }
    }, { "./binary": 46, "./is-buffer": 48, "component-emitter": 49, debug: 39, isarray: 43, json3: 50 }], 48: [function (_dereq_, module, exports) {
      (function (global) {
        module.exports = isBuf;function isBuf(obj) {
          return global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer;
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 49: [function (_dereq_, module, exports) {
      arguments[4][15][0].apply(exports, arguments);
    }, { dup: 15 }], 50: [function (_dereq_, module, exports) {
      (function (global) {
        (function () {
          var isLoader = typeof define === "function" && define.amd;var objectTypes = { "function": true, object: true };var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;var root = objectTypes[typeof window] && window || this,
              freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == "object" && global;if (freeGlobal && (freeGlobal["global"] === freeGlobal || freeGlobal["window"] === freeGlobal || freeGlobal["self"] === freeGlobal)) {
            root = freeGlobal;
          }function runInContext(context, exports) {
            context || (context = root["Object"]());exports || (exports = root["Object"]());var Number = context["Number"] || root["Number"],
                String = context["String"] || root["String"],
                Object = context["Object"] || root["Object"],
                Date = context["Date"] || root["Date"],
                SyntaxError = context["SyntaxError"] || root["SyntaxError"],
                TypeError = context["TypeError"] || root["TypeError"],
                Math = context["Math"] || root["Math"],
                nativeJSON = context["JSON"] || root["JSON"];if (typeof nativeJSON == "object" && nativeJSON) {
              exports.stringify = nativeJSON.stringify;exports.parse = nativeJSON.parse;
            }var objectProto = Object.prototype,
                getClass = objectProto.toString,
                isProperty,
                forEach,
                undef;var isExtended = new Date(-0xc782b5b800cec);try {
              isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 && isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;
            } catch (exception) {}function has(name) {
              if (has[name] !== undef) {
                return has[name];
              }var isSupported;if (name == "bug-string-char-index") {
                isSupported = "a"[0] != "a";
              } else if (name == "json") {
                isSupported = has("json-stringify") && has("json-parse");
              } else {
                var value,
                    serialized = "{\"a\":[1,true,false,null,\"\\u0000\\b\\n\\f\\r\\t\"]}";if (name == "json-stringify") {
                  var stringify = exports.stringify,
                      stringifySupported = typeof stringify == "function" && isExtended;if (stringifySupported) {
                    (value = function () {
                      return 1;
                    }).toJSON = value;try {
                      stringifySupported = stringify(0) === "0" && stringify(new Number()) === "0" && stringify(new String()) == '""' && stringify(getClass) === undef && stringify(undef) === undef && stringify() === undef && stringify(value) === "1" && stringify([value]) == "[1]" && stringify([undef]) == "[null]" && stringify(null) == "null" && stringify([undef, getClass, null]) == "[null,null,null]" && stringify({ a: [value, true, false, null, "\x00\b\n\f\r	"] }) == serialized && stringify(null, value) === "1" && stringify([1, 2], null, 1) == "[\n 1,\n 2\n]" && stringify(new Date(-864e13)) == '"-271821-04-20T00:00:00.000Z"' && stringify(new Date(864e13)) == '"+275760-09-13T00:00:00.000Z"' && stringify(new Date(-621987552e5)) == '"-000001-01-01T00:00:00.000Z"' && stringify(new Date(-1)) == '"1969-12-31T23:59:59.999Z"';
                    } catch (exception) {
                      stringifySupported = false;
                    }
                  }isSupported = stringifySupported;
                }if (name == "json-parse") {
                  var parse = exports.parse;if (typeof parse == "function") {
                    try {
                      if (parse("0") === 0 && !parse(false)) {
                        value = parse(serialized);var parseSupported = value["a"].length == 5 && value["a"][0] === 1;if (parseSupported) {
                          try {
                            parseSupported = !parse('"	"');
                          } catch (exception) {}if (parseSupported) {
                            try {
                              parseSupported = parse("01") !== 1;
                            } catch (exception) {}
                          }if (parseSupported) {
                            try {
                              parseSupported = parse("1.") !== 1;
                            } catch (exception) {}
                          }
                        }
                      }
                    } catch (exception) {
                      parseSupported = false;
                    }
                  }isSupported = parseSupported;
                }
              }return has[name] = !!isSupported;
            }if (!has("json")) {
              var functionClass = "[object Function]",
                  dateClass = "[object Date]",
                  numberClass = "[object Number]",
                  stringClass = "[object String]",
                  arrayClass = "[object Array]",
                  booleanClass = "[object Boolean]";var charIndexBuggy = has("bug-string-char-index");if (!isExtended) {
                var floor = Math.floor;var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];var getDay = function getDay(year, month) {
                  return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);
                };
              }if (!(isProperty = objectProto.hasOwnProperty)) {
                isProperty = function (property) {
                  var members = {},
                      constructor;if ((members.__proto__ = null, members.__proto__ = { toString: 1 }, members).toString != getClass) {
                    isProperty = function (property) {
                      var original = this.__proto__,
                          result = (property in (this.__proto__ = null, this));this.__proto__ = original;return result;
                    };
                  } else {
                    constructor = members.constructor;isProperty = function (property) {
                      var parent = (this.constructor || constructor).prototype;return property in this && !(property in parent && this[property] === parent[property]);
                    };
                  }members = null;return isProperty.call(this, property);
                };
              }forEach = function (object, callback) {
                var size = 0,
                    Properties,
                    members,
                    property;(Properties = function () {
                  this.valueOf = 0;
                }).prototype.valueOf = 0;members = new Properties();for (property in members) {
                  if (isProperty.call(members, property)) {
                    size++;
                  }
                }Properties = members = null;if (!size) {
                  members = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];forEach = function (object, callback) {
                    var isFunction = getClass.call(object) == functionClass,
                        property,
                        length;var hasProperty = !isFunction && typeof object.constructor != "function" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;for (property in object) {
                      if (!(isFunction && property == "prototype") && hasProperty.call(object, property)) {
                        callback(property);
                      }
                    }for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));
                  };
                } else if (size == 2) {
                  forEach = function (object, callback) {
                    var members = {},
                        isFunction = getClass.call(object) == functionClass,
                        property;for (property in object) {
                      if (!(isFunction && property == "prototype") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {
                        callback(property);
                      }
                    }
                  };
                } else {
                  forEach = function (object, callback) {
                    var isFunction = getClass.call(object) == functionClass,
                        property,
                        isConstructor;for (property in object) {
                      if (!(isFunction && property == "prototype") && isProperty.call(object, property) && !(isConstructor = property === "constructor")) {
                        callback(property);
                      }
                    }if (isConstructor || isProperty.call(object, property = "constructor")) {
                      callback(property);
                    }
                  };
                }return forEach(object, callback);
              };if (!has("json-stringify")) {
                var Escapes = { 92: "\\\\", 34: '\\"', 8: "\\b", 12: "\\f", 10: "\\n", 13: "\\r", 9: "\\t" };var leadingZeroes = "000000";var toPaddedString = function toPaddedString(width, value) {
                  return (leadingZeroes + (value || 0)).slice(-width);
                };var unicodePrefix = "\\u00";var quote = function quote(value) {
                  var result = '"',
                      index = 0,
                      length = value.length,
                      useCharIndex = !charIndexBuggy || length > 10;var symbols = useCharIndex && (charIndexBuggy ? value.split("") : value);for (; index < length; index++) {
                    var charCode = value.charCodeAt(index);switch (charCode) {case 8:case 9:case 10:case 12:case 13:case 34:case 92:
                        result += Escapes[charCode];break;default:
                        if (charCode < 32) {
                          result += unicodePrefix + toPaddedString(2, charCode.toString(16));break;
                        }result += useCharIndex ? symbols[index] : value.charAt(index);}
                  }return result + '"';
                };var serialize = function serialize(property, object, callback, properties, whitespace, indentation, stack) {
                  var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;try {
                    value = object[property];
                  } catch (exception) {}if (typeof value == "object" && value) {
                    className = getClass.call(value);if (className == dateClass && !isProperty.call(value, "toJSON")) {
                      if (value > -1 / 0 && value < 1 / 0) {
                        if (getDay) {
                          date = floor(value / 864e5);for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);date = 1 + date - getDay(year, month);time = (value % 864e5 + 864e5) % 864e5;hours = floor(time / 36e5) % 24;minutes = floor(time / 6e4) % 60;seconds = floor(time / 1e3) % 60;milliseconds = time % 1e3;
                        } else {
                          year = value.getUTCFullYear();month = value.getUTCMonth();date = value.getUTCDate();hours = value.getUTCHours();minutes = value.getUTCMinutes();seconds = value.getUTCSeconds();milliseconds = value.getUTCMilliseconds();
                        }value = (year <= 0 || year >= 1e4 ? (year < 0 ? "-" : "+") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + "-" + toPaddedString(2, month + 1) + "-" + toPaddedString(2, date) + "T" + toPaddedString(2, hours) + ":" + toPaddedString(2, minutes) + ":" + toPaddedString(2, seconds) + "." + toPaddedString(3, milliseconds) + "Z";
                      } else {
                        value = null;
                      }
                    } else if (typeof value.toJSON == "function" && (className != numberClass && className != stringClass && className != arrayClass || isProperty.call(value, "toJSON"))) {
                      value = value.toJSON(property);
                    }
                  }if (callback) {
                    value = callback.call(object, property, value);
                  }if (value === null) {
                    return "null";
                  }className = getClass.call(value);if (className == booleanClass) {
                    return "" + value;
                  } else if (className == numberClass) {
                    return value > -1 / 0 && value < 1 / 0 ? "" + value : "null";
                  } else if (className == stringClass) {
                    return quote("" + value);
                  }if (typeof value == "object") {
                    for (length = stack.length; length--;) {
                      if (stack[length] === value) {
                        throw TypeError();
                      }
                    }stack.push(value);results = [];prefix = indentation;indentation += whitespace;if (className == arrayClass) {
                      for (index = 0, length = value.length; index < length; index++) {
                        element = serialize(index, value, callback, properties, whitespace, indentation, stack);results.push(element === undef ? "null" : element);
                      }result = results.length ? whitespace ? "[\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "]" : "[" + results.join(",") + "]" : "[]";
                    } else {
                      forEach(properties || value, function (property) {
                        var element = serialize(property, value, callback, properties, whitespace, indentation, stack);if (element !== undef) {
                          results.push(quote(property) + ":" + (whitespace ? " " : "") + element);
                        }
                      });result = results.length ? whitespace ? "{\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "}" : "{" + results.join(",") + "}" : "{}";
                    }stack.pop();return result;
                  }
                };exports.stringify = function (source, filter, width) {
                  var whitespace, callback, properties, className;if (objectTypes[typeof filter] && filter) {
                    if ((className = getClass.call(filter)) == functionClass) {
                      callback = filter;
                    } else if (className == arrayClass) {
                      properties = {};for (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1));
                    }
                  }if (width) {
                    if ((className = getClass.call(width)) == numberClass) {
                      if ((width -= width % 1) > 0) {
                        for (whitespace = "", width > 10 && (width = 10); whitespace.length < width; whitespace += " ");
                      }
                    } else if (className == stringClass) {
                      whitespace = width.length <= 10 ? width : width.slice(0, 10);
                    }
                  }return serialize("", (value = {}, value[""] = source, value), callback, properties, whitespace, "", []);
                };
              }if (!has("json-parse")) {
                var fromCharCode = String.fromCharCode;var Unescapes = { 92: "\\", 34: '"', 47: "/", 98: "\b", 116: "	", 110: "\n", 102: "\f", 114: "\r" };var Index, Source;var abort = function abort() {
                  Index = Source = null;throw SyntaxError();
                };var lex = function lex() {
                  var source = Source,
                      length = source.length,
                      value,
                      begin,
                      position,
                      isSigned,
                      charCode;while (Index < length) {
                    charCode = source.charCodeAt(Index);switch (charCode) {case 9:case 10:case 13:case 32:
                        Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:
                        value = charIndexBuggy ? source.charAt(Index) : source[Index];Index++;return value;case 34:
                        for (value = "@", Index++; Index < length;) {
                          charCode = source.charCodeAt(Index);if (charCode < 32) {
                            abort();
                          } else if (charCode == 92) {
                            charCode = source.charCodeAt(++Index);switch (charCode) {case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:
                                value += Unescapes[charCode];Index++;break;case 117:
                                begin = ++Index;for (position = Index + 4; Index < position; Index++) {
                                  charCode = source.charCodeAt(Index);if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {
                                    abort();
                                  }
                                }value += fromCharCode("0x" + source.slice(begin, Index));break;default:
                                abort();}
                          } else {
                            if (charCode == 34) {
                              break;
                            }charCode = source.charCodeAt(Index);begin = Index;while (charCode >= 32 && charCode != 92 && charCode != 34) {
                              charCode = source.charCodeAt(++Index);
                            }value += source.slice(begin, Index);
                          }
                        }if (source.charCodeAt(Index) == 34) {
                          Index++;return value;
                        }abort();default:
                        begin = Index;if (charCode == 45) {
                          isSigned = true;charCode = source.charCodeAt(++Index);
                        }if (charCode >= 48 && charCode <= 57) {
                          if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {
                            abort();
                          }isSigned = false;for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++);if (source.charCodeAt(Index) == 46) {
                            position = ++Index;for (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);if (position == Index) {
                              abort();
                            }Index = position;
                          }charCode = source.charCodeAt(Index);if (charCode == 101 || charCode == 69) {
                            charCode = source.charCodeAt(++Index);if (charCode == 43 || charCode == 45) {
                              Index++;
                            }for (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);if (position == Index) {
                              abort();
                            }Index = position;
                          }return +source.slice(begin, Index);
                        }if (isSigned) {
                          abort();
                        }if (source.slice(Index, Index + 4) == "true") {
                          Index += 4;return true;
                        } else if (source.slice(Index, Index + 5) == "false") {
                          Index += 5;return false;
                        } else if (source.slice(Index, Index + 4) == "null") {
                          Index += 4;return null;
                        }abort();}
                  }return "$";
                };var get = function get(value) {
                  var results, hasMembers;if (value == "$") {
                    abort();
                  }if (typeof value == "string") {
                    if ((charIndexBuggy ? value.charAt(0) : value[0]) == "@") {
                      return value.slice(1);
                    }if (value == "[") {
                      results = [];for (;; hasMembers || (hasMembers = true)) {
                        value = lex();if (value == "]") {
                          break;
                        }if (hasMembers) {
                          if (value == ",") {
                            value = lex();if (value == "]") {
                              abort();
                            }
                          } else {
                            abort();
                          }
                        }if (value == ",") {
                          abort();
                        }results.push(get(value));
                      }return results;
                    } else if (value == "{") {
                      results = {};for (;; hasMembers || (hasMembers = true)) {
                        value = lex();if (value == "}") {
                          break;
                        }if (hasMembers) {
                          if (value == ",") {
                            value = lex();if (value == "}") {
                              abort();
                            }
                          } else {
                            abort();
                          }
                        }if (value == "," || typeof value != "string" || (charIndexBuggy ? value.charAt(0) : value[0]) != "@" || lex() != ":") {
                          abort();
                        }results[value.slice(1)] = get(lex());
                      }return results;
                    }abort();
                  }return value;
                };var update = function update(source, property, callback) {
                  var element = walk(source, property, callback);if (element === undef) {
                    delete source[property];
                  } else {
                    source[property] = element;
                  }
                };var walk = function walk(source, property, callback) {
                  var value = source[property],
                      length;if (typeof value == "object" && value) {
                    if (getClass.call(value) == arrayClass) {
                      for (length = value.length; length--;) {
                        update(value, length, callback);
                      }
                    } else {
                      forEach(value, function (property) {
                        update(value, property, callback);
                      });
                    }
                  }return callback.call(source, property, value);
                };exports.parse = function (source, callback) {
                  var result, value;Index = 0;Source = "" + source;result = get(lex());if (lex() != "$") {
                    abort();
                  }Index = Source = null;return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[""] = result, value), "", callback) : result;
                };
              }
            }exports["runInContext"] = runInContext;return exports;
          }if (freeExports && !isLoader) {
            runInContext(root, freeExports);
          } else {
            var nativeJSON = root.JSON,
                previousJSON = root["JSON3"],
                isRestored = false;var JSON3 = runInContext(root, root["JSON3"] = { noConflict: function noConflict() {
                if (!isRestored) {
                  isRestored = true;root.JSON = nativeJSON;root["JSON3"] = previousJSON;nativeJSON = previousJSON = null;
                }return JSON3;
              } });root.JSON = { parse: JSON3.parse, stringify: JSON3.stringify };
          }if (isLoader) {
            define(function () {
              return JSON3;
            });
          }
        }).call(this);
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 51: [function (_dereq_, module, exports) {
      module.exports = toArray;function toArray(list, index) {
        var array = [];index = index || 0;for (var i = index || 0; i < list.length; i++) {
          array[i - index] = list[i];
        }return array;
      }
    }, {}] }, {}, [31])(31);
});

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},["data","biz-socket","socket.io","main","directionCtrl","index","lodash","fireCtrl","controller"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9Db2Nvc0NyZWF0b3IuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAuYXNhci9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiYXNzZXRzL2Jpei9zb2NrZXQvYml6LXNvY2tldC5qcyIsImFzc2V0cy9iaXovY29udHJvbGxlci9zY3JpcHQvY29udHJvbGxlci5qcyIsImFzc2V0cy9iaXovbWFpbi9zY3JpcHQvZGF0YS5qcyIsImFzc2V0cy9iaXovY29udHJvbGxlci9zY3JpcHQvZGlyZWN0aW9uQ3RybC5qcyIsImFzc2V0cy9iaXovY29udHJvbGxlci9zY3JpcHQvZmlyZUN0cmwuanMiLCJhc3NldHMvdXRpbHMvaW5kZXguanMiLCJhc3NldHMvbGliL2xvZGFzaC5qcyIsImFzc2V0cy9iaXovbWFpbi9zY3JpcHQvbWFpbi5qcyIsImFzc2V0cy9saWIvc29ja2V0LmlvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY2MuX1JGcHVzaChtb2R1bGUsICc0NjJhMWJvT09wQjNwQ29aL0Z2d1pjaCcsICdiaXotc29ja2V0Jyk7XG4vLyBiaXovc29ja2V0L2Jpei1zb2NrZXQuanNcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc29ja2V0SU8gPSByZXF1aXJlKCcuLi8uLi9saWIvc29ja2V0LmlvJyk7XG5cbnZhciBCaXpTb2NrZXQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBVUkkgPSAnMTAuMTAuMS4yOTozMDAwL3RhbmtDb250cm9sbGVycyc7XG4gICAgdmFyIFVJRCA9ICdsaXNoZW5nJztcblxuICAgIHZhciB3cyA9IHNvY2tldElPKFVSSSArICc/dWlkPScgKyBVSUQpO1xuXG4gICAgdmFyIGNvbm5lY3QgPSBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgICB3cy5lbWl0KCdjLWVudGVyJyk7XG4gICAgfTtcblxuICAgIHZhciBkaXNjb25uZWN0ID0gZnVuY3Rpb24gZGlzY29ubmVjdCgpIHtcbiAgICAgICAgd3MuZW1pdCgnYy1sZWF2ZScpO1xuICAgIH07XG5cbiAgICB2YXIgb24gPSB3cy5vbi5iaW5kKHdzKTtcblxuICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudE5hbWUsIGV2ZW50T2JqKSB7XG4gICAgICAgIHdzLmVtaXQoZXZlbnROYW1lLCB7XG4gICAgICAgICAgICB1aWQ6IFVJRCxcbiAgICAgICAgICAgIGRhdGE6IGV2ZW50T2JqXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25uZWN0OiBjb25uZWN0LFxuICAgICAgICBkaXNjb25uZWN0OiBkaXNjb25uZWN0LFxuICAgICAgICBvbjogb24sXG4gICAgICAgIGVtaXQ6IGVtaXRcbiAgICB9O1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCaXpTb2NrZXQ7XG5cbmNjLl9SRnBvcCgpOyIsImNjLl9SRnB1c2gobW9kdWxlLCAnZjJkOTBxNDB3Wk8wcjMzSmVRZTFzRmYnLCAnY29udHJvbGxlcicpO1xuLy8gYml6L2NvbnRyb2xsZXIvc2NyaXB0L2NvbnRyb2xsZXIuanNcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYml6U29ja2V0ID0gcmVxdWlyZSgnLi4vLi4vc29ja2V0L2Jpei1zb2NrZXQnKTtcblxuY2MuQ2xhc3Moe1xuICAgICdleHRlbmRzJzogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge30sXG5cbiAgICBiYWNrVG9NYWluOiBmdW5jdGlvbiBiYWNrVG9NYWluKCkge1xuICAgICAgICBiaXpTb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ21haW4nKTtcbiAgICB9LFxuXG4gICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7fSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGR0KSB7fVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsImNjLl9SRnB1c2gobW9kdWxlLCAnMTlhMDNwQmdyOVA2S0VHZzdJUnRFREcnLCAnZGF0YScpO1xuLy8gYml6L21haW4vc2NyaXB0L2RhdGEuanNcblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXBkYXRlRGF0YSA9IGZ1bmN0aW9uIHVwZGF0ZURhdGEob2JqZWN0KSB7fTtcblxudmFyIGluaXRBcmNoaXZlcyA9IGZ1bmN0aW9uIGluaXRBcmNoaXZlcygpIHt9O1xuXG52YXIgdXBkYXRlQXJjaGl2ZXMgPSBmdW5jdGlvbiB1cGRhdGVBcmNoaXZlcygpIHt9O1xuXG52YXIgZ2V0QXJjaGl2ZXMgPSBmdW5jdGlvbiBnZXRBcmNoaXZlcygpIHt9O1xuXG52YXIgZGF0YSA9IHtcbiAgICB1c2VybmFtZTogJycsXG5cbiAgICB0YW5rSGVhZDogMCxcbiAgICB0YW5rQm9keTogMCxcbiAgICB0YW5rV2hlZWw6IDAsXG5cbiAgICBtb25leTogMCxcbiAgICBzY29yZUtpbGw6IDAsXG4gICAgc2NvcmVEZWFsOiAwXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZGF0YTtcblxuY2MuX1JGcG9wKCk7IiwiY2MuX1JGcHVzaChtb2R1bGUsICc4ZGZkMTFJL3BCQUQ3WG5ONGlIOXRpVicsICdkaXJlY3Rpb25DdHJsJyk7XG4vLyBiaXovY29udHJvbGxlci9zY3JpcHQvZGlyZWN0aW9uQ3RybC5qc1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBiaXpTb2NrZXQgPSByZXF1aXJlKCcuLi8uLi9zb2NrZXQvYml6LXNvY2tldCcpO1xuXG5jYy5DbGFzcyh7XG4gICAgJ2V4dGVuZHMnOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGZvbGxvd2VyOiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIGZvbGxvd1NwZWVkOiAwXG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgICAgICB0aGlzLnNldFRvdWNoQ29udHJvbCgpO1xuICAgICAgICB0aGlzLm5vZGUub24oJ2RpcmVjdGlvbicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQuZGV0YWlsLmRpcmVjdGlvbik7XG4gICAgICAgICAgICBiaXpTb2NrZXQuZW1pdCgnYy1kaXJlY3Rpb24nLCB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBldmVudC5kZXRhaWwuZGlyZWN0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNldFRvdWNoQ29udHJvbDogZnVuY3Rpb24gc2V0VG91Y2hDb250cm9sKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNjLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcih7XG4gICAgICAgICAgICBldmVudDogY2MuRXZlbnRMaXN0ZW5lci5UT1VDSF9PTkVfQllfT05FLFxuICAgICAgICAgICAgb25Ub3VjaEJlZ2FuOiBzZWxmLm9uVG91Y2hCZWdhbi5iaW5kKHNlbGYpLFxuICAgICAgICAgICAgb25Ub3VjaE1vdmVkOiBzZWxmLm9uVG91Y2hNb3ZlZC5iaW5kKHNlbGYpLFxuICAgICAgICAgICAgb25Ub3VjaEVuZGVkOiBzZWxmLm9uVG91Y2hFbmRlZC5iaW5kKHNlbGYpXG4gICAgICAgIH0sIHNlbGYubm9kZSk7XG4gICAgfSxcblxuICAgIF9fZ2V0QW5nbGU6IGZ1bmN0aW9uIF9fZ2V0QW5nbGUocG9zKSB7XG4gICAgICAgIHRoaXMuYW5nbGUgPSBNYXRoLmF0YW4yKHBvcy55LCBwb3MueCkgLyBjYy5QSSAqIDE4MDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGU7XG4gICAgfSxcblxuICAgIF9fZ2V0UmFkaWFuczogZnVuY3Rpb24gX19nZXRSYWRpYW5zKHBvcykge1xuICAgICAgICB0aGlzLnJhZGlhbnMgPSBNYXRoLmF0YW4yKHBvcy55LCBwb3MueCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJhZGlhbnM7XG4gICAgfSxcblxuICAgIF9fZ2V0TGVuZ3RoOiBmdW5jdGlvbiBfX2dldExlbmd0aChwb3MpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChwb3MueCAqIHBvcy54ICsgcG9zLnkgKiBwb3MueSk7XG4gICAgfSxcblxuICAgIG9uVXBkYXRlRGlyZWN0aW9uOiBmdW5jdGlvbiBvblVwZGF0ZURpcmVjdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAodGhpcy5hbmdsZSA8IDApIHRoaXMuYW5nbGUgPSB0aGlzLmFuZ2xlICsgMzYwO1xuXG4gICAgICAgIGlmICh0aGlzLmFuZ2xlID4gLTQ1ICYmIHRoaXMuYW5nbGUgPD0gNDUpIHRoaXMuZGlyZWN0aW9uID0gJ1JJR0hUJztcbiAgICAgICAgaWYgKHRoaXMuYW5nbGUgPiA0NSAmJiB0aGlzLmFuZ2xlIDw9IDEzNSkgdGhpcy5kaXJlY3Rpb24gPSAnVVAnO1xuICAgICAgICBpZiAodGhpcy5hbmdsZSA+IDEzNSAmJiB0aGlzLmFuZ2xlIDw9IDIyNSkgdGhpcy5kaXJlY3Rpb24gPSAnTEVGVCc7XG4gICAgICAgIGlmICh0aGlzLmFuZ2xlID4gMjI1ICYmIHRoaXMuYW5nbGUgPD0gMzE1KSB0aGlzLmRpcmVjdGlvbiA9ICdET1dOJztcblxuICAgICAgICB0aGlzLm5vZGUuZW1pdCgnZGlyZWN0aW9uJywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvblxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgb25Ub3VjaEJlZ2FuOiBmdW5jdGlvbiBvblRvdWNoQmVnYW4odG91Y2gsIGV2ZW50KSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmZvbGxvd2VyO1xuICAgICAgICB2YXIgdG91Y2hMb2MgPSB0b3VjaC5nZXRMb2NhdGlvbigpO1xuXG4gICAgICAgIHZhciBsb2NJbk5vZGUgPSB0aGlzLm5vZGUuY29udmVydFRvTm9kZVNwYWNlQVIodG91Y2hMb2MpO1xuICAgICAgICB2YXIgdG1wTGVuZ3RoID0gdGhpcy5fX2dldExlbmd0aChsb2NJbk5vZGUpO1xuXG4gICAgICAgIHJldHVybiB0bXBMZW5ndGggPCAxMDM7XG4gICAgfSxcblxuICAgIG9uVG91Y2hNb3ZlZDogZnVuY3Rpb24gb25Ub3VjaE1vdmVkKHRvdWNoLCBldmVudCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5mb2xsb3dlcjtcbiAgICAgICAgdmFyIHRvdWNoTG9jID0gdG91Y2guZ2V0TG9jYXRpb24oKTtcblxuICAgICAgICB2YXIgbG9jSW5Ob2RlID0gdGhpcy5ub2RlLmNvbnZlcnRUb05vZGVTcGFjZUFSKHRvdWNoTG9jKTtcbiAgICAgICAgdGhpcy5fX2dldEFuZ2xlKGxvY0luTm9kZSk7XG4gICAgICAgIHRoaXMuX19nZXRSYWRpYW5zKGxvY0luTm9kZSk7XG4gICAgICAgIHRoaXMub25VcGRhdGVEaXJlY3Rpb24obG9jSW5Ob2RlKTtcblxuICAgICAgICB2YXIgdG1wTGVuZ3RoID0gdGhpcy5fX2dldExlbmd0aChsb2NJbk5vZGUpO1xuXG4gICAgICAgIGlmICh0bXBMZW5ndGggPCAxMDMpIHtcbiAgICAgICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbihsb2NJbk5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHggPSBNYXRoLmNvcyh0aGlzLnJhZGlhbnMpICogMTAzO1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbih0aGlzLnJhZGlhbnMpICogMTAzO1xuICAgICAgICAgICAgdGFyZ2V0LnNldFBvc2l0aW9uKGNjLnAoeCwgeSkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG9uVG91Y2hFbmRlZDogZnVuY3Rpb24gb25Ub3VjaEVuZGVkKHRvdWNoLCBldmVudCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5mb2xsb3dlcjtcbiAgICAgICAgdGFyZ2V0LnNldFBvc2l0aW9uKHsgeDogMCwgeTogMCB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZHQpIHt9XG59KTtcblxuY2MuX1JGcG9wKCk7IiwiY2MuX1JGcHVzaChtb2R1bGUsICdhNDAyMy9YSUZ0STFaMWhCL2ZNakxOSicsICdmaXJlQ3RybCcpO1xuLy8gYml6L2NvbnRyb2xsZXIvc2NyaXB0L2ZpcmVDdHJsLmpzXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGJpelNvY2tldCA9IHJlcXVpcmUoJy4uLy4uL3NvY2tldC9iaXotc29ja2V0Jyk7XG5cbmNjLkNsYXNzKHtcbiAgICAnZXh0ZW5kcyc6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHt9LFxuXG4gICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7fSxcblxuICAgIGZpcmU6IGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgIGJpelNvY2tldC5lbWl0KCdjLWZpcmUnLCB7XG4gICAgICAgICAgICBmaXJlOiAnZmlyZSdcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsImNjLl9SRnB1c2gobW9kdWxlLCAnNjI2YjdsRWlEMUltNXY1cHVJSW1SRHknLCAnaW5kZXgnKTtcbi8vIHV0aWxzL2luZGV4LmpzXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5nZXRVaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndWlkJyk7XG4gICAgcmV0dXJuICdsaXNoZW5nJztcbn07XG5cbmNjLl9SRnBvcCgpOyIsImNjLl9SRnB1c2gobW9kdWxlLCAnOWYyZjFoa1NGOU5rNld2SHhBczl1cVAnLCAnbG9kYXNoJyk7XG4vLyBsaWIvbG9kYXNoLmpzXG5cblwidXNlIHN0cmljdFwiOyhmdW5jdGlvbigpe3ZhciB1bmRlZmluZWQ7dmFyIFZFUlNJT049XCI0LjIuMFwiO3ZhciBCSU5EX0ZMQUc9MSxCSU5EX0tFWV9GTEFHPTIsQ1VSUllfQk9VTkRfRkxBRz00LENVUlJZX0ZMQUc9OCxDVVJSWV9SSUdIVF9GTEFHPTE2LFBBUlRJQUxfRkxBRz0zMixQQVJUSUFMX1JJR0hUX0ZMQUc9NjQsQVJZX0ZMQUc9MTI4LFJFQVJHX0ZMQUc9MjU2LEZMSVBfRkxBRz01MTI7dmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUc9MSxQQVJUSUFMX0NPTVBBUkVfRkxBRz0yO3ZhciBERUZBVUxUX1RSVU5DX0xFTkdUSD0zMCxERUZBVUxUX1RSVU5DX09NSVNTSU9OPVwiLi4uXCI7dmFyIEhPVF9DT1VOVD0xNTAsSE9UX1NQQU49MTY7dmFyIExBUkdFX0FSUkFZX1NJWkU9MjAwO3ZhciBMQVpZX0ZJTFRFUl9GTEFHPTEsTEFaWV9NQVBfRkxBRz0yLExBWllfV0hJTEVfRkxBRz0zO3ZhciBGVU5DX0VSUk9SX1RFWFQ9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCI7dmFyIEhBU0hfVU5ERUZJTkVEPVwiX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfX1wiO3ZhciBJTkZJTklUWT0xIC8gMCxNQVhfU0FGRV9JTlRFR0VSPTkwMDcxOTkyNTQ3NDA5OTEsTUFYX0lOVEVHRVI9MS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCxOQU49MCAvIDA7dmFyIE1BWF9BUlJBWV9MRU5HVEg9NDI5NDk2NzI5NSxNQVhfQVJSQVlfSU5ERVg9TUFYX0FSUkFZX0xFTkdUSCAtIDEsSEFMRl9NQVhfQVJSQVlfTEVOR1RIPU1BWF9BUlJBWV9MRU5HVEggPj4+IDE7dmFyIFBMQUNFSE9MREVSPVwiX19sb2Rhc2hfcGxhY2Vob2xkZXJfX1wiO3ZhciBhcmdzVGFnPVwiW29iamVjdCBBcmd1bWVudHNdXCIsYXJyYXlUYWc9XCJbb2JqZWN0IEFycmF5XVwiLGJvb2xUYWc9XCJbb2JqZWN0IEJvb2xlYW5dXCIsZGF0ZVRhZz1cIltvYmplY3QgRGF0ZV1cIixlcnJvclRhZz1cIltvYmplY3QgRXJyb3JdXCIsZnVuY1RhZz1cIltvYmplY3QgRnVuY3Rpb25dXCIsZ2VuVGFnPVwiW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl1cIixtYXBUYWc9XCJbb2JqZWN0IE1hcF1cIixudW1iZXJUYWc9XCJbb2JqZWN0IE51bWJlcl1cIixvYmplY3RUYWc9XCJbb2JqZWN0IE9iamVjdF1cIixyZWdleHBUYWc9XCJbb2JqZWN0IFJlZ0V4cF1cIixzZXRUYWc9XCJbb2JqZWN0IFNldF1cIixzdHJpbmdUYWc9XCJbb2JqZWN0IFN0cmluZ11cIixzeW1ib2xUYWc9XCJbb2JqZWN0IFN5bWJvbF1cIix3ZWFrTWFwVGFnPVwiW29iamVjdCBXZWFrTWFwXVwiO3ZhciBhcnJheUJ1ZmZlclRhZz1cIltvYmplY3QgQXJyYXlCdWZmZXJdXCIsZmxvYXQzMlRhZz1cIltvYmplY3QgRmxvYXQzMkFycmF5XVwiLGZsb2F0NjRUYWc9XCJbb2JqZWN0IEZsb2F0NjRBcnJheV1cIixpbnQ4VGFnPVwiW29iamVjdCBJbnQ4QXJyYXldXCIsaW50MTZUYWc9XCJbb2JqZWN0IEludDE2QXJyYXldXCIsaW50MzJUYWc9XCJbb2JqZWN0IEludDMyQXJyYXldXCIsdWludDhUYWc9XCJbb2JqZWN0IFVpbnQ4QXJyYXldXCIsdWludDhDbGFtcGVkVGFnPVwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV1cIix1aW50MTZUYWc9XCJbb2JqZWN0IFVpbnQxNkFycmF5XVwiLHVpbnQzMlRhZz1cIltvYmplY3QgVWludDMyQXJyYXldXCI7dmFyIHJlRW1wdHlTdHJpbmdMZWFkaW5nPS9cXGJfX3AgXFwrPSAnJzsvZyxyZUVtcHR5U3RyaW5nTWlkZGxlPS9cXGIoX19wIFxcKz0pICcnIFxcKy9nLHJlRW1wdHlTdHJpbmdUcmFpbGluZz0vKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpIFxcK1xcbicnOy9nO3ZhciByZUVzY2FwZWRIdG1sPS8mKD86YW1wfGx0fGd0fHF1b3R8IzM5fCM5Nik7L2cscmVVbmVzY2FwZWRIdG1sPS9bJjw+XCInYF0vZyxyZUhhc0VzY2FwZWRIdG1sPVJlZ0V4cChyZUVzY2FwZWRIdG1sLnNvdXJjZSkscmVIYXNVbmVzY2FwZWRIdG1sPVJlZ0V4cChyZVVuZXNjYXBlZEh0bWwuc291cmNlKTt2YXIgcmVFc2NhcGU9LzwlLShbXFxzXFxTXSs/KSU+L2cscmVFdmFsdWF0ZT0vPCUoW1xcc1xcU10rPyklPi9nLHJlSW50ZXJwb2xhdGU9LzwlPShbXFxzXFxTXSs/KSU+L2c7dmFyIHJlSXNEZWVwUHJvcD0vXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLHJlSXNQbGFpblByb3A9L15cXHcqJC8scmVQcm9wTmFtZT0vW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO3ZhciByZVJlZ0V4cENoYXI9L1tcXFxcXiQuKis/KClbXFxde318XS9nLHJlSGFzUmVnRXhwQ2hhcj1SZWdFeHAocmVSZWdFeHBDaGFyLnNvdXJjZSk7dmFyIHJlVHJpbT0vXlxccyt8XFxzKyQvZyxyZVRyaW1TdGFydD0vXlxccysvLHJlVHJpbUVuZD0vXFxzKyQvO3ZhciByZUVzY2FwZUNoYXI9L1xcXFwoXFxcXCk/L2c7dmFyIHJlRXNUZW1wbGF0ZT0vXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7dmFyIHJlRmxhZ3M9L1xcdyokLzt2YXIgcmVIYXNIZXhQcmVmaXg9L14weC9pO3ZhciByZUlzQmFkSGV4PS9eWy0rXTB4WzAtOWEtZl0rJC9pO3ZhciByZUlzQmluYXJ5PS9eMGJbMDFdKyQvaTt2YXIgcmVJc0hvc3RDdG9yPS9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87dmFyIHJlSXNPY3RhbD0vXjBvWzAtN10rJC9pO3ZhciByZUlzVWludD0vXig/OjB8WzEtOV1cXGQqKSQvO3ZhciByZUxhdGluMT0vW1xceGMwLVxceGQ2XFx4ZDgtXFx4ZGVcXHhkZi1cXHhmNlxceGY4LVxceGZmXS9nO3ZhciByZU5vTWF0Y2g9LygkXikvO3ZhciByZVVuZXNjYXBlZFN0cmluZz0vWydcXG5cXHJcXHUyMDI4XFx1MjAyOVxcXFxdL2c7dmFyIHJzQXN0cmFsUmFuZ2U9XCJcXFxcdWQ4MDAtXFxcXHVkZmZmXCIscnNDb21ib01hcmtzUmFuZ2U9XCJcXFxcdTAzMDAtXFxcXHUwMzZmXFxcXHVmZTIwLVxcXFx1ZmUyM1wiLHJzQ29tYm9TeW1ib2xzUmFuZ2U9XCJcXFxcdTIwZDAtXFxcXHUyMGYwXCIscnNEaW5nYmF0UmFuZ2U9XCJcXFxcdTI3MDAtXFxcXHUyN2JmXCIscnNMb3dlclJhbmdlPVwiYS16XFxcXHhkZi1cXFxceGY2XFxcXHhmOC1cXFxceGZmXCIscnNNYXRoT3BSYW5nZT1cIlxcXFx4YWNcXFxceGIxXFxcXHhkN1xcXFx4ZjdcIixyc05vbkNoYXJSYW5nZT1cIlxcXFx4MDAtXFxcXHgyZlxcXFx4M2EtXFxcXHg0MFxcXFx4NWItXFxcXHg2MFxcXFx4N2ItXFxcXHhiZlwiLHJzUXVvdGVSYW5nZT1cIlxcXFx1MjAxOFxcXFx1MjAxOVxcXFx1MjAxY1xcXFx1MjAxZFwiLHJzU3BhY2VSYW5nZT1cIiBcXFxcdFxcXFx4MGJcXFxcZlxcXFx4YTBcXFxcdWZlZmZcXFxcblxcXFxyXFxcXHUyMDI4XFxcXHUyMDI5XFxcXHUxNjgwXFxcXHUxODBlXFxcXHUyMDAwXFxcXHUyMDAxXFxcXHUyMDAyXFxcXHUyMDAzXFxcXHUyMDA0XFxcXHUyMDA1XFxcXHUyMDA2XFxcXHUyMDA3XFxcXHUyMDA4XFxcXHUyMDA5XFxcXHUyMDBhXFxcXHUyMDJmXFxcXHUyMDVmXFxcXHUzMDAwXCIscnNVcHBlclJhbmdlPVwiQS1aXFxcXHhjMC1cXFxceGQ2XFxcXHhkOC1cXFxceGRlXCIscnNWYXJSYW5nZT1cIlxcXFx1ZmUwZVxcXFx1ZmUwZlwiLHJzQnJlYWtSYW5nZT1yc01hdGhPcFJhbmdlICsgcnNOb25DaGFyUmFuZ2UgKyByc1F1b3RlUmFuZ2UgKyByc1NwYWNlUmFuZ2U7dmFyIHJzQXN0cmFsPVwiW1wiICsgcnNBc3RyYWxSYW5nZSArIFwiXVwiLHJzQnJlYWs9XCJbXCIgKyByc0JyZWFrUmFuZ2UgKyBcIl1cIixyc0NvbWJvPVwiW1wiICsgcnNDb21ib01hcmtzUmFuZ2UgKyByc0NvbWJvU3ltYm9sc1JhbmdlICsgXCJdXCIscnNEaWdpdHM9XCJcXFxcZCtcIixyc0RpbmdiYXQ9XCJbXCIgKyByc0RpbmdiYXRSYW5nZSArIFwiXVwiLHJzTG93ZXI9XCJbXCIgKyByc0xvd2VyUmFuZ2UgKyBcIl1cIixyc01pc2M9XCJbXlwiICsgcnNBc3RyYWxSYW5nZSArIHJzQnJlYWtSYW5nZSArIHJzRGlnaXRzICsgcnNEaW5nYmF0UmFuZ2UgKyByc0xvd2VyUmFuZ2UgKyByc1VwcGVyUmFuZ2UgKyBcIl1cIixyc0ZpdHo9XCJcXFxcdWQ4M2NbXFxcXHVkZmZiLVxcXFx1ZGZmZl1cIixyc01vZGlmaWVyPVwiKD86XCIgKyByc0NvbWJvICsgXCJ8XCIgKyByc0ZpdHogKyBcIilcIixyc05vbkFzdHJhbD1cIlteXCIgKyByc0FzdHJhbFJhbmdlICsgXCJdXCIscnNSZWdpb25hbD1cIig/OlxcXFx1ZDgzY1tcXFxcdWRkZTYtXFxcXHVkZGZmXSl7Mn1cIixyc1N1cnJQYWlyPVwiW1xcXFx1ZDgwMC1cXFxcdWRiZmZdW1xcXFx1ZGMwMC1cXFxcdWRmZmZdXCIscnNVcHBlcj1cIltcIiArIHJzVXBwZXJSYW5nZSArIFwiXVwiLHJzWldKPVwiXFxcXHUyMDBkXCI7dmFyIHJzTG93ZXJNaXNjPVwiKD86XCIgKyByc0xvd2VyICsgXCJ8XCIgKyByc01pc2MgKyBcIilcIixyc1VwcGVyTWlzYz1cIig/OlwiICsgcnNVcHBlciArIFwifFwiICsgcnNNaXNjICsgXCIpXCIscmVPcHRNb2Q9cnNNb2RpZmllciArIFwiP1wiLHJzT3B0VmFyPVwiW1wiICsgcnNWYXJSYW5nZSArIFwiXT9cIixyc09wdEpvaW49XCIoPzpcIiArIHJzWldKICsgXCIoPzpcIiArIFtyc05vbkFzdHJhbCxyc1JlZ2lvbmFsLHJzU3VyclBhaXJdLmpvaW4oXCJ8XCIpICsgXCIpXCIgKyByc09wdFZhciArIHJlT3B0TW9kICsgXCIpKlwiLHJzU2VxPXJzT3B0VmFyICsgcmVPcHRNb2QgKyByc09wdEpvaW4scnNFbW9qaT1cIig/OlwiICsgW3JzRGluZ2JhdCxyc1JlZ2lvbmFsLHJzU3VyclBhaXJdLmpvaW4oXCJ8XCIpICsgXCIpXCIgKyByc1NlcSxyc1N5bWJvbD1cIig/OlwiICsgW3JzTm9uQXN0cmFsICsgcnNDb21ibyArIFwiP1wiLHJzQ29tYm8scnNSZWdpb25hbCxyc1N1cnJQYWlyLHJzQXN0cmFsXS5qb2luKFwifFwiKSArIFwiKVwiO3ZhciByZUNvbWJvTWFyaz1SZWdFeHAocnNDb21ibyxcImdcIik7dmFyIHJlQ29tcGxleFN5bWJvbD1SZWdFeHAocnNGaXR6ICsgXCIoPz1cIiArIHJzRml0eiArIFwiKXxcIiArIHJzU3ltYm9sICsgcnNTZXEsXCJnXCIpO3ZhciByZUhhc0NvbXBsZXhTeW1ib2w9UmVnRXhwKFwiW1wiICsgcnNaV0ogKyByc0FzdHJhbFJhbmdlICsgcnNDb21ib01hcmtzUmFuZ2UgKyByc0NvbWJvU3ltYm9sc1JhbmdlICsgcnNWYXJSYW5nZSArIFwiXVwiKTt2YXIgcmVCYXNpY1dvcmQ9L1thLXpBLVowLTldKy9nO3ZhciByZUNvbXBsZXhXb3JkPVJlZ0V4cChbcnNVcHBlciArIFwiP1wiICsgcnNMb3dlciArIFwiKyg/PVwiICsgW3JzQnJlYWsscnNVcHBlcixcIiRcIl0uam9pbihcInxcIikgKyBcIilcIixyc1VwcGVyTWlzYyArIFwiKyg/PVwiICsgW3JzQnJlYWsscnNVcHBlciArIHJzTG93ZXJNaXNjLFwiJFwiXS5qb2luKFwifFwiKSArIFwiKVwiLHJzVXBwZXIgKyBcIj9cIiArIHJzTG93ZXJNaXNjICsgXCIrXCIscnNVcHBlciArIFwiK1wiLHJzRGlnaXRzLHJzRW1vamldLmpvaW4oXCJ8XCIpLFwiZ1wiKTt2YXIgcmVIYXNDb21wbGV4V29yZD0vW2Etel1bQS1aXXxbMC05XVthLXpBLVpdfFthLXpBLVpdWzAtOV18W15hLXpBLVowLTkgXS87dmFyIGNvbnRleHRQcm9wcz1bXCJBcnJheVwiLFwiRGF0ZVwiLFwiRXJyb3JcIixcIkZsb2F0MzJBcnJheVwiLFwiRmxvYXQ2NEFycmF5XCIsXCJGdW5jdGlvblwiLFwiSW50OEFycmF5XCIsXCJJbnQxNkFycmF5XCIsXCJJbnQzMkFycmF5XCIsXCJNYXBcIixcIk1hdGhcIixcIk9iamVjdFwiLFwiUmVmbGVjdFwiLFwiUmVnRXhwXCIsXCJTZXRcIixcIlN0cmluZ1wiLFwiU3ltYm9sXCIsXCJUeXBlRXJyb3JcIixcIlVpbnQ4QXJyYXlcIixcIlVpbnQ4Q2xhbXBlZEFycmF5XCIsXCJVaW50MTZBcnJheVwiLFwiVWludDMyQXJyYXlcIixcIldlYWtNYXBcIixcIl9cIixcImNsZWFyVGltZW91dFwiLFwiaXNGaW5pdGVcIixcInBhcnNlSW50XCIsXCJzZXRUaW1lb3V0XCJdO3ZhciB0ZW1wbGF0ZUNvdW50ZXI9LTE7dmFyIHR5cGVkQXJyYXlUYWdzPXt9O3R5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO3ZhciBjbG9uZWFibGVUYWdzPXt9O2Nsb25lYWJsZVRhZ3NbYXJnc1RhZ10gPSBjbG9uZWFibGVUYWdzW2FycmF5VGFnXSA9IGNsb25lYWJsZVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gY2xvbmVhYmxlVGFnc1tib29sVGFnXSA9IGNsb25lYWJsZVRhZ3NbZGF0ZVRhZ10gPSBjbG9uZWFibGVUYWdzW2Zsb2F0MzJUYWddID0gY2xvbmVhYmxlVGFnc1tmbG9hdDY0VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50OFRhZ10gPSBjbG9uZWFibGVUYWdzW2ludDE2VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50MzJUYWddID0gY2xvbmVhYmxlVGFnc1ttYXBUYWddID0gY2xvbmVhYmxlVGFnc1tudW1iZXJUYWddID0gY2xvbmVhYmxlVGFnc1tvYmplY3RUYWddID0gY2xvbmVhYmxlVGFnc1tyZWdleHBUYWddID0gY2xvbmVhYmxlVGFnc1tzZXRUYWddID0gY2xvbmVhYmxlVGFnc1tzdHJpbmdUYWddID0gY2xvbmVhYmxlVGFnc1tzeW1ib2xUYWddID0gY2xvbmVhYmxlVGFnc1t1aW50OFRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQxNlRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO2Nsb25lYWJsZVRhZ3NbZXJyb3JUYWddID0gY2xvbmVhYmxlVGFnc1tmdW5jVGFnXSA9IGNsb25lYWJsZVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTt2YXIgZGVidXJyZWRMZXR0ZXJzPXtcIuiEjFwiOlwiQVwiLFwi6ISVXCI6XCJBXCIsXCLohJdcIjpcIkFcIixcIuiEmVwiOlwiQVwiLFwi6ISbXCI6XCJBXCIsXCLohJxcIjpcIkFcIixcIuiEv1wiOlwiYVwiLFwi6LCpXCI6XCJhXCIsXCLoipJcIjpcImFcIixcIuiMq1wiOlwiYVwiLFwi55uyXCI6XCJhXCIsXCLmsJNcIjpcImFcIixcIuiEn1wiOlwiQ1wiLFwi6I69XCI6XCJjXCIsXCLohKhcIjpcIkRcIixcIuWGklwiOlwiZFwiLFwi6ISgXCI6XCJFXCIsXCLohKFcIjpcIkVcIixcIuiEolwiOlwiRVwiLFwi6ISjXCI6XCJFXCIsXCLnjKtcIjpcImVcIixcIuiMhVwiOlwiZVwiLFwi6ZSaXCI6XCJlXCIsXCLmr5tcIjpcImVcIixcIuiEpFwiOlwiSVwiLFwi6ISlXCI6XCJJXCIsXCLohKZcIjpcIklcIixcIuiEp1wiOlwiSVwiLFwi55+bXCI6XCJpXCIsXCLpk4ZcIjpcImlcIixcIuWNr1wiOlwiaVwiLFwi6IyCXCI6XCJpXCIsXCLohKlcIjpcIk5cIixcIuW4vVwiOlwiblwiLFwi6ISqXCI6XCJPXCIsXCLohKtcIjpcIk9cIixcIuiErVwiOlwiT1wiLFwi6ISuXCI6XCJPXCIsXCLohLBcIjpcIk9cIixcIuiEtFwiOlwiT1wiLFwi6LKMXCI6XCJvXCIsXCLotLhcIjpcIm9cIixcIuS5iFwiOlwib1wiLFwi546rXCI6XCJvXCIsXCLmnppcIjpcIm9cIixcIumFtlwiOlwib1wiLFwi6IS1XCI6XCJVXCIsXCLohLdcIjpcIlVcIixcIuiEuVwiOlwiVVwiLFwi6IS6XCI6XCJVXCIsXCLpnIlcIjpcInVcIixcIueFpFwiOlwidVwiLFwi5rKhXCI6XCJ1XCIsXCLnnIlcIjpcInVcIixcIuiEu1wiOlwiWVwiLFwi5aqSXCI6XCJ5XCIsXCLmr49cIjpcInlcIixcIuiEnVwiOlwiQWVcIixcIuW/mVwiOlwiYWVcIixcIuiEvFwiOlwiVGhcIixcIumVgVwiOlwidGhcIixcIuiEvVwiOlwic3NcIn07dmFyIGh0bWxFc2NhcGVzPXtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiMzOTtcIixcImBcIjpcIiYjOTY7XCJ9O3ZhciBodG1sVW5lc2NhcGVzPXtcIiZhbXA7XCI6XCImXCIsXCImbHQ7XCI6XCI8XCIsXCImZ3Q7XCI6XCI+XCIsXCImcXVvdDtcIjonXCInLFwiJiMzOTtcIjpcIidcIixcIiYjOTY7XCI6XCJgXCJ9O3ZhciBvYmplY3RUeXBlcz17XCJmdW5jdGlvblwiOnRydWUsb2JqZWN0OnRydWV9O3ZhciBzdHJpbmdFc2NhcGVzPXtcIlxcXFxcIjpcIlxcXFxcIixcIidcIjpcIidcIixcIlxcblwiOlwiblwiLFwiXFxyXCI6XCJyXCIsXCJcXHUyMDI4XCI6XCJ1MjAyOFwiLFwiXFx1MjAyOVwiOlwidTIwMjlcIn07dmFyIGZyZWVQYXJzZUZsb2F0PXBhcnNlRmxvYXQsZnJlZVBhcnNlSW50PXBhcnNlSW50O3ZhciBmcmVlRXhwb3J0cz1vYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZT9leHBvcnRzOm51bGw7dmFyIGZyZWVNb2R1bGU9b2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGU/bW9kdWxlOm51bGw7dmFyIGZyZWVHbG9iYWw9Y2hlY2tHbG9iYWwoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSAmJiB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsKTt2YXIgZnJlZVNlbGY9Y2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHNlbGZdICYmIHNlbGYpO3ZhciBmcmVlV2luZG93PWNoZWNrR2xvYmFsKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyk7dmFyIG1vZHVsZUV4cG9ydHM9ZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzP2ZyZWVFeHBvcnRzOm51bGw7dmFyIHRoaXNHbG9iYWw9Y2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHRoaXNdICYmIHRoaXMpO3ZhciByb290PWZyZWVHbG9iYWwgfHwgZnJlZVdpbmRvdyAhPT0gKHRoaXNHbG9iYWwgJiYgdGhpc0dsb2JhbC53aW5kb3cpICYmIGZyZWVXaW5kb3cgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7ZnVuY3Rpb24gYWRkTWFwRW50cnkobWFwLHBhaXIpe21hcC5zZXQocGFpclswXSxwYWlyWzFdKTtyZXR1cm4gbWFwO31mdW5jdGlvbiBhZGRTZXRFbnRyeShzZXQsdmFsdWUpe3NldC5hZGQodmFsdWUpO3JldHVybiBzZXQ7fWZ1bmN0aW9uIGFwcGx5KGZ1bmMsdGhpc0FyZyxhcmdzKXt2YXIgbGVuZ3RoPWFyZ3MubGVuZ3RoO3N3aXRjaChsZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO2Nhc2UgMTpyZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsYXJnc1swXSk7Y2FzZSAyOnJldHVybiBmdW5jLmNhbGwodGhpc0FyZyxhcmdzWzBdLGFyZ3NbMV0pO2Nhc2UgMzpyZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0pO31yZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLGFyZ3MpO31mdW5jdGlvbiBhcnJheUFnZ3JlZ2F0b3IoYXJyYXksc2V0dGVyLGl0ZXJhdGVlLGFjY3VtdWxhdG9yKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XTtzZXR0ZXIoYWNjdW11bGF0b3IsdmFsdWUsaXRlcmF0ZWUodmFsdWUpLGFycmF5KTt9cmV0dXJuIGFjY3VtdWxhdG9yO31mdW5jdGlvbiBhcnJheUNvbmNhdChhcnJheSxvdGhlcil7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGgsb3RoSW5kZXg9LTEsb3RoTGVuZ3RoPW90aGVyLmxlbmd0aCxyZXN1bHQ9QXJyYXkobGVuZ3RoICsgb3RoTGVuZ3RoKTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7cmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4XTt9d2hpbGUoKytvdGhJbmRleCA8IG90aExlbmd0aCkge3Jlc3VsdFtpbmRleCsrXSA9IG90aGVyW290aEluZGV4XTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYXJyYXlFYWNoKGFycmF5LGl0ZXJhdGVlKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7aWYoaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSA9PT0gZmFsc2Upe2JyZWFrO319cmV0dXJuIGFycmF5O31mdW5jdGlvbiBhcnJheUVhY2hSaWdodChhcnJheSxpdGVyYXRlZSl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pIHtpZihpdGVyYXRlZShhcnJheVtsZW5ndGhdLGxlbmd0aCxhcnJheSkgPT09IGZhbHNlKXticmVhazt9fXJldHVybiBhcnJheTt9ZnVuY3Rpb24gYXJyYXlFdmVyeShhcnJheSxwcmVkaWNhdGUpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtpZighcHJlZGljYXRlKGFycmF5W2luZGV4XSxpbmRleCxhcnJheSkpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO31mdW5jdGlvbiBhcnJheUZpbHRlcihhcnJheSxwcmVkaWNhdGUpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoLHJlc0luZGV4PS0xLHJlc3VsdD1bXTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XTtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsYXJyYXkpKXtyZXN1bHRbKytyZXNJbmRleF0gPSB2YWx1ZTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGFycmF5SW5jbHVkZXMoYXJyYXksdmFsdWUpe3JldHVybiAhIWFycmF5Lmxlbmd0aCAmJiBiYXNlSW5kZXhPZihhcnJheSx2YWx1ZSwwKSA+IC0xO31mdW5jdGlvbiBhcnJheUluY2x1ZGVzV2l0aChhcnJheSx2YWx1ZSxjb21wYXJhdG9yKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7aWYoY29tcGFyYXRvcih2YWx1ZSxhcnJheVtpbmRleF0pKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9ZnVuY3Rpb24gYXJyYXlNYXAoYXJyYXksaXRlcmF0ZWUpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoLHJlc3VsdD1BcnJheShsZW5ndGgpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtyZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LHZhbHVlcyl7dmFyIGluZGV4PS0xLGxlbmd0aD12YWx1ZXMubGVuZ3RoLG9mZnNldD1hcnJheS5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2FycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07fXJldHVybiBhcnJheTt9ZnVuY3Rpb24gYXJyYXlSZWR1Y2UoYXJyYXksaXRlcmF0ZWUsYWNjdW11bGF0b3IsaW5pdEFjY3VtKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDtpZihpbml0QWNjdW0gJiYgbGVuZ3RoKXthY2N1bXVsYXRvciA9IGFycmF5WysraW5kZXhdO313aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7YWNjdW11bGF0b3IgPSBpdGVyYXRlZShhY2N1bXVsYXRvcixhcnJheVtpbmRleF0saW5kZXgsYXJyYXkpO31yZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIGFycmF5UmVkdWNlUmlnaHQoYXJyYXksaXRlcmF0ZWUsYWNjdW11bGF0b3IsaW5pdEFjY3VtKXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aDtpZihpbml0QWNjdW0gJiYgbGVuZ3RoKXthY2N1bXVsYXRvciA9IGFycmF5Wy0tbGVuZ3RoXTt9d2hpbGUobGVuZ3RoLS0pIHthY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLGFycmF5W2xlbmd0aF0sbGVuZ3RoLGFycmF5KTt9cmV0dXJuIGFjY3VtdWxhdG9yO31mdW5jdGlvbiBhcnJheVNvbWUoYXJyYXkscHJlZGljYXRlKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7aWYocHJlZGljYXRlKGFycmF5W2luZGV4XSxpbmRleCxhcnJheSkpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO31mdW5jdGlvbiBiYXNlRXh0cmVtdW0oYXJyYXksaXRlcmF0ZWUsY29tcGFyYXRvcil7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF0sY3VycmVudD1pdGVyYXRlZSh2YWx1ZSk7aWYoY3VycmVudCAhPSBudWxsICYmIChjb21wdXRlZCA9PT0gdW5kZWZpbmVkP2N1cnJlbnQgPT09IGN1cnJlbnQ6Y29tcGFyYXRvcihjdXJyZW50LGNvbXB1dGVkKSkpe3ZhciBjb21wdXRlZD1jdXJyZW50LHJlc3VsdD12YWx1ZTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VGaW5kKGNvbGxlY3Rpb24scHJlZGljYXRlLGVhY2hGdW5jLHJldEtleSl7dmFyIHJlc3VsdDtlYWNoRnVuYyhjb2xsZWN0aW9uLGZ1bmN0aW9uKHZhbHVlLGtleSxjb2xsZWN0aW9uKXtpZihwcmVkaWNhdGUodmFsdWUsa2V5LGNvbGxlY3Rpb24pKXtyZXN1bHQgPSByZXRLZXk/a2V5OnZhbHVlO3JldHVybiBmYWxzZTt9fSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSxwcmVkaWNhdGUsZnJvbVJpZ2h0KXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aCxpbmRleD1mcm9tUmlnaHQ/bGVuZ3RoOi0xO3doaWxlKGZyb21SaWdodD9pbmRleC0tOisraW5kZXggPCBsZW5ndGgpIHtpZihwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSl7cmV0dXJuIGluZGV4O319cmV0dXJuIC0xO31mdW5jdGlvbiBiYXNlSW5kZXhPZihhcnJheSx2YWx1ZSxmcm9tSW5kZXgpe2lmKHZhbHVlICE9PSB2YWx1ZSl7cmV0dXJuIGluZGV4T2ZOYU4oYXJyYXksZnJvbUluZGV4KTt9dmFyIGluZGV4PWZyb21JbmRleCAtIDEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7aWYoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSl7cmV0dXJuIGluZGV4O319cmV0dXJuIC0xO31mdW5jdGlvbiBiYXNlUmVkdWNlKGNvbGxlY3Rpb24saXRlcmF0ZWUsYWNjdW11bGF0b3IsaW5pdEFjY3VtLGVhY2hGdW5jKXtlYWNoRnVuYyhjb2xsZWN0aW9uLGZ1bmN0aW9uKHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pe2FjY3VtdWxhdG9yID0gaW5pdEFjY3VtPyhpbml0QWNjdW0gPSBmYWxzZSx2YWx1ZSk6aXRlcmF0ZWUoYWNjdW11bGF0b3IsdmFsdWUsaW5kZXgsY29sbGVjdGlvbik7fSk7cmV0dXJuIGFjY3VtdWxhdG9yO31mdW5jdGlvbiBiYXNlU29ydEJ5KGFycmF5LGNvbXBhcmVyKXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aDthcnJheS5zb3J0KGNvbXBhcmVyKTt3aGlsZShsZW5ndGgtLSkge2FycmF5W2xlbmd0aF0gPSBhcnJheVtsZW5ndGhdLnZhbHVlO31yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGJhc2VTdW0oYXJyYXksaXRlcmF0ZWUpe3ZhciByZXN1bHQsaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIGN1cnJlbnQ9aXRlcmF0ZWUoYXJyYXlbaW5kZXhdKTtpZihjdXJyZW50ICE9PSB1bmRlZmluZWQpe3Jlc3VsdCA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkP2N1cnJlbnQ6cmVzdWx0ICsgY3VycmVudDt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VUaW1lcyhuLGl0ZXJhdGVlKXt2YXIgaW5kZXg9LTEscmVzdWx0PUFycmF5KG4pO3doaWxlKCsraW5kZXggPCBuKSB7cmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZVRvUGFpcnMob2JqZWN0LHByb3BzKXtyZXR1cm4gYXJyYXlNYXAocHJvcHMsZnVuY3Rpb24oa2V5KXtyZXR1cm4gW2tleSxvYmplY3Rba2V5XV07fSk7fWZ1bmN0aW9uIGJhc2VVbmFyeShmdW5jKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUpe3JldHVybiBmdW5jKHZhbHVlKTt9O31mdW5jdGlvbiBiYXNlVmFsdWVzKG9iamVjdCxwcm9wcyl7cmV0dXJuIGFycmF5TWFwKHByb3BzLGZ1bmN0aW9uKGtleSl7cmV0dXJuIG9iamVjdFtrZXldO30pO31mdW5jdGlvbiBjaGFyc1N0YXJ0SW5kZXgoc3RyU3ltYm9scyxjaHJTeW1ib2xzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXN0clN5bWJvbHMubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGggJiYgYmFzZUluZGV4T2YoY2hyU3ltYm9scyxzdHJTeW1ib2xzW2luZGV4XSwwKSA+IC0xKSB7fXJldHVybiBpbmRleDt9ZnVuY3Rpb24gY2hhcnNFbmRJbmRleChzdHJTeW1ib2xzLGNoclN5bWJvbHMpe3ZhciBpbmRleD1zdHJTeW1ib2xzLmxlbmd0aDt3aGlsZShpbmRleC0tICYmIGJhc2VJbmRleE9mKGNoclN5bWJvbHMsc3RyU3ltYm9sc1tpbmRleF0sMCkgPiAtMSkge31yZXR1cm4gaW5kZXg7fWZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKXtyZXR1cm4gdmFsdWUgJiYgdmFsdWUuT2JqZWN0ID09PSBPYmplY3Q/dmFsdWU6bnVsbDt9ZnVuY3Rpb24gY29tcGFyZUFzY2VuZGluZyh2YWx1ZSxvdGhlcil7aWYodmFsdWUgIT09IG90aGVyKXt2YXIgdmFsSXNOdWxsPXZhbHVlID09PSBudWxsLHZhbElzVW5kZWY9dmFsdWUgPT09IHVuZGVmaW5lZCx2YWxJc1JlZmxleGl2ZT12YWx1ZSA9PT0gdmFsdWU7dmFyIG90aElzTnVsbD1vdGhlciA9PT0gbnVsbCxvdGhJc1VuZGVmPW90aGVyID09PSB1bmRlZmluZWQsb3RoSXNSZWZsZXhpdmU9b3RoZXIgPT09IG90aGVyO2lmKHZhbHVlID4gb3RoZXIgJiYgIW90aElzTnVsbCB8fCAhdmFsSXNSZWZsZXhpdmUgfHwgdmFsSXNOdWxsICYmICFvdGhJc1VuZGVmICYmIG90aElzUmVmbGV4aXZlIHx8IHZhbElzVW5kZWYgJiYgb3RoSXNSZWZsZXhpdmUpe3JldHVybiAxO31pZih2YWx1ZSA8IG90aGVyICYmICF2YWxJc051bGwgfHwgIW90aElzUmVmbGV4aXZlIHx8IG90aElzTnVsbCAmJiAhdmFsSXNVbmRlZiAmJiB2YWxJc1JlZmxleGl2ZSB8fCBvdGhJc1VuZGVmICYmIHZhbElzUmVmbGV4aXZlKXtyZXR1cm4gLTE7fX1yZXR1cm4gMDt9ZnVuY3Rpb24gY29tcGFyZU11bHRpcGxlKG9iamVjdCxvdGhlcixvcmRlcnMpe3ZhciBpbmRleD0tMSxvYmpDcml0ZXJpYT1vYmplY3QuY3JpdGVyaWEsb3RoQ3JpdGVyaWE9b3RoZXIuY3JpdGVyaWEsbGVuZ3RoPW9iakNyaXRlcmlhLmxlbmd0aCxvcmRlcnNMZW5ndGg9b3JkZXJzLmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHJlc3VsdD1jb21wYXJlQXNjZW5kaW5nKG9iakNyaXRlcmlhW2luZGV4XSxvdGhDcml0ZXJpYVtpbmRleF0pO2lmKHJlc3VsdCl7aWYoaW5kZXggPj0gb3JkZXJzTGVuZ3RoKXtyZXR1cm4gcmVzdWx0O312YXIgb3JkZXI9b3JkZXJzW2luZGV4XTtyZXR1cm4gcmVzdWx0ICogKG9yZGVyID09IFwiZGVzY1wiPy0xOjEpO319cmV0dXJuIG9iamVjdC5pbmRleCAtIG90aGVyLmluZGV4O31mdW5jdGlvbiBkZWJ1cnJMZXR0ZXIobGV0dGVyKXtyZXR1cm4gZGVidXJyZWRMZXR0ZXJzW2xldHRlcl07fWZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGNocil7cmV0dXJuIGh0bWxFc2NhcGVzW2Nocl07fWZ1bmN0aW9uIGVzY2FwZVN0cmluZ0NoYXIoY2hyKXtyZXR1cm4gXCJcXFxcXCIgKyBzdHJpbmdFc2NhcGVzW2Nocl07fWZ1bmN0aW9uIGluZGV4T2ZOYU4oYXJyYXksZnJvbUluZGV4LGZyb21SaWdodCl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGgsaW5kZXg9ZnJvbUluZGV4ICsgKGZyb21SaWdodD8wOi0xKTt3aGlsZShmcm9tUmlnaHQ/aW5kZXgtLTorK2luZGV4IDwgbGVuZ3RoKSB7dmFyIG90aGVyPWFycmF5W2luZGV4XTtpZihvdGhlciAhPT0gb3RoZXIpe3JldHVybiBpbmRleDt9fXJldHVybiAtMTt9ZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKXt2YXIgcmVzdWx0PWZhbHNlO2lmKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9IFwiZnVuY3Rpb25cIil7dHJ5e3Jlc3VsdCA9ICEhKHZhbHVlICsgXCJcIik7fWNhdGNoKGUpIHt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsbGVuZ3RoKXt2YWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpPyt2YWx1ZTotMTtsZW5ndGggPSBsZW5ndGggPT0gbnVsbD9NQVhfU0FGRV9JTlRFR0VSOmxlbmd0aDtyZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDt9ZnVuY3Rpb24gaXRlcmF0b3JUb0FycmF5KGl0ZXJhdG9yKXt2YXIgZGF0YSxyZXN1bHQ9W107d2hpbGUoIShkYXRhID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7cmVzdWx0LnB1c2goZGF0YS52YWx1ZSk7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIG1hcFRvQXJyYXkobWFwKXt2YXIgaW5kZXg9LTEscmVzdWx0PUFycmF5KG1hcC5zaXplKTttYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSxrZXkpe3Jlc3VsdFsrK2luZGV4XSA9IFtrZXksdmFsdWVdO30pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHJlcGxhY2VIb2xkZXJzKGFycmF5LHBsYWNlaG9sZGVyKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aCxyZXNJbmRleD0tMSxyZXN1bHQ9W107d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2lmKGFycmF5W2luZGV4XSA9PT0gcGxhY2Vob2xkZXIpe2FycmF5W2luZGV4XSA9IFBMQUNFSE9MREVSO3Jlc3VsdFsrK3Jlc0luZGV4XSA9IGluZGV4O319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpe3ZhciBpbmRleD0tMSxyZXN1bHQ9QXJyYXkoc2V0LnNpemUpO3NldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKXtyZXN1bHRbKytpbmRleF0gPSB2YWx1ZTt9KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBzdHJpbmdTaXplKHN0cmluZyl7aWYoIShzdHJpbmcgJiYgcmVIYXNDb21wbGV4U3ltYm9sLnRlc3Qoc3RyaW5nKSkpe3JldHVybiBzdHJpbmcubGVuZ3RoO312YXIgcmVzdWx0PXJlQ29tcGxleFN5bWJvbC5sYXN0SW5kZXggPSAwO3doaWxlKHJlQ29tcGxleFN5bWJvbC50ZXN0KHN0cmluZykpIHtyZXN1bHQrKzt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gc3RyaW5nVG9BcnJheShzdHJpbmcpe3JldHVybiBzdHJpbmcubWF0Y2gocmVDb21wbGV4U3ltYm9sKTt9ZnVuY3Rpb24gdW5lc2NhcGVIdG1sQ2hhcihjaHIpe3JldHVybiBodG1sVW5lc2NhcGVzW2Nocl07fWZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0KXtjb250ZXh0ID0gY29udGV4dD9fLmRlZmF1bHRzKHt9LGNvbnRleHQsXy5waWNrKHJvb3QsY29udGV4dFByb3BzKSk6cm9vdDt2YXIgRGF0ZT1jb250ZXh0LkRhdGUsRXJyb3I9Y29udGV4dC5FcnJvcixNYXRoPWNvbnRleHQuTWF0aCxSZWdFeHA9Y29udGV4dC5SZWdFeHAsVHlwZUVycm9yPWNvbnRleHQuVHlwZUVycm9yO3ZhciBhcnJheVByb3RvPWNvbnRleHQuQXJyYXkucHJvdG90eXBlLG9iamVjdFByb3RvPWNvbnRleHQuT2JqZWN0LnByb3RvdHlwZTt2YXIgZnVuY1RvU3RyaW5nPWNvbnRleHQuRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBoYXNPd25Qcm9wZXJ0eT1vYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTt2YXIgaWRDb3VudGVyPTA7dmFyIG9iamVjdEN0b3JTdHJpbmc9ZnVuY1RvU3RyaW5nLmNhbGwoT2JqZWN0KTt2YXIgb2JqZWN0VG9TdHJpbmc9b2JqZWN0UHJvdG8udG9TdHJpbmc7dmFyIG9sZERhc2g9cm9vdC5fO3ZhciByZUlzTmF0aXZlPVJlZ0V4cChcIl5cIiArIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhcixcIlxcXFwkJlwiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikgKyBcIiRcIik7dmFyIFJlZmxlY3Q9Y29udGV4dC5SZWZsZWN0LFN5bWJvbD1jb250ZXh0LlN5bWJvbCxVaW50OEFycmF5PWNvbnRleHQuVWludDhBcnJheSxjbGVhclRpbWVvdXQ9Y29udGV4dC5jbGVhclRpbWVvdXQsZW51bWVyYXRlPVJlZmxlY3Q/UmVmbGVjdC5lbnVtZXJhdGU6dW5kZWZpbmVkLGdldFByb3RvdHlwZU9mPU9iamVjdC5nZXRQcm90b3R5cGVPZixnZXRPd25Qcm9wZXJ0eVN5bWJvbHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxpdGVyYXRvclN5bWJvbD10eXBlb2YgKGl0ZXJhdG9yU3ltYm9sID0gU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvcikgPT0gXCJzeW1ib2xcIj9pdGVyYXRvclN5bWJvbDp1bmRlZmluZWQscHJvcGVydHlJc0VudW1lcmFibGU9b2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsc2V0VGltZW91dD1jb250ZXh0LnNldFRpbWVvdXQsc3BsaWNlPWFycmF5UHJvdG8uc3BsaWNlO3ZhciBuYXRpdmVDZWlsPU1hdGguY2VpbCxuYXRpdmVGbG9vcj1NYXRoLmZsb29yLG5hdGl2ZUlzRmluaXRlPWNvbnRleHQuaXNGaW5pdGUsbmF0aXZlSm9pbj1hcnJheVByb3RvLmpvaW4sbmF0aXZlS2V5cz1PYmplY3Qua2V5cyxuYXRpdmVNYXg9TWF0aC5tYXgsbmF0aXZlTWluPU1hdGgubWluLG5hdGl2ZVBhcnNlSW50PWNvbnRleHQucGFyc2VJbnQsbmF0aXZlUmFuZG9tPU1hdGgucmFuZG9tLG5hdGl2ZVJldmVyc2U9YXJyYXlQcm90by5yZXZlcnNlO3ZhciBNYXA9Z2V0TmF0aXZlKGNvbnRleHQsXCJNYXBcIiksU2V0PWdldE5hdGl2ZShjb250ZXh0LFwiU2V0XCIpLFdlYWtNYXA9Z2V0TmF0aXZlKGNvbnRleHQsXCJXZWFrTWFwXCIpLG5hdGl2ZUNyZWF0ZT1nZXROYXRpdmUoT2JqZWN0LFwiY3JlYXRlXCIpO3ZhciBtZXRhTWFwPVdlYWtNYXAgJiYgbmV3IFdlYWtNYXAoKTt2YXIgbWFwQ3RvclN0cmluZz1NYXA/ZnVuY1RvU3RyaW5nLmNhbGwoTWFwKTpcIlwiLHNldEN0b3JTdHJpbmc9U2V0P2Z1bmNUb1N0cmluZy5jYWxsKFNldCk6XCJcIjt2YXIgc3ltYm9sUHJvdG89U3ltYm9sP1N5bWJvbC5wcm90b3R5cGU6dW5kZWZpbmVkLHN5bWJvbFZhbHVlT2Y9U3ltYm9sP3N5bWJvbFByb3RvLnZhbHVlT2Y6dW5kZWZpbmVkLHN5bWJvbFRvU3RyaW5nPVN5bWJvbD9zeW1ib2xQcm90by50b1N0cmluZzp1bmRlZmluZWQ7dmFyIHJlYWxOYW1lcz17fTtmdW5jdGlvbiBsb2Rhc2godmFsdWUpe2lmKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgIWlzQXJyYXkodmFsdWUpICYmICEodmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikpe2lmKHZhbHVlIGluc3RhbmNlb2YgTG9kYXNoV3JhcHBlcil7cmV0dXJuIHZhbHVlO31pZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLFwiX193cmFwcGVkX19cIikpe3JldHVybiB3cmFwcGVyQ2xvbmUodmFsdWUpO319cmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHZhbHVlKTt9ZnVuY3Rpb24gYmFzZUxvZGFzaCgpe31mdW5jdGlvbiBMb2Rhc2hXcmFwcGVyKHZhbHVlLGNoYWluQWxsKXt0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7dGhpcy5fX2FjdGlvbnNfXyA9IFtdO3RoaXMuX19jaGFpbl9fID0gISFjaGFpbkFsbDt0aGlzLl9faW5kZXhfXyA9IDA7dGhpcy5fX3ZhbHVlc19fID0gdW5kZWZpbmVkO31sb2Rhc2gudGVtcGxhdGVTZXR0aW5ncyA9IHtlc2NhcGU6cmVFc2NhcGUsZXZhbHVhdGU6cmVFdmFsdWF0ZSxpbnRlcnBvbGF0ZTpyZUludGVycG9sYXRlLHZhcmlhYmxlOlwiXCIsaW1wb3J0czp7Xzpsb2Rhc2h9fTtmdW5jdGlvbiBMYXp5V3JhcHBlcih2YWx1ZSl7dGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO3RoaXMuX19hY3Rpb25zX18gPSBbXTt0aGlzLl9fZGlyX18gPSAxO3RoaXMuX19maWx0ZXJlZF9fID0gZmFsc2U7dGhpcy5fX2l0ZXJhdGVlc19fID0gW107dGhpcy5fX3Rha2VDb3VudF9fID0gTUFYX0FSUkFZX0xFTkdUSDt0aGlzLl9fdmlld3NfXyA9IFtdO31mdW5jdGlvbiBsYXp5Q2xvbmUoKXt2YXIgcmVzdWx0PW5ldyBMYXp5V3JhcHBlcih0aGlzLl9fd3JhcHBlZF9fKTtyZXN1bHQuX19hY3Rpb25zX18gPSBjb3B5QXJyYXkodGhpcy5fX2FjdGlvbnNfXyk7cmVzdWx0Ll9fZGlyX18gPSB0aGlzLl9fZGlyX187cmVzdWx0Ll9fZmlsdGVyZWRfXyA9IHRoaXMuX19maWx0ZXJlZF9fO3Jlc3VsdC5fX2l0ZXJhdGVlc19fID0gY29weUFycmF5KHRoaXMuX19pdGVyYXRlZXNfXyk7cmVzdWx0Ll9fdGFrZUNvdW50X18gPSB0aGlzLl9fdGFrZUNvdW50X187cmVzdWx0Ll9fdmlld3NfXyA9IGNvcHlBcnJheSh0aGlzLl9fdmlld3NfXyk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gbGF6eVJldmVyc2UoKXtpZih0aGlzLl9fZmlsdGVyZWRfXyl7dmFyIHJlc3VsdD1uZXcgTGF6eVdyYXBwZXIodGhpcyk7cmVzdWx0Ll9fZGlyX18gPSAtMTtyZXN1bHQuX19maWx0ZXJlZF9fID0gdHJ1ZTt9ZWxzZSB7cmVzdWx0ID0gdGhpcy5jbG9uZSgpO3Jlc3VsdC5fX2Rpcl9fICo9IC0xO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBsYXp5VmFsdWUoKXt2YXIgYXJyYXk9dGhpcy5fX3dyYXBwZWRfXy52YWx1ZSgpLGRpcj10aGlzLl9fZGlyX18saXNBcnI9aXNBcnJheShhcnJheSksaXNSaWdodD1kaXIgPCAwLGFyckxlbmd0aD1pc0Fycj9hcnJheS5sZW5ndGg6MCx2aWV3PWdldFZpZXcoMCxhcnJMZW5ndGgsdGhpcy5fX3ZpZXdzX18pLHN0YXJ0PXZpZXcuc3RhcnQsZW5kPXZpZXcuZW5kLGxlbmd0aD1lbmQgLSBzdGFydCxpbmRleD1pc1JpZ2h0P2VuZDpzdGFydCAtIDEsaXRlcmF0ZWVzPXRoaXMuX19pdGVyYXRlZXNfXyxpdGVyTGVuZ3RoPWl0ZXJhdGVlcy5sZW5ndGgscmVzSW5kZXg9MCx0YWtlQ291bnQ9bmF0aXZlTWluKGxlbmd0aCx0aGlzLl9fdGFrZUNvdW50X18pO2lmKCFpc0FyciB8fCBhcnJMZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIHx8IGFyckxlbmd0aCA9PSBsZW5ndGggJiYgdGFrZUNvdW50ID09IGxlbmd0aCl7cmV0dXJuIGJhc2VXcmFwcGVyVmFsdWUoYXJyYXksdGhpcy5fX2FjdGlvbnNfXyk7fXZhciByZXN1bHQ9W107b3V0ZXI6IHdoaWxlKGxlbmd0aC0tICYmIHJlc0luZGV4IDwgdGFrZUNvdW50KSB7aW5kZXggKz0gZGlyO3ZhciBpdGVySW5kZXg9LTEsdmFsdWU9YXJyYXlbaW5kZXhdO3doaWxlKCsraXRlckluZGV4IDwgaXRlckxlbmd0aCkge3ZhciBkYXRhPWl0ZXJhdGVlc1tpdGVySW5kZXhdLGl0ZXJhdGVlPWRhdGEuaXRlcmF0ZWUsdHlwZT1kYXRhLnR5cGUsY29tcHV0ZWQ9aXRlcmF0ZWUodmFsdWUpO2lmKHR5cGUgPT0gTEFaWV9NQVBfRkxBRyl7dmFsdWUgPSBjb21wdXRlZDt9ZWxzZSBpZighY29tcHV0ZWQpe2lmKHR5cGUgPT0gTEFaWV9GSUxURVJfRkxBRyl7Y29udGludWUgb3V0ZXI7fWVsc2Uge2JyZWFrIG91dGVyO319fXJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBIYXNoKCl7fWZ1bmN0aW9uIGhhc2hEZWxldGUoaGFzaCxrZXkpe3JldHVybiBoYXNoSGFzKGhhc2gsa2V5KSAmJiBkZWxldGUgaGFzaFtrZXldO31mdW5jdGlvbiBoYXNoR2V0KGhhc2gsa2V5KXtpZihuYXRpdmVDcmVhdGUpe3ZhciByZXN1bHQ9aGFzaFtrZXldO3JldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEP3VuZGVmaW5lZDpyZXN1bHQ7fXJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGhhc2gsa2V5KT9oYXNoW2tleV06dW5kZWZpbmVkO31mdW5jdGlvbiBoYXNoSGFzKGhhc2gsa2V5KXtyZXR1cm4gbmF0aXZlQ3JlYXRlP2hhc2hba2V5XSAhPT0gdW5kZWZpbmVkOmhhc093blByb3BlcnR5LmNhbGwoaGFzaCxrZXkpO31mdW5jdGlvbiBoYXNoU2V0KGhhc2gsa2V5LHZhbHVlKXtoYXNoW2tleV0gPSBuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZD9IQVNIX1VOREVGSU5FRDp2YWx1ZTt9ZnVuY3Rpb24gTWFwQ2FjaGUodmFsdWVzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXZhbHVlcz92YWx1ZXMubGVuZ3RoOjA7dGhpcy5jbGVhcigpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgZW50cnk9dmFsdWVzW2luZGV4XTt0aGlzLnNldChlbnRyeVswXSxlbnRyeVsxXSk7fX1mdW5jdGlvbiBtYXBDbGVhcigpe3RoaXMuX19kYXRhX18gPSB7aGFzaDpuZXcgSGFzaCgpLG1hcDpNYXA/bmV3IE1hcCgpOltdLHN0cmluZzpuZXcgSGFzaCgpfTt9ZnVuY3Rpb24gbWFwRGVsZXRlKGtleSl7dmFyIGRhdGE9dGhpcy5fX2RhdGFfXztpZihpc0tleWFibGUoa2V5KSl7cmV0dXJuIGhhc2hEZWxldGUodHlwZW9mIGtleSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaCxrZXkpO31yZXR1cm4gTWFwP2RhdGEubWFwW1wiZGVsZXRlXCJdKGtleSk6YXNzb2NEZWxldGUoZGF0YS5tYXAsa2V5KTt9ZnVuY3Rpb24gbWFwR2V0KGtleSl7dmFyIGRhdGE9dGhpcy5fX2RhdGFfXztpZihpc0tleWFibGUoa2V5KSl7cmV0dXJuIGhhc2hHZXQodHlwZW9mIGtleSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaCxrZXkpO31yZXR1cm4gTWFwP2RhdGEubWFwLmdldChrZXkpOmFzc29jR2V0KGRhdGEubWFwLGtleSk7fWZ1bmN0aW9uIG1hcEhhcyhrZXkpe3ZhciBkYXRhPXRoaXMuX19kYXRhX187aWYoaXNLZXlhYmxlKGtleSkpe3JldHVybiBoYXNoSGFzKHR5cGVvZiBrZXkgPT0gXCJzdHJpbmdcIj9kYXRhLnN0cmluZzpkYXRhLmhhc2gsa2V5KTt9cmV0dXJuIE1hcD9kYXRhLm1hcC5oYXMoa2V5KTphc3NvY0hhcyhkYXRhLm1hcCxrZXkpO31mdW5jdGlvbiBtYXBTZXQoa2V5LHZhbHVlKXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fO2lmKGlzS2V5YWJsZShrZXkpKXtoYXNoU2V0KHR5cGVvZiBrZXkgPT0gXCJzdHJpbmdcIj9kYXRhLnN0cmluZzpkYXRhLmhhc2gsa2V5LHZhbHVlKTt9ZWxzZSBpZihNYXApe2RhdGEubWFwLnNldChrZXksdmFsdWUpO31lbHNlIHthc3NvY1NldChkYXRhLm1hcCxrZXksdmFsdWUpO31yZXR1cm4gdGhpczt9ZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXZhbHVlcz92YWx1ZXMubGVuZ3RoOjA7dGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZSgpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt0aGlzLnB1c2godmFsdWVzW2luZGV4XSk7fX1mdW5jdGlvbiBjYWNoZUhhcyhjYWNoZSx2YWx1ZSl7dmFyIG1hcD1jYWNoZS5fX2RhdGFfXztpZihpc0tleWFibGUodmFsdWUpKXt2YXIgZGF0YT1tYXAuX19kYXRhX18saGFzaD10eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIj9kYXRhLnN0cmluZzpkYXRhLmhhc2g7cmV0dXJuIGhhc2hbdmFsdWVdID09PSBIQVNIX1VOREVGSU5FRDt9cmV0dXJuIG1hcC5oYXModmFsdWUpO31mdW5jdGlvbiBjYWNoZVB1c2godmFsdWUpe3ZhciBtYXA9dGhpcy5fX2RhdGFfXztpZihpc0tleWFibGUodmFsdWUpKXt2YXIgZGF0YT1tYXAuX19kYXRhX18saGFzaD10eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIj9kYXRhLnN0cmluZzpkYXRhLmhhc2g7aGFzaFt2YWx1ZV0gPSBIQVNIX1VOREVGSU5FRDt9ZWxzZSB7bWFwLnNldCh2YWx1ZSxIQVNIX1VOREVGSU5FRCk7fX1mdW5jdGlvbiBTdGFjayh2YWx1ZXMpe3ZhciBpbmRleD0tMSxsZW5ndGg9dmFsdWVzP3ZhbHVlcy5sZW5ndGg6MDt0aGlzLmNsZWFyKCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBlbnRyeT12YWx1ZXNbaW5kZXhdO3RoaXMuc2V0KGVudHJ5WzBdLGVudHJ5WzFdKTt9fWZ1bmN0aW9uIHN0YWNrQ2xlYXIoKXt0aGlzLl9fZGF0YV9fID0ge2FycmF5OltdLG1hcDpudWxsfTt9ZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fLGFycmF5PWRhdGEuYXJyYXk7cmV0dXJuIGFycmF5P2Fzc29jRGVsZXRlKGFycmF5LGtleSk6ZGF0YS5tYXBbXCJkZWxldGVcIl0oa2V5KTt9ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fLGFycmF5PWRhdGEuYXJyYXk7cmV0dXJuIGFycmF5P2Fzc29jR2V0KGFycmF5LGtleSk6ZGF0YS5tYXAuZ2V0KGtleSk7fWZ1bmN0aW9uIHN0YWNrSGFzKGtleSl7dmFyIGRhdGE9dGhpcy5fX2RhdGFfXyxhcnJheT1kYXRhLmFycmF5O3JldHVybiBhcnJheT9hc3NvY0hhcyhhcnJheSxrZXkpOmRhdGEubWFwLmhhcyhrZXkpO31mdW5jdGlvbiBzdGFja1NldChrZXksdmFsdWUpe3ZhciBkYXRhPXRoaXMuX19kYXRhX18sYXJyYXk9ZGF0YS5hcnJheTtpZihhcnJheSl7aWYoYXJyYXkubGVuZ3RoIDwgTEFSR0VfQVJSQVlfU0laRSAtIDEpe2Fzc29jU2V0KGFycmF5LGtleSx2YWx1ZSk7fWVsc2Uge2RhdGEuYXJyYXkgPSBudWxsO2RhdGEubWFwID0gbmV3IE1hcENhY2hlKGFycmF5KTt9fXZhciBtYXA9ZGF0YS5tYXA7aWYobWFwKXttYXAuc2V0KGtleSx2YWx1ZSk7fXJldHVybiB0aGlzO31mdW5jdGlvbiBhc3NvY0RlbGV0ZShhcnJheSxrZXkpe3ZhciBpbmRleD1hc3NvY0luZGV4T2YoYXJyYXksa2V5KTtpZihpbmRleCA8IDApe3JldHVybiBmYWxzZTt9dmFyIGxhc3RJbmRleD1hcnJheS5sZW5ndGggLSAxO2lmKGluZGV4ID09IGxhc3RJbmRleCl7YXJyYXkucG9wKCk7fWVsc2Uge3NwbGljZS5jYWxsKGFycmF5LGluZGV4LDEpO31yZXR1cm4gdHJ1ZTt9ZnVuY3Rpb24gYXNzb2NHZXQoYXJyYXksa2V5KXt2YXIgaW5kZXg9YXNzb2NJbmRleE9mKGFycmF5LGtleSk7cmV0dXJuIGluZGV4IDwgMD91bmRlZmluZWQ6YXJyYXlbaW5kZXhdWzFdO31mdW5jdGlvbiBhc3NvY0hhcyhhcnJheSxrZXkpe3JldHVybiBhc3NvY0luZGV4T2YoYXJyYXksa2V5KSA+IC0xO31mdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksa2V5KXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZShsZW5ndGgtLSkge2lmKGVxKGFycmF5W2xlbmd0aF1bMF0sa2V5KSl7cmV0dXJuIGxlbmd0aDt9fXJldHVybiAtMTt9ZnVuY3Rpb24gYXNzb2NTZXQoYXJyYXksa2V5LHZhbHVlKXt2YXIgaW5kZXg9YXNzb2NJbmRleE9mKGFycmF5LGtleSk7aWYoaW5kZXggPCAwKXthcnJheS5wdXNoKFtrZXksdmFsdWVdKTt9ZWxzZSB7YXJyYXlbaW5kZXhdWzFdID0gdmFsdWU7fX1mdW5jdGlvbiBhc3NpZ25JbkRlZmF1bHRzKG9ialZhbHVlLHNyY1ZhbHVlLGtleSxvYmplY3Qpe2lmKG9ialZhbHVlID09PSB1bmRlZmluZWQgfHwgZXEob2JqVmFsdWUsb2JqZWN0UHJvdG9ba2V5XSkgJiYgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LGtleSkpe3JldHVybiBzcmNWYWx1ZTt9cmV0dXJuIG9ialZhbHVlO31mdW5jdGlvbiBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCxrZXksdmFsdWUpe2lmKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgIWVxKG9iamVjdFtrZXldLHZhbHVlKSB8fCB0eXBlb2Yga2V5ID09IFwibnVtYmVyXCIgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKXtvYmplY3Rba2V5XSA9IHZhbHVlO319ZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LGtleSx2YWx1ZSl7dmFyIG9ialZhbHVlPW9iamVjdFtrZXldO2lmKCFlcShvYmpWYWx1ZSx2YWx1ZSkgfHwgZXEob2JqVmFsdWUsb2JqZWN0UHJvdG9ba2V5XSkgJiYgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LGtleSkgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKXtvYmplY3Rba2V5XSA9IHZhbHVlO319ZnVuY3Rpb24gYmFzZUFnZ3JlZ2F0b3IoY29sbGVjdGlvbixzZXR0ZXIsaXRlcmF0ZWUsYWNjdW11bGF0b3Ipe2Jhc2VFYWNoKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsa2V5LGNvbGxlY3Rpb24pe3NldHRlcihhY2N1bXVsYXRvcix2YWx1ZSxpdGVyYXRlZSh2YWx1ZSksY29sbGVjdGlvbik7fSk7cmV0dXJuIGFjY3VtdWxhdG9yO31mdW5jdGlvbiBiYXNlQXNzaWduKG9iamVjdCxzb3VyY2Upe3JldHVybiBvYmplY3QgJiYgY29weU9iamVjdChzb3VyY2Usa2V5cyhzb3VyY2UpLG9iamVjdCk7fWZ1bmN0aW9uIGJhc2VBdChvYmplY3QscGF0aHMpe3ZhciBpbmRleD0tMSxpc05pbD1vYmplY3QgPT0gbnVsbCxsZW5ndGg9cGF0aHMubGVuZ3RoLHJlc3VsdD1BcnJheShsZW5ndGgpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtyZXN1bHRbaW5kZXhdID0gaXNOaWw/dW5kZWZpbmVkOmdldChvYmplY3QscGF0aHNbaW5kZXhdKTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZUNsYW1wKG51bWJlcixsb3dlcix1cHBlcil7aWYobnVtYmVyID09PSBudW1iZXIpe2lmKHVwcGVyICE9PSB1bmRlZmluZWQpe251bWJlciA9IG51bWJlciA8PSB1cHBlcj9udW1iZXI6dXBwZXI7fWlmKGxvd2VyICE9PSB1bmRlZmluZWQpe251bWJlciA9IG51bWJlciA+PSBsb3dlcj9udW1iZXI6bG93ZXI7fX1yZXR1cm4gbnVtYmVyO31mdW5jdGlvbiBiYXNlQ2xvbmUodmFsdWUsaXNEZWVwLGN1c3RvbWl6ZXIsa2V5LG9iamVjdCxzdGFjayl7dmFyIHJlc3VsdDtpZihjdXN0b21pemVyKXtyZXN1bHQgPSBvYmplY3Q/Y3VzdG9taXplcih2YWx1ZSxrZXksb2JqZWN0LHN0YWNrKTpjdXN0b21pemVyKHZhbHVlKTt9aWYocmVzdWx0ICE9PSB1bmRlZmluZWQpe3JldHVybiByZXN1bHQ7fWlmKCFpc09iamVjdCh2YWx1ZSkpe3JldHVybiB2YWx1ZTt9dmFyIGlzQXJyPWlzQXJyYXkodmFsdWUpO2lmKGlzQXJyKXtyZXN1bHQgPSBpbml0Q2xvbmVBcnJheSh2YWx1ZSk7aWYoIWlzRGVlcCl7cmV0dXJuIGNvcHlBcnJheSh2YWx1ZSxyZXN1bHQpO319ZWxzZSB7dmFyIHRhZz1nZXRUYWcodmFsdWUpLGlzRnVuYz10YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO2lmKHRhZyA9PSBvYmplY3RUYWcgfHwgdGFnID09IGFyZ3NUYWcgfHwgaXNGdW5jICYmICFvYmplY3Qpe2lmKGlzSG9zdE9iamVjdCh2YWx1ZSkpe3JldHVybiBvYmplY3Q/dmFsdWU6e307fXJlc3VsdCA9IGluaXRDbG9uZU9iamVjdChpc0Z1bmM/e306dmFsdWUpO2lmKCFpc0RlZXApe3JldHVybiBjb3B5U3ltYm9scyh2YWx1ZSxiYXNlQXNzaWduKHJlc3VsdCx2YWx1ZSkpO319ZWxzZSB7cmV0dXJuIGNsb25lYWJsZVRhZ3NbdGFnXT9pbml0Q2xvbmVCeVRhZyh2YWx1ZSx0YWcsaXNEZWVwKTpvYmplY3Q/dmFsdWU6e307fX1zdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2soKSk7dmFyIHN0YWNrZWQ9c3RhY2suZ2V0KHZhbHVlKTtpZihzdGFja2VkKXtyZXR1cm4gc3RhY2tlZDt9c3RhY2suc2V0KHZhbHVlLHJlc3VsdCk7KGlzQXJyP2FycmF5RWFjaDpiYXNlRm9yT3duKSh2YWx1ZSxmdW5jdGlvbihzdWJWYWx1ZSxrZXkpe2Fzc2lnblZhbHVlKHJlc3VsdCxrZXksYmFzZUNsb25lKHN1YlZhbHVlLGlzRGVlcCxjdXN0b21pemVyLGtleSx2YWx1ZSxzdGFjaykpO30pO3JldHVybiBpc0Fycj9yZXN1bHQ6Y29weVN5bWJvbHModmFsdWUscmVzdWx0KTt9ZnVuY3Rpb24gYmFzZUNvbmZvcm1zKHNvdXJjZSl7dmFyIHByb3BzPWtleXMoc291cmNlKSxsZW5ndGg9cHJvcHMubGVuZ3RoO3JldHVybiBmdW5jdGlvbihvYmplY3Qpe2lmKG9iamVjdCA9PSBudWxsKXtyZXR1cm4gIWxlbmd0aDt9dmFyIGluZGV4PWxlbmd0aDt3aGlsZShpbmRleC0tKSB7dmFyIGtleT1wcm9wc1tpbmRleF0scHJlZGljYXRlPXNvdXJjZVtrZXldLHZhbHVlPW9iamVjdFtrZXldO2lmKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHx8ICFwcmVkaWNhdGUodmFsdWUpKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9O312YXIgYmFzZUNyZWF0ZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiBvYmplY3QoKXt9cmV0dXJuIGZ1bmN0aW9uKHByb3RvdHlwZSl7aWYoaXNPYmplY3QocHJvdG90eXBlKSl7b2JqZWN0LnByb3RvdHlwZSA9IHByb3RvdHlwZTt2YXIgcmVzdWx0PW5ldyBvYmplY3QoKTtvYmplY3QucHJvdG90eXBlID0gdW5kZWZpbmVkO31yZXR1cm4gcmVzdWx0IHx8IHt9O307fSkoKTtmdW5jdGlvbiBiYXNlRGVsYXkoZnVuYyx3YWl0LGFyZ3Mpe2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31yZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2Z1bmMuYXBwbHkodW5kZWZpbmVkLGFyZ3MpO30sd2FpdCk7fWZ1bmN0aW9uIGJhc2VEaWZmZXJlbmNlKGFycmF5LHZhbHVlcyxpdGVyYXRlZSxjb21wYXJhdG9yKXt2YXIgaW5kZXg9LTEsaW5jbHVkZXM9YXJyYXlJbmNsdWRlcyxpc0NvbW1vbj10cnVlLGxlbmd0aD1hcnJheS5sZW5ndGgscmVzdWx0PVtdLHZhbHVlc0xlbmd0aD12YWx1ZXMubGVuZ3RoO2lmKCFsZW5ndGgpe3JldHVybiByZXN1bHQ7fWlmKGl0ZXJhdGVlKXt2YWx1ZXMgPSBhcnJheU1hcCh2YWx1ZXMsYmFzZVVuYXJ5KGl0ZXJhdGVlKSk7fWlmKGNvbXBhcmF0b3Ipe2luY2x1ZGVzID0gYXJyYXlJbmNsdWRlc1dpdGg7aXNDb21tb24gPSBmYWxzZTt9ZWxzZSBpZih2YWx1ZXMubGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUpe2luY2x1ZGVzID0gY2FjaGVIYXM7aXNDb21tb24gPSBmYWxzZTt2YWx1ZXMgPSBuZXcgU2V0Q2FjaGUodmFsdWVzKTt9b3V0ZXI6IHdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdLGNvbXB1dGVkPWl0ZXJhdGVlP2l0ZXJhdGVlKHZhbHVlKTp2YWx1ZTtpZihpc0NvbW1vbiAmJiBjb21wdXRlZCA9PT0gY29tcHV0ZWQpe3ZhciB2YWx1ZXNJbmRleD12YWx1ZXNMZW5ndGg7d2hpbGUodmFsdWVzSW5kZXgtLSkge2lmKHZhbHVlc1t2YWx1ZXNJbmRleF0gPT09IGNvbXB1dGVkKXtjb250aW51ZSBvdXRlcjt9fXJlc3VsdC5wdXNoKHZhbHVlKTt9ZWxzZSBpZighaW5jbHVkZXModmFsdWVzLGNvbXB1dGVkLGNvbXBhcmF0b3IpKXtyZXN1bHQucHVzaCh2YWx1ZSk7fX1yZXR1cm4gcmVzdWx0O312YXIgYmFzZUVhY2g9Y3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7dmFyIGJhc2VFYWNoUmlnaHQ9Y3JlYXRlQmFzZUVhY2goYmFzZUZvck93blJpZ2h0LHRydWUpO2Z1bmN0aW9uIGJhc2VFdmVyeShjb2xsZWN0aW9uLHByZWRpY2F0ZSl7dmFyIHJlc3VsdD10cnVlO2Jhc2VFYWNoKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsaW5kZXgsY29sbGVjdGlvbil7cmVzdWx0ID0gISFwcmVkaWNhdGUodmFsdWUsaW5kZXgsY29sbGVjdGlvbik7cmV0dXJuIHJlc3VsdDt9KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlRmlsbChhcnJheSx2YWx1ZSxzdGFydCxlbmQpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoO3N0YXJ0ID0gdG9JbnRlZ2VyKHN0YXJ0KTtpZihzdGFydCA8IDApe3N0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoPzA6bGVuZ3RoICsgc3RhcnQ7fWVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aD9sZW5ndGg6dG9JbnRlZ2VyKGVuZCk7aWYoZW5kIDwgMCl7ZW5kICs9IGxlbmd0aDt9ZW5kID0gc3RhcnQgPiBlbmQ/MDp0b0xlbmd0aChlbmQpO3doaWxlKHN0YXJ0IDwgZW5kKSB7YXJyYXlbc3RhcnQrK10gPSB2YWx1ZTt9cmV0dXJuIGFycmF5O31mdW5jdGlvbiBiYXNlRmlsdGVyKGNvbGxlY3Rpb24scHJlZGljYXRlKXt2YXIgcmVzdWx0PVtdO2Jhc2VFYWNoKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsaW5kZXgsY29sbGVjdGlvbil7aWYocHJlZGljYXRlKHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pKXtyZXN1bHQucHVzaCh2YWx1ZSk7fX0pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VGbGF0dGVuKGFycmF5LGlzRGVlcCxpc1N0cmljdCxyZXN1bHQpe3Jlc3VsdCB8fCAocmVzdWx0ID0gW10pO3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdO2lmKGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSAmJiAoaXNTdHJpY3QgfHwgaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSl7aWYoaXNEZWVwKXtiYXNlRmxhdHRlbih2YWx1ZSxpc0RlZXAsaXNTdHJpY3QscmVzdWx0KTt9ZWxzZSB7YXJyYXlQdXNoKHJlc3VsdCx2YWx1ZSk7fX1lbHNlIGlmKCFpc1N0cmljdCl7cmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gdmFsdWU7fX1yZXR1cm4gcmVzdWx0O312YXIgYmFzZUZvcj1jcmVhdGVCYXNlRm9yKCk7dmFyIGJhc2VGb3JSaWdodD1jcmVhdGVCYXNlRm9yKHRydWUpO2Z1bmN0aW9uIGJhc2VGb3JJbihvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBvYmplY3QgPT0gbnVsbD9vYmplY3Q6YmFzZUZvcihvYmplY3QsaXRlcmF0ZWUsa2V5c0luKTt9ZnVuY3Rpb24gYmFzZUZvck93bihvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBvYmplY3QgJiYgYmFzZUZvcihvYmplY3QsaXRlcmF0ZWUsa2V5cyk7fWZ1bmN0aW9uIGJhc2VGb3JPd25SaWdodChvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBvYmplY3QgJiYgYmFzZUZvclJpZ2h0KG9iamVjdCxpdGVyYXRlZSxrZXlzKTt9ZnVuY3Rpb24gYmFzZUZ1bmN0aW9ucyhvYmplY3QscHJvcHMpe3JldHVybiBhcnJheUZpbHRlcihwcm9wcyxmdW5jdGlvbihrZXkpe3JldHVybiBpc0Z1bmN0aW9uKG9iamVjdFtrZXldKTt9KTt9ZnVuY3Rpb24gYmFzZUdldChvYmplY3QscGF0aCl7cGF0aCA9IGlzS2V5KHBhdGgsb2JqZWN0KT9bcGF0aCArIFwiXCJdOmJhc2VUb1BhdGgocGF0aCk7dmFyIGluZGV4PTAsbGVuZ3RoPXBhdGgubGVuZ3RoO3doaWxlKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7b2JqZWN0ID0gb2JqZWN0W3BhdGhbaW5kZXgrK11dO31yZXR1cm4gaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoP29iamVjdDp1bmRlZmluZWQ7fWZ1bmN0aW9uIGJhc2VIYXMob2JqZWN0LGtleSl7cmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LGtleSkgfHwgdHlwZW9mIG9iamVjdCA9PSBcIm9iamVjdFwiICYmIGtleSBpbiBvYmplY3QgJiYgZ2V0UHJvdG90eXBlT2Yob2JqZWN0KSA9PT0gbnVsbDt9ZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCxrZXkpe3JldHVybiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7fWZ1bmN0aW9uIGJhc2VJblJhbmdlKG51bWJlcixzdGFydCxlbmQpe3JldHVybiBudW1iZXIgPj0gbmF0aXZlTWluKHN0YXJ0LGVuZCkgJiYgbnVtYmVyIDwgbmF0aXZlTWF4KHN0YXJ0LGVuZCk7fWZ1bmN0aW9uIGJhc2VJbnRlcnNlY3Rpb24oYXJyYXlzLGl0ZXJhdGVlLGNvbXBhcmF0b3Ipe3ZhciBpbmNsdWRlcz1jb21wYXJhdG9yP2FycmF5SW5jbHVkZXNXaXRoOmFycmF5SW5jbHVkZXMsb3RoTGVuZ3RoPWFycmF5cy5sZW5ndGgsb3RoSW5kZXg9b3RoTGVuZ3RoLGNhY2hlcz1BcnJheShvdGhMZW5ndGgpLHJlc3VsdD1bXTt3aGlsZShvdGhJbmRleC0tKSB7dmFyIGFycmF5PWFycmF5c1tvdGhJbmRleF07aWYob3RoSW5kZXggJiYgaXRlcmF0ZWUpe2FycmF5ID0gYXJyYXlNYXAoYXJyYXksYmFzZVVuYXJ5KGl0ZXJhdGVlKSk7fWNhY2hlc1tvdGhJbmRleF0gPSAhY29tcGFyYXRvciAmJiAoaXRlcmF0ZWUgfHwgYXJyYXkubGVuZ3RoID49IDEyMCk/bmV3IFNldENhY2hlKG90aEluZGV4ICYmIGFycmF5KTp1bmRlZmluZWQ7fWFycmF5ID0gYXJyYXlzWzBdO3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoLHNlZW49Y2FjaGVzWzBdO291dGVyOiB3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSk6dmFsdWU7aWYoIShzZWVuP2NhY2hlSGFzKHNlZW4sY29tcHV0ZWQpOmluY2x1ZGVzKHJlc3VsdCxjb21wdXRlZCxjb21wYXJhdG9yKSkpe3ZhciBvdGhJbmRleD1vdGhMZW5ndGg7d2hpbGUoLS1vdGhJbmRleCkge3ZhciBjYWNoZT1jYWNoZXNbb3RoSW5kZXhdO2lmKCEoY2FjaGU/Y2FjaGVIYXMoY2FjaGUsY29tcHV0ZWQpOmluY2x1ZGVzKGFycmF5c1tvdGhJbmRleF0sY29tcHV0ZWQsY29tcGFyYXRvcikpKXtjb250aW51ZSBvdXRlcjt9fWlmKHNlZW4pe3NlZW4ucHVzaChjb21wdXRlZCk7fXJlc3VsdC5wdXNoKHZhbHVlKTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VJbnZlcnRlcihvYmplY3Qsc2V0dGVyLGl0ZXJhdGVlLGFjY3VtdWxhdG9yKXtiYXNlRm9yT3duKG9iamVjdCxmdW5jdGlvbih2YWx1ZSxrZXksb2JqZWN0KXtzZXR0ZXIoYWNjdW11bGF0b3IsaXRlcmF0ZWUodmFsdWUpLGtleSxvYmplY3QpO30pO3JldHVybiBhY2N1bXVsYXRvcjt9ZnVuY3Rpb24gYmFzZUludm9rZShvYmplY3QscGF0aCxhcmdzKXtpZighaXNLZXkocGF0aCxvYmplY3QpKXtwYXRoID0gYmFzZVRvUGF0aChwYXRoKTtvYmplY3QgPSBwYXJlbnQob2JqZWN0LHBhdGgpO3BhdGggPSBsYXN0KHBhdGgpO312YXIgZnVuYz1vYmplY3QgPT0gbnVsbD9vYmplY3Q6b2JqZWN0W3BhdGhdO3JldHVybiBmdW5jID09IG51bGw/dW5kZWZpbmVkOmFwcGx5KGZ1bmMsb2JqZWN0LGFyZ3MpO31mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSxvdGhlcixjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spe2lmKHZhbHVlID09PSBvdGhlcil7cmV0dXJuIHRydWU7fWlmKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAhaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKXtyZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjt9cmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSxvdGhlcixiYXNlSXNFcXVhbCxjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spO31mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LG90aGVyLGVxdWFsRnVuYyxjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spe3ZhciBvYmpJc0Fycj1pc0FycmF5KG9iamVjdCksb3RoSXNBcnI9aXNBcnJheShvdGhlciksb2JqVGFnPWFycmF5VGFnLG90aFRhZz1hcnJheVRhZztpZighb2JqSXNBcnIpe29ialRhZyA9IGdldFRhZyhvYmplY3QpO2lmKG9ialRhZyA9PSBhcmdzVGFnKXtvYmpUYWcgPSBvYmplY3RUYWc7fWVsc2UgaWYob2JqVGFnICE9IG9iamVjdFRhZyl7b2JqSXNBcnIgPSBpc1R5cGVkQXJyYXkob2JqZWN0KTt9fWlmKCFvdGhJc0Fycil7b3RoVGFnID0gZ2V0VGFnKG90aGVyKTtpZihvdGhUYWcgPT0gYXJnc1RhZyl7b3RoVGFnID0gb2JqZWN0VGFnO31lbHNlIGlmKG90aFRhZyAhPSBvYmplY3RUYWcpe290aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTt9fXZhciBvYmpJc09iaj1vYmpUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob2JqZWN0KSxvdGhJc09iaj1vdGhUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLGlzU2FtZVRhZz1vYmpUYWcgPT0gb3RoVGFnO2lmKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSl7cmV0dXJuIGVxdWFsQnlUYWcob2JqZWN0LG90aGVyLG9ialRhZyxlcXVhbEZ1bmMsY3VzdG9taXplcixiaXRtYXNrKTt9dmFyIGlzUGFydGlhbD1iaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUc7aWYoIWlzUGFydGlhbCl7dmFyIG9iaklzV3JhcHBlZD1vYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxcIl9fd3JhcHBlZF9fXCIpLG90aElzV3JhcHBlZD1vdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLFwiX193cmFwcGVkX19cIik7aWYob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCl7cmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQ/b2JqZWN0LnZhbHVlKCk6b2JqZWN0LG90aElzV3JhcHBlZD9vdGhlci52YWx1ZSgpOm90aGVyLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayk7fX1pZighaXNTYW1lVGFnKXtyZXR1cm4gZmFsc2U7fXN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjaygpKTtyZXR1cm4gKG9iaklzQXJyP2VxdWFsQXJyYXlzOmVxdWFsT2JqZWN0cykob2JqZWN0LG90aGVyLGVxdWFsRnVuYyxjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spO31mdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3Qsc291cmNlLG1hdGNoRGF0YSxjdXN0b21pemVyKXt2YXIgaW5kZXg9bWF0Y2hEYXRhLmxlbmd0aCxsZW5ndGg9aW5kZXgsbm9DdXN0b21pemVyPSFjdXN0b21pemVyO2lmKG9iamVjdCA9PSBudWxsKXtyZXR1cm4gIWxlbmd0aDt9b2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7d2hpbGUoaW5kZXgtLSkge3ZhciBkYXRhPW1hdGNoRGF0YVtpbmRleF07aWYobm9DdXN0b21pemVyICYmIGRhdGFbMl0/ZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dOiEoZGF0YVswXSBpbiBvYmplY3QpKXtyZXR1cm4gZmFsc2U7fX13aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7ZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07dmFyIGtleT1kYXRhWzBdLG9ialZhbHVlPW9iamVjdFtrZXldLHNyY1ZhbHVlPWRhdGFbMV07aWYobm9DdXN0b21pemVyICYmIGRhdGFbMl0pe2lmKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSl7cmV0dXJuIGZhbHNlO319ZWxzZSB7dmFyIHN0YWNrPW5ldyBTdGFjaygpLHJlc3VsdD1jdXN0b21pemVyP2N1c3RvbWl6ZXIob2JqVmFsdWUsc3JjVmFsdWUsa2V5LG9iamVjdCxzb3VyY2Usc3RhY2spOnVuZGVmaW5lZDtpZighKHJlc3VsdCA9PT0gdW5kZWZpbmVkP2Jhc2VJc0VxdWFsKHNyY1ZhbHVlLG9ialZhbHVlLGN1c3RvbWl6ZXIsVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyB8IFBBUlRJQUxfQ09NUEFSRV9GTEFHLHN0YWNrKTpyZXN1bHQpKXtyZXR1cm4gZmFsc2U7fX19cmV0dXJuIHRydWU7fWZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSl7dmFyIHR5cGU9dHlwZW9mIHZhbHVlO2lmKHR5cGUgPT0gXCJmdW5jdGlvblwiKXtyZXR1cm4gdmFsdWU7fWlmKHZhbHVlID09IG51bGwpe3JldHVybiBpZGVudGl0eTt9aWYodHlwZSA9PSBcIm9iamVjdFwiKXtyZXR1cm4gaXNBcnJheSh2YWx1ZSk/YmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSx2YWx1ZVsxXSk6YmFzZU1hdGNoZXModmFsdWUpO31yZXR1cm4gcHJvcGVydHkodmFsdWUpO31mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3Qpe3JldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTt9ZnVuY3Rpb24gYmFzZUtleXNJbihvYmplY3Qpe29iamVjdCA9IG9iamVjdCA9PSBudWxsP29iamVjdDpPYmplY3Qob2JqZWN0KTt2YXIgcmVzdWx0PVtdO2Zvcih2YXIga2V5IGluIG9iamVjdCkge3Jlc3VsdC5wdXNoKGtleSk7fXJldHVybiByZXN1bHQ7fWlmKGVudW1lcmF0ZSAmJiAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh7dmFsdWVPZjoxfSxcInZhbHVlT2ZcIikpe2Jhc2VLZXlzSW4gPSBmdW5jdGlvbihvYmplY3Qpe3JldHVybiBpdGVyYXRvclRvQXJyYXkoZW51bWVyYXRlKG9iamVjdCkpO307fWZ1bmN0aW9uIGJhc2VNYXAoY29sbGVjdGlvbixpdGVyYXRlZSl7dmFyIGluZGV4PS0xLHJlc3VsdD1pc0FycmF5TGlrZShjb2xsZWN0aW9uKT9BcnJheShjb2xsZWN0aW9uLmxlbmd0aCk6W107YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxrZXksY29sbGVjdGlvbil7cmVzdWx0WysraW5kZXhdID0gaXRlcmF0ZWUodmFsdWUsa2V5LGNvbGxlY3Rpb24pO30pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSl7dmFyIG1hdGNoRGF0YT1nZXRNYXRjaERhdGEoc291cmNlKTtpZihtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKXt2YXIga2V5PW1hdGNoRGF0YVswXVswXSx2YWx1ZT1tYXRjaERhdGFbMF1bMV07cmV0dXJuIGZ1bmN0aW9uKG9iamVjdCl7aWYob2JqZWN0ID09IG51bGwpe3JldHVybiBmYWxzZTt9cmV0dXJuIG9iamVjdFtrZXldID09PSB2YWx1ZSAmJiAodmFsdWUgIT09IHVuZGVmaW5lZCB8fCBrZXkgaW4gT2JqZWN0KG9iamVjdCkpO307fXJldHVybiBmdW5jdGlvbihvYmplY3Qpe3JldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3Qsc291cmNlLG1hdGNoRGF0YSk7fTt9ZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLHNyY1ZhbHVlKXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXt2YXIgb2JqVmFsdWU9Z2V0KG9iamVjdCxwYXRoKTtyZXR1cm4gb2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWU/aGFzSW4ob2JqZWN0LHBhdGgpOmJhc2VJc0VxdWFsKHNyY1ZhbHVlLG9ialZhbHVlLHVuZGVmaW5lZCxVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO307fWZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3Qsc291cmNlLHNyY0luZGV4LGN1c3RvbWl6ZXIsc3RhY2spe2lmKG9iamVjdCA9PT0gc291cmNlKXtyZXR1cm47fXZhciBwcm9wcz1pc0FycmF5KHNvdXJjZSkgfHwgaXNUeXBlZEFycmF5KHNvdXJjZSk/dW5kZWZpbmVkOmtleXNJbihzb3VyY2UpO2FycmF5RWFjaChwcm9wcyB8fCBzb3VyY2UsZnVuY3Rpb24oc3JjVmFsdWUsa2V5KXtpZihwcm9wcyl7a2V5ID0gc3JjVmFsdWU7c3JjVmFsdWUgPSBzb3VyY2Vba2V5XTt9aWYoaXNPYmplY3Qoc3JjVmFsdWUpKXtzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2soKSk7YmFzZU1lcmdlRGVlcChvYmplY3Qsc291cmNlLGtleSxzcmNJbmRleCxiYXNlTWVyZ2UsY3VzdG9taXplcixzdGFjayk7fWVsc2Uge3ZhciBuZXdWYWx1ZT1jdXN0b21pemVyP2N1c3RvbWl6ZXIob2JqZWN0W2tleV0sc3JjVmFsdWUsa2V5ICsgXCJcIixvYmplY3Qsc291cmNlLHN0YWNrKTp1bmRlZmluZWQ7aWYobmV3VmFsdWUgPT09IHVuZGVmaW5lZCl7bmV3VmFsdWUgPSBzcmNWYWx1ZTt9YXNzaWduTWVyZ2VWYWx1ZShvYmplY3Qsa2V5LG5ld1ZhbHVlKTt9fSk7fWZ1bmN0aW9uIGJhc2VNZXJnZURlZXAob2JqZWN0LHNvdXJjZSxrZXksc3JjSW5kZXgsbWVyZ2VGdW5jLGN1c3RvbWl6ZXIsc3RhY2spe3ZhciBvYmpWYWx1ZT1vYmplY3Rba2V5XSxzcmNWYWx1ZT1zb3VyY2Vba2V5XSxzdGFja2VkPXN0YWNrLmdldChzcmNWYWx1ZSk7aWYoc3RhY2tlZCl7YXNzaWduTWVyZ2VWYWx1ZShvYmplY3Qsa2V5LHN0YWNrZWQpO3JldHVybjt9dmFyIG5ld1ZhbHVlPWN1c3RvbWl6ZXI/Y3VzdG9taXplcihvYmpWYWx1ZSxzcmNWYWx1ZSxrZXkgKyBcIlwiLG9iamVjdCxzb3VyY2Usc3RhY2spOnVuZGVmaW5lZCxpc0NvbW1vbj1uZXdWYWx1ZSA9PT0gdW5kZWZpbmVkO2lmKGlzQ29tbW9uKXtuZXdWYWx1ZSA9IHNyY1ZhbHVlO2lmKGlzQXJyYXkoc3JjVmFsdWUpIHx8IGlzVHlwZWRBcnJheShzcmNWYWx1ZSkpe2lmKGlzQXJyYXkob2JqVmFsdWUpKXtuZXdWYWx1ZSA9IHNyY0luZGV4P2NvcHlBcnJheShvYmpWYWx1ZSk6b2JqVmFsdWU7fWVsc2UgaWYoaXNBcnJheUxpa2VPYmplY3Qob2JqVmFsdWUpKXtuZXdWYWx1ZSA9IGNvcHlBcnJheShvYmpWYWx1ZSk7fWVsc2Uge2lzQ29tbW9uID0gZmFsc2U7bmV3VmFsdWUgPSBiYXNlQ2xvbmUoc3JjVmFsdWUpO319ZWxzZSBpZihpc1BsYWluT2JqZWN0KHNyY1ZhbHVlKSB8fCBpc0FyZ3VtZW50cyhzcmNWYWx1ZSkpe2lmKGlzQXJndW1lbnRzKG9ialZhbHVlKSl7bmV3VmFsdWUgPSB0b1BsYWluT2JqZWN0KG9ialZhbHVlKTt9ZWxzZSBpZighaXNPYmplY3Qob2JqVmFsdWUpIHx8IHNyY0luZGV4ICYmIGlzRnVuY3Rpb24ob2JqVmFsdWUpKXtpc0NvbW1vbiA9IGZhbHNlO25ld1ZhbHVlID0gYmFzZUNsb25lKHNyY1ZhbHVlKTt9ZWxzZSB7bmV3VmFsdWUgPSBzcmNJbmRleD9iYXNlQ2xvbmUob2JqVmFsdWUpOm9ialZhbHVlO319ZWxzZSB7aXNDb21tb24gPSBmYWxzZTt9fXN0YWNrLnNldChzcmNWYWx1ZSxuZXdWYWx1ZSk7aWYoaXNDb21tb24pe21lcmdlRnVuYyhuZXdWYWx1ZSxzcmNWYWx1ZSxzcmNJbmRleCxjdXN0b21pemVyLHN0YWNrKTt9YXNzaWduTWVyZ2VWYWx1ZShvYmplY3Qsa2V5LG5ld1ZhbHVlKTt9ZnVuY3Rpb24gYmFzZU9yZGVyQnkoY29sbGVjdGlvbixpdGVyYXRlZXMsb3JkZXJzKXt2YXIgaW5kZXg9LTEsdG9JdGVyYXRlZT1nZXRJdGVyYXRlZSgpO2l0ZXJhdGVlcyA9IGFycmF5TWFwKGl0ZXJhdGVlcy5sZW5ndGg/aXRlcmF0ZWVzOkFycmF5KDEpLGZ1bmN0aW9uKGl0ZXJhdGVlKXtyZXR1cm4gdG9JdGVyYXRlZShpdGVyYXRlZSk7fSk7dmFyIHJlc3VsdD1iYXNlTWFwKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsa2V5LGNvbGxlY3Rpb24pe3ZhciBjcml0ZXJpYT1hcnJheU1hcChpdGVyYXRlZXMsZnVuY3Rpb24oaXRlcmF0ZWUpe3JldHVybiBpdGVyYXRlZSh2YWx1ZSk7fSk7cmV0dXJuIHtjcml0ZXJpYTpjcml0ZXJpYSxpbmRleDorK2luZGV4LHZhbHVlOnZhbHVlfTt9KTtyZXR1cm4gYmFzZVNvcnRCeShyZXN1bHQsZnVuY3Rpb24ob2JqZWN0LG90aGVyKXtyZXR1cm4gY29tcGFyZU11bHRpcGxlKG9iamVjdCxvdGhlcixvcmRlcnMpO30pO31mdW5jdGlvbiBiYXNlUGljayhvYmplY3QscHJvcHMpe29iamVjdCA9IE9iamVjdChvYmplY3QpO3JldHVybiBhcnJheVJlZHVjZShwcm9wcyxmdW5jdGlvbihyZXN1bHQsa2V5KXtpZihrZXkgaW4gb2JqZWN0KXtyZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO31yZXR1cm4gcmVzdWx0O30se30pO31mdW5jdGlvbiBiYXNlUGlja0J5KG9iamVjdCxwcmVkaWNhdGUpe3ZhciByZXN1bHQ9e307YmFzZUZvckluKG9iamVjdCxmdW5jdGlvbih2YWx1ZSxrZXkpe2lmKHByZWRpY2F0ZSh2YWx1ZSxrZXkpKXtyZXN1bHRba2V5XSA9IHZhbHVlO319KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gb2JqZWN0ID09IG51bGw/dW5kZWZpbmVkOm9iamVjdFtrZXldO307fWZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCl7cmV0dXJuIGZ1bmN0aW9uKG9iamVjdCl7cmV0dXJuIGJhc2VHZXQob2JqZWN0LHBhdGgpO307fWZ1bmN0aW9uIGJhc2VQdWxsQWxsKGFycmF5LHZhbHVlcyl7cmV0dXJuIGJhc2VQdWxsQWxsQnkoYXJyYXksdmFsdWVzKTt9ZnVuY3Rpb24gYmFzZVB1bGxBbGxCeShhcnJheSx2YWx1ZXMsaXRlcmF0ZWUpe3ZhciBpbmRleD0tMSxsZW5ndGg9dmFsdWVzLmxlbmd0aCxzZWVuPWFycmF5O2lmKGl0ZXJhdGVlKXtzZWVuID0gYXJyYXlNYXAoYXJyYXksZnVuY3Rpb24odmFsdWUpe3JldHVybiBpdGVyYXRlZSh2YWx1ZSk7fSk7fXdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgZnJvbUluZGV4PTAsdmFsdWU9dmFsdWVzW2luZGV4XSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSk6dmFsdWU7d2hpbGUoKGZyb21JbmRleCA9IGJhc2VJbmRleE9mKHNlZW4sY29tcHV0ZWQsZnJvbUluZGV4KSkgPiAtMSkge2lmKHNlZW4gIT09IGFycmF5KXtzcGxpY2UuY2FsbChzZWVuLGZyb21JbmRleCwxKTt9c3BsaWNlLmNhbGwoYXJyYXksZnJvbUluZGV4LDEpO319cmV0dXJuIGFycmF5O31mdW5jdGlvbiBiYXNlUHVsbEF0KGFycmF5LGluZGV4ZXMpe3ZhciBsZW5ndGg9YXJyYXk/aW5kZXhlcy5sZW5ndGg6MCxsYXN0SW5kZXg9bGVuZ3RoIC0gMTt3aGlsZShsZW5ndGgtLSkge3ZhciBpbmRleD1pbmRleGVzW2xlbmd0aF07aWYobGFzdEluZGV4ID09IGxlbmd0aCB8fCBpbmRleCAhPSBwcmV2aW91cyl7dmFyIHByZXZpb3VzPWluZGV4O2lmKGlzSW5kZXgoaW5kZXgpKXtzcGxpY2UuY2FsbChhcnJheSxpbmRleCwxKTt9ZWxzZSBpZighaXNLZXkoaW5kZXgsYXJyYXkpKXt2YXIgcGF0aD1iYXNlVG9QYXRoKGluZGV4KSxvYmplY3Q9cGFyZW50KGFycmF5LHBhdGgpO2lmKG9iamVjdCAhPSBudWxsKXtkZWxldGUgb2JqZWN0W2xhc3QocGF0aCldO319ZWxzZSB7ZGVsZXRlIGFycmF5W2luZGV4XTt9fX1yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGJhc2VSYW5kb20obG93ZXIsdXBwZXIpe3JldHVybiBsb3dlciArIG5hdGl2ZUZsb29yKG5hdGl2ZVJhbmRvbSgpICogKHVwcGVyIC0gbG93ZXIgKyAxKSk7fWZ1bmN0aW9uIGJhc2VSYW5nZShzdGFydCxlbmQsc3RlcCxmcm9tUmlnaHQpe3ZhciBpbmRleD0tMSxsZW5ndGg9bmF0aXZlTWF4KG5hdGl2ZUNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSwwKSxyZXN1bHQ9QXJyYXkobGVuZ3RoKTt3aGlsZShsZW5ndGgtLSkge3Jlc3VsdFtmcm9tUmlnaHQ/bGVuZ3RoOisraW5kZXhdID0gc3RhcnQ7c3RhcnQgKz0gc3RlcDt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZVNldChvYmplY3QscGF0aCx2YWx1ZSxjdXN0b21pemVyKXtwYXRoID0gaXNLZXkocGF0aCxvYmplY3QpP1twYXRoICsgXCJcIl06YmFzZVRvUGF0aChwYXRoKTt2YXIgaW5kZXg9LTEsbGVuZ3RoPXBhdGgubGVuZ3RoLGxhc3RJbmRleD1sZW5ndGggLSAxLG5lc3RlZD1vYmplY3Q7d2hpbGUobmVzdGVkICE9IG51bGwgJiYgKytpbmRleCA8IGxlbmd0aCkge3ZhciBrZXk9cGF0aFtpbmRleF07aWYoaXNPYmplY3QobmVzdGVkKSl7dmFyIG5ld1ZhbHVlPXZhbHVlO2lmKGluZGV4ICE9IGxhc3RJbmRleCl7dmFyIG9ialZhbHVlPW5lc3RlZFtrZXldO25ld1ZhbHVlID0gY3VzdG9taXplcj9jdXN0b21pemVyKG9ialZhbHVlLGtleSxuZXN0ZWQpOnVuZGVmaW5lZDtpZihuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKXtuZXdWYWx1ZSA9IG9ialZhbHVlID09IG51bGw/aXNJbmRleChwYXRoW2luZGV4ICsgMV0pP1tdOnt9Om9ialZhbHVlO319YXNzaWduVmFsdWUobmVzdGVkLGtleSxuZXdWYWx1ZSk7fW5lc3RlZCA9IG5lc3RlZFtrZXldO31yZXR1cm4gb2JqZWN0O312YXIgYmFzZVNldERhdGE9IW1ldGFNYXA/aWRlbnRpdHk6ZnVuY3Rpb24oZnVuYyxkYXRhKXttZXRhTWFwLnNldChmdW5jLGRhdGEpO3JldHVybiBmdW5jO307ZnVuY3Rpb24gYmFzZVNsaWNlKGFycmF5LHN0YXJ0LGVuZCl7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGg7aWYoc3RhcnQgPCAwKXtzdGFydCA9IC1zdGFydCA+IGxlbmd0aD8wOmxlbmd0aCArIHN0YXJ0O31lbmQgPSBlbmQgPiBsZW5ndGg/bGVuZ3RoOmVuZDtpZihlbmQgPCAwKXtlbmQgKz0gbGVuZ3RoO31sZW5ndGggPSBzdGFydCA+IGVuZD8wOmVuZCAtIHN0YXJ0ID4+PiAwO3N0YXJ0ID4+Pj0gMDt2YXIgcmVzdWx0PUFycmF5KGxlbmd0aCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3Jlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZVNvbWUoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ZhciByZXN1bHQ7YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKXtyZXN1bHQgPSBwcmVkaWNhdGUodmFsdWUsaW5kZXgsY29sbGVjdGlvbik7cmV0dXJuICFyZXN1bHQ7fSk7cmV0dXJuICEhcmVzdWx0O31mdW5jdGlvbiBiYXNlU29ydGVkSW5kZXgoYXJyYXksdmFsdWUscmV0SGlnaGVzdCl7dmFyIGxvdz0wLGhpZ2g9YXJyYXk/YXJyYXkubGVuZ3RoOmxvdztpZih0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA9PT0gdmFsdWUgJiYgaGlnaCA8PSBIQUxGX01BWF9BUlJBWV9MRU5HVEgpe3doaWxlKGxvdyA8IGhpZ2gpIHt2YXIgbWlkPWxvdyArIGhpZ2ggPj4+IDEsY29tcHV0ZWQ9YXJyYXlbbWlkXTtpZigocmV0SGlnaGVzdD9jb21wdXRlZCA8PSB2YWx1ZTpjb21wdXRlZCA8IHZhbHVlKSAmJiBjb21wdXRlZCAhPT0gbnVsbCl7bG93ID0gbWlkICsgMTt9ZWxzZSB7aGlnaCA9IG1pZDt9fXJldHVybiBoaWdoO31yZXR1cm4gYmFzZVNvcnRlZEluZGV4QnkoYXJyYXksdmFsdWUsaWRlbnRpdHkscmV0SGlnaGVzdCk7fWZ1bmN0aW9uIGJhc2VTb3J0ZWRJbmRleEJ5KGFycmF5LHZhbHVlLGl0ZXJhdGVlLHJldEhpZ2hlc3Qpe3ZhbHVlID0gaXRlcmF0ZWUodmFsdWUpO3ZhciBsb3c9MCxoaWdoPWFycmF5P2FycmF5Lmxlbmd0aDowLHZhbElzTmFOPXZhbHVlICE9PSB2YWx1ZSx2YWxJc051bGw9dmFsdWUgPT09IG51bGwsdmFsSXNVbmRlZj12YWx1ZSA9PT0gdW5kZWZpbmVkO3doaWxlKGxvdyA8IGhpZ2gpIHt2YXIgbWlkPW5hdGl2ZUZsb29yKChsb3cgKyBoaWdoKSAvIDIpLGNvbXB1dGVkPWl0ZXJhdGVlKGFycmF5W21pZF0pLGlzRGVmPWNvbXB1dGVkICE9PSB1bmRlZmluZWQsaXNSZWZsZXhpdmU9Y29tcHV0ZWQgPT09IGNvbXB1dGVkO2lmKHZhbElzTmFOKXt2YXIgc2V0TG93PWlzUmVmbGV4aXZlIHx8IHJldEhpZ2hlc3Q7fWVsc2UgaWYodmFsSXNOdWxsKXtzZXRMb3cgPSBpc1JlZmxleGl2ZSAmJiBpc0RlZiAmJiAocmV0SGlnaGVzdCB8fCBjb21wdXRlZCAhPSBudWxsKTt9ZWxzZSBpZih2YWxJc1VuZGVmKXtzZXRMb3cgPSBpc1JlZmxleGl2ZSAmJiAocmV0SGlnaGVzdCB8fCBpc0RlZik7fWVsc2UgaWYoY29tcHV0ZWQgPT0gbnVsbCl7c2V0TG93ID0gZmFsc2U7fWVsc2Uge3NldExvdyA9IHJldEhpZ2hlc3Q/Y29tcHV0ZWQgPD0gdmFsdWU6Y29tcHV0ZWQgPCB2YWx1ZTt9aWYoc2V0TG93KXtsb3cgPSBtaWQgKyAxO31lbHNlIHtoaWdoID0gbWlkO319cmV0dXJuIG5hdGl2ZU1pbihoaWdoLE1BWF9BUlJBWV9JTkRFWCk7fWZ1bmN0aW9uIGJhc2VTb3J0ZWRVbmlxKGFycmF5KXtyZXR1cm4gYmFzZVNvcnRlZFVuaXFCeShhcnJheSk7fWZ1bmN0aW9uIGJhc2VTb3J0ZWRVbmlxQnkoYXJyYXksaXRlcmF0ZWUpe3ZhciBpbmRleD0wLGxlbmd0aD1hcnJheS5sZW5ndGgsdmFsdWU9YXJyYXlbMF0sY29tcHV0ZWQ9aXRlcmF0ZWU/aXRlcmF0ZWUodmFsdWUpOnZhbHVlLHNlZW49Y29tcHV0ZWQscmVzSW5kZXg9MCxyZXN1bHQ9W3ZhbHVlXTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFsdWUgPSBhcnJheVtpbmRleF0sY29tcHV0ZWQgPSBpdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSk6dmFsdWU7aWYoIWVxKGNvbXB1dGVkLHNlZW4pKXtzZWVuID0gY29tcHV0ZWQ7cmVzdWx0WysrcmVzSW5kZXhdID0gdmFsdWU7fX1yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlVG9QYXRoKHZhbHVlKXtyZXR1cm4gaXNBcnJheSh2YWx1ZSk/dmFsdWU6c3RyaW5nVG9QYXRoKHZhbHVlKTt9ZnVuY3Rpb24gYmFzZVVuaXEoYXJyYXksaXRlcmF0ZWUsY29tcGFyYXRvcil7dmFyIGluZGV4PS0xLGluY2x1ZGVzPWFycmF5SW5jbHVkZXMsbGVuZ3RoPWFycmF5Lmxlbmd0aCxpc0NvbW1vbj10cnVlLHJlc3VsdD1bXSxzZWVuPXJlc3VsdDtpZihjb21wYXJhdG9yKXtpc0NvbW1vbiA9IGZhbHNlO2luY2x1ZGVzID0gYXJyYXlJbmNsdWRlc1dpdGg7fWVsc2UgaWYobGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUpe3ZhciBzZXQ9aXRlcmF0ZWU/bnVsbDpjcmVhdGVTZXQoYXJyYXkpO2lmKHNldCl7cmV0dXJuIHNldFRvQXJyYXkoc2V0KTt9aXNDb21tb24gPSBmYWxzZTtpbmNsdWRlcyA9IGNhY2hlSGFzO3NlZW4gPSBuZXcgU2V0Q2FjaGUoKTt9ZWxzZSB7c2VlbiA9IGl0ZXJhdGVlP1tdOnJlc3VsdDt9b3V0ZXI6IHdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdLGNvbXB1dGVkPWl0ZXJhdGVlP2l0ZXJhdGVlKHZhbHVlKTp2YWx1ZTtpZihpc0NvbW1vbiAmJiBjb21wdXRlZCA9PT0gY29tcHV0ZWQpe3ZhciBzZWVuSW5kZXg9c2Vlbi5sZW5ndGg7d2hpbGUoc2VlbkluZGV4LS0pIHtpZihzZWVuW3NlZW5JbmRleF0gPT09IGNvbXB1dGVkKXtjb250aW51ZSBvdXRlcjt9fWlmKGl0ZXJhdGVlKXtzZWVuLnB1c2goY29tcHV0ZWQpO31yZXN1bHQucHVzaCh2YWx1ZSk7fWVsc2UgaWYoIWluY2x1ZGVzKHNlZW4sY29tcHV0ZWQsY29tcGFyYXRvcikpe2lmKHNlZW4gIT09IHJlc3VsdCl7c2Vlbi5wdXNoKGNvbXB1dGVkKTt9cmVzdWx0LnB1c2godmFsdWUpO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZVVuc2V0KG9iamVjdCxwYXRoKXtwYXRoID0gaXNLZXkocGF0aCxvYmplY3QpP1twYXRoICsgXCJcIl06YmFzZVRvUGF0aChwYXRoKTtvYmplY3QgPSBwYXJlbnQob2JqZWN0LHBhdGgpO3ZhciBrZXk9bGFzdChwYXRoKTtyZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzKG9iamVjdCxrZXkpP2RlbGV0ZSBvYmplY3Rba2V5XTp0cnVlO31mdW5jdGlvbiBiYXNlV2hpbGUoYXJyYXkscHJlZGljYXRlLGlzRHJvcCxmcm9tUmlnaHQpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoLGluZGV4PWZyb21SaWdodD9sZW5ndGg6LTE7d2hpbGUoKGZyb21SaWdodD9pbmRleC0tOisraW5kZXggPCBsZW5ndGgpICYmIHByZWRpY2F0ZShhcnJheVtpbmRleF0saW5kZXgsYXJyYXkpKSB7fXJldHVybiBpc0Ryb3A/YmFzZVNsaWNlKGFycmF5LGZyb21SaWdodD8wOmluZGV4LGZyb21SaWdodD9pbmRleCArIDE6bGVuZ3RoKTpiYXNlU2xpY2UoYXJyYXksZnJvbVJpZ2h0P2luZGV4ICsgMTowLGZyb21SaWdodD9sZW5ndGg6aW5kZXgpO31mdW5jdGlvbiBiYXNlV3JhcHBlclZhbHVlKHZhbHVlLGFjdGlvbnMpe3ZhciByZXN1bHQ9dmFsdWU7aWYocmVzdWx0IGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpe3Jlc3VsdCA9IHJlc3VsdC52YWx1ZSgpO31yZXR1cm4gYXJyYXlSZWR1Y2UoYWN0aW9ucyxmdW5jdGlvbihyZXN1bHQsYWN0aW9uKXtyZXR1cm4gYWN0aW9uLmZ1bmMuYXBwbHkoYWN0aW9uLnRoaXNBcmcsYXJyYXlQdXNoKFtyZXN1bHRdLGFjdGlvbi5hcmdzKSk7fSxyZXN1bHQpO31mdW5jdGlvbiBiYXNlWG9yKGFycmF5cyxpdGVyYXRlZSxjb21wYXJhdG9yKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5cy5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciByZXN1bHQ9cmVzdWx0P2FycmF5UHVzaChiYXNlRGlmZmVyZW5jZShyZXN1bHQsYXJyYXlzW2luZGV4XSxpdGVyYXRlZSxjb21wYXJhdG9yKSxiYXNlRGlmZmVyZW5jZShhcnJheXNbaW5kZXhdLHJlc3VsdCxpdGVyYXRlZSxjb21wYXJhdG9yKSk6YXJyYXlzW2luZGV4XTt9cmV0dXJuIHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoP2Jhc2VVbmlxKHJlc3VsdCxpdGVyYXRlZSxjb21wYXJhdG9yKTpbXTt9ZnVuY3Rpb24gYmFzZVppcE9iamVjdChwcm9wcyx2YWx1ZXMsYXNzaWduRnVuYyl7dmFyIGluZGV4PS0xLGxlbmd0aD1wcm9wcy5sZW5ndGgsdmFsc0xlbmd0aD12YWx1ZXMubGVuZ3RoLHJlc3VsdD17fTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7YXNzaWduRnVuYyhyZXN1bHQscHJvcHNbaW5kZXhdLGluZGV4IDwgdmFsc0xlbmd0aD92YWx1ZXNbaW5kZXhdOnVuZGVmaW5lZCk7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGNsb25lQnVmZmVyKGJ1ZmZlcil7dmFyIEN0b3I9YnVmZmVyLmNvbnN0cnVjdG9yLHJlc3VsdD1uZXcgQ3RvcihidWZmZXIuYnl0ZUxlbmd0aCksdmlldz1uZXcgVWludDhBcnJheShyZXN1bHQpO3ZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGNsb25lTWFwKG1hcCl7dmFyIEN0b3I9bWFwLmNvbnN0cnVjdG9yO3JldHVybiBhcnJheVJlZHVjZShtYXBUb0FycmF5KG1hcCksYWRkTWFwRW50cnksbmV3IEN0b3IoKSk7fWZ1bmN0aW9uIGNsb25lUmVnRXhwKHJlZ2V4cCl7dmFyIEN0b3I9cmVnZXhwLmNvbnN0cnVjdG9yLHJlc3VsdD1uZXcgQ3RvcihyZWdleHAuc291cmNlLHJlRmxhZ3MuZXhlYyhyZWdleHApKTtyZXN1bHQubGFzdEluZGV4ID0gcmVnZXhwLmxhc3RJbmRleDtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBjbG9uZVNldChzZXQpe3ZhciBDdG9yPXNldC5jb25zdHJ1Y3RvcjtyZXR1cm4gYXJyYXlSZWR1Y2Uoc2V0VG9BcnJheShzZXQpLGFkZFNldEVudHJ5LG5ldyBDdG9yKCkpO31mdW5jdGlvbiBjbG9uZVN5bWJvbChzeW1ib2wpe3JldHVybiBTeW1ib2w/T2JqZWN0KHN5bWJvbFZhbHVlT2YuY2FsbChzeW1ib2wpKTp7fTt9ZnVuY3Rpb24gY2xvbmVUeXBlZEFycmF5KHR5cGVkQXJyYXksaXNEZWVwKXt2YXIgYnVmZmVyPXR5cGVkQXJyYXkuYnVmZmVyLEN0b3I9dHlwZWRBcnJheS5jb25zdHJ1Y3RvcjtyZXR1cm4gbmV3IEN0b3IoaXNEZWVwP2Nsb25lQnVmZmVyKGJ1ZmZlcik6YnVmZmVyLHR5cGVkQXJyYXkuYnl0ZU9mZnNldCx0eXBlZEFycmF5Lmxlbmd0aCk7fWZ1bmN0aW9uIGNvbXBvc2VBcmdzKGFyZ3MscGFydGlhbHMsaG9sZGVycyl7dmFyIGhvbGRlcnNMZW5ndGg9aG9sZGVycy5sZW5ndGgsYXJnc0luZGV4PS0xLGFyZ3NMZW5ndGg9bmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwwKSxsZWZ0SW5kZXg9LTEsbGVmdExlbmd0aD1wYXJ0aWFscy5sZW5ndGgscmVzdWx0PUFycmF5KGxlZnRMZW5ndGggKyBhcmdzTGVuZ3RoKTt3aGlsZSgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtyZXN1bHRbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07fXdoaWxlKCsrYXJnc0luZGV4IDwgaG9sZGVyc0xlbmd0aCkge3Jlc3VsdFtob2xkZXJzW2FyZ3NJbmRleF1dID0gYXJnc1thcmdzSW5kZXhdO313aGlsZShhcmdzTGVuZ3RoLS0pIHtyZXN1bHRbbGVmdEluZGV4KytdID0gYXJnc1thcmdzSW5kZXgrK107fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGNvbXBvc2VBcmdzUmlnaHQoYXJncyxwYXJ0aWFscyxob2xkZXJzKXt2YXIgaG9sZGVyc0luZGV4PS0xLGhvbGRlcnNMZW5ndGg9aG9sZGVycy5sZW5ndGgsYXJnc0luZGV4PS0xLGFyZ3NMZW5ndGg9bmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwwKSxyaWdodEluZGV4PS0xLHJpZ2h0TGVuZ3RoPXBhcnRpYWxzLmxlbmd0aCxyZXN1bHQ9QXJyYXkoYXJnc0xlbmd0aCArIHJpZ2h0TGVuZ3RoKTt3aGlsZSgrK2FyZ3NJbmRleCA8IGFyZ3NMZW5ndGgpIHtyZXN1bHRbYXJnc0luZGV4XSA9IGFyZ3NbYXJnc0luZGV4XTt9dmFyIG9mZnNldD1hcmdzSW5kZXg7d2hpbGUoKytyaWdodEluZGV4IDwgcmlnaHRMZW5ndGgpIHtyZXN1bHRbb2Zmc2V0ICsgcmlnaHRJbmRleF0gPSBwYXJ0aWFsc1tyaWdodEluZGV4XTt9d2hpbGUoKytob2xkZXJzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7cmVzdWx0W29mZnNldCArIGhvbGRlcnNbaG9sZGVyc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleCsrXTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY29weUFycmF5KHNvdXJjZSxhcnJheSl7dmFyIGluZGV4PS0xLGxlbmd0aD1zb3VyY2UubGVuZ3RoO2FycmF5IHx8IChhcnJheSA9IEFycmF5KGxlbmd0aCkpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHthcnJheVtpbmRleF0gPSBzb3VyY2VbaW5kZXhdO31yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGNvcHlPYmplY3Qoc291cmNlLHByb3BzLG9iamVjdCl7cmV0dXJuIGNvcHlPYmplY3RXaXRoKHNvdXJjZSxwcm9wcyxvYmplY3QpO31mdW5jdGlvbiBjb3B5T2JqZWN0V2l0aChzb3VyY2UscHJvcHMsb2JqZWN0LGN1c3RvbWl6ZXIpe29iamVjdCB8fCAob2JqZWN0ID0ge30pO3ZhciBpbmRleD0tMSxsZW5ndGg9cHJvcHMubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIga2V5PXByb3BzW2luZGV4XSxuZXdWYWx1ZT1jdXN0b21pemVyP2N1c3RvbWl6ZXIob2JqZWN0W2tleV0sc291cmNlW2tleV0sa2V5LG9iamVjdCxzb3VyY2UpOnNvdXJjZVtrZXldO2Fzc2lnblZhbHVlKG9iamVjdCxrZXksbmV3VmFsdWUpO31yZXR1cm4gb2JqZWN0O31mdW5jdGlvbiBjb3B5U3ltYm9scyhzb3VyY2Usb2JqZWN0KXtyZXR1cm4gY29weU9iamVjdChzb3VyY2UsZ2V0U3ltYm9scyhzb3VyY2UpLG9iamVjdCk7fWZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0b3Ioc2V0dGVyLGluaXRpYWxpemVyKXtyZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbixpdGVyYXRlZSl7dmFyIGZ1bmM9aXNBcnJheShjb2xsZWN0aW9uKT9hcnJheUFnZ3JlZ2F0b3I6YmFzZUFnZ3JlZ2F0b3IsYWNjdW11bGF0b3I9aW5pdGlhbGl6ZXI/aW5pdGlhbGl6ZXIoKTp7fTtyZXR1cm4gZnVuYyhjb2xsZWN0aW9uLHNldHRlcixnZXRJdGVyYXRlZShpdGVyYXRlZSksYWNjdW11bGF0b3IpO307fWZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKXtyZXR1cm4gcmVzdChmdW5jdGlvbihvYmplY3Qsc291cmNlcyl7dmFyIGluZGV4PS0xLGxlbmd0aD1zb3VyY2VzLmxlbmd0aCxjdXN0b21pemVyPWxlbmd0aCA+IDE/c291cmNlc1tsZW5ndGggLSAxXTp1bmRlZmluZWQsZ3VhcmQ9bGVuZ3RoID4gMj9zb3VyY2VzWzJdOnVuZGVmaW5lZDtjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gXCJmdW5jdGlvblwiPyhsZW5ndGgtLSxjdXN0b21pemVyKTp1bmRlZmluZWQ7aWYoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlc1swXSxzb3VyY2VzWzFdLGd1YXJkKSl7Y3VzdG9taXplciA9IGxlbmd0aCA8IDM/dW5kZWZpbmVkOmN1c3RvbWl6ZXI7bGVuZ3RoID0gMTt9b2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBzb3VyY2U9c291cmNlc1tpbmRleF07aWYoc291cmNlKXthc3NpZ25lcihvYmplY3Qsc291cmNlLGluZGV4LGN1c3RvbWl6ZXIpO319cmV0dXJuIG9iamVjdDt9KTt9ZnVuY3Rpb24gY3JlYXRlQmFzZUVhY2goZWFjaEZ1bmMsZnJvbVJpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbixpdGVyYXRlZSl7aWYoY29sbGVjdGlvbiA9PSBudWxsKXtyZXR1cm4gY29sbGVjdGlvbjt9aWYoIWlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pKXtyZXR1cm4gZWFjaEZ1bmMoY29sbGVjdGlvbixpdGVyYXRlZSk7fXZhciBsZW5ndGg9Y29sbGVjdGlvbi5sZW5ndGgsaW5kZXg9ZnJvbVJpZ2h0P2xlbmd0aDotMSxpdGVyYWJsZT1PYmplY3QoY29sbGVjdGlvbik7d2hpbGUoZnJvbVJpZ2h0P2luZGV4LS06KytpbmRleCA8IGxlbmd0aCkge2lmKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSxpbmRleCxpdGVyYWJsZSkgPT09IGZhbHNlKXticmVhazt9fXJldHVybiBjb2xsZWN0aW9uO307fWZ1bmN0aW9uIGNyZWF0ZUJhc2VGb3IoZnJvbVJpZ2h0KXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0LGl0ZXJhdGVlLGtleXNGdW5jKXt2YXIgaW5kZXg9LTEsaXRlcmFibGU9T2JqZWN0KG9iamVjdCkscHJvcHM9a2V5c0Z1bmMob2JqZWN0KSxsZW5ndGg9cHJvcHMubGVuZ3RoO3doaWxlKGxlbmd0aC0tKSB7dmFyIGtleT1wcm9wc1tmcm9tUmlnaHQ/bGVuZ3RoOisraW5kZXhdO2lmKGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sa2V5LGl0ZXJhYmxlKSA9PT0gZmFsc2Upe2JyZWFrO319cmV0dXJuIG9iamVjdDt9O31mdW5jdGlvbiBjcmVhdGVCYXNlV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyl7dmFyIGlzQmluZD1iaXRtYXNrICYgQklORF9GTEFHLEN0b3I9Y3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7ZnVuY3Rpb24gd3JhcHBlcigpe3ZhciBmbj10aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXI/Q3RvcjpmdW5jO3JldHVybiBmbi5hcHBseShpc0JpbmQ/dGhpc0FyZzp0aGlzLGFyZ3VtZW50cyk7fXJldHVybiB3cmFwcGVyO31mdW5jdGlvbiBjcmVhdGVDYXNlRmlyc3QobWV0aG9kTmFtZSl7cmV0dXJuIGZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTt2YXIgc3RyU3ltYm9scz1yZUhhc0NvbXBsZXhTeW1ib2wudGVzdChzdHJpbmcpP3N0cmluZ1RvQXJyYXkoc3RyaW5nKTp1bmRlZmluZWQsY2hyPXN0clN5bWJvbHM/c3RyU3ltYm9sc1swXTpzdHJpbmcuY2hhckF0KDApLHRyYWlsaW5nPXN0clN5bWJvbHM/c3RyU3ltYm9scy5zbGljZSgxKS5qb2luKFwiXCIpOnN0cmluZy5zbGljZSgxKTtyZXR1cm4gY2hyW21ldGhvZE5hbWVdKCkgKyB0cmFpbGluZzt9O31mdW5jdGlvbiBjcmVhdGVDb21wb3VuZGVyKGNhbGxiYWNrKXtyZXR1cm4gZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gYXJyYXlSZWR1Y2Uod29yZHMoZGVidXJyKHN0cmluZykpLGNhbGxiYWNrLFwiXCIpO307fWZ1bmN0aW9uIGNyZWF0ZUN0b3JXcmFwcGVyKEN0b3Ipe3JldHVybiBmdW5jdGlvbigpe3ZhciBhcmdzPWFyZ3VtZW50cztzd2l0Y2goYXJncy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IEN0b3IoKTtjYXNlIDE6cmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdLGFyZ3NbM10pO2Nhc2UgNTpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSxhcmdzWzRdKTtjYXNlIDY6cmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdLGFyZ3NbM10sYXJnc1s0XSxhcmdzWzVdKTtjYXNlIDc6cmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdLGFyZ3NbM10sYXJnc1s0XSxhcmdzWzVdLGFyZ3NbNl0pO312YXIgdGhpc0JpbmRpbmc9YmFzZUNyZWF0ZShDdG9yLnByb3RvdHlwZSkscmVzdWx0PUN0b3IuYXBwbHkodGhpc0JpbmRpbmcsYXJncyk7cmV0dXJuIGlzT2JqZWN0KHJlc3VsdCk/cmVzdWx0OnRoaXNCaW5kaW5nO307fWZ1bmN0aW9uIGNyZWF0ZUN1cnJ5V3JhcHBlcihmdW5jLGJpdG1hc2ssYXJpdHkpe3ZhciBDdG9yPWNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO2Z1bmN0aW9uIHdyYXBwZXIoKXt2YXIgbGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGgsaW5kZXg9bGVuZ3RoLGFyZ3M9QXJyYXkobGVuZ3RoKSxmbj10aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXI/Q3RvcjpmdW5jLHBsYWNlaG9sZGVyPXdyYXBwZXIucGxhY2Vob2xkZXI7d2hpbGUoaW5kZXgtLSkge2FyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTt9dmFyIGhvbGRlcnM9bGVuZ3RoIDwgMyAmJiBhcmdzWzBdICE9PSBwbGFjZWhvbGRlciAmJiBhcmdzW2xlbmd0aCAtIDFdICE9PSBwbGFjZWhvbGRlcj9bXTpyZXBsYWNlSG9sZGVycyhhcmdzLHBsYWNlaG9sZGVyKTtsZW5ndGggLT0gaG9sZGVycy5sZW5ndGg7cmV0dXJuIGxlbmd0aCA8IGFyaXR5P2NyZWF0ZVJlY3VycnlXcmFwcGVyKGZ1bmMsYml0bWFzayxjcmVhdGVIeWJyaWRXcmFwcGVyLHBsYWNlaG9sZGVyLHVuZGVmaW5lZCxhcmdzLGhvbGRlcnMsdW5kZWZpbmVkLHVuZGVmaW5lZCxhcml0eSAtIGxlbmd0aCk6YXBwbHkoZm4sdGhpcyxhcmdzKTt9cmV0dXJuIHdyYXBwZXI7fWZ1bmN0aW9uIGNyZWF0ZUZsb3coZnJvbVJpZ2h0KXtyZXR1cm4gcmVzdChmdW5jdGlvbihmdW5jcyl7ZnVuY3MgPSBiYXNlRmxhdHRlbihmdW5jcyk7dmFyIGxlbmd0aD1mdW5jcy5sZW5ndGgsaW5kZXg9bGVuZ3RoLHByZXJlcT1Mb2Rhc2hXcmFwcGVyLnByb3RvdHlwZS50aHJ1O2lmKGZyb21SaWdodCl7ZnVuY3MucmV2ZXJzZSgpO313aGlsZShpbmRleC0tKSB7dmFyIGZ1bmM9ZnVuY3NbaW5kZXhdO2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31pZihwcmVyZXEgJiYgIXdyYXBwZXIgJiYgZ2V0RnVuY05hbWUoZnVuYykgPT0gXCJ3cmFwcGVyXCIpe3ZhciB3cmFwcGVyPW5ldyBMb2Rhc2hXcmFwcGVyKFtdLHRydWUpO319aW5kZXggPSB3cmFwcGVyP2luZGV4Omxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7ZnVuYyA9IGZ1bmNzW2luZGV4XTt2YXIgZnVuY05hbWU9Z2V0RnVuY05hbWUoZnVuYyksZGF0YT1mdW5jTmFtZSA9PSBcIndyYXBwZXJcIj9nZXREYXRhKGZ1bmMpOnVuZGVmaW5lZDtpZihkYXRhICYmIGlzTGF6aWFibGUoZGF0YVswXSkgJiYgZGF0YVsxXSA9PSAoQVJZX0ZMQUcgfCBDVVJSWV9GTEFHIHwgUEFSVElBTF9GTEFHIHwgUkVBUkdfRkxBRykgJiYgIWRhdGFbNF0ubGVuZ3RoICYmIGRhdGFbOV0gPT0gMSl7d3JhcHBlciA9IHdyYXBwZXJbZ2V0RnVuY05hbWUoZGF0YVswXSldLmFwcGx5KHdyYXBwZXIsZGF0YVszXSk7fWVsc2Uge3dyYXBwZXIgPSBmdW5jLmxlbmd0aCA9PSAxICYmIGlzTGF6aWFibGUoZnVuYyk/d3JhcHBlcltmdW5jTmFtZV0oKTp3cmFwcGVyLnRocnUoZnVuYyk7fX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgYXJncz1hcmd1bWVudHMsdmFsdWU9YXJnc1swXTtpZih3cmFwcGVyICYmIGFyZ3MubGVuZ3RoID09IDEgJiYgaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID49IExBUkdFX0FSUkFZX1NJWkUpe3JldHVybiB3cmFwcGVyLnBsYW50KHZhbHVlKS52YWx1ZSgpO312YXIgaW5kZXg9MCxyZXN1bHQ9bGVuZ3RoP2Z1bmNzW2luZGV4XS5hcHBseSh0aGlzLGFyZ3MpOnZhbHVlO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtyZXN1bHQgPSBmdW5jc1tpbmRleF0uY2FsbCh0aGlzLHJlc3VsdCk7fXJldHVybiByZXN1bHQ7fTt9KTt9ZnVuY3Rpb24gY3JlYXRlSHlicmlkV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyxob2xkZXJzLHBhcnRpYWxzUmlnaHQsaG9sZGVyc1JpZ2h0LGFyZ1BvcyxhcnksYXJpdHkpe3ZhciBpc0FyeT1iaXRtYXNrICYgQVJZX0ZMQUcsaXNCaW5kPWJpdG1hc2sgJiBCSU5EX0ZMQUcsaXNCaW5kS2V5PWJpdG1hc2sgJiBCSU5EX0tFWV9GTEFHLGlzQ3Vycnk9Yml0bWFzayAmIENVUlJZX0ZMQUcsaXNDdXJyeVJpZ2h0PWJpdG1hc2sgJiBDVVJSWV9SSUdIVF9GTEFHLGlzRmxpcD1iaXRtYXNrICYgRkxJUF9GTEFHLEN0b3I9aXNCaW5kS2V5P3VuZGVmaW5lZDpjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtmdW5jdGlvbiB3cmFwcGVyKCl7dmFyIGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGluZGV4PWxlbmd0aCxhcmdzPUFycmF5KGxlbmd0aCk7d2hpbGUoaW5kZXgtLSkge2FyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTt9aWYocGFydGlhbHMpe2FyZ3MgPSBjb21wb3NlQXJncyhhcmdzLHBhcnRpYWxzLGhvbGRlcnMpO31pZihwYXJ0aWFsc1JpZ2h0KXthcmdzID0gY29tcG9zZUFyZ3NSaWdodChhcmdzLHBhcnRpYWxzUmlnaHQsaG9sZGVyc1JpZ2h0KTt9aWYoaXNDdXJyeSB8fCBpc0N1cnJ5UmlnaHQpe3ZhciBwbGFjZWhvbGRlcj13cmFwcGVyLnBsYWNlaG9sZGVyLGFyZ3NIb2xkZXJzPXJlcGxhY2VIb2xkZXJzKGFyZ3MscGxhY2Vob2xkZXIpO2xlbmd0aCAtPSBhcmdzSG9sZGVycy5sZW5ndGg7aWYobGVuZ3RoIDwgYXJpdHkpe3JldHVybiBjcmVhdGVSZWN1cnJ5V3JhcHBlcihmdW5jLGJpdG1hc2ssY3JlYXRlSHlicmlkV3JhcHBlcixwbGFjZWhvbGRlcix0aGlzQXJnLGFyZ3MsYXJnc0hvbGRlcnMsYXJnUG9zLGFyeSxhcml0eSAtIGxlbmd0aCk7fX12YXIgdGhpc0JpbmRpbmc9aXNCaW5kP3RoaXNBcmc6dGhpcyxmbj1pc0JpbmRLZXk/dGhpc0JpbmRpbmdbZnVuY106ZnVuYztpZihhcmdQb3Mpe2FyZ3MgPSByZW9yZGVyKGFyZ3MsYXJnUG9zKTt9ZWxzZSBpZihpc0ZsaXAgJiYgYXJncy5sZW5ndGggPiAxKXthcmdzLnJldmVyc2UoKTt9aWYoaXNBcnkgJiYgYXJ5IDwgYXJncy5sZW5ndGgpe2FyZ3MubGVuZ3RoID0gYXJ5O31pZih0aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpe2ZuID0gQ3RvciB8fCBjcmVhdGVDdG9yV3JhcHBlcihmbik7fXJldHVybiBmbi5hcHBseSh0aGlzQmluZGluZyxhcmdzKTt9cmV0dXJuIHdyYXBwZXI7fWZ1bmN0aW9uIGNyZWF0ZUludmVydGVyKHNldHRlcix0b0l0ZXJhdGVlKXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0LGl0ZXJhdGVlKXtyZXR1cm4gYmFzZUludmVydGVyKG9iamVjdCxzZXR0ZXIsdG9JdGVyYXRlZShpdGVyYXRlZSkse30pO307fWZ1bmN0aW9uIGNyZWF0ZU92ZXIoYXJyYXlGdW5jKXtyZXR1cm4gcmVzdChmdW5jdGlvbihpdGVyYXRlZXMpe2l0ZXJhdGVlcyA9IGFycmF5TWFwKGJhc2VGbGF0dGVuKGl0ZXJhdGVlcyksZ2V0SXRlcmF0ZWUoKSk7cmV0dXJuIHJlc3QoZnVuY3Rpb24oYXJncyl7dmFyIHRoaXNBcmc9dGhpcztyZXR1cm4gYXJyYXlGdW5jKGl0ZXJhdGVlcyxmdW5jdGlvbihpdGVyYXRlZSl7cmV0dXJuIGFwcGx5KGl0ZXJhdGVlLHRoaXNBcmcsYXJncyk7fSk7fSk7fSk7fWZ1bmN0aW9uIGNyZWF0ZVBhZGRpbmcoc3RyaW5nLGxlbmd0aCxjaGFycyl7bGVuZ3RoID0gdG9JbnRlZ2VyKGxlbmd0aCk7dmFyIHN0ckxlbmd0aD1zdHJpbmdTaXplKHN0cmluZyk7aWYoIWxlbmd0aCB8fCBzdHJMZW5ndGggPj0gbGVuZ3RoKXtyZXR1cm4gXCJcIjt9dmFyIHBhZExlbmd0aD1sZW5ndGggLSBzdHJMZW5ndGg7Y2hhcnMgPSBjaGFycyA9PT0gdW5kZWZpbmVkP1wiIFwiOmNoYXJzICsgXCJcIjt2YXIgcmVzdWx0PXJlcGVhdChjaGFycyxuYXRpdmVDZWlsKHBhZExlbmd0aCAvIHN0cmluZ1NpemUoY2hhcnMpKSk7cmV0dXJuIHJlSGFzQ29tcGxleFN5bWJvbC50ZXN0KGNoYXJzKT9zdHJpbmdUb0FycmF5KHJlc3VsdCkuc2xpY2UoMCxwYWRMZW5ndGgpLmpvaW4oXCJcIik6cmVzdWx0LnNsaWNlKDAscGFkTGVuZ3RoKTt9ZnVuY3Rpb24gY3JlYXRlUGFydGlhbFdyYXBwZXIoZnVuYyxiaXRtYXNrLHRoaXNBcmcscGFydGlhbHMpe3ZhciBpc0JpbmQ9Yml0bWFzayAmIEJJTkRfRkxBRyxDdG9yPWNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO2Z1bmN0aW9uIHdyYXBwZXIoKXt2YXIgYXJnc0luZGV4PS0xLGFyZ3NMZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxsZWZ0SW5kZXg9LTEsbGVmdExlbmd0aD1wYXJ0aWFscy5sZW5ndGgsYXJncz1BcnJheShsZWZ0TGVuZ3RoICsgYXJnc0xlbmd0aCksZm49dGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyP0N0b3I6ZnVuYzt3aGlsZSgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHthcmdzW2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO313aGlsZShhcmdzTGVuZ3RoLS0pIHthcmdzW2xlZnRJbmRleCsrXSA9IGFyZ3VtZW50c1srK2FyZ3NJbmRleF07fXJldHVybiBhcHBseShmbixpc0JpbmQ/dGhpc0FyZzp0aGlzLGFyZ3MpO31yZXR1cm4gd3JhcHBlcjt9ZnVuY3Rpb24gY3JlYXRlUmFuZ2UoZnJvbVJpZ2h0KXtyZXR1cm4gZnVuY3Rpb24oc3RhcnQsZW5kLHN0ZXApe2lmKHN0ZXAgJiYgdHlwZW9mIHN0ZXAgIT0gXCJudW1iZXJcIiAmJiBpc0l0ZXJhdGVlQ2FsbChzdGFydCxlbmQsc3RlcCkpe2VuZCA9IHN0ZXAgPSB1bmRlZmluZWQ7fXN0YXJ0ID0gdG9OdW1iZXIoc3RhcnQpO3N0YXJ0ID0gc3RhcnQgPT09IHN0YXJ0P3N0YXJ0OjA7aWYoZW5kID09PSB1bmRlZmluZWQpe2VuZCA9IHN0YXJ0O3N0YXJ0ID0gMDt9ZWxzZSB7ZW5kID0gdG9OdW1iZXIoZW5kKSB8fCAwO31zdGVwID0gc3RlcCA9PT0gdW5kZWZpbmVkP3N0YXJ0IDwgZW5kPzE6LTE6dG9OdW1iZXIoc3RlcCkgfHwgMDtyZXR1cm4gYmFzZVJhbmdlKHN0YXJ0LGVuZCxzdGVwLGZyb21SaWdodCk7fTt9ZnVuY3Rpb24gY3JlYXRlUmVjdXJyeVdyYXBwZXIoZnVuYyxiaXRtYXNrLHdyYXBGdW5jLHBsYWNlaG9sZGVyLHRoaXNBcmcscGFydGlhbHMsaG9sZGVycyxhcmdQb3MsYXJ5LGFyaXR5KXt2YXIgaXNDdXJyeT1iaXRtYXNrICYgQ1VSUllfRkxBRyxuZXdBcmdQb3M9YXJnUG9zP2NvcHlBcnJheShhcmdQb3MpOnVuZGVmaW5lZCxuZXdzSG9sZGVycz1pc0N1cnJ5P2hvbGRlcnM6dW5kZWZpbmVkLG5ld0hvbGRlcnNSaWdodD1pc0N1cnJ5P3VuZGVmaW5lZDpob2xkZXJzLG5ld1BhcnRpYWxzPWlzQ3Vycnk/cGFydGlhbHM6dW5kZWZpbmVkLG5ld1BhcnRpYWxzUmlnaHQ9aXNDdXJyeT91bmRlZmluZWQ6cGFydGlhbHM7Yml0bWFzayB8PSBpc0N1cnJ5P1BBUlRJQUxfRkxBRzpQQVJUSUFMX1JJR0hUX0ZMQUc7Yml0bWFzayAmPSB+KGlzQ3Vycnk/UEFSVElBTF9SSUdIVF9GTEFHOlBBUlRJQUxfRkxBRyk7aWYoIShiaXRtYXNrICYgQ1VSUllfQk9VTkRfRkxBRykpe2JpdG1hc2sgJj0gfihCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHKTt9dmFyIG5ld0RhdGE9W2Z1bmMsYml0bWFzayx0aGlzQXJnLG5ld1BhcnRpYWxzLG5ld3NIb2xkZXJzLG5ld1BhcnRpYWxzUmlnaHQsbmV3SG9sZGVyc1JpZ2h0LG5ld0FyZ1BvcyxhcnksYXJpdHldLHJlc3VsdD13cmFwRnVuYy5hcHBseSh1bmRlZmluZWQsbmV3RGF0YSk7aWYoaXNMYXppYWJsZShmdW5jKSl7c2V0RGF0YShyZXN1bHQsbmV3RGF0YSk7fXJlc3VsdC5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGNyZWF0ZVJvdW5kKG1ldGhvZE5hbWUpe3ZhciBmdW5jPU1hdGhbbWV0aG9kTmFtZV07cmV0dXJuIGZ1bmN0aW9uKG51bWJlcixwcmVjaXNpb24pe251bWJlciA9IHRvTnVtYmVyKG51bWJlcik7cHJlY2lzaW9uID0gdG9JbnRlZ2VyKHByZWNpc2lvbik7aWYocHJlY2lzaW9uKXt2YXIgcGFpcj0odG9TdHJpbmcobnVtYmVyKSArIFwiZVwiKS5zcGxpdChcImVcIiksdmFsdWU9ZnVuYyhwYWlyWzBdICsgXCJlXCIgKyAoK3BhaXJbMV0gKyBwcmVjaXNpb24pKTtwYWlyID0gKHRvU3RyaW5nKHZhbHVlKSArIFwiZVwiKS5zcGxpdChcImVcIik7cmV0dXJuICsocGFpclswXSArIFwiZVwiICsgKCtwYWlyWzFdIC0gcHJlY2lzaW9uKSk7fXJldHVybiBmdW5jKG51bWJlcik7fTt9dmFyIGNyZWF0ZVNldD0hKFNldCAmJiBuZXcgU2V0KFsxLDJdKS5zaXplID09PSAyKT9ub29wOmZ1bmN0aW9uKHZhbHVlcyl7cmV0dXJuIG5ldyBTZXQodmFsdWVzKTt9O2Z1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYyxiaXRtYXNrLHRoaXNBcmcscGFydGlhbHMsaG9sZGVycyxhcmdQb3MsYXJ5LGFyaXR5KXt2YXIgaXNCaW5kS2V5PWJpdG1hc2sgJiBCSU5EX0tFWV9GTEFHO2lmKCFpc0JpbmRLZXkgJiYgdHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXZhciBsZW5ndGg9cGFydGlhbHM/cGFydGlhbHMubGVuZ3RoOjA7aWYoIWxlbmd0aCl7Yml0bWFzayAmPSB+KFBBUlRJQUxfRkxBRyB8IFBBUlRJQUxfUklHSFRfRkxBRyk7cGFydGlhbHMgPSBob2xkZXJzID0gdW5kZWZpbmVkO31hcnkgPSBhcnkgPT09IHVuZGVmaW5lZD9hcnk6bmF0aXZlTWF4KHRvSW50ZWdlcihhcnkpLDApO2FyaXR5ID0gYXJpdHkgPT09IHVuZGVmaW5lZD9hcml0eTp0b0ludGVnZXIoYXJpdHkpO2xlbmd0aCAtPSBob2xkZXJzP2hvbGRlcnMubGVuZ3RoOjA7aWYoYml0bWFzayAmIFBBUlRJQUxfUklHSFRfRkxBRyl7dmFyIHBhcnRpYWxzUmlnaHQ9cGFydGlhbHMsaG9sZGVyc1JpZ2h0PWhvbGRlcnM7cGFydGlhbHMgPSBob2xkZXJzID0gdW5kZWZpbmVkO312YXIgZGF0YT1pc0JpbmRLZXk/dW5kZWZpbmVkOmdldERhdGEoZnVuYyksbmV3RGF0YT1bZnVuYyxiaXRtYXNrLHRoaXNBcmcscGFydGlhbHMsaG9sZGVycyxwYXJ0aWFsc1JpZ2h0LGhvbGRlcnNSaWdodCxhcmdQb3MsYXJ5LGFyaXR5XTtpZihkYXRhKXttZXJnZURhdGEobmV3RGF0YSxkYXRhKTt9ZnVuYyA9IG5ld0RhdGFbMF07Yml0bWFzayA9IG5ld0RhdGFbMV07dGhpc0FyZyA9IG5ld0RhdGFbMl07cGFydGlhbHMgPSBuZXdEYXRhWzNdO2hvbGRlcnMgPSBuZXdEYXRhWzRdO2FyaXR5ID0gbmV3RGF0YVs5XSA9IG5ld0RhdGFbOV0gPT0gbnVsbD9pc0JpbmRLZXk/MDpmdW5jLmxlbmd0aDpuYXRpdmVNYXgobmV3RGF0YVs5XSAtIGxlbmd0aCwwKTtpZighYXJpdHkgJiYgYml0bWFzayAmIChDVVJSWV9GTEFHIHwgQ1VSUllfUklHSFRfRkxBRykpe2JpdG1hc2sgJj0gfihDVVJSWV9GTEFHIHwgQ1VSUllfUklHSFRfRkxBRyk7fWlmKCFiaXRtYXNrIHx8IGJpdG1hc2sgPT0gQklORF9GTEFHKXt2YXIgcmVzdWx0PWNyZWF0ZUJhc2VXcmFwcGVyKGZ1bmMsYml0bWFzayx0aGlzQXJnKTt9ZWxzZSBpZihiaXRtYXNrID09IENVUlJZX0ZMQUcgfHwgYml0bWFzayA9PSBDVVJSWV9SSUdIVF9GTEFHKXtyZXN1bHQgPSBjcmVhdGVDdXJyeVdyYXBwZXIoZnVuYyxiaXRtYXNrLGFyaXR5KTt9ZWxzZSBpZigoYml0bWFzayA9PSBQQVJUSUFMX0ZMQUcgfHwgYml0bWFzayA9PSAoQklORF9GTEFHIHwgUEFSVElBTF9GTEFHKSkgJiYgIWhvbGRlcnMubGVuZ3RoKXtyZXN1bHQgPSBjcmVhdGVQYXJ0aWFsV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyk7fWVsc2Uge3Jlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLG5ld0RhdGEpO312YXIgc2V0dGVyPWRhdGE/YmFzZVNldERhdGE6c2V0RGF0YTtyZXR1cm4gc2V0dGVyKHJlc3VsdCxuZXdEYXRhKTt9ZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksb3RoZXIsZXF1YWxGdW5jLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayl7dmFyIGluZGV4PS0xLGlzUGFydGlhbD1iaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsaXNVbm9yZGVyZWQ9Yml0bWFzayAmIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcsYXJyTGVuZ3RoPWFycmF5Lmxlbmd0aCxvdGhMZW5ndGg9b3RoZXIubGVuZ3RoO2lmKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSl7cmV0dXJuIGZhbHNlO312YXIgc3RhY2tlZD1zdGFjay5nZXQoYXJyYXkpO2lmKHN0YWNrZWQpe3JldHVybiBzdGFja2VkID09IG90aGVyO312YXIgcmVzdWx0PXRydWU7c3RhY2suc2V0KGFycmF5LG90aGVyKTt3aGlsZSgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7dmFyIGFyclZhbHVlPWFycmF5W2luZGV4XSxvdGhWYWx1ZT1vdGhlcltpbmRleF07aWYoY3VzdG9taXplcil7dmFyIGNvbXBhcmVkPWlzUGFydGlhbD9jdXN0b21pemVyKG90aFZhbHVlLGFyclZhbHVlLGluZGV4LG90aGVyLGFycmF5LHN0YWNrKTpjdXN0b21pemVyKGFyclZhbHVlLG90aFZhbHVlLGluZGV4LGFycmF5LG90aGVyLHN0YWNrKTt9aWYoY29tcGFyZWQgIT09IHVuZGVmaW5lZCl7aWYoY29tcGFyZWQpe2NvbnRpbnVlO31yZXN1bHQgPSBmYWxzZTticmVhazt9aWYoaXNVbm9yZGVyZWQpe2lmKCFhcnJheVNvbWUob3RoZXIsZnVuY3Rpb24ob3RoVmFsdWUpe3JldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLG90aFZhbHVlLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayk7fSkpe3Jlc3VsdCA9IGZhbHNlO2JyZWFrO319ZWxzZSBpZighKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsb3RoVmFsdWUsY3VzdG9taXplcixiaXRtYXNrLHN0YWNrKSkpe3Jlc3VsdCA9IGZhbHNlO2JyZWFrO319c3RhY2tbXCJkZWxldGVcIl0oYXJyYXkpO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LG90aGVyLHRhZyxlcXVhbEZ1bmMsY3VzdG9taXplcixiaXRtYXNrKXtzd2l0Y2godGFnKXtjYXNlIGFycmF5QnVmZmVyVGFnOmlmKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGggfHwgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLG5ldyBVaW50OEFycmF5KG90aGVyKSkpe3JldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7Y2FzZSBib29sVGFnOmNhc2UgZGF0ZVRhZzpyZXR1cm4gK29iamVjdCA9PSArb3RoZXI7Y2FzZSBlcnJvclRhZzpyZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO2Nhc2UgbnVtYmVyVGFnOnJldHVybiBvYmplY3QgIT0gK29iamVjdD9vdGhlciAhPSArb3RoZXI6b2JqZWN0ID09ICtvdGhlcjtjYXNlIHJlZ2V4cFRhZzpjYXNlIHN0cmluZ1RhZzpyZXR1cm4gb2JqZWN0ID09IG90aGVyICsgXCJcIjtjYXNlIG1hcFRhZzp2YXIgY29udmVydD1tYXBUb0FycmF5O2Nhc2Ugc2V0VGFnOnZhciBpc1BhcnRpYWw9Yml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHO2NvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtyZXR1cm4gKGlzUGFydGlhbCB8fCBvYmplY3Quc2l6ZSA9PSBvdGhlci5zaXplKSAmJiBlcXVhbEZ1bmMoY29udmVydChvYmplY3QpLGNvbnZlcnQob3RoZXIpLGN1c3RvbWl6ZXIsYml0bWFzayB8IFVOT1JERVJFRF9DT01QQVJFX0ZMQUcpO2Nhc2Ugc3ltYm9sVGFnOnJldHVybiAhIVN5bWJvbCAmJiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO31yZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3Qsb3RoZXIsZXF1YWxGdW5jLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayl7dmFyIGlzUGFydGlhbD1iaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsb2JqUHJvcHM9a2V5cyhvYmplY3QpLG9iakxlbmd0aD1vYmpQcm9wcy5sZW5ndGgsb3RoUHJvcHM9a2V5cyhvdGhlciksb3RoTGVuZ3RoPW90aFByb3BzLmxlbmd0aDtpZihvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpe3JldHVybiBmYWxzZTt9dmFyIGluZGV4PW9iakxlbmd0aDt3aGlsZShpbmRleC0tKSB7dmFyIGtleT1vYmpQcm9wc1tpbmRleF07aWYoIShpc1BhcnRpYWw/a2V5IGluIG90aGVyOmJhc2VIYXMob3RoZXIsa2V5KSkpe3JldHVybiBmYWxzZTt9fXZhciBzdGFja2VkPXN0YWNrLmdldChvYmplY3QpO2lmKHN0YWNrZWQpe3JldHVybiBzdGFja2VkID09IG90aGVyO312YXIgcmVzdWx0PXRydWU7c3RhY2suc2V0KG9iamVjdCxvdGhlcik7dmFyIHNraXBDdG9yPWlzUGFydGlhbDt3aGlsZSgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7a2V5ID0gb2JqUHJvcHNbaW5kZXhdO3ZhciBvYmpWYWx1ZT1vYmplY3Rba2V5XSxvdGhWYWx1ZT1vdGhlcltrZXldO2lmKGN1c3RvbWl6ZXIpe3ZhciBjb21wYXJlZD1pc1BhcnRpYWw/Y3VzdG9taXplcihvdGhWYWx1ZSxvYmpWYWx1ZSxrZXksb3RoZXIsb2JqZWN0LHN0YWNrKTpjdXN0b21pemVyKG9ialZhbHVlLG90aFZhbHVlLGtleSxvYmplY3Qsb3RoZXIsc3RhY2spO31pZighKGNvbXBhcmVkID09PSB1bmRlZmluZWQ/b2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSxvdGhWYWx1ZSxjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spOmNvbXBhcmVkKSl7cmVzdWx0ID0gZmFsc2U7YnJlYWs7fXNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSBcImNvbnN0cnVjdG9yXCIpO31pZihyZXN1bHQgJiYgIXNraXBDdG9yKXt2YXIgb2JqQ3Rvcj1vYmplY3QuY29uc3RydWN0b3Isb3RoQ3Rvcj1vdGhlci5jb25zdHJ1Y3RvcjtpZihvYmpDdG9yICE9IG90aEN0b3IgJiYgXCJjb25zdHJ1Y3RvclwiIGluIG9iamVjdCAmJiBcImNvbnN0cnVjdG9yXCIgaW4gb3RoZXIgJiYgISh0eXBlb2Ygb2JqQ3RvciA9PSBcImZ1bmN0aW9uXCIgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiYgdHlwZW9mIG90aEN0b3IgPT0gXCJmdW5jdGlvblwiICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSl7cmVzdWx0ID0gZmFsc2U7fX1zdGFja1tcImRlbGV0ZVwiXShvYmplY3QpO3JldHVybiByZXN1bHQ7fXZhciBnZXREYXRhPSFtZXRhTWFwP25vb3A6ZnVuY3Rpb24oZnVuYyl7cmV0dXJuIG1ldGFNYXAuZ2V0KGZ1bmMpO307ZnVuY3Rpb24gZ2V0RnVuY05hbWUoZnVuYyl7dmFyIHJlc3VsdD1mdW5jLm5hbWUgKyBcIlwiLGFycmF5PXJlYWxOYW1lc1tyZXN1bHRdLGxlbmd0aD1oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlYWxOYW1lcyxyZXN1bHQpP2FycmF5Lmxlbmd0aDowO3doaWxlKGxlbmd0aC0tKSB7dmFyIGRhdGE9YXJyYXlbbGVuZ3RoXSxvdGhlckZ1bmM9ZGF0YS5mdW5jO2lmKG90aGVyRnVuYyA9PSBudWxsIHx8IG90aGVyRnVuYyA9PSBmdW5jKXtyZXR1cm4gZGF0YS5uYW1lO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gZ2V0SXRlcmF0ZWUoKXt2YXIgcmVzdWx0PWxvZGFzaC5pdGVyYXRlZSB8fCBpdGVyYXRlZTtyZXN1bHQgPSByZXN1bHQgPT09IGl0ZXJhdGVlP2Jhc2VJdGVyYXRlZTpyZXN1bHQ7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/cmVzdWx0KGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pOnJlc3VsdDt9dmFyIGdldExlbmd0aD1iYXNlUHJvcGVydHkoXCJsZW5ndGhcIik7ZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCl7dmFyIHJlc3VsdD10b1BhaXJzKG9iamVjdCksbGVuZ3RoPXJlc3VsdC5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pIHtyZXN1bHRbbGVuZ3RoXVsyXSA9IGlzU3RyaWN0Q29tcGFyYWJsZShyZXN1bHRbbGVuZ3RoXVsxXSk7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3Qsa2V5KXt2YXIgdmFsdWU9b2JqZWN0ID09IG51bGw/dW5kZWZpbmVkOm9iamVjdFtrZXldO3JldHVybiBpc05hdGl2ZSh2YWx1ZSk/dmFsdWU6dW5kZWZpbmVkO312YXIgZ2V0U3ltYm9scz1nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgfHwgZnVuY3Rpb24oKXtyZXR1cm4gW107fTtmdW5jdGlvbiBnZXRUYWcodmFsdWUpe3JldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTt9aWYoTWFwICYmIGdldFRhZyhuZXcgTWFwKCkpICE9IG1hcFRhZyB8fCBTZXQgJiYgZ2V0VGFnKG5ldyBTZXQoKSkgIT0gc2V0VGFnKXtnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSl7dmFyIHJlc3VsdD1vYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxDdG9yPXJlc3VsdCA9PSBvYmplY3RUYWc/dmFsdWUuY29uc3RydWN0b3I6bnVsbCxjdG9yU3RyaW5nPXR5cGVvZiBDdG9yID09IFwiZnVuY3Rpb25cIj9mdW5jVG9TdHJpbmcuY2FsbChDdG9yKTpcIlwiO2lmKGN0b3JTdHJpbmcpe2lmKGN0b3JTdHJpbmcgPT0gbWFwQ3RvclN0cmluZyl7cmV0dXJuIG1hcFRhZzt9aWYoY3RvclN0cmluZyA9PSBzZXRDdG9yU3RyaW5nKXtyZXR1cm4gc2V0VGFnO319cmV0dXJuIHJlc3VsdDt9O31mdW5jdGlvbiBnZXRWaWV3KHN0YXJ0LGVuZCx0cmFuc2Zvcm1zKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXRyYW5zZm9ybXMubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgZGF0YT10cmFuc2Zvcm1zW2luZGV4XSxzaXplPWRhdGEuc2l6ZTtzd2l0Y2goZGF0YS50eXBlKXtjYXNlIFwiZHJvcFwiOnN0YXJ0ICs9IHNpemU7YnJlYWs7Y2FzZSBcImRyb3BSaWdodFwiOmVuZCAtPSBzaXplO2JyZWFrO2Nhc2UgXCJ0YWtlXCI6ZW5kID0gbmF0aXZlTWluKGVuZCxzdGFydCArIHNpemUpO2JyZWFrO2Nhc2UgXCJ0YWtlUmlnaHRcIjpzdGFydCA9IG5hdGl2ZU1heChzdGFydCxlbmQgLSBzaXplKTticmVhazt9fXJldHVybiB7c3RhcnQ6c3RhcnQsZW5kOmVuZH07fWZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LHBhdGgsaGFzRnVuYyl7aWYob2JqZWN0ID09IG51bGwpe3JldHVybiBmYWxzZTt9dmFyIHJlc3VsdD1oYXNGdW5jKG9iamVjdCxwYXRoKTtpZighcmVzdWx0ICYmICFpc0tleShwYXRoKSl7cGF0aCA9IGJhc2VUb1BhdGgocGF0aCk7b2JqZWN0ID0gcGFyZW50KG9iamVjdCxwYXRoKTtpZihvYmplY3QgIT0gbnVsbCl7cGF0aCA9IGxhc3QocGF0aCk7cmVzdWx0ID0gaGFzRnVuYyhvYmplY3QscGF0aCk7fX12YXIgbGVuZ3RoPW9iamVjdD9vYmplY3QubGVuZ3RoOnVuZGVmaW5lZDtyZXR1cm4gcmVzdWx0IHx8ICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiYgaXNJbmRleChwYXRoLGxlbmd0aCkgJiYgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO31mdW5jdGlvbiBpbml0Q2xvbmVBcnJheShhcnJheSl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGgscmVzdWx0PWFycmF5LmNvbnN0cnVjdG9yKGxlbmd0aCk7aWYobGVuZ3RoICYmIHR5cGVvZiBhcnJheVswXSA9PSBcInN0cmluZ1wiICYmIGhhc093blByb3BlcnR5LmNhbGwoYXJyYXksXCJpbmRleFwiKSl7cmVzdWx0LmluZGV4ID0gYXJyYXkuaW5kZXg7cmVzdWx0LmlucHV0ID0gYXJyYXkuaW5wdXQ7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGluaXRDbG9uZU9iamVjdChvYmplY3Qpe2lmKGlzUHJvdG90eXBlKG9iamVjdCkpe3JldHVybiB7fTt9dmFyIEN0b3I9b2JqZWN0LmNvbnN0cnVjdG9yO3JldHVybiBiYXNlQ3JlYXRlKGlzRnVuY3Rpb24oQ3Rvcik/Q3Rvci5wcm90b3R5cGU6dW5kZWZpbmVkKTt9ZnVuY3Rpb24gaW5pdENsb25lQnlUYWcob2JqZWN0LHRhZyxpc0RlZXApe3ZhciBDdG9yPW9iamVjdC5jb25zdHJ1Y3Rvcjtzd2l0Y2godGFnKXtjYXNlIGFycmF5QnVmZmVyVGFnOnJldHVybiBjbG9uZUJ1ZmZlcihvYmplY3QpO2Nhc2UgYm9vbFRhZzpjYXNlIGRhdGVUYWc6cmV0dXJuIG5ldyBDdG9yKCtvYmplY3QpO2Nhc2UgZmxvYXQzMlRhZzpjYXNlIGZsb2F0NjRUYWc6Y2FzZSBpbnQ4VGFnOmNhc2UgaW50MTZUYWc6Y2FzZSBpbnQzMlRhZzpjYXNlIHVpbnQ4VGFnOmNhc2UgdWludDhDbGFtcGVkVGFnOmNhc2UgdWludDE2VGFnOmNhc2UgdWludDMyVGFnOnJldHVybiBjbG9uZVR5cGVkQXJyYXkob2JqZWN0LGlzRGVlcCk7Y2FzZSBtYXBUYWc6cmV0dXJuIGNsb25lTWFwKG9iamVjdCk7Y2FzZSBudW1iZXJUYWc6Y2FzZSBzdHJpbmdUYWc6cmV0dXJuIG5ldyBDdG9yKG9iamVjdCk7Y2FzZSByZWdleHBUYWc6cmV0dXJuIGNsb25lUmVnRXhwKG9iamVjdCk7Y2FzZSBzZXRUYWc6cmV0dXJuIGNsb25lU2V0KG9iamVjdCk7Y2FzZSBzeW1ib2xUYWc6cmV0dXJuIGNsb25lU3ltYm9sKG9iamVjdCk7fX1mdW5jdGlvbiBpbmRleEtleXMob2JqZWN0KXt2YXIgbGVuZ3RoPW9iamVjdD9vYmplY3QubGVuZ3RoOnVuZGVmaW5lZDtpZihpc0xlbmd0aChsZW5ndGgpICYmIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSl7cmV0dXJuIGJhc2VUaW1lcyhsZW5ndGgsU3RyaW5nKTt9cmV0dXJuIG51bGw7fWZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLGluZGV4LG9iamVjdCl7aWYoIWlzT2JqZWN0KG9iamVjdCkpe3JldHVybiBmYWxzZTt9dmFyIHR5cGU9dHlwZW9mIGluZGV4O2lmKHR5cGUgPT0gXCJudW1iZXJcIj9pc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsb2JqZWN0Lmxlbmd0aCk6dHlwZSA9PSBcInN0cmluZ1wiICYmIGluZGV4IGluIG9iamVjdCl7cmV0dXJuIGVxKG9iamVjdFtpbmRleF0sdmFsdWUpO31yZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIGlzS2V5KHZhbHVlLG9iamVjdCl7aWYodHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIpe3JldHVybiB0cnVlO31yZXR1cm4gIWlzQXJyYXkodmFsdWUpICYmIChyZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHwgb2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO31mdW5jdGlvbiBpc0tleWFibGUodmFsdWUpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZTtyZXR1cm4gdHlwZSA9PSBcIm51bWJlclwiIHx8IHR5cGUgPT0gXCJib29sZWFuXCIgfHwgdHlwZSA9PSBcInN0cmluZ1wiICYmIHZhbHVlICE9PSBcIl9fcHJvdG9fX1wiIHx8IHZhbHVlID09IG51bGw7fWZ1bmN0aW9uIGlzTGF6aWFibGUoZnVuYyl7dmFyIGZ1bmNOYW1lPWdldEZ1bmNOYW1lKGZ1bmMpLG90aGVyPWxvZGFzaFtmdW5jTmFtZV07aWYodHlwZW9mIG90aGVyICE9IFwiZnVuY3Rpb25cIiB8fCAhKGZ1bmNOYW1lIGluIExhenlXcmFwcGVyLnByb3RvdHlwZSkpe3JldHVybiBmYWxzZTt9aWYoZnVuYyA9PT0gb3RoZXIpe3JldHVybiB0cnVlO312YXIgZGF0YT1nZXREYXRhKG90aGVyKTtyZXR1cm4gISFkYXRhICYmIGZ1bmMgPT09IGRhdGFbMF07fWZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKXt2YXIgQ3Rvcj12YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3Rvcixwcm90bz10eXBlb2YgQ3RvciA9PSBcImZ1bmN0aW9uXCIgJiYgQ3Rvci5wcm90b3R5cGUgfHwgb2JqZWN0UHJvdG87cmV0dXJuIHZhbHVlID09PSBwcm90bzt9ZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKXtyZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7fWZ1bmN0aW9uIG1lcmdlRGF0YShkYXRhLHNvdXJjZSl7dmFyIGJpdG1hc2s9ZGF0YVsxXSxzcmNCaXRtYXNrPXNvdXJjZVsxXSxuZXdCaXRtYXNrPWJpdG1hc2sgfCBzcmNCaXRtYXNrLGlzQ29tbW9uPW5ld0JpdG1hc2sgPCAoQklORF9GTEFHIHwgQklORF9LRVlfRkxBRyB8IEFSWV9GTEFHKTt2YXIgaXNDb21ibz1zcmNCaXRtYXNrID09IEFSWV9GTEFHICYmIGJpdG1hc2sgPT0gQ1VSUllfRkxBRyB8fCBzcmNCaXRtYXNrID09IEFSWV9GTEFHICYmIGJpdG1hc2sgPT0gUkVBUkdfRkxBRyAmJiBkYXRhWzddLmxlbmd0aCA8PSBzb3VyY2VbOF0gfHwgc3JjQml0bWFzayA9PSAoQVJZX0ZMQUcgfCBSRUFSR19GTEFHKSAmJiBzb3VyY2VbN10ubGVuZ3RoIDw9IHNvdXJjZVs4XSAmJiBiaXRtYXNrID09IENVUlJZX0ZMQUc7aWYoIShpc0NvbW1vbiB8fCBpc0NvbWJvKSl7cmV0dXJuIGRhdGE7fWlmKHNyY0JpdG1hc2sgJiBCSU5EX0ZMQUcpe2RhdGFbMl0gPSBzb3VyY2VbMl07bmV3Qml0bWFzayB8PSBiaXRtYXNrICYgQklORF9GTEFHPzA6Q1VSUllfQk9VTkRfRkxBRzt9dmFyIHZhbHVlPXNvdXJjZVszXTtpZih2YWx1ZSl7dmFyIHBhcnRpYWxzPWRhdGFbM107ZGF0YVszXSA9IHBhcnRpYWxzP2NvbXBvc2VBcmdzKHBhcnRpYWxzLHZhbHVlLHNvdXJjZVs0XSk6Y29weUFycmF5KHZhbHVlKTtkYXRhWzRdID0gcGFydGlhbHM/cmVwbGFjZUhvbGRlcnMoZGF0YVszXSxQTEFDRUhPTERFUik6Y29weUFycmF5KHNvdXJjZVs0XSk7fXZhbHVlID0gc291cmNlWzVdO2lmKHZhbHVlKXtwYXJ0aWFscyA9IGRhdGFbNV07ZGF0YVs1XSA9IHBhcnRpYWxzP2NvbXBvc2VBcmdzUmlnaHQocGFydGlhbHMsdmFsdWUsc291cmNlWzZdKTpjb3B5QXJyYXkodmFsdWUpO2RhdGFbNl0gPSBwYXJ0aWFscz9yZXBsYWNlSG9sZGVycyhkYXRhWzVdLFBMQUNFSE9MREVSKTpjb3B5QXJyYXkoc291cmNlWzZdKTt9dmFsdWUgPSBzb3VyY2VbN107aWYodmFsdWUpe2RhdGFbN10gPSBjb3B5QXJyYXkodmFsdWUpO31pZihzcmNCaXRtYXNrICYgQVJZX0ZMQUcpe2RhdGFbOF0gPSBkYXRhWzhdID09IG51bGw/c291cmNlWzhdOm5hdGl2ZU1pbihkYXRhWzhdLHNvdXJjZVs4XSk7fWlmKGRhdGFbOV0gPT0gbnVsbCl7ZGF0YVs5XSA9IHNvdXJjZVs5XTt9ZGF0YVswXSA9IHNvdXJjZVswXTtkYXRhWzFdID0gbmV3Qml0bWFzaztyZXR1cm4gZGF0YTt9ZnVuY3Rpb24gbWVyZ2VEZWZhdWx0cyhvYmpWYWx1ZSxzcmNWYWx1ZSxrZXksb2JqZWN0LHNvdXJjZSxzdGFjayl7aWYoaXNPYmplY3Qob2JqVmFsdWUpICYmIGlzT2JqZWN0KHNyY1ZhbHVlKSl7c3RhY2suc2V0KHNyY1ZhbHVlLG9ialZhbHVlKTtiYXNlTWVyZ2Uob2JqVmFsdWUsc3JjVmFsdWUsdW5kZWZpbmVkLG1lcmdlRGVmYXVsdHMsc3RhY2spO31yZXR1cm4gb2JqVmFsdWU7fWZ1bmN0aW9uIHBhcmVudChvYmplY3QscGF0aCl7cmV0dXJuIHBhdGgubGVuZ3RoID09IDE/b2JqZWN0OmdldChvYmplY3QsYmFzZVNsaWNlKHBhdGgsMCwtMSkpO31mdW5jdGlvbiByZW9yZGVyKGFycmF5LGluZGV4ZXMpe3ZhciBhcnJMZW5ndGg9YXJyYXkubGVuZ3RoLGxlbmd0aD1uYXRpdmVNaW4oaW5kZXhlcy5sZW5ndGgsYXJyTGVuZ3RoKSxvbGRBcnJheT1jb3B5QXJyYXkoYXJyYXkpO3doaWxlKGxlbmd0aC0tKSB7dmFyIGluZGV4PWluZGV4ZXNbbGVuZ3RoXTthcnJheVtsZW5ndGhdID0gaXNJbmRleChpbmRleCxhcnJMZW5ndGgpP29sZEFycmF5W2luZGV4XTp1bmRlZmluZWQ7fXJldHVybiBhcnJheTt9dmFyIHNldERhdGE9KGZ1bmN0aW9uKCl7dmFyIGNvdW50PTAsbGFzdENhbGxlZD0wO3JldHVybiBmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBzdGFtcD1ub3coKSxyZW1haW5pbmc9SE9UX1NQQU4gLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKTtsYXN0Q2FsbGVkID0gc3RhbXA7aWYocmVtYWluaW5nID4gMCl7aWYoKytjb3VudCA+PSBIT1RfQ09VTlQpe3JldHVybiBrZXk7fX1lbHNlIHtjb3VudCA9IDA7fXJldHVybiBiYXNlU2V0RGF0YShrZXksdmFsdWUpO307fSkoKTtmdW5jdGlvbiBzdHJpbmdUb1BhdGgoc3RyaW5nKXt2YXIgcmVzdWx0PVtdO3RvU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVByb3BOYW1lLGZ1bmN0aW9uKG1hdGNoLG51bWJlcixxdW90ZSxzdHJpbmcpe3Jlc3VsdC5wdXNoKHF1b3RlP3N0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhcixcIiQxXCIpOm51bWJlciB8fCBtYXRjaCk7fSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gdG9BcnJheUxpa2VPYmplY3QodmFsdWUpe3JldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSk/dmFsdWU6W107fWZ1bmN0aW9uIHRvRnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJmdW5jdGlvblwiP3ZhbHVlOmlkZW50aXR5O31mdW5jdGlvbiB3cmFwcGVyQ2xvbmUod3JhcHBlcil7aWYod3JhcHBlciBpbnN0YW5jZW9mIExhenlXcmFwcGVyKXtyZXR1cm4gd3JhcHBlci5jbG9uZSgpO312YXIgcmVzdWx0PW5ldyBMb2Rhc2hXcmFwcGVyKHdyYXBwZXIuX193cmFwcGVkX18sd3JhcHBlci5fX2NoYWluX18pO3Jlc3VsdC5fX2FjdGlvbnNfXyA9IGNvcHlBcnJheSh3cmFwcGVyLl9fYWN0aW9uc19fKTtyZXN1bHQuX19pbmRleF9fID0gd3JhcHBlci5fX2luZGV4X187cmVzdWx0Ll9fdmFsdWVzX18gPSB3cmFwcGVyLl9fdmFsdWVzX187cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY2h1bmsoYXJyYXksc2l6ZSl7c2l6ZSA9IG5hdGl2ZU1heCh0b0ludGVnZXIoc2l6ZSksMCk7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoIHx8IHNpemUgPCAxKXtyZXR1cm4gW107fXZhciBpbmRleD0wLHJlc0luZGV4PS0xLHJlc3VsdD1BcnJheShuYXRpdmVDZWlsKGxlbmd0aCAvIHNpemUpKTt3aGlsZShpbmRleCA8IGxlbmd0aCkge3Jlc3VsdFsrK3Jlc0luZGV4XSA9IGJhc2VTbGljZShhcnJheSxpbmRleCxpbmRleCArPSBzaXplKTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY29tcGFjdChhcnJheSl7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MCxyZXNJbmRleD0tMSxyZXN1bHQ9W107d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF07aWYodmFsdWUpe3Jlc3VsdFsrK3Jlc0luZGV4XSA9IHZhbHVlO319cmV0dXJuIHJlc3VsdDt9dmFyIGNvbmNhdD1yZXN0KGZ1bmN0aW9uKGFycmF5LHZhbHVlcyl7aWYoIWlzQXJyYXkoYXJyYXkpKXthcnJheSA9IGFycmF5ID09IG51bGw/W106W09iamVjdChhcnJheSldO312YWx1ZXMgPSBiYXNlRmxhdHRlbih2YWx1ZXMpO3JldHVybiBhcnJheUNvbmNhdChhcnJheSx2YWx1ZXMpO30pO3ZhciBkaWZmZXJlbmNlPXJlc3QoZnVuY3Rpb24oYXJyYXksdmFsdWVzKXtyZXR1cm4gaXNBcnJheUxpa2VPYmplY3QoYXJyYXkpP2Jhc2VEaWZmZXJlbmNlKGFycmF5LGJhc2VGbGF0dGVuKHZhbHVlcyxmYWxzZSx0cnVlKSk6W107fSk7dmFyIGRpZmZlcmVuY2VCeT1yZXN0KGZ1bmN0aW9uKGFycmF5LHZhbHVlcyl7dmFyIGl0ZXJhdGVlPWxhc3QodmFsdWVzKTtpZihpc0FycmF5TGlrZU9iamVjdChpdGVyYXRlZSkpe2l0ZXJhdGVlID0gdW5kZWZpbmVkO31yZXR1cm4gaXNBcnJheUxpa2VPYmplY3QoYXJyYXkpP2Jhc2VEaWZmZXJlbmNlKGFycmF5LGJhc2VGbGF0dGVuKHZhbHVlcyxmYWxzZSx0cnVlKSxnZXRJdGVyYXRlZShpdGVyYXRlZSkpOltdO30pO3ZhciBkaWZmZXJlbmNlV2l0aD1yZXN0KGZ1bmN0aW9uKGFycmF5LHZhbHVlcyl7dmFyIGNvbXBhcmF0b3I9bGFzdCh2YWx1ZXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGNvbXBhcmF0b3IpKXtjb21wYXJhdG9yID0gdW5kZWZpbmVkO31yZXR1cm4gaXNBcnJheUxpa2VPYmplY3QoYXJyYXkpP2Jhc2VEaWZmZXJlbmNlKGFycmF5LGJhc2VGbGF0dGVuKHZhbHVlcyxmYWxzZSx0cnVlKSx1bmRlZmluZWQsY29tcGFyYXRvcik6W107fSk7ZnVuY3Rpb24gZHJvcChhcnJheSxuLGd1YXJkKXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGgpe3JldHVybiBbXTt9biA9IGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZD8xOnRvSW50ZWdlcihuKTtyZXR1cm4gYmFzZVNsaWNlKGFycmF5LG4gPCAwPzA6bixsZW5ndGgpO31mdW5jdGlvbiBkcm9wUmlnaHQoYXJyYXksbixndWFyZCl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoKXtyZXR1cm4gW107fW4gPSBndWFyZCB8fCBuID09PSB1bmRlZmluZWQ/MTp0b0ludGVnZXIobik7biA9IGxlbmd0aCAtIG47cmV0dXJuIGJhc2VTbGljZShhcnJheSwwLG4gPCAwPzA6bik7fWZ1bmN0aW9uIGRyb3BSaWdodFdoaWxlKGFycmF5LHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlV2hpbGUoYXJyYXksZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpLHRydWUsdHJ1ZSk6W107fWZ1bmN0aW9uIGRyb3BXaGlsZShhcnJheSxwcmVkaWNhdGUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVdoaWxlKGFycmF5LGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSx0cnVlKTpbXTt9ZnVuY3Rpb24gZmlsbChhcnJheSx2YWx1ZSxzdGFydCxlbmQpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYoIWxlbmd0aCl7cmV0dXJuIFtdO31pZihzdGFydCAmJiB0eXBlb2Ygc3RhcnQgIT0gXCJudW1iZXJcIiAmJiBpc0l0ZXJhdGVlQ2FsbChhcnJheSx2YWx1ZSxzdGFydCkpe3N0YXJ0ID0gMDtlbmQgPSBsZW5ndGg7fXJldHVybiBiYXNlRmlsbChhcnJheSx2YWx1ZSxzdGFydCxlbmQpO31mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXkscHJlZGljYXRlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VGaW5kSW5kZXgoYXJyYXksZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpKTotMTt9ZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnJheSxwcmVkaWNhdGUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZUZpbmRJbmRleChhcnJheSxnZXRJdGVyYXRlZShwcmVkaWNhdGUsMyksdHJ1ZSk6LTE7fWZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7cmV0dXJuIGxlbmd0aD9iYXNlRmxhdHRlbihhcnJheSk6W107fWZ1bmN0aW9uIGZsYXR0ZW5EZWVwKGFycmF5KXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO3JldHVybiBsZW5ndGg/YmFzZUZsYXR0ZW4oYXJyYXksdHJ1ZSk6W107fWZ1bmN0aW9uIGZyb21QYWlycyhwYWlycyl7dmFyIGluZGV4PS0xLGxlbmd0aD1wYWlycz9wYWlycy5sZW5ndGg6MCxyZXN1bHQ9e307d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBwYWlyPXBhaXJzW2luZGV4XTtyZXN1bHRbcGFpclswXV0gPSBwYWlyWzFdO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBoZWFkKGFycmF5KXtyZXR1cm4gYXJyYXk/YXJyYXlbMF06dW5kZWZpbmVkO31mdW5jdGlvbiBpbmRleE9mKGFycmF5LHZhbHVlLGZyb21JbmRleCl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoKXtyZXR1cm4gLTE7fWZyb21JbmRleCA9IHRvSW50ZWdlcihmcm9tSW5kZXgpO2lmKGZyb21JbmRleCA8IDApe2Zyb21JbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsMCk7fXJldHVybiBiYXNlSW5kZXhPZihhcnJheSx2YWx1ZSxmcm9tSW5kZXgpO31mdW5jdGlvbiBpbml0aWFsKGFycmF5KXtyZXR1cm4gZHJvcFJpZ2h0KGFycmF5LDEpO312YXIgaW50ZXJzZWN0aW9uPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgbWFwcGVkPWFycmF5TWFwKGFycmF5cyx0b0FycmF5TGlrZU9iamVjdCk7cmV0dXJuIG1hcHBlZC5sZW5ndGggJiYgbWFwcGVkWzBdID09PSBhcnJheXNbMF0/YmFzZUludGVyc2VjdGlvbihtYXBwZWQpOltdO30pO3ZhciBpbnRlcnNlY3Rpb25CeT1yZXN0KGZ1bmN0aW9uKGFycmF5cyl7dmFyIGl0ZXJhdGVlPWxhc3QoYXJyYXlzKSxtYXBwZWQ9YXJyYXlNYXAoYXJyYXlzLHRvQXJyYXlMaWtlT2JqZWN0KTtpZihpdGVyYXRlZSA9PT0gbGFzdChtYXBwZWQpKXtpdGVyYXRlZSA9IHVuZGVmaW5lZDt9ZWxzZSB7bWFwcGVkLnBvcCgpO31yZXR1cm4gbWFwcGVkLmxlbmd0aCAmJiBtYXBwZWRbMF0gPT09IGFycmF5c1swXT9iYXNlSW50ZXJzZWN0aW9uKG1hcHBlZCxnZXRJdGVyYXRlZShpdGVyYXRlZSkpOltdO30pO3ZhciBpbnRlcnNlY3Rpb25XaXRoPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgY29tcGFyYXRvcj1sYXN0KGFycmF5cyksbWFwcGVkPWFycmF5TWFwKGFycmF5cyx0b0FycmF5TGlrZU9iamVjdCk7aWYoY29tcGFyYXRvciA9PT0gbGFzdChtYXBwZWQpKXtjb21wYXJhdG9yID0gdW5kZWZpbmVkO31lbHNlIHttYXBwZWQucG9wKCk7fXJldHVybiBtYXBwZWQubGVuZ3RoICYmIG1hcHBlZFswXSA9PT0gYXJyYXlzWzBdP2Jhc2VJbnRlcnNlY3Rpb24obWFwcGVkLHVuZGVmaW5lZCxjb21wYXJhdG9yKTpbXTt9KTtmdW5jdGlvbiBqb2luKGFycmF5LHNlcGFyYXRvcil7cmV0dXJuIGFycmF5P25hdGl2ZUpvaW4uY2FsbChhcnJheSxzZXBhcmF0b3IpOlwiXCI7fWZ1bmN0aW9uIGxhc3QoYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7cmV0dXJuIGxlbmd0aD9hcnJheVtsZW5ndGggLSAxXTp1bmRlZmluZWQ7fWZ1bmN0aW9uIGxhc3RJbmRleE9mKGFycmF5LHZhbHVlLGZyb21JbmRleCl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoKXtyZXR1cm4gLTE7fXZhciBpbmRleD1sZW5ndGg7aWYoZnJvbUluZGV4ICE9PSB1bmRlZmluZWQpe2luZGV4ID0gdG9JbnRlZ2VyKGZyb21JbmRleCk7aW5kZXggPSAoaW5kZXggPCAwP25hdGl2ZU1heChsZW5ndGggKyBpbmRleCwwKTpuYXRpdmVNaW4oaW5kZXgsbGVuZ3RoIC0gMSkpICsgMTt9aWYodmFsdWUgIT09IHZhbHVlKXtyZXR1cm4gaW5kZXhPZk5hTihhcnJheSxpbmRleCx0cnVlKTt9d2hpbGUoaW5kZXgtLSkge2lmKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpe3JldHVybiBpbmRleDt9fXJldHVybiAtMTt9dmFyIHB1bGw9cmVzdChwdWxsQWxsKTtmdW5jdGlvbiBwdWxsQWxsKGFycmF5LHZhbHVlcyl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aCAmJiB2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aD9iYXNlUHVsbEFsbChhcnJheSx2YWx1ZXMpOmFycmF5O31mdW5jdGlvbiBwdWxsQWxsQnkoYXJyYXksdmFsdWVzLGl0ZXJhdGVlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoICYmIHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoP2Jhc2VQdWxsQWxsQnkoYXJyYXksdmFsdWVzLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk6YXJyYXk7fXZhciBwdWxsQXQ9cmVzdChmdW5jdGlvbihhcnJheSxpbmRleGVzKXtpbmRleGVzID0gYXJyYXlNYXAoYmFzZUZsYXR0ZW4oaW5kZXhlcyksU3RyaW5nKTt2YXIgcmVzdWx0PWJhc2VBdChhcnJheSxpbmRleGVzKTtiYXNlUHVsbEF0KGFycmF5LGluZGV4ZXMuc29ydChjb21wYXJlQXNjZW5kaW5nKSk7cmV0dXJuIHJlc3VsdDt9KTtmdW5jdGlvbiByZW1vdmUoYXJyYXkscHJlZGljYXRlKXt2YXIgcmVzdWx0PVtdO2lmKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSl7cmV0dXJuIHJlc3VsdDt9dmFyIGluZGV4PS0xLGluZGV4ZXM9W10sbGVuZ3RoPWFycmF5Lmxlbmd0aDtwcmVkaWNhdGUgPSBnZXRJdGVyYXRlZShwcmVkaWNhdGUsMyk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF07aWYocHJlZGljYXRlKHZhbHVlLGluZGV4LGFycmF5KSl7cmVzdWx0LnB1c2godmFsdWUpO2luZGV4ZXMucHVzaChpbmRleCk7fX1iYXNlUHVsbEF0KGFycmF5LGluZGV4ZXMpO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHJldmVyc2UoYXJyYXkpe3JldHVybiBhcnJheT9uYXRpdmVSZXZlcnNlLmNhbGwoYXJyYXkpOmFycmF5O31mdW5jdGlvbiBzbGljZShhcnJheSxzdGFydCxlbmQpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYoIWxlbmd0aCl7cmV0dXJuIFtdO31pZihlbmQgJiYgdHlwZW9mIGVuZCAhPSBcIm51bWJlclwiICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LHN0YXJ0LGVuZCkpe3N0YXJ0ID0gMDtlbmQgPSBsZW5ndGg7fWVsc2Uge3N0YXJ0ID0gc3RhcnQgPT0gbnVsbD8wOnRvSW50ZWdlcihzdGFydCk7ZW5kID0gZW5kID09PSB1bmRlZmluZWQ/bGVuZ3RoOnRvSW50ZWdlcihlbmQpO31yZXR1cm4gYmFzZVNsaWNlKGFycmF5LHN0YXJ0LGVuZCk7fWZ1bmN0aW9uIHNvcnRlZEluZGV4KGFycmF5LHZhbHVlKXtyZXR1cm4gYmFzZVNvcnRlZEluZGV4KGFycmF5LHZhbHVlKTt9ZnVuY3Rpb24gc29ydGVkSW5kZXhCeShhcnJheSx2YWx1ZSxpdGVyYXRlZSl7cmV0dXJuIGJhc2VTb3J0ZWRJbmRleEJ5KGFycmF5LHZhbHVlLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk7fWZ1bmN0aW9uIHNvcnRlZEluZGV4T2YoYXJyYXksdmFsdWUpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYobGVuZ3RoKXt2YXIgaW5kZXg9YmFzZVNvcnRlZEluZGV4KGFycmF5LHZhbHVlKTtpZihpbmRleCA8IGxlbmd0aCAmJiBlcShhcnJheVtpbmRleF0sdmFsdWUpKXtyZXR1cm4gaW5kZXg7fX1yZXR1cm4gLTE7fWZ1bmN0aW9uIHNvcnRlZExhc3RJbmRleChhcnJheSx2YWx1ZSl7cmV0dXJuIGJhc2VTb3J0ZWRJbmRleChhcnJheSx2YWx1ZSx0cnVlKTt9ZnVuY3Rpb24gc29ydGVkTGFzdEluZGV4QnkoYXJyYXksdmFsdWUsaXRlcmF0ZWUpe3JldHVybiBiYXNlU29ydGVkSW5kZXhCeShhcnJheSx2YWx1ZSxnZXRJdGVyYXRlZShpdGVyYXRlZSksdHJ1ZSk7fWZ1bmN0aW9uIHNvcnRlZExhc3RJbmRleE9mKGFycmF5LHZhbHVlKXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKGxlbmd0aCl7dmFyIGluZGV4PWJhc2VTb3J0ZWRJbmRleChhcnJheSx2YWx1ZSx0cnVlKSAtIDE7aWYoZXEoYXJyYXlbaW5kZXhdLHZhbHVlKSl7cmV0dXJuIGluZGV4O319cmV0dXJuIC0xO31mdW5jdGlvbiBzb3J0ZWRVbmlxKGFycmF5KXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VTb3J0ZWRVbmlxKGFycmF5KTpbXTt9ZnVuY3Rpb24gc29ydGVkVW5pcUJ5KGFycmF5LGl0ZXJhdGVlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VTb3J0ZWRVbmlxQnkoYXJyYXksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTpbXTt9ZnVuY3Rpb24gdGFpbChhcnJheSl7cmV0dXJuIGRyb3AoYXJyYXksMSk7fWZ1bmN0aW9uIHRha2UoYXJyYXksbixndWFyZCl7aWYoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKXtyZXR1cm4gW107fW4gPSBndWFyZCB8fCBuID09PSB1bmRlZmluZWQ/MTp0b0ludGVnZXIobik7cmV0dXJuIGJhc2VTbGljZShhcnJheSwwLG4gPCAwPzA6bik7fWZ1bmN0aW9uIHRha2VSaWdodChhcnJheSxuLGd1YXJkKXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGgpe3JldHVybiBbXTt9biA9IGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZD8xOnRvSW50ZWdlcihuKTtuID0gbGVuZ3RoIC0gbjtyZXR1cm4gYmFzZVNsaWNlKGFycmF5LG4gPCAwPzA6bixsZW5ndGgpO31mdW5jdGlvbiB0YWtlUmlnaHRXaGlsZShhcnJheSxwcmVkaWNhdGUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVdoaWxlKGFycmF5LGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSxmYWxzZSx0cnVlKTpbXTt9ZnVuY3Rpb24gdGFrZVdoaWxlKGFycmF5LHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlV2hpbGUoYXJyYXksZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpKTpbXTt9dmFyIHVuaW9uPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXtyZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJyYXlzLGZhbHNlLHRydWUpKTt9KTt2YXIgdW5pb25CeT1yZXN0KGZ1bmN0aW9uKGFycmF5cyl7dmFyIGl0ZXJhdGVlPWxhc3QoYXJyYXlzKTtpZihpc0FycmF5TGlrZU9iamVjdChpdGVyYXRlZSkpe2l0ZXJhdGVlID0gdW5kZWZpbmVkO31yZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJyYXlzLGZhbHNlLHRydWUpLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk7fSk7dmFyIHVuaW9uV2l0aD1yZXN0KGZ1bmN0aW9uKGFycmF5cyl7dmFyIGNvbXBhcmF0b3I9bGFzdChhcnJheXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGNvbXBhcmF0b3IpKXtjb21wYXJhdG9yID0gdW5kZWZpbmVkO31yZXR1cm4gYmFzZVVuaXEoYmFzZUZsYXR0ZW4oYXJyYXlzLGZhbHNlLHRydWUpLHVuZGVmaW5lZCxjb21wYXJhdG9yKTt9KTtmdW5jdGlvbiB1bmlxKGFycmF5KXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VVbmlxKGFycmF5KTpbXTt9ZnVuY3Rpb24gdW5pcUJ5KGFycmF5LGl0ZXJhdGVlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VVbmlxKGFycmF5LGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk6W107fWZ1bmN0aW9uIHVuaXFXaXRoKGFycmF5LGNvbXBhcmF0b3Ipe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVVuaXEoYXJyYXksdW5kZWZpbmVkLGNvbXBhcmF0b3IpOltdO31mdW5jdGlvbiB1bnppcChhcnJheSl7aWYoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKXtyZXR1cm4gW107fXZhciBsZW5ndGg9MDthcnJheSA9IGFycmF5RmlsdGVyKGFycmF5LGZ1bmN0aW9uKGdyb3VwKXtpZihpc0FycmF5TGlrZU9iamVjdChncm91cCkpe2xlbmd0aCA9IG5hdGl2ZU1heChncm91cC5sZW5ndGgsbGVuZ3RoKTtyZXR1cm4gdHJ1ZTt9fSk7cmV0dXJuIGJhc2VUaW1lcyhsZW5ndGgsZnVuY3Rpb24oaW5kZXgpe3JldHVybiBhcnJheU1hcChhcnJheSxiYXNlUHJvcGVydHkoaW5kZXgpKTt9KTt9ZnVuY3Rpb24gdW56aXBXaXRoKGFycmF5LGl0ZXJhdGVlKXtpZighKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpe3JldHVybiBbXTt9dmFyIHJlc3VsdD11bnppcChhcnJheSk7aWYoaXRlcmF0ZWUgPT0gbnVsbCl7cmV0dXJuIHJlc3VsdDt9cmV0dXJuIGFycmF5TWFwKHJlc3VsdCxmdW5jdGlvbihncm91cCl7cmV0dXJuIGFwcGx5KGl0ZXJhdGVlLHVuZGVmaW5lZCxncm91cCk7fSk7fXZhciB3aXRob3V0PXJlc3QoZnVuY3Rpb24oYXJyYXksdmFsdWVzKXtyZXR1cm4gaXNBcnJheUxpa2VPYmplY3QoYXJyYXkpP2Jhc2VEaWZmZXJlbmNlKGFycmF5LHZhbHVlcyk6W107fSk7dmFyIHhvcj1yZXN0KGZ1bmN0aW9uKGFycmF5cyl7cmV0dXJuIGJhc2VYb3IoYXJyYXlGaWx0ZXIoYXJyYXlzLGlzQXJyYXlMaWtlT2JqZWN0KSk7fSk7dmFyIHhvckJ5PXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgaXRlcmF0ZWU9bGFzdChhcnJheXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGl0ZXJhdGVlKSl7aXRlcmF0ZWUgPSB1bmRlZmluZWQ7fXJldHVybiBiYXNlWG9yKGFycmF5RmlsdGVyKGFycmF5cyxpc0FycmF5TGlrZU9iamVjdCksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTt9KTt2YXIgeG9yV2l0aD1yZXN0KGZ1bmN0aW9uKGFycmF5cyl7dmFyIGNvbXBhcmF0b3I9bGFzdChhcnJheXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGNvbXBhcmF0b3IpKXtjb21wYXJhdG9yID0gdW5kZWZpbmVkO31yZXR1cm4gYmFzZVhvcihhcnJheUZpbHRlcihhcnJheXMsaXNBcnJheUxpa2VPYmplY3QpLHVuZGVmaW5lZCxjb21wYXJhdG9yKTt9KTt2YXIgemlwPXJlc3QodW56aXApO2Z1bmN0aW9uIHppcE9iamVjdChwcm9wcyx2YWx1ZXMpe3JldHVybiBiYXNlWmlwT2JqZWN0KHByb3BzIHx8IFtdLHZhbHVlcyB8fCBbXSxhc3NpZ25WYWx1ZSk7fWZ1bmN0aW9uIHppcE9iamVjdERlZXAocHJvcHMsdmFsdWVzKXtyZXR1cm4gYmFzZVppcE9iamVjdChwcm9wcyB8fCBbXSx2YWx1ZXMgfHwgW10sYmFzZVNldCk7fXZhciB6aXBXaXRoPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgbGVuZ3RoPWFycmF5cy5sZW5ndGgsaXRlcmF0ZWU9bGVuZ3RoID4gMT9hcnJheXNbbGVuZ3RoIC0gMV06dW5kZWZpbmVkO2l0ZXJhdGVlID0gdHlwZW9mIGl0ZXJhdGVlID09IFwiZnVuY3Rpb25cIj8oYXJyYXlzLnBvcCgpLGl0ZXJhdGVlKTp1bmRlZmluZWQ7cmV0dXJuIHVuemlwV2l0aChhcnJheXMsaXRlcmF0ZWUpO30pO2Z1bmN0aW9uIGNoYWluKHZhbHVlKXt2YXIgcmVzdWx0PWxvZGFzaCh2YWx1ZSk7cmVzdWx0Ll9fY2hhaW5fXyA9IHRydWU7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gdGFwKHZhbHVlLGludGVyY2VwdG9yKXtpbnRlcmNlcHRvcih2YWx1ZSk7cmV0dXJuIHZhbHVlO31mdW5jdGlvbiB0aHJ1KHZhbHVlLGludGVyY2VwdG9yKXtyZXR1cm4gaW50ZXJjZXB0b3IodmFsdWUpO312YXIgd3JhcHBlckF0PXJlc3QoZnVuY3Rpb24ocGF0aHMpe3BhdGhzID0gYmFzZUZsYXR0ZW4ocGF0aHMpO3ZhciBsZW5ndGg9cGF0aHMubGVuZ3RoLHN0YXJ0PWxlbmd0aD9wYXRoc1swXTowLHZhbHVlPXRoaXMuX193cmFwcGVkX18saW50ZXJjZXB0b3I9ZnVuY3Rpb24gaW50ZXJjZXB0b3Iob2JqZWN0KXtyZXR1cm4gYmFzZUF0KG9iamVjdCxwYXRocyk7fTtpZihsZW5ndGggPiAxIHx8IHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoIHx8ICEodmFsdWUgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcikgfHwgIWlzSW5kZXgoc3RhcnQpKXtyZXR1cm4gdGhpcy50aHJ1KGludGVyY2VwdG9yKTt9dmFsdWUgPSB2YWx1ZS5zbGljZShzdGFydCwrc3RhcnQgKyAobGVuZ3RoPzE6MCkpO3ZhbHVlLl9fYWN0aW9uc19fLnB1c2goe2Z1bmM6dGhydSxhcmdzOltpbnRlcmNlcHRvcl0sdGhpc0FyZzp1bmRlZmluZWR9KTtyZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodmFsdWUsdGhpcy5fX2NoYWluX18pLnRocnUoZnVuY3Rpb24oYXJyYXkpe2lmKGxlbmd0aCAmJiAhYXJyYXkubGVuZ3RoKXthcnJheS5wdXNoKHVuZGVmaW5lZCk7fXJldHVybiBhcnJheTt9KTt9KTtmdW5jdGlvbiB3cmFwcGVyQ2hhaW4oKXtyZXR1cm4gY2hhaW4odGhpcyk7fWZ1bmN0aW9uIHdyYXBwZXJDb21taXQoKXtyZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodGhpcy52YWx1ZSgpLHRoaXMuX19jaGFpbl9fKTt9ZnVuY3Rpb24gd3JhcHBlckZsYXRNYXAoaXRlcmF0ZWUpe3JldHVybiB0aGlzLm1hcChpdGVyYXRlZSkuZmxhdHRlbigpO31mdW5jdGlvbiB3cmFwcGVyTmV4dCgpe2lmKHRoaXMuX192YWx1ZXNfXyA9PT0gdW5kZWZpbmVkKXt0aGlzLl9fdmFsdWVzX18gPSB0b0FycmF5KHRoaXMudmFsdWUoKSk7fXZhciBkb25lPXRoaXMuX19pbmRleF9fID49IHRoaXMuX192YWx1ZXNfXy5sZW5ndGgsdmFsdWU9ZG9uZT91bmRlZmluZWQ6dGhpcy5fX3ZhbHVlc19fW3RoaXMuX19pbmRleF9fKytdO3JldHVybiB7ZG9uZTpkb25lLHZhbHVlOnZhbHVlfTt9ZnVuY3Rpb24gd3JhcHBlclRvSXRlcmF0b3IoKXtyZXR1cm4gdGhpczt9ZnVuY3Rpb24gd3JhcHBlclBsYW50KHZhbHVlKXt2YXIgcmVzdWx0LHBhcmVudD10aGlzO3doaWxlKHBhcmVudCBpbnN0YW5jZW9mIGJhc2VMb2Rhc2gpIHt2YXIgY2xvbmU9d3JhcHBlckNsb25lKHBhcmVudCk7Y2xvbmUuX19pbmRleF9fID0gMDtjbG9uZS5fX3ZhbHVlc19fID0gdW5kZWZpbmVkO2lmKHJlc3VsdCl7cHJldmlvdXMuX193cmFwcGVkX18gPSBjbG9uZTt9ZWxzZSB7cmVzdWx0ID0gY2xvbmU7fXZhciBwcmV2aW91cz1jbG9uZTtwYXJlbnQgPSBwYXJlbnQuX193cmFwcGVkX187fXByZXZpb3VzLl9fd3JhcHBlZF9fID0gdmFsdWU7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gd3JhcHBlclJldmVyc2UoKXt2YXIgdmFsdWU9dGhpcy5fX3dyYXBwZWRfXztpZih2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKXt2YXIgd3JhcHBlZD12YWx1ZTtpZih0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCl7d3JhcHBlZCA9IG5ldyBMYXp5V3JhcHBlcih0aGlzKTt9d3JhcHBlZCA9IHdyYXBwZWQucmV2ZXJzZSgpO3dyYXBwZWQuX19hY3Rpb25zX18ucHVzaCh7ZnVuYzp0aHJ1LGFyZ3M6W3JldmVyc2VdLHRoaXNBcmc6dW5kZWZpbmVkfSk7cmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHdyYXBwZWQsdGhpcy5fX2NoYWluX18pO31yZXR1cm4gdGhpcy50aHJ1KHJldmVyc2UpO31mdW5jdGlvbiB3cmFwcGVyVmFsdWUoKXtyZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZSh0aGlzLl9fd3JhcHBlZF9fLHRoaXMuX19hY3Rpb25zX18pO312YXIgY291bnRCeT1jcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe2hhc093blByb3BlcnR5LmNhbGwocmVzdWx0LGtleSk/KytyZXN1bHRba2V5XTpyZXN1bHRba2V5XSA9IDE7fSk7ZnVuY3Rpb24gZXZlcnkoY29sbGVjdGlvbixwcmVkaWNhdGUsZ3VhcmQpe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlFdmVyeTpiYXNlRXZlcnk7aWYoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbixwcmVkaWNhdGUsZ3VhcmQpKXtwcmVkaWNhdGUgPSB1bmRlZmluZWQ7fXJldHVybiBmdW5jKGNvbGxlY3Rpb24sZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpKTt9ZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24scHJlZGljYXRlKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5RmlsdGVyOmJhc2VGaWx0ZXI7cmV0dXJuIGZ1bmMoY29sbGVjdGlvbixnZXRJdGVyYXRlZShwcmVkaWNhdGUsMykpO31mdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24scHJlZGljYXRlKXtwcmVkaWNhdGUgPSBnZXRJdGVyYXRlZShwcmVkaWNhdGUsMyk7aWYoaXNBcnJheShjb2xsZWN0aW9uKSl7dmFyIGluZGV4PWJhc2VGaW5kSW5kZXgoY29sbGVjdGlvbixwcmVkaWNhdGUpO3JldHVybiBpbmRleCA+IC0xP2NvbGxlY3Rpb25baW5kZXhdOnVuZGVmaW5lZDt9cmV0dXJuIGJhc2VGaW5kKGNvbGxlY3Rpb24scHJlZGljYXRlLGJhc2VFYWNoKTt9ZnVuY3Rpb24gZmluZExhc3QoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKTtpZihpc0FycmF5KGNvbGxlY3Rpb24pKXt2YXIgaW5kZXg9YmFzZUZpbmRJbmRleChjb2xsZWN0aW9uLHByZWRpY2F0ZSx0cnVlKTtyZXR1cm4gaW5kZXggPiAtMT9jb2xsZWN0aW9uW2luZGV4XTp1bmRlZmluZWQ7fXJldHVybiBiYXNlRmluZChjb2xsZWN0aW9uLHByZWRpY2F0ZSxiYXNlRWFjaFJpZ2h0KTt9ZnVuY3Rpb24gZmxhdE1hcChjb2xsZWN0aW9uLGl0ZXJhdGVlKXtyZXR1cm4gYmFzZUZsYXR0ZW4obWFwKGNvbGxlY3Rpb24saXRlcmF0ZWUpKTt9ZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLGl0ZXJhdGVlKXtyZXR1cm4gdHlwZW9mIGl0ZXJhdGVlID09IFwiZnVuY3Rpb25cIiAmJiBpc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5RWFjaChjb2xsZWN0aW9uLGl0ZXJhdGVlKTpiYXNlRWFjaChjb2xsZWN0aW9uLHRvRnVuY3Rpb24oaXRlcmF0ZWUpKTt9ZnVuY3Rpb24gZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24saXRlcmF0ZWUpe3JldHVybiB0eXBlb2YgaXRlcmF0ZWUgPT0gXCJmdW5jdGlvblwiICYmIGlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlFYWNoUmlnaHQoY29sbGVjdGlvbixpdGVyYXRlZSk6YmFzZUVhY2hSaWdodChjb2xsZWN0aW9uLHRvRnVuY3Rpb24oaXRlcmF0ZWUpKTt9dmFyIGdyb3VwQnk9Y3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCxrZXkpKXtyZXN1bHRba2V5XS5wdXNoKHZhbHVlKTt9ZWxzZSB7cmVzdWx0W2tleV0gPSBbdmFsdWVdO319KTtmdW5jdGlvbiBpbmNsdWRlcyhjb2xsZWN0aW9uLHZhbHVlLGZyb21JbmRleCxndWFyZCl7Y29sbGVjdGlvbiA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pP2NvbGxlY3Rpb246dmFsdWVzKGNvbGxlY3Rpb24pO2Zyb21JbmRleCA9IGZyb21JbmRleCAmJiAhZ3VhcmQ/dG9JbnRlZ2VyKGZyb21JbmRleCk6MDt2YXIgbGVuZ3RoPWNvbGxlY3Rpb24ubGVuZ3RoO2lmKGZyb21JbmRleCA8IDApe2Zyb21JbmRleCA9IG5hdGl2ZU1heChsZW5ndGggKyBmcm9tSW5kZXgsMCk7fXJldHVybiBpc1N0cmluZyhjb2xsZWN0aW9uKT9mcm9tSW5kZXggPD0gbGVuZ3RoICYmIGNvbGxlY3Rpb24uaW5kZXhPZih2YWx1ZSxmcm9tSW5kZXgpID4gLTE6ISFsZW5ndGggJiYgYmFzZUluZGV4T2YoY29sbGVjdGlvbix2YWx1ZSxmcm9tSW5kZXgpID4gLTE7fXZhciBpbnZva2VNYXA9cmVzdChmdW5jdGlvbihjb2xsZWN0aW9uLHBhdGgsYXJncyl7dmFyIGluZGV4PS0xLGlzRnVuYz10eXBlb2YgcGF0aCA9PSBcImZ1bmN0aW9uXCIsaXNQcm9wPWlzS2V5KHBhdGgpLHJlc3VsdD1pc0FycmF5TGlrZShjb2xsZWN0aW9uKT9BcnJheShjb2xsZWN0aW9uLmxlbmd0aCk6W107YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSl7dmFyIGZ1bmM9aXNGdW5jP3BhdGg6aXNQcm9wICYmIHZhbHVlICE9IG51bGw/dmFsdWVbcGF0aF06dW5kZWZpbmVkO3Jlc3VsdFsrK2luZGV4XSA9IGZ1bmM/YXBwbHkoZnVuYyx2YWx1ZSxhcmdzKTpiYXNlSW52b2tlKHZhbHVlLHBhdGgsYXJncyk7fSk7cmV0dXJuIHJlc3VsdDt9KTt2YXIga2V5Qnk9Y3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtyZXN1bHRba2V5XSA9IHZhbHVlO30pO2Z1bmN0aW9uIG1hcChjb2xsZWN0aW9uLGl0ZXJhdGVlKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5TWFwOmJhc2VNYXA7cmV0dXJuIGZ1bmMoY29sbGVjdGlvbixnZXRJdGVyYXRlZShpdGVyYXRlZSwzKSk7fWZ1bmN0aW9uIG9yZGVyQnkoY29sbGVjdGlvbixpdGVyYXRlZXMsb3JkZXJzLGd1YXJkKXtpZihjb2xsZWN0aW9uID09IG51bGwpe3JldHVybiBbXTt9aWYoIWlzQXJyYXkoaXRlcmF0ZWVzKSl7aXRlcmF0ZWVzID0gaXRlcmF0ZWVzID09IG51bGw/W106W2l0ZXJhdGVlc107fW9yZGVycyA9IGd1YXJkP3VuZGVmaW5lZDpvcmRlcnM7aWYoIWlzQXJyYXkob3JkZXJzKSl7b3JkZXJzID0gb3JkZXJzID09IG51bGw/W106W29yZGVyc107fXJldHVybiBiYXNlT3JkZXJCeShjb2xsZWN0aW9uLGl0ZXJhdGVlcyxvcmRlcnMpO312YXIgcGFydGl0aW9uPWNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LHZhbHVlLGtleSl7cmVzdWx0W2tleT8wOjFdLnB1c2godmFsdWUpO30sZnVuY3Rpb24oKXtyZXR1cm4gW1tdLFtdXTt9KTtmdW5jdGlvbiByZWR1Y2UoY29sbGVjdGlvbixpdGVyYXRlZSxhY2N1bXVsYXRvcil7dmFyIGZ1bmM9aXNBcnJheShjb2xsZWN0aW9uKT9hcnJheVJlZHVjZTpiYXNlUmVkdWNlLGluaXRBY2N1bT1hcmd1bWVudHMubGVuZ3RoIDwgMztyZXR1cm4gZnVuYyhjb2xsZWN0aW9uLGdldEl0ZXJhdGVlKGl0ZXJhdGVlLDQpLGFjY3VtdWxhdG9yLGluaXRBY2N1bSxiYXNlRWFjaCk7fWZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGNvbGxlY3Rpb24saXRlcmF0ZWUsYWNjdW11bGF0b3Ipe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlSZWR1Y2VSaWdodDpiYXNlUmVkdWNlLGluaXRBY2N1bT1hcmd1bWVudHMubGVuZ3RoIDwgMztyZXR1cm4gZnVuYyhjb2xsZWN0aW9uLGdldEl0ZXJhdGVlKGl0ZXJhdGVlLDQpLGFjY3VtdWxhdG9yLGluaXRBY2N1bSxiYXNlRWFjaFJpZ2h0KTt9ZnVuY3Rpb24gcmVqZWN0KGNvbGxlY3Rpb24scHJlZGljYXRlKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5RmlsdGVyOmJhc2VGaWx0ZXI7cHJlZGljYXRlID0gZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpO3JldHVybiBmdW5jKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsaW5kZXgsY29sbGVjdGlvbil7cmV0dXJuICFwcmVkaWNhdGUodmFsdWUsaW5kZXgsY29sbGVjdGlvbik7fSk7fWZ1bmN0aW9uIHNhbXBsZShjb2xsZWN0aW9uKXt2YXIgYXJyYXk9aXNBcnJheUxpa2UoY29sbGVjdGlvbik/Y29sbGVjdGlvbjp2YWx1ZXMoY29sbGVjdGlvbiksbGVuZ3RoPWFycmF5Lmxlbmd0aDtyZXR1cm4gbGVuZ3RoID4gMD9hcnJheVtiYXNlUmFuZG9tKDAsbGVuZ3RoIC0gMSldOnVuZGVmaW5lZDt9ZnVuY3Rpb24gc2FtcGxlU2l6ZShjb2xsZWN0aW9uLG4pe3ZhciBpbmRleD0tMSxyZXN1bHQ9dG9BcnJheShjb2xsZWN0aW9uKSxsZW5ndGg9cmVzdWx0Lmxlbmd0aCxsYXN0SW5kZXg9bGVuZ3RoIC0gMTtuID0gYmFzZUNsYW1wKHRvSW50ZWdlcihuKSwwLGxlbmd0aCk7d2hpbGUoKytpbmRleCA8IG4pIHt2YXIgcmFuZD1iYXNlUmFuZG9tKGluZGV4LGxhc3RJbmRleCksdmFsdWU9cmVzdWx0W3JhbmRdO3Jlc3VsdFtyYW5kXSA9IHJlc3VsdFtpbmRleF07cmVzdWx0W2luZGV4XSA9IHZhbHVlO31yZXN1bHQubGVuZ3RoID0gbjtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBzaHVmZmxlKGNvbGxlY3Rpb24pe3JldHVybiBzYW1wbGVTaXplKGNvbGxlY3Rpb24sTUFYX0FSUkFZX0xFTkdUSCk7fWZ1bmN0aW9uIHNpemUoY29sbGVjdGlvbil7aWYoY29sbGVjdGlvbiA9PSBudWxsKXtyZXR1cm4gMDt9aWYoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpe3ZhciByZXN1bHQ9Y29sbGVjdGlvbi5sZW5ndGg7cmV0dXJuIHJlc3VsdCAmJiBpc1N0cmluZyhjb2xsZWN0aW9uKT9zdHJpbmdTaXplKGNvbGxlY3Rpb24pOnJlc3VsdDt9cmV0dXJuIGtleXMoY29sbGVjdGlvbikubGVuZ3RoO31mdW5jdGlvbiBzb21lKGNvbGxlY3Rpb24scHJlZGljYXRlLGd1YXJkKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5U29tZTpiYXNlU29tZTtpZihndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLHByZWRpY2F0ZSxndWFyZCkpe3ByZWRpY2F0ZSA9IHVuZGVmaW5lZDt9cmV0dXJuIGZ1bmMoY29sbGVjdGlvbixnZXRJdGVyYXRlZShwcmVkaWNhdGUsMykpO312YXIgc29ydEJ5PXJlc3QoZnVuY3Rpb24oY29sbGVjdGlvbixpdGVyYXRlZXMpe2lmKGNvbGxlY3Rpb24gPT0gbnVsbCl7cmV0dXJuIFtdO312YXIgbGVuZ3RoPWl0ZXJhdGVlcy5sZW5ndGg7aWYobGVuZ3RoID4gMSAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLGl0ZXJhdGVlc1swXSxpdGVyYXRlZXNbMV0pKXtpdGVyYXRlZXMgPSBbXTt9ZWxzZSBpZihsZW5ndGggPiAyICYmIGlzSXRlcmF0ZWVDYWxsKGl0ZXJhdGVlc1swXSxpdGVyYXRlZXNbMV0saXRlcmF0ZWVzWzJdKSl7aXRlcmF0ZWVzLmxlbmd0aCA9IDE7fXJldHVybiBiYXNlT3JkZXJCeShjb2xsZWN0aW9uLGJhc2VGbGF0dGVuKGl0ZXJhdGVlcyksW10pO30pO3ZhciBub3c9RGF0ZS5ub3c7ZnVuY3Rpb24gYWZ0ZXIobixmdW5jKXtpZih0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9biA9IHRvSW50ZWdlcihuKTtyZXR1cm4gZnVuY3Rpb24oKXtpZigtLW4gPCAxKXtyZXR1cm4gZnVuYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX07fWZ1bmN0aW9uIGFyeShmdW5jLG4sZ3VhcmQpe24gPSBndWFyZD91bmRlZmluZWQ6bjtuID0gZnVuYyAmJiBuID09IG51bGw/ZnVuYy5sZW5ndGg6bjtyZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLEFSWV9GTEFHLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCxuKTt9ZnVuY3Rpb24gYmVmb3JlKG4sZnVuYyl7dmFyIHJlc3VsdDtpZih0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9biA9IHRvSW50ZWdlcihuKTtyZXR1cm4gZnVuY3Rpb24oKXtpZigtLW4gPiAwKXtyZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9aWYobiA8PSAxKXtmdW5jID0gdW5kZWZpbmVkO31yZXR1cm4gcmVzdWx0O307fXZhciBiaW5kPXJlc3QoZnVuY3Rpb24oZnVuYyx0aGlzQXJnLHBhcnRpYWxzKXt2YXIgYml0bWFzaz1CSU5EX0ZMQUc7aWYocGFydGlhbHMubGVuZ3RoKXt2YXIgaG9sZGVycz1yZXBsYWNlSG9sZGVycyhwYXJ0aWFscyxiaW5kLnBsYWNlaG9sZGVyKTtiaXRtYXNrIHw9IFBBUlRJQUxfRkxBRzt9cmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYyxiaXRtYXNrLHRoaXNBcmcscGFydGlhbHMsaG9sZGVycyk7fSk7dmFyIGJpbmRLZXk9cmVzdChmdW5jdGlvbihvYmplY3Qsa2V5LHBhcnRpYWxzKXt2YXIgYml0bWFzaz1CSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHO2lmKHBhcnRpYWxzLmxlbmd0aCl7dmFyIGhvbGRlcnM9cmVwbGFjZUhvbGRlcnMocGFydGlhbHMsYmluZEtleS5wbGFjZWhvbGRlcik7Yml0bWFzayB8PSBQQVJUSUFMX0ZMQUc7fXJldHVybiBjcmVhdGVXcmFwcGVyKGtleSxiaXRtYXNrLG9iamVjdCxwYXJ0aWFscyxob2xkZXJzKTt9KTtmdW5jdGlvbiBjdXJyeShmdW5jLGFyaXR5LGd1YXJkKXthcml0eSA9IGd1YXJkP3VuZGVmaW5lZDphcml0eTt2YXIgcmVzdWx0PWNyZWF0ZVdyYXBwZXIoZnVuYyxDVVJSWV9GTEFHLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsYXJpdHkpO3Jlc3VsdC5wbGFjZWhvbGRlciA9IGN1cnJ5LnBsYWNlaG9sZGVyO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGN1cnJ5UmlnaHQoZnVuYyxhcml0eSxndWFyZCl7YXJpdHkgPSBndWFyZD91bmRlZmluZWQ6YXJpdHk7dmFyIHJlc3VsdD1jcmVhdGVXcmFwcGVyKGZ1bmMsQ1VSUllfUklHSFRfRkxBRyx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLGFyaXR5KTtyZXN1bHQucGxhY2Vob2xkZXIgPSBjdXJyeVJpZ2h0LnBsYWNlaG9sZGVyO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsd2FpdCxvcHRpb25zKXt2YXIgYXJncyxtYXhUaW1lb3V0SWQscmVzdWx0LHN0YW1wLHRoaXNBcmcsdGltZW91dElkLHRyYWlsaW5nQ2FsbCxsYXN0Q2FsbGVkPTAsbGVhZGluZz1mYWxzZSxtYXhXYWl0PWZhbHNlLHRyYWlsaW5nPXRydWU7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO2lmKGlzT2JqZWN0KG9wdGlvbnMpKXtsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7bWF4V2FpdCA9IFwibWF4V2FpdFwiIGluIG9wdGlvbnMgJiYgbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCx3YWl0KTt0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zPyEhb3B0aW9ucy50cmFpbGluZzp0cmFpbGluZzt9ZnVuY3Rpb24gY2FuY2VsKCl7aWYodGltZW91dElkKXtjbGVhclRpbWVvdXQodGltZW91dElkKTt9aWYobWF4VGltZW91dElkKXtjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTt9bGFzdENhbGxlZCA9IDA7YXJncyA9IG1heFRpbWVvdXRJZCA9IHRoaXNBcmcgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7fWZ1bmN0aW9uIGNvbXBsZXRlKGlzQ2FsbGVkLGlkKXtpZihpZCl7Y2xlYXJUaW1lb3V0KGlkKTt9bWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO2lmKGlzQ2FsbGVkKXtsYXN0Q2FsbGVkID0gbm93KCk7cmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLGFyZ3MpO2lmKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCl7YXJncyA9IHRoaXNBcmcgPSB1bmRlZmluZWQ7fX19ZnVuY3Rpb24gZGVsYXllZCgpe3ZhciByZW1haW5pbmc9d2FpdCAtIChub3coKSAtIHN0YW1wKTtpZihyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KXtjb21wbGV0ZSh0cmFpbGluZ0NhbGwsbWF4VGltZW91dElkKTt9ZWxzZSB7dGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLHJlbWFpbmluZyk7fX1mdW5jdGlvbiBmbHVzaCgpe2lmKHRpbWVvdXRJZCAmJiB0cmFpbGluZ0NhbGwgfHwgbWF4VGltZW91dElkICYmIHRyYWlsaW5nKXtyZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsYXJncyk7fWNhbmNlbCgpO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIG1heERlbGF5ZWQoKXtjb21wbGV0ZSh0cmFpbGluZyx0aW1lb3V0SWQpO31mdW5jdGlvbiBkZWJvdW5jZWQoKXthcmdzID0gYXJndW1lbnRzO3N0YW1wID0gbm93KCk7dGhpc0FyZyA9IHRoaXM7dHJhaWxpbmdDYWxsID0gdHJhaWxpbmcgJiYgKHRpbWVvdXRJZCB8fCAhbGVhZGluZyk7aWYobWF4V2FpdCA9PT0gZmFsc2Upe3ZhciBsZWFkaW5nQ2FsbD1sZWFkaW5nICYmICF0aW1lb3V0SWQ7fWVsc2Uge2lmKCFtYXhUaW1lb3V0SWQgJiYgIWxlYWRpbmcpe2xhc3RDYWxsZWQgPSBzdGFtcDt9dmFyIHJlbWFpbmluZz1tYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksaXNDYWxsZWQ9cmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gbWF4V2FpdDtpZihpc0NhbGxlZCl7aWYobWF4VGltZW91dElkKXttYXhUaW1lb3V0SWQgPSBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTt9bGFzdENhbGxlZCA9IHN0YW1wO3Jlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZyxhcmdzKTt9ZWxzZSBpZighbWF4VGltZW91dElkKXttYXhUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KG1heERlbGF5ZWQscmVtYWluaW5nKTt9fWlmKGlzQ2FsbGVkICYmIHRpbWVvdXRJZCl7dGltZW91dElkID0gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7fWVsc2UgaWYoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KXt0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsd2FpdCk7fWlmKGxlYWRpbmdDYWxsKXtpc0NhbGxlZCA9IHRydWU7cmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLGFyZ3MpO31pZihpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpe2FyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO31yZXR1cm4gcmVzdWx0O31kZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO2RlYm91bmNlZC5mbHVzaCA9IGZsdXNoO3JldHVybiBkZWJvdW5jZWQ7fXZhciBkZWZlcj1yZXN0KGZ1bmN0aW9uKGZ1bmMsYXJncyl7cmV0dXJuIGJhc2VEZWxheShmdW5jLDEsYXJncyk7fSk7dmFyIGRlbGF5PXJlc3QoZnVuY3Rpb24oZnVuYyx3YWl0LGFyZ3Mpe3JldHVybiBiYXNlRGVsYXkoZnVuYyx0b051bWJlcih3YWl0KSB8fCAwLGFyZ3MpO30pO2Z1bmN0aW9uIGZsaXAoZnVuYyl7cmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYyxGTElQX0ZMQUcpO31mdW5jdGlvbiBtZW1vaXplKGZ1bmMscmVzb2x2ZXIpe2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIiB8fCByZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXZhciBtZW1vaXplZD1mdW5jdGlvbiBtZW1vaXplZCgpe3ZhciBhcmdzPWFyZ3VtZW50cyxrZXk9cmVzb2x2ZXI/cmVzb2x2ZXIuYXBwbHkodGhpcyxhcmdzKTphcmdzWzBdLGNhY2hlPW1lbW9pemVkLmNhY2hlO2lmKGNhY2hlLmhhcyhrZXkpKXtyZXR1cm4gY2FjaGUuZ2V0KGtleSk7fXZhciByZXN1bHQ9ZnVuYy5hcHBseSh0aGlzLGFyZ3MpO21lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSxyZXN1bHQpO3JldHVybiByZXN1bHQ7fTttZW1vaXplZC5jYWNoZSA9IG5ldyBtZW1vaXplLkNhY2hlKCk7cmV0dXJuIG1lbW9pemVkO31mdW5jdGlvbiBuZWdhdGUocHJlZGljYXRlKXtpZih0eXBlb2YgcHJlZGljYXRlICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTt9ZnVuY3Rpb24gb25jZShmdW5jKXtyZXR1cm4gYmVmb3JlKDIsZnVuYyk7fXZhciBvdmVyQXJncz1yZXN0KGZ1bmN0aW9uKGZ1bmMsdHJhbnNmb3Jtcyl7dHJhbnNmb3JtcyA9IGFycmF5TWFwKGJhc2VGbGF0dGVuKHRyYW5zZm9ybXMpLGdldEl0ZXJhdGVlKCkpO3ZhciBmdW5jc0xlbmd0aD10cmFuc2Zvcm1zLmxlbmd0aDtyZXR1cm4gcmVzdChmdW5jdGlvbihhcmdzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPW5hdGl2ZU1pbihhcmdzLmxlbmd0aCxmdW5jc0xlbmd0aCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2FyZ3NbaW5kZXhdID0gdHJhbnNmb3Jtc1tpbmRleF0uY2FsbCh0aGlzLGFyZ3NbaW5kZXhdKTt9cmV0dXJuIGFwcGx5KGZ1bmMsdGhpcyxhcmdzKTt9KTt9KTt2YXIgcGFydGlhbD1yZXN0KGZ1bmN0aW9uKGZ1bmMscGFydGlhbHMpe3ZhciBob2xkZXJzPXJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLHBhcnRpYWwucGxhY2Vob2xkZXIpO3JldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsUEFSVElBTF9GTEFHLHVuZGVmaW5lZCxwYXJ0aWFscyxob2xkZXJzKTt9KTt2YXIgcGFydGlhbFJpZ2h0PXJlc3QoZnVuY3Rpb24oZnVuYyxwYXJ0aWFscyl7dmFyIGhvbGRlcnM9cmVwbGFjZUhvbGRlcnMocGFydGlhbHMscGFydGlhbFJpZ2h0LnBsYWNlaG9sZGVyKTtyZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLFBBUlRJQUxfUklHSFRfRkxBRyx1bmRlZmluZWQscGFydGlhbHMsaG9sZGVycyk7fSk7dmFyIHJlYXJnPXJlc3QoZnVuY3Rpb24oZnVuYyxpbmRleGVzKXtyZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLFJFQVJHX0ZMQUcsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsYmFzZUZsYXR0ZW4oaW5kZXhlcykpO30pO2Z1bmN0aW9uIHJlc3QoZnVuYyxzdGFydCl7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQ/ZnVuYy5sZW5ndGggLSAxOnRvSW50ZWdlcihzdGFydCksMCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzLGluZGV4PS0xLGxlbmd0aD1uYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwwKSxhcnJheT1BcnJheShsZW5ndGgpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHthcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO31zd2l0Y2goc3RhcnQpe2Nhc2UgMDpyZXR1cm4gZnVuYy5jYWxsKHRoaXMsYXJyYXkpO2Nhc2UgMTpyZXR1cm4gZnVuYy5jYWxsKHRoaXMsYXJnc1swXSxhcnJheSk7Y2FzZSAyOnJldHVybiBmdW5jLmNhbGwodGhpcyxhcmdzWzBdLGFyZ3NbMV0sYXJyYXkpO312YXIgb3RoZXJBcmdzPUFycmF5KHN0YXJ0ICsgMSk7aW5kZXggPSAtMTt3aGlsZSgrK2luZGV4IDwgc3RhcnQpIHtvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07fW90aGVyQXJnc1tzdGFydF0gPSBhcnJheTtyZXR1cm4gYXBwbHkoZnVuYyx0aGlzLG90aGVyQXJncyk7fTt9ZnVuY3Rpb24gc3ByZWFkKGZ1bmMsc3RhcnQpe2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31zdGFydCA9IHN0YXJ0ID09PSB1bmRlZmluZWQ/MDpuYXRpdmVNYXgodG9JbnRlZ2VyKHN0YXJ0KSwwKTtyZXR1cm4gcmVzdChmdW5jdGlvbihhcmdzKXt2YXIgYXJyYXk9YXJnc1tzdGFydF0sb3RoZXJBcmdzPWFyZ3Muc2xpY2UoMCxzdGFydCk7aWYoYXJyYXkpe2FycmF5UHVzaChvdGhlckFyZ3MsYXJyYXkpO31yZXR1cm4gYXBwbHkoZnVuYyx0aGlzLG90aGVyQXJncyk7fSk7fWZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsd2FpdCxvcHRpb25zKXt2YXIgbGVhZGluZz10cnVlLHRyYWlsaW5nPXRydWU7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fWlmKGlzT2JqZWN0KG9wdGlvbnMpKXtsZWFkaW5nID0gXCJsZWFkaW5nXCIgaW4gb3B0aW9ucz8hIW9wdGlvbnMubGVhZGluZzpsZWFkaW5nO3RyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnM/ISFvcHRpb25zLnRyYWlsaW5nOnRyYWlsaW5nO31yZXR1cm4gZGVib3VuY2UoZnVuYyx3YWl0LHtsZWFkaW5nOmxlYWRpbmcsbWF4V2FpdDp3YWl0LHRyYWlsaW5nOnRyYWlsaW5nfSk7fWZ1bmN0aW9uIHVuYXJ5KGZ1bmMpe3JldHVybiBhcnkoZnVuYywxKTt9ZnVuY3Rpb24gd3JhcCh2YWx1ZSx3cmFwcGVyKXt3cmFwcGVyID0gd3JhcHBlciA9PSBudWxsP2lkZW50aXR5OndyYXBwZXI7cmV0dXJuIHBhcnRpYWwod3JhcHBlcix2YWx1ZSk7fWZ1bmN0aW9uIGNsb25lKHZhbHVlKXtyZXR1cm4gYmFzZUNsb25lKHZhbHVlKTt9ZnVuY3Rpb24gY2xvbmVXaXRoKHZhbHVlLGN1c3RvbWl6ZXIpe3JldHVybiBiYXNlQ2xvbmUodmFsdWUsZmFsc2UsY3VzdG9taXplcik7fWZ1bmN0aW9uIGNsb25lRGVlcCh2YWx1ZSl7cmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSx0cnVlKTt9ZnVuY3Rpb24gY2xvbmVEZWVwV2l0aCh2YWx1ZSxjdXN0b21pemVyKXtyZXR1cm4gYmFzZUNsb25lKHZhbHVlLHRydWUsY3VzdG9taXplcik7fWZ1bmN0aW9uIGVxKHZhbHVlLG90aGVyKXtyZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8IHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7fWZ1bmN0aW9uIGd0KHZhbHVlLG90aGVyKXtyZXR1cm4gdmFsdWUgPiBvdGhlcjt9ZnVuY3Rpb24gZ3RlKHZhbHVlLG90aGVyKXtyZXR1cm4gdmFsdWUgPj0gb3RoZXI7fWZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKXtyZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsXCJjYWxsZWVcIikgJiYgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLFwiY2FsbGVlXCIpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO312YXIgaXNBcnJheT1BcnJheS5pc0FycmF5O2Z1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKXtyZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAhKHR5cGVvZiB2YWx1ZSA9PSBcImZ1bmN0aW9uXCIgJiYgaXNGdW5jdGlvbih2YWx1ZSkpICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO31mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO31mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpe3JldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBib29sVGFnO31mdW5jdGlvbiBpc0RhdGUodmFsdWUpe3JldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGRhdGVUYWc7fWZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZSl7cmV0dXJuICEhdmFsdWUgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAhaXNQbGFpbk9iamVjdCh2YWx1ZSk7fWZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpe2lmKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNTdHJpbmcodmFsdWUpIHx8IGlzRnVuY3Rpb24odmFsdWUuc3BsaWNlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpKXtyZXR1cm4gIXZhbHVlLmxlbmd0aDt9Zm9yKHZhciBrZXkgaW4gdmFsdWUpIHtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLGtleSkpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO31mdW5jdGlvbiBpc0VxdWFsKHZhbHVlLG90aGVyKXtyZXR1cm4gYmFzZUlzRXF1YWwodmFsdWUsb3RoZXIpO31mdW5jdGlvbiBpc0VxdWFsV2l0aCh2YWx1ZSxvdGhlcixjdXN0b21pemVyKXtjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gXCJmdW5jdGlvblwiP2N1c3RvbWl6ZXI6dW5kZWZpbmVkO3ZhciByZXN1bHQ9Y3VzdG9taXplcj9jdXN0b21pemVyKHZhbHVlLG90aGVyKTp1bmRlZmluZWQ7cmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkP2Jhc2VJc0VxdWFsKHZhbHVlLG90aGVyLGN1c3RvbWl6ZXIpOiEhcmVzdWx0O31mdW5jdGlvbiBpc0Vycm9yKHZhbHVlKXtyZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUubWVzc2FnZSA9PSBcInN0cmluZ1wiICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGVycm9yVGFnO31mdW5jdGlvbiBpc0Zpbml0ZSh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiICYmIG5hdGl2ZUlzRmluaXRlKHZhbHVlKTt9ZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSl7dmFyIHRhZz1pc09iamVjdCh2YWx1ZSk/b2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk6XCJcIjtyZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZzt9ZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgJiYgdmFsdWUgPT0gdG9JbnRlZ2VyKHZhbHVlKTt9ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7fWZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKXt2YXIgdHlwZT10eXBlb2YgdmFsdWU7cmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gXCJvYmplY3RcIiB8fCB0eXBlID09IFwiZnVuY3Rpb25cIik7fWZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSl7cmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCI7fWZ1bmN0aW9uIGlzTWF0Y2gob2JqZWN0LHNvdXJjZSl7cmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCxzb3VyY2UsZ2V0TWF0Y2hEYXRhKHNvdXJjZSkpO31mdW5jdGlvbiBpc01hdGNoV2l0aChvYmplY3Qsc291cmNlLGN1c3RvbWl6ZXIpe2N1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSBcImZ1bmN0aW9uXCI/Y3VzdG9taXplcjp1bmRlZmluZWQ7cmV0dXJuIGJhc2VJc01hdGNoKG9iamVjdCxzb3VyY2UsZ2V0TWF0Y2hEYXRhKHNvdXJjZSksY3VzdG9taXplcik7fWZ1bmN0aW9uIGlzTmFOKHZhbHVlKXtyZXR1cm4gaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICE9ICt2YWx1ZTt9ZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpe2lmKHZhbHVlID09IG51bGwpe3JldHVybiBmYWxzZTt9aWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiByZUlzTmF0aXZlLnRlc3QoZnVuY1RvU3RyaW5nLmNhbGwodmFsdWUpKTt9cmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgKGlzSG9zdE9iamVjdCh2YWx1ZSk/cmVJc05hdGl2ZTpyZUlzSG9zdEN0b3IpLnRlc3QodmFsdWUpO31mdW5jdGlvbiBpc051bGwodmFsdWUpe3JldHVybiB2YWx1ZSA9PT0gbnVsbDt9ZnVuY3Rpb24gaXNOaWwodmFsdWUpe3JldHVybiB2YWx1ZSA9PSBudWxsO31mdW5jdGlvbiBpc051bWJlcih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gbnVtYmVyVGFnO31mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKXtpZighaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSAhPSBvYmplY3RUYWcgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSl7cmV0dXJuIGZhbHNlO312YXIgcHJvdG89b2JqZWN0UHJvdG87aWYodHlwZW9mIHZhbHVlLmNvbnN0cnVjdG9yID09IFwiZnVuY3Rpb25cIil7cHJvdG8gPSBnZXRQcm90b3R5cGVPZih2YWx1ZSk7fWlmKHByb3RvID09PSBudWxsKXtyZXR1cm4gdHJ1ZTt9dmFyIEN0b3I9cHJvdG8uY29uc3RydWN0b3I7cmV0dXJuIHR5cGVvZiBDdG9yID09IFwiZnVuY3Rpb25cIiAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJiBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO31mdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSByZWdleHBUYWc7fWZ1bmN0aW9uIGlzU2FmZUludGVnZXIodmFsdWUpe3JldHVybiBpc0ludGVnZXIodmFsdWUpICYmIHZhbHVlID49IC1NQVhfU0FGRV9JTlRFR0VSICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7fWZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgfHwgIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnO31mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcInN5bWJvbFwiIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO31mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpe3JldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07fWZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKXtyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDt9ZnVuY3Rpb24gbHQodmFsdWUsb3RoZXIpe3JldHVybiB2YWx1ZSA8IG90aGVyO31mdW5jdGlvbiBsdGUodmFsdWUsb3RoZXIpe3JldHVybiB2YWx1ZSA8PSBvdGhlcjt9ZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSl7aWYoIXZhbHVlKXtyZXR1cm4gW107fWlmKGlzQXJyYXlMaWtlKHZhbHVlKSl7cmV0dXJuIGlzU3RyaW5nKHZhbHVlKT9zdHJpbmdUb0FycmF5KHZhbHVlKTpjb3B5QXJyYXkodmFsdWUpO31pZihpdGVyYXRvclN5bWJvbCAmJiB2YWx1ZVtpdGVyYXRvclN5bWJvbF0pe3JldHVybiBpdGVyYXRvclRvQXJyYXkodmFsdWVbaXRlcmF0b3JTeW1ib2xdKCkpO312YXIgdGFnPWdldFRhZyh2YWx1ZSksZnVuYz10YWcgPT0gbWFwVGFnP21hcFRvQXJyYXk6dGFnID09IHNldFRhZz9zZXRUb0FycmF5OnZhbHVlcztyZXR1cm4gZnVuYyh2YWx1ZSk7fWZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSl7aWYoIXZhbHVlKXtyZXR1cm4gdmFsdWUgPT09IDA/dmFsdWU6MDt9dmFsdWUgPSB0b051bWJlcih2YWx1ZSk7aWYodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpe3ZhciBzaWduPXZhbHVlIDwgMD8tMToxO3JldHVybiBzaWduICogTUFYX0lOVEVHRVI7fXZhciByZW1haW5kZXI9dmFsdWUgJSAxO3JldHVybiB2YWx1ZSA9PT0gdmFsdWU/cmVtYWluZGVyP3ZhbHVlIC0gcmVtYWluZGVyOnZhbHVlOjA7fWZ1bmN0aW9uIHRvTGVuZ3RoKHZhbHVlKXtyZXR1cm4gdmFsdWU/YmFzZUNsYW1wKHRvSW50ZWdlcih2YWx1ZSksMCxNQVhfQVJSQVlfTEVOR1RIKTowO31mdW5jdGlvbiB0b051bWJlcih2YWx1ZSl7aWYoaXNPYmplY3QodmFsdWUpKXt2YXIgb3RoZXI9aXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKT92YWx1ZS52YWx1ZU9mKCk6dmFsdWU7dmFsdWUgPSBpc09iamVjdChvdGhlcik/b3RoZXIgKyBcIlwiOm90aGVyO31pZih0eXBlb2YgdmFsdWUgIT0gXCJzdHJpbmdcIil7cmV0dXJuIHZhbHVlID09PSAwP3ZhbHVlOit2YWx1ZTt9dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSxcIlwiKTt2YXIgaXNCaW5hcnk9cmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtyZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpP2ZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSxpc0JpbmFyeT8yOjgpOnJlSXNCYWRIZXgudGVzdCh2YWx1ZSk/TkFOOit2YWx1ZTt9ZnVuY3Rpb24gdG9QbGFpbk9iamVjdCh2YWx1ZSl7cmV0dXJuIGNvcHlPYmplY3QodmFsdWUsa2V5c0luKHZhbHVlKSk7fWZ1bmN0aW9uIHRvU2FmZUludGVnZXIodmFsdWUpe3JldHVybiBiYXNlQ2xhbXAodG9JbnRlZ2VyKHZhbHVlKSwtTUFYX1NBRkVfSU5URUdFUixNQVhfU0FGRV9JTlRFR0VSKTt9ZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpe2lmKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKXtyZXR1cm4gdmFsdWU7fWlmKHZhbHVlID09IG51bGwpe3JldHVybiBcIlwiO31pZihpc1N5bWJvbCh2YWx1ZSkpe3JldHVybiBTeW1ib2w/c3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSk6XCJcIjt9dmFyIHJlc3VsdD12YWx1ZSArIFwiXCI7cmV0dXJuIHJlc3VsdCA9PSBcIjBcIiAmJiAxIC8gdmFsdWUgPT0gLUlORklOSVRZP1wiLTBcIjpyZXN1bHQ7fXZhciBhc3NpZ249Y3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LHNvdXJjZSl7Y29weU9iamVjdChzb3VyY2Usa2V5cyhzb3VyY2UpLG9iamVjdCk7fSk7dmFyIGFzc2lnbkluPWNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCxzb3VyY2Upe2NvcHlPYmplY3Qoc291cmNlLGtleXNJbihzb3VyY2UpLG9iamVjdCk7fSk7dmFyIGFzc2lnbkluV2l0aD1jcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3Qsc291cmNlLHNyY0luZGV4LGN1c3RvbWl6ZXIpe2NvcHlPYmplY3RXaXRoKHNvdXJjZSxrZXlzSW4oc291cmNlKSxvYmplY3QsY3VzdG9taXplcik7fSk7dmFyIGFzc2lnbldpdGg9Y3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LHNvdXJjZSxzcmNJbmRleCxjdXN0b21pemVyKXtjb3B5T2JqZWN0V2l0aChzb3VyY2Usa2V5cyhzb3VyY2UpLG9iamVjdCxjdXN0b21pemVyKTt9KTt2YXIgYXQ9cmVzdChmdW5jdGlvbihvYmplY3QscGF0aHMpe3JldHVybiBiYXNlQXQob2JqZWN0LGJhc2VGbGF0dGVuKHBhdGhzKSk7fSk7ZnVuY3Rpb24gY3JlYXRlKHByb3RvdHlwZSxwcm9wZXJ0aWVzKXt2YXIgcmVzdWx0PWJhc2VDcmVhdGUocHJvdG90eXBlKTtyZXR1cm4gcHJvcGVydGllcz9iYXNlQXNzaWduKHJlc3VsdCxwcm9wZXJ0aWVzKTpyZXN1bHQ7fXZhciBkZWZhdWx0cz1yZXN0KGZ1bmN0aW9uKGFyZ3Mpe2FyZ3MucHVzaCh1bmRlZmluZWQsYXNzaWduSW5EZWZhdWx0cyk7cmV0dXJuIGFwcGx5KGFzc2lnbkluV2l0aCx1bmRlZmluZWQsYXJncyk7fSk7dmFyIGRlZmF1bHRzRGVlcD1yZXN0KGZ1bmN0aW9uKGFyZ3Mpe2FyZ3MucHVzaCh1bmRlZmluZWQsbWVyZ2VEZWZhdWx0cyk7cmV0dXJuIGFwcGx5KG1lcmdlV2l0aCx1bmRlZmluZWQsYXJncyk7fSk7ZnVuY3Rpb24gZmluZEtleShvYmplY3QscHJlZGljYXRlKXtyZXR1cm4gYmFzZUZpbmQob2JqZWN0LGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSxiYXNlRm9yT3duLHRydWUpO31mdW5jdGlvbiBmaW5kTGFzdEtleShvYmplY3QscHJlZGljYXRlKXtyZXR1cm4gYmFzZUZpbmQob2JqZWN0LGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSxiYXNlRm9yT3duUmlnaHQsdHJ1ZSk7fWZ1bmN0aW9uIGZvckluKG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCA9PSBudWxsP29iamVjdDpiYXNlRm9yKG9iamVjdCx0b0Z1bmN0aW9uKGl0ZXJhdGVlKSxrZXlzSW4pO31mdW5jdGlvbiBmb3JJblJpZ2h0KG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCA9PSBudWxsP29iamVjdDpiYXNlRm9yUmlnaHQob2JqZWN0LHRvRnVuY3Rpb24oaXRlcmF0ZWUpLGtleXNJbik7fWZ1bmN0aW9uIGZvck93bihvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBvYmplY3QgJiYgYmFzZUZvck93bihvYmplY3QsdG9GdW5jdGlvbihpdGVyYXRlZSkpO31mdW5jdGlvbiBmb3JPd25SaWdodChvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBvYmplY3QgJiYgYmFzZUZvck93blJpZ2h0KG9iamVjdCx0b0Z1bmN0aW9uKGl0ZXJhdGVlKSk7fWZ1bmN0aW9uIGZ1bmN0aW9ucyhvYmplY3Qpe3JldHVybiBvYmplY3QgPT0gbnVsbD9bXTpiYXNlRnVuY3Rpb25zKG9iamVjdCxrZXlzKG9iamVjdCkpO31mdW5jdGlvbiBmdW5jdGlvbnNJbihvYmplY3Qpe3JldHVybiBvYmplY3QgPT0gbnVsbD9bXTpiYXNlRnVuY3Rpb25zKG9iamVjdCxrZXlzSW4ob2JqZWN0KSk7fWZ1bmN0aW9uIGdldChvYmplY3QscGF0aCxkZWZhdWx0VmFsdWUpe3ZhciByZXN1bHQ9b2JqZWN0ID09IG51bGw/dW5kZWZpbmVkOmJhc2VHZXQob2JqZWN0LHBhdGgpO3JldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZD9kZWZhdWx0VmFsdWU6cmVzdWx0O31mdW5jdGlvbiBoYXMob2JqZWN0LHBhdGgpe3JldHVybiBoYXNQYXRoKG9iamVjdCxwYXRoLGJhc2VIYXMpO31mdW5jdGlvbiBoYXNJbihvYmplY3QscGF0aCl7cmV0dXJuIGhhc1BhdGgob2JqZWN0LHBhdGgsYmFzZUhhc0luKTt9dmFyIGludmVydD1jcmVhdGVJbnZlcnRlcihmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtyZXN1bHRbdmFsdWVdID0ga2V5O30sY29uc3RhbnQoaWRlbnRpdHkpKTt2YXIgaW52ZXJ0Qnk9Y3JlYXRlSW52ZXJ0ZXIoZnVuY3Rpb24ocmVzdWx0LHZhbHVlLGtleSl7aWYoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsdmFsdWUpKXtyZXN1bHRbdmFsdWVdLnB1c2goa2V5KTt9ZWxzZSB7cmVzdWx0W3ZhbHVlXSA9IFtrZXldO319LGdldEl0ZXJhdGVlKTt2YXIgaW52b2tlPXJlc3QoYmFzZUludm9rZSk7ZnVuY3Rpb24ga2V5cyhvYmplY3Qpe3ZhciBpc1Byb3RvPWlzUHJvdG90eXBlKG9iamVjdCk7aWYoIShpc1Byb3RvIHx8IGlzQXJyYXlMaWtlKG9iamVjdCkpKXtyZXR1cm4gYmFzZUtleXMob2JqZWN0KTt9dmFyIGluZGV4ZXM9aW5kZXhLZXlzKG9iamVjdCksc2tpcEluZGV4ZXM9ISFpbmRleGVzLHJlc3VsdD1pbmRleGVzIHx8IFtdLGxlbmd0aD1yZXN1bHQubGVuZ3RoO2Zvcih2YXIga2V5IGluIG9iamVjdCkge2lmKGJhc2VIYXMob2JqZWN0LGtleSkgJiYgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09IFwibGVuZ3RoXCIgfHwgaXNJbmRleChrZXksbGVuZ3RoKSkpICYmICEoaXNQcm90byAmJiBrZXkgPT0gXCJjb25zdHJ1Y3RvclwiKSl7cmVzdWx0LnB1c2goa2V5KTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGtleXNJbihvYmplY3Qpe3ZhciBpbmRleD0tMSxpc1Byb3RvPWlzUHJvdG90eXBlKG9iamVjdCkscHJvcHM9YmFzZUtleXNJbihvYmplY3QpLHByb3BzTGVuZ3RoPXByb3BzLmxlbmd0aCxpbmRleGVzPWluZGV4S2V5cyhvYmplY3QpLHNraXBJbmRleGVzPSEhaW5kZXhlcyxyZXN1bHQ9aW5kZXhlcyB8fCBbXSxsZW5ndGg9cmVzdWx0Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgcHJvcHNMZW5ndGgpIHt2YXIga2V5PXByb3BzW2luZGV4XTtpZighKHNraXBJbmRleGVzICYmIChrZXkgPT0gXCJsZW5ndGhcIiB8fCBpc0luZGV4KGtleSxsZW5ndGgpKSkgJiYgIShrZXkgPT0gXCJjb25zdHJ1Y3RvclwiICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxrZXkpKSkpe3Jlc3VsdC5wdXNoKGtleSk7fX1yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBtYXBLZXlzKG9iamVjdCxpdGVyYXRlZSl7dmFyIHJlc3VsdD17fTtpdGVyYXRlZSA9IGdldEl0ZXJhdGVlKGl0ZXJhdGVlLDMpO2Jhc2VGb3JPd24ob2JqZWN0LGZ1bmN0aW9uKHZhbHVlLGtleSxvYmplY3Qpe3Jlc3VsdFtpdGVyYXRlZSh2YWx1ZSxrZXksb2JqZWN0KV0gPSB2YWx1ZTt9KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBtYXBWYWx1ZXMob2JqZWN0LGl0ZXJhdGVlKXt2YXIgcmVzdWx0PXt9O2l0ZXJhdGVlID0gZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsMyk7YmFzZUZvck93bihvYmplY3QsZnVuY3Rpb24odmFsdWUsa2V5LG9iamVjdCl7cmVzdWx0W2tleV0gPSBpdGVyYXRlZSh2YWx1ZSxrZXksb2JqZWN0KTt9KTtyZXR1cm4gcmVzdWx0O312YXIgbWVyZ2U9Y3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LHNvdXJjZSxzcmNJbmRleCl7YmFzZU1lcmdlKG9iamVjdCxzb3VyY2Usc3JjSW5kZXgpO30pO3ZhciBtZXJnZVdpdGg9Y3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LHNvdXJjZSxzcmNJbmRleCxjdXN0b21pemVyKXtiYXNlTWVyZ2Uob2JqZWN0LHNvdXJjZSxzcmNJbmRleCxjdXN0b21pemVyKTt9KTt2YXIgb21pdD1yZXN0KGZ1bmN0aW9uKG9iamVjdCxwcm9wcyl7aWYob2JqZWN0ID09IG51bGwpe3JldHVybiB7fTt9cHJvcHMgPSBhcnJheU1hcChiYXNlRmxhdHRlbihwcm9wcyksU3RyaW5nKTtyZXR1cm4gYmFzZVBpY2sob2JqZWN0LGJhc2VEaWZmZXJlbmNlKGtleXNJbihvYmplY3QpLHByb3BzKSk7fSk7ZnVuY3Rpb24gb21pdEJ5KG9iamVjdCxwcmVkaWNhdGUpe3ByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwyKTtyZXR1cm4gYmFzZVBpY2tCeShvYmplY3QsZnVuY3Rpb24odmFsdWUsa2V5KXtyZXR1cm4gIXByZWRpY2F0ZSh2YWx1ZSxrZXkpO30pO312YXIgcGljaz1yZXN0KGZ1bmN0aW9uKG9iamVjdCxwcm9wcyl7cmV0dXJuIG9iamVjdCA9PSBudWxsP3t9OmJhc2VQaWNrKG9iamVjdCxiYXNlRmxhdHRlbihwcm9wcykpO30pO2Z1bmN0aW9uIHBpY2tCeShvYmplY3QscHJlZGljYXRlKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/e306YmFzZVBpY2tCeShvYmplY3QsZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDIpKTt9ZnVuY3Rpb24gcmVzdWx0KG9iamVjdCxwYXRoLGRlZmF1bHRWYWx1ZSl7aWYoIWlzS2V5KHBhdGgsb2JqZWN0KSl7cGF0aCA9IGJhc2VUb1BhdGgocGF0aCk7dmFyIHJlc3VsdD1nZXQob2JqZWN0LHBhdGgpO29iamVjdCA9IHBhcmVudChvYmplY3QscGF0aCk7fWVsc2Uge3Jlc3VsdCA9IG9iamVjdCA9PSBudWxsP3VuZGVmaW5lZDpvYmplY3RbcGF0aF07fWlmKHJlc3VsdCA9PT0gdW5kZWZpbmVkKXtyZXN1bHQgPSBkZWZhdWx0VmFsdWU7fXJldHVybiBpc0Z1bmN0aW9uKHJlc3VsdCk/cmVzdWx0LmNhbGwob2JqZWN0KTpyZXN1bHQ7fWZ1bmN0aW9uIHNldChvYmplY3QscGF0aCx2YWx1ZSl7cmV0dXJuIG9iamVjdCA9PSBudWxsP29iamVjdDpiYXNlU2V0KG9iamVjdCxwYXRoLHZhbHVlKTt9ZnVuY3Rpb24gc2V0V2l0aChvYmplY3QscGF0aCx2YWx1ZSxjdXN0b21pemVyKXtjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gXCJmdW5jdGlvblwiP2N1c3RvbWl6ZXI6dW5kZWZpbmVkO3JldHVybiBvYmplY3QgPT0gbnVsbD9vYmplY3Q6YmFzZVNldChvYmplY3QscGF0aCx2YWx1ZSxjdXN0b21pemVyKTt9ZnVuY3Rpb24gdG9QYWlycyhvYmplY3Qpe3JldHVybiBiYXNlVG9QYWlycyhvYmplY3Qsa2V5cyhvYmplY3QpKTt9ZnVuY3Rpb24gdG9QYWlyc0luKG9iamVjdCl7cmV0dXJuIGJhc2VUb1BhaXJzKG9iamVjdCxrZXlzSW4ob2JqZWN0KSk7fWZ1bmN0aW9uIHRyYW5zZm9ybShvYmplY3QsaXRlcmF0ZWUsYWNjdW11bGF0b3Ipe3ZhciBpc0Fycj1pc0FycmF5KG9iamVjdCkgfHwgaXNUeXBlZEFycmF5KG9iamVjdCk7aXRlcmF0ZWUgPSBnZXRJdGVyYXRlZShpdGVyYXRlZSw0KTtpZihhY2N1bXVsYXRvciA9PSBudWxsKXtpZihpc0FyciB8fCBpc09iamVjdChvYmplY3QpKXt2YXIgQ3Rvcj1vYmplY3QuY29uc3RydWN0b3I7aWYoaXNBcnIpe2FjY3VtdWxhdG9yID0gaXNBcnJheShvYmplY3QpP25ldyBDdG9yKCk6W107fWVsc2Uge2FjY3VtdWxhdG9yID0gYmFzZUNyZWF0ZShpc0Z1bmN0aW9uKEN0b3IpP0N0b3IucHJvdG90eXBlOnVuZGVmaW5lZCk7fX1lbHNlIHthY2N1bXVsYXRvciA9IHt9O319KGlzQXJyP2FycmF5RWFjaDpiYXNlRm9yT3duKShvYmplY3QsZnVuY3Rpb24odmFsdWUsaW5kZXgsb2JqZWN0KXtyZXR1cm4gaXRlcmF0ZWUoYWNjdW11bGF0b3IsdmFsdWUsaW5kZXgsb2JqZWN0KTt9KTtyZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIHVuc2V0KG9iamVjdCxwYXRoKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/dHJ1ZTpiYXNlVW5zZXQob2JqZWN0LHBhdGgpO31mdW5jdGlvbiB2YWx1ZXMob2JqZWN0KXtyZXR1cm4gb2JqZWN0P2Jhc2VWYWx1ZXMob2JqZWN0LGtleXMob2JqZWN0KSk6W107fWZ1bmN0aW9uIHZhbHVlc0luKG9iamVjdCl7cmV0dXJuIG9iamVjdCA9PSBudWxsP2Jhc2VWYWx1ZXMob2JqZWN0LGtleXNJbihvYmplY3QpKTpbXTt9ZnVuY3Rpb24gY2xhbXAobnVtYmVyLGxvd2VyLHVwcGVyKXtpZih1cHBlciA9PT0gdW5kZWZpbmVkKXt1cHBlciA9IGxvd2VyO2xvd2VyID0gdW5kZWZpbmVkO31pZih1cHBlciAhPT0gdW5kZWZpbmVkKXt1cHBlciA9IHRvTnVtYmVyKHVwcGVyKTt1cHBlciA9IHVwcGVyID09PSB1cHBlcj91cHBlcjowO31pZihsb3dlciAhPT0gdW5kZWZpbmVkKXtsb3dlciA9IHRvTnVtYmVyKGxvd2VyKTtsb3dlciA9IGxvd2VyID09PSBsb3dlcj9sb3dlcjowO31yZXR1cm4gYmFzZUNsYW1wKHRvTnVtYmVyKG51bWJlciksbG93ZXIsdXBwZXIpO31mdW5jdGlvbiBpblJhbmdlKG51bWJlcixzdGFydCxlbmQpe3N0YXJ0ID0gdG9OdW1iZXIoc3RhcnQpIHx8IDA7aWYoZW5kID09PSB1bmRlZmluZWQpe2VuZCA9IHN0YXJ0O3N0YXJ0ID0gMDt9ZWxzZSB7ZW5kID0gdG9OdW1iZXIoZW5kKSB8fCAwO31udW1iZXIgPSB0b051bWJlcihudW1iZXIpO3JldHVybiBiYXNlSW5SYW5nZShudW1iZXIsc3RhcnQsZW5kKTt9ZnVuY3Rpb24gcmFuZG9tKGxvd2VyLHVwcGVyLGZsb2F0aW5nKXtpZihmbG9hdGluZyAmJiB0eXBlb2YgZmxvYXRpbmcgIT0gXCJib29sZWFuXCIgJiYgaXNJdGVyYXRlZUNhbGwobG93ZXIsdXBwZXIsZmxvYXRpbmcpKXt1cHBlciA9IGZsb2F0aW5nID0gdW5kZWZpbmVkO31pZihmbG9hdGluZyA9PT0gdW5kZWZpbmVkKXtpZih0eXBlb2YgdXBwZXIgPT0gXCJib29sZWFuXCIpe2Zsb2F0aW5nID0gdXBwZXI7dXBwZXIgPSB1bmRlZmluZWQ7fWVsc2UgaWYodHlwZW9mIGxvd2VyID09IFwiYm9vbGVhblwiKXtmbG9hdGluZyA9IGxvd2VyO2xvd2VyID0gdW5kZWZpbmVkO319aWYobG93ZXIgPT09IHVuZGVmaW5lZCAmJiB1cHBlciA9PT0gdW5kZWZpbmVkKXtsb3dlciA9IDA7dXBwZXIgPSAxO31lbHNlIHtsb3dlciA9IHRvTnVtYmVyKGxvd2VyKSB8fCAwO2lmKHVwcGVyID09PSB1bmRlZmluZWQpe3VwcGVyID0gbG93ZXI7bG93ZXIgPSAwO31lbHNlIHt1cHBlciA9IHRvTnVtYmVyKHVwcGVyKSB8fCAwO319aWYobG93ZXIgPiB1cHBlcil7dmFyIHRlbXA9bG93ZXI7bG93ZXIgPSB1cHBlcjt1cHBlciA9IHRlbXA7fWlmKGZsb2F0aW5nIHx8IGxvd2VyICUgMSB8fCB1cHBlciAlIDEpe3ZhciByYW5kPW5hdGl2ZVJhbmRvbSgpO3JldHVybiBuYXRpdmVNaW4obG93ZXIgKyByYW5kICogKHVwcGVyIC0gbG93ZXIgKyBmcmVlUGFyc2VGbG9hdChcIjFlLVwiICsgKChyYW5kICsgXCJcIikubGVuZ3RoIC0gMSkpKSx1cHBlcik7fXJldHVybiBiYXNlUmFuZG9tKGxvd2VyLHVwcGVyKTt9dmFyIGNhbWVsQ2FzZT1jcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCx3b3JkLGluZGV4KXt3b3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO3JldHVybiByZXN1bHQgKyAoaW5kZXg/Y2FwaXRhbGl6ZSh3b3JkKTp3b3JkKTt9KTtmdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZyl7cmV0dXJuIHVwcGVyRmlyc3QodG9TdHJpbmcoc3RyaW5nKS50b0xvd2VyQ2FzZSgpKTt9ZnVuY3Rpb24gZGVidXJyKHN0cmluZyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gc3RyaW5nICYmIHN0cmluZy5yZXBsYWNlKHJlTGF0aW4xLGRlYnVyckxldHRlcikucmVwbGFjZShyZUNvbWJvTWFyayxcIlwiKTt9ZnVuY3Rpb24gZW5kc1dpdGgoc3RyaW5nLHRhcmdldCxwb3NpdGlvbil7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTt0YXJnZXQgPSB0eXBlb2YgdGFyZ2V0ID09IFwic3RyaW5nXCI/dGFyZ2V0OnRhcmdldCArIFwiXCI7dmFyIGxlbmd0aD1zdHJpbmcubGVuZ3RoO3Bvc2l0aW9uID0gcG9zaXRpb24gPT09IHVuZGVmaW5lZD9sZW5ndGg6YmFzZUNsYW1wKHRvSW50ZWdlcihwb3NpdGlvbiksMCxsZW5ndGgpO3Bvc2l0aW9uIC09IHRhcmdldC5sZW5ndGg7cmV0dXJuIHBvc2l0aW9uID49IDAgJiYgc3RyaW5nLmluZGV4T2YodGFyZ2V0LHBvc2l0aW9uKSA9PSBwb3NpdGlvbjt9ZnVuY3Rpb24gZXNjYXBlKHN0cmluZyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZyk/c3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLGVzY2FwZUh0bWxDaGFyKTpzdHJpbmc7fWZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHJpbmcpe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7cmV0dXJuIHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXIudGVzdChzdHJpbmcpP3N0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcixcIlxcXFwkJlwiKTpzdHJpbmc7fXZhciBrZWJhYkNhc2U9Y3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsd29yZCxpbmRleCl7cmV0dXJuIHJlc3VsdCArIChpbmRleD9cIi1cIjpcIlwiKSArIHdvcmQudG9Mb3dlckNhc2UoKTt9KTt2YXIgbG93ZXJDYXNlPWNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LHdvcmQsaW5kZXgpe3JldHVybiByZXN1bHQgKyAoaW5kZXg/XCIgXCI6XCJcIikgKyB3b3JkLnRvTG93ZXJDYXNlKCk7fSk7dmFyIGxvd2VyRmlyc3Q9Y3JlYXRlQ2FzZUZpcnN0KFwidG9Mb3dlckNhc2VcIik7dmFyIHVwcGVyRmlyc3Q9Y3JlYXRlQ2FzZUZpcnN0KFwidG9VcHBlckNhc2VcIik7ZnVuY3Rpb24gcGFkKHN0cmluZyxsZW5ndGgsY2hhcnMpe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7bGVuZ3RoID0gdG9JbnRlZ2VyKGxlbmd0aCk7dmFyIHN0ckxlbmd0aD1zdHJpbmdTaXplKHN0cmluZyk7aWYoIWxlbmd0aCB8fCBzdHJMZW5ndGggPj0gbGVuZ3RoKXtyZXR1cm4gc3RyaW5nO312YXIgbWlkPShsZW5ndGggLSBzdHJMZW5ndGgpIC8gMixsZWZ0TGVuZ3RoPW5hdGl2ZUZsb29yKG1pZCkscmlnaHRMZW5ndGg9bmF0aXZlQ2VpbChtaWQpO3JldHVybiBjcmVhdGVQYWRkaW5nKFwiXCIsbGVmdExlbmd0aCxjaGFycykgKyBzdHJpbmcgKyBjcmVhdGVQYWRkaW5nKFwiXCIscmlnaHRMZW5ndGgsY2hhcnMpO31mdW5jdGlvbiBwYWRFbmQoc3RyaW5nLGxlbmd0aCxjaGFycyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gc3RyaW5nICsgY3JlYXRlUGFkZGluZyhzdHJpbmcsbGVuZ3RoLGNoYXJzKTt9ZnVuY3Rpb24gcGFkU3RhcnQoc3RyaW5nLGxlbmd0aCxjaGFycyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gY3JlYXRlUGFkZGluZyhzdHJpbmcsbGVuZ3RoLGNoYXJzKSArIHN0cmluZzt9ZnVuY3Rpb24gcGFyc2VJbnQoc3RyaW5nLHJhZGl4LGd1YXJkKXtpZihndWFyZCB8fCByYWRpeCA9PSBudWxsKXtyYWRpeCA9IDA7fWVsc2UgaWYocmFkaXgpe3JhZGl4ID0gK3JhZGl4O31zdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVUcmltLFwiXCIpO3JldHVybiBuYXRpdmVQYXJzZUludChzdHJpbmcscmFkaXggfHwgKHJlSGFzSGV4UHJlZml4LnRlc3Qoc3RyaW5nKT8xNjoxMCkpO31mdW5jdGlvbiByZXBlYXQoc3RyaW5nLG4pe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7biA9IHRvSW50ZWdlcihuKTt2YXIgcmVzdWx0PVwiXCI7aWYoIXN0cmluZyB8fCBuIDwgMSB8fCBuID4gTUFYX1NBRkVfSU5URUdFUil7cmV0dXJuIHJlc3VsdDt9ZG8ge2lmKG4gJSAyKXtyZXN1bHQgKz0gc3RyaW5nO31uID0gbmF0aXZlRmxvb3IobiAvIDIpO3N0cmluZyArPSBzdHJpbmc7fXdoaWxlKG4pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHJlcGxhY2UoKXt2YXIgYXJncz1hcmd1bWVudHMsc3RyaW5nPXRvU3RyaW5nKGFyZ3NbMF0pO3JldHVybiBhcmdzLmxlbmd0aCA8IDM/c3RyaW5nOnN0cmluZy5yZXBsYWNlKGFyZ3NbMV0sYXJnc1syXSk7fXZhciBzbmFrZUNhc2U9Y3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsd29yZCxpbmRleCl7cmV0dXJuIHJlc3VsdCArIChpbmRleD9cIl9cIjpcIlwiKSArIHdvcmQudG9Mb3dlckNhc2UoKTt9KTtmdW5jdGlvbiBzcGxpdChzdHJpbmcsc2VwYXJhdG9yLGxpbWl0KXtyZXR1cm4gdG9TdHJpbmcoc3RyaW5nKS5zcGxpdChzZXBhcmF0b3IsbGltaXQpO312YXIgc3RhcnRDYXNlPWNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LHdvcmQsaW5kZXgpe3JldHVybiByZXN1bHQgKyAoaW5kZXg/XCIgXCI6XCJcIikgKyBjYXBpdGFsaXplKHdvcmQpO30pO2Z1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLHRhcmdldCxwb3NpdGlvbil7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtwb3NpdGlvbiA9IGJhc2VDbGFtcCh0b0ludGVnZXIocG9zaXRpb24pLDAsc3RyaW5nLmxlbmd0aCk7cmV0dXJuIHN0cmluZy5sYXN0SW5kZXhPZih0YXJnZXQscG9zaXRpb24pID09IHBvc2l0aW9uO31mdW5jdGlvbiB0ZW1wbGF0ZShzdHJpbmcsb3B0aW9ucyxndWFyZCl7dmFyIHNldHRpbmdzPWxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzO2lmKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHN0cmluZyxvcHRpb25zLGd1YXJkKSl7b3B0aW9ucyA9IHVuZGVmaW5lZDt9c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtvcHRpb25zID0gYXNzaWduSW5XaXRoKHt9LG9wdGlvbnMsc2V0dGluZ3MsYXNzaWduSW5EZWZhdWx0cyk7dmFyIGltcG9ydHM9YXNzaWduSW5XaXRoKHt9LG9wdGlvbnMuaW1wb3J0cyxzZXR0aW5ncy5pbXBvcnRzLGFzc2lnbkluRGVmYXVsdHMpLGltcG9ydHNLZXlzPWtleXMoaW1wb3J0cyksaW1wb3J0c1ZhbHVlcz1iYXNlVmFsdWVzKGltcG9ydHMsaW1wb3J0c0tleXMpO3ZhciBpc0VzY2FwaW5nLGlzRXZhbHVhdGluZyxpbmRleD0wLGludGVycG9sYXRlPW9wdGlvbnMuaW50ZXJwb2xhdGUgfHwgcmVOb01hdGNoLHNvdXJjZT1cIl9fcCArPSAnXCI7dmFyIHJlRGVsaW1pdGVycz1SZWdFeHAoKG9wdGlvbnMuZXNjYXBlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgXCJ8XCIgKyBpbnRlcnBvbGF0ZS5zb3VyY2UgKyBcInxcIiArIChpbnRlcnBvbGF0ZSA9PT0gcmVJbnRlcnBvbGF0ZT9yZUVzVGVtcGxhdGU6cmVOb01hdGNoKS5zb3VyY2UgKyBcInxcIiArIChvcHRpb25zLmV2YWx1YXRlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgXCJ8JFwiLFwiZ1wiKTt2YXIgc291cmNlVVJMPVwiLy8jIHNvdXJjZVVSTD1cIiArIChcInNvdXJjZVVSTFwiIGluIG9wdGlvbnM/b3B0aW9ucy5zb3VyY2VVUkw6XCJsb2Rhc2gudGVtcGxhdGVTb3VyY2VzW1wiICsgKyt0ZW1wbGF0ZUNvdW50ZXIgKyBcIl1cIikgKyBcIlxcblwiO3N0cmluZy5yZXBsYWNlKHJlRGVsaW1pdGVycyxmdW5jdGlvbihtYXRjaCxlc2NhcGVWYWx1ZSxpbnRlcnBvbGF0ZVZhbHVlLGVzVGVtcGxhdGVWYWx1ZSxldmFsdWF0ZVZhbHVlLG9mZnNldCl7aW50ZXJwb2xhdGVWYWx1ZSB8fCAoaW50ZXJwb2xhdGVWYWx1ZSA9IGVzVGVtcGxhdGVWYWx1ZSk7c291cmNlICs9IHN0cmluZy5zbGljZShpbmRleCxvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsZXNjYXBlU3RyaW5nQ2hhcik7aWYoZXNjYXBlVmFsdWUpe2lzRXNjYXBpbmcgPSB0cnVlO3NvdXJjZSArPSBcIicgK1xcbl9fZShcIiArIGVzY2FwZVZhbHVlICsgXCIpICtcXG4nXCI7fWlmKGV2YWx1YXRlVmFsdWUpe2lzRXZhbHVhdGluZyA9IHRydWU7c291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlVmFsdWUgKyBcIjtcXG5fX3AgKz0gJ1wiO31pZihpbnRlcnBvbGF0ZVZhbHVlKXtzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjt9aW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7cmV0dXJuIG1hdGNoO30pO3NvdXJjZSArPSBcIic7XFxuXCI7dmFyIHZhcmlhYmxlPW9wdGlvbnMudmFyaWFibGU7aWYoIXZhcmlhYmxlKXtzb3VyY2UgPSBcIndpdGggKG9iaikge1xcblwiICsgc291cmNlICsgXCJcXG59XFxuXCI7fXNvdXJjZSA9IChpc0V2YWx1YXRpbmc/c291cmNlLnJlcGxhY2UocmVFbXB0eVN0cmluZ0xlYWRpbmcsXCJcIik6c291cmNlKS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdNaWRkbGUsXCIkMVwiKS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdUcmFpbGluZyxcIiQxO1wiKTtzb3VyY2UgPSBcImZ1bmN0aW9uKFwiICsgKHZhcmlhYmxlIHx8IFwib2JqXCIpICsgXCIpIHtcXG5cIiArICh2YXJpYWJsZT9cIlwiOlwib2JqIHx8IChvYmogPSB7fSk7XFxuXCIpICsgXCJ2YXIgX190LCBfX3AgPSAnJ1wiICsgKGlzRXNjYXBpbmc/XCIsIF9fZSA9IF8uZXNjYXBlXCI6XCJcIikgKyAoaXNFdmFsdWF0aW5nP1wiLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG5cIiArIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCI6XCI7XFxuXCIpICsgc291cmNlICsgXCJyZXR1cm4gX19wXFxufVwiO3ZhciByZXN1bHQ9YXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbihpbXBvcnRzS2V5cyxzb3VyY2VVUkwgKyBcInJldHVybiBcIiArIHNvdXJjZSkuYXBwbHkodW5kZWZpbmVkLGltcG9ydHNWYWx1ZXMpO30pO3Jlc3VsdC5zb3VyY2UgPSBzb3VyY2U7aWYoaXNFcnJvcihyZXN1bHQpKXt0aHJvdyByZXN1bHQ7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHRvTG93ZXIodmFsdWUpe3JldHVybiB0b1N0cmluZyh2YWx1ZSkudG9Mb3dlckNhc2UoKTt9ZnVuY3Rpb24gdG9VcHBlcih2YWx1ZSl7cmV0dXJuIHRvU3RyaW5nKHZhbHVlKS50b1VwcGVyQ2FzZSgpO31mdW5jdGlvbiB0cmltKHN0cmluZyxjaGFycyxndWFyZCl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtpZighc3RyaW5nKXtyZXR1cm4gc3RyaW5nO31pZihndWFyZCB8fCBjaGFycyA9PT0gdW5kZWZpbmVkKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UocmVUcmltLFwiXCIpO31jaGFycyA9IGNoYXJzICsgXCJcIjtpZighY2hhcnMpe3JldHVybiBzdHJpbmc7fXZhciBzdHJTeW1ib2xzPXN0cmluZ1RvQXJyYXkoc3RyaW5nKSxjaHJTeW1ib2xzPXN0cmluZ1RvQXJyYXkoY2hhcnMpO3JldHVybiBzdHJTeW1ib2xzLnNsaWNlKGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLGNoclN5bWJvbHMpLGNoYXJzRW5kSW5kZXgoc3RyU3ltYm9scyxjaHJTeW1ib2xzKSArIDEpLmpvaW4oXCJcIik7fWZ1bmN0aW9uIHRyaW1FbmQoc3RyaW5nLGNoYXJzLGd1YXJkKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO2lmKCFzdHJpbmcpe3JldHVybiBzdHJpbmc7fWlmKGd1YXJkIHx8IGNoYXJzID09PSB1bmRlZmluZWQpe3JldHVybiBzdHJpbmcucmVwbGFjZShyZVRyaW1FbmQsXCJcIik7fWNoYXJzID0gY2hhcnMgKyBcIlwiO2lmKCFjaGFycyl7cmV0dXJuIHN0cmluZzt9dmFyIHN0clN5bWJvbHM9c3RyaW5nVG9BcnJheShzdHJpbmcpO3JldHVybiBzdHJTeW1ib2xzLnNsaWNlKDAsY2hhcnNFbmRJbmRleChzdHJTeW1ib2xzLHN0cmluZ1RvQXJyYXkoY2hhcnMpKSArIDEpLmpvaW4oXCJcIik7fWZ1bmN0aW9uIHRyaW1TdGFydChzdHJpbmcsY2hhcnMsZ3VhcmQpe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7aWYoIXN0cmluZyl7cmV0dXJuIHN0cmluZzt9aWYoZ3VhcmQgfHwgY2hhcnMgPT09IHVuZGVmaW5lZCl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKHJlVHJpbVN0YXJ0LFwiXCIpO31jaGFycyA9IGNoYXJzICsgXCJcIjtpZighY2hhcnMpe3JldHVybiBzdHJpbmc7fXZhciBzdHJTeW1ib2xzPXN0cmluZ1RvQXJyYXkoc3RyaW5nKTtyZXR1cm4gc3RyU3ltYm9scy5zbGljZShjaGFyc1N0YXJ0SW5kZXgoc3RyU3ltYm9scyxzdHJpbmdUb0FycmF5KGNoYXJzKSkpLmpvaW4oXCJcIik7fWZ1bmN0aW9uIHRydW5jYXRlKHN0cmluZyxvcHRpb25zKXt2YXIgbGVuZ3RoPURFRkFVTFRfVFJVTkNfTEVOR1RILG9taXNzaW9uPURFRkFVTFRfVFJVTkNfT01JU1NJT047aWYoaXNPYmplY3Qob3B0aW9ucykpe3ZhciBzZXBhcmF0b3I9XCJzZXBhcmF0b3JcIiBpbiBvcHRpb25zP29wdGlvbnMuc2VwYXJhdG9yOnNlcGFyYXRvcjtsZW5ndGggPSBcImxlbmd0aFwiIGluIG9wdGlvbnM/dG9JbnRlZ2VyKG9wdGlvbnMubGVuZ3RoKTpsZW5ndGg7b21pc3Npb24gPSBcIm9taXNzaW9uXCIgaW4gb3B0aW9ucz90b1N0cmluZyhvcHRpb25zLm9taXNzaW9uKTpvbWlzc2lvbjt9c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTt2YXIgc3RyTGVuZ3RoPXN0cmluZy5sZW5ndGg7aWYocmVIYXNDb21wbGV4U3ltYm9sLnRlc3Qoc3RyaW5nKSl7dmFyIHN0clN5bWJvbHM9c3RyaW5nVG9BcnJheShzdHJpbmcpO3N0ckxlbmd0aCA9IHN0clN5bWJvbHMubGVuZ3RoO31pZihsZW5ndGggPj0gc3RyTGVuZ3RoKXtyZXR1cm4gc3RyaW5nO312YXIgZW5kPWxlbmd0aCAtIHN0cmluZ1NpemUob21pc3Npb24pO2lmKGVuZCA8IDEpe3JldHVybiBvbWlzc2lvbjt9dmFyIHJlc3VsdD1zdHJTeW1ib2xzP3N0clN5bWJvbHMuc2xpY2UoMCxlbmQpLmpvaW4oXCJcIik6c3RyaW5nLnNsaWNlKDAsZW5kKTtpZihzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCl7cmV0dXJuIHJlc3VsdCArIG9taXNzaW9uO31pZihzdHJTeW1ib2xzKXtlbmQgKz0gcmVzdWx0Lmxlbmd0aCAtIGVuZDt9aWYoaXNSZWdFeHAoc2VwYXJhdG9yKSl7aWYoc3RyaW5nLnNsaWNlKGVuZCkuc2VhcmNoKHNlcGFyYXRvcikpe3ZhciBtYXRjaCxzdWJzdHJpbmc9cmVzdWx0O2lmKCFzZXBhcmF0b3IuZ2xvYmFsKXtzZXBhcmF0b3IgPSBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSx0b1N0cmluZyhyZUZsYWdzLmV4ZWMoc2VwYXJhdG9yKSkgKyBcImdcIik7fXNlcGFyYXRvci5sYXN0SW5kZXggPSAwO3doaWxlKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3Vic3RyaW5nKSkge3ZhciBuZXdFbmQ9bWF0Y2guaW5kZXg7fXJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLG5ld0VuZCA9PT0gdW5kZWZpbmVkP2VuZDpuZXdFbmQpO319ZWxzZSBpZihzdHJpbmcuaW5kZXhPZihzZXBhcmF0b3IsZW5kKSAhPSBlbmQpe3ZhciBpbmRleD1yZXN1bHQubGFzdEluZGV4T2Yoc2VwYXJhdG9yKTtpZihpbmRleCA+IC0xKXtyZXN1bHQgPSByZXN1bHQuc2xpY2UoMCxpbmRleCk7fX1yZXR1cm4gcmVzdWx0ICsgb21pc3Npb247fWZ1bmN0aW9uIHVuZXNjYXBlKHN0cmluZyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gc3RyaW5nICYmIHJlSGFzRXNjYXBlZEh0bWwudGVzdChzdHJpbmcpP3N0cmluZy5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsdW5lc2NhcGVIdG1sQ2hhcik6c3RyaW5nO312YXIgdXBwZXJDYXNlPWNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LHdvcmQsaW5kZXgpe3JldHVybiByZXN1bHQgKyAoaW5kZXg/XCIgXCI6XCJcIikgKyB3b3JkLnRvVXBwZXJDYXNlKCk7fSk7ZnVuY3Rpb24gd29yZHMoc3RyaW5nLHBhdHRlcm4sZ3VhcmQpe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7cGF0dGVybiA9IGd1YXJkP3VuZGVmaW5lZDpwYXR0ZXJuO2lmKHBhdHRlcm4gPT09IHVuZGVmaW5lZCl7cGF0dGVybiA9IHJlSGFzQ29tcGxleFdvcmQudGVzdChzdHJpbmcpP3JlQ29tcGxleFdvcmQ6cmVCYXNpY1dvcmQ7fXJldHVybiBzdHJpbmcubWF0Y2gocGF0dGVybikgfHwgW107fXZhciBhdHRlbXB0PXJlc3QoZnVuY3Rpb24oZnVuYyxhcmdzKXt0cnl7cmV0dXJuIGFwcGx5KGZ1bmMsdW5kZWZpbmVkLGFyZ3MpO31jYXRjaChlKSB7cmV0dXJuIGlzT2JqZWN0KGUpP2U6bmV3IEVycm9yKGUpO319KTt2YXIgYmluZEFsbD1yZXN0KGZ1bmN0aW9uKG9iamVjdCxtZXRob2ROYW1lcyl7YXJyYXlFYWNoKGJhc2VGbGF0dGVuKG1ldGhvZE5hbWVzKSxmdW5jdGlvbihrZXkpe29iamVjdFtrZXldID0gYmluZChvYmplY3Rba2V5XSxvYmplY3QpO30pO3JldHVybiBvYmplY3Q7fSk7ZnVuY3Rpb24gY29uZChwYWlycyl7dmFyIGxlbmd0aD1wYWlycz9wYWlycy5sZW5ndGg6MCx0b0l0ZXJhdGVlPWdldEl0ZXJhdGVlKCk7cGFpcnMgPSAhbGVuZ3RoP1tdOmFycmF5TWFwKHBhaXJzLGZ1bmN0aW9uKHBhaXIpe2lmKHR5cGVvZiBwYWlyWzFdICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31yZXR1cm4gW3RvSXRlcmF0ZWUocGFpclswXSkscGFpclsxXV07fSk7cmV0dXJuIHJlc3QoZnVuY3Rpb24oYXJncyl7dmFyIGluZGV4PS0xO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgcGFpcj1wYWlyc1tpbmRleF07aWYoYXBwbHkocGFpclswXSx0aGlzLGFyZ3MpKXtyZXR1cm4gYXBwbHkocGFpclsxXSx0aGlzLGFyZ3MpO319fSk7fWZ1bmN0aW9uIGNvbmZvcm1zKHNvdXJjZSl7cmV0dXJuIGJhc2VDb25mb3JtcyhiYXNlQ2xvbmUoc291cmNlLHRydWUpKTt9ZnVuY3Rpb24gY29uc3RhbnQodmFsdWUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB2YWx1ZTt9O312YXIgZmxvdz1jcmVhdGVGbG93KCk7dmFyIGZsb3dSaWdodD1jcmVhdGVGbG93KHRydWUpO2Z1bmN0aW9uIGlkZW50aXR5KHZhbHVlKXtyZXR1cm4gdmFsdWU7fWZ1bmN0aW9uIGl0ZXJhdGVlKGZ1bmMpe3JldHVybiBiYXNlSXRlcmF0ZWUodHlwZW9mIGZ1bmMgPT0gXCJmdW5jdGlvblwiP2Z1bmM6YmFzZUNsb25lKGZ1bmMsdHJ1ZSkpO31mdW5jdGlvbiBtYXRjaGVzKHNvdXJjZSl7cmV0dXJuIGJhc2VNYXRjaGVzKGJhc2VDbG9uZShzb3VyY2UsdHJ1ZSkpO31mdW5jdGlvbiBtYXRjaGVzUHJvcGVydHkocGF0aCxzcmNWYWx1ZSl7cmV0dXJuIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCxiYXNlQ2xvbmUoc3JjVmFsdWUsdHJ1ZSkpO312YXIgbWV0aG9kPXJlc3QoZnVuY3Rpb24ocGF0aCxhcmdzKXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gYmFzZUludm9rZShvYmplY3QscGF0aCxhcmdzKTt9O30pO3ZhciBtZXRob2RPZj1yZXN0KGZ1bmN0aW9uKG9iamVjdCxhcmdzKXtyZXR1cm4gZnVuY3Rpb24ocGF0aCl7cmV0dXJuIGJhc2VJbnZva2Uob2JqZWN0LHBhdGgsYXJncyk7fTt9KTtmdW5jdGlvbiBtaXhpbihvYmplY3Qsc291cmNlLG9wdGlvbnMpe3ZhciBwcm9wcz1rZXlzKHNvdXJjZSksbWV0aG9kTmFtZXM9YmFzZUZ1bmN0aW9ucyhzb3VyY2UscHJvcHMpO2lmKG9wdGlvbnMgPT0gbnVsbCAmJiAhKGlzT2JqZWN0KHNvdXJjZSkgJiYgKG1ldGhvZE5hbWVzLmxlbmd0aCB8fCAhcHJvcHMubGVuZ3RoKSkpe29wdGlvbnMgPSBzb3VyY2U7c291cmNlID0gb2JqZWN0O29iamVjdCA9IHRoaXM7bWV0aG9kTmFtZXMgPSBiYXNlRnVuY3Rpb25zKHNvdXJjZSxrZXlzKHNvdXJjZSkpO312YXIgY2hhaW49aXNPYmplY3Qob3B0aW9ucykgJiYgXCJjaGFpblwiIGluIG9wdGlvbnM/b3B0aW9ucy5jaGFpbjp0cnVlLGlzRnVuYz1pc0Z1bmN0aW9uKG9iamVjdCk7YXJyYXlFYWNoKG1ldGhvZE5hbWVzLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe3ZhciBmdW5jPXNvdXJjZVttZXRob2ROYW1lXTtvYmplY3RbbWV0aG9kTmFtZV0gPSBmdW5jO2lmKGlzRnVuYyl7b2JqZWN0LnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCl7dmFyIGNoYWluQWxsPXRoaXMuX19jaGFpbl9fO2lmKGNoYWluIHx8IGNoYWluQWxsKXt2YXIgcmVzdWx0PW9iamVjdCh0aGlzLl9fd3JhcHBlZF9fKSxhY3Rpb25zPXJlc3VsdC5fX2FjdGlvbnNfXyA9IGNvcHlBcnJheSh0aGlzLl9fYWN0aW9uc19fKTthY3Rpb25zLnB1c2goe2Z1bmM6ZnVuYyxhcmdzOmFyZ3VtZW50cyx0aGlzQXJnOm9iamVjdH0pO3Jlc3VsdC5fX2NoYWluX18gPSBjaGFpbkFsbDtyZXR1cm4gcmVzdWx0O31yZXR1cm4gZnVuYy5hcHBseShvYmplY3QsYXJyYXlQdXNoKFt0aGlzLnZhbHVlKCldLGFyZ3VtZW50cykpO307fX0pO3JldHVybiBvYmplY3Q7fWZ1bmN0aW9uIG5vQ29uZmxpY3QoKXtpZihyb290Ll8gPT09IHRoaXMpe3Jvb3QuXyA9IG9sZERhc2g7fXJldHVybiB0aGlzO31mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIG50aEFyZyhuKXtuID0gdG9JbnRlZ2VyKG4pO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbbl07fTt9dmFyIG92ZXI9Y3JlYXRlT3ZlcihhcnJheU1hcCk7dmFyIG92ZXJFdmVyeT1jcmVhdGVPdmVyKGFycmF5RXZlcnkpO3ZhciBvdmVyU29tZT1jcmVhdGVPdmVyKGFycmF5U29tZSk7ZnVuY3Rpb24gcHJvcGVydHkocGF0aCl7cmV0dXJuIGlzS2V5KHBhdGgpP2Jhc2VQcm9wZXJ0eShwYXRoKTpiYXNlUHJvcGVydHlEZWVwKHBhdGgpO31mdW5jdGlvbiBwcm9wZXJ0eU9mKG9iamVjdCl7cmV0dXJuIGZ1bmN0aW9uKHBhdGgpe3JldHVybiBvYmplY3QgPT0gbnVsbD91bmRlZmluZWQ6YmFzZUdldChvYmplY3QscGF0aCk7fTt9dmFyIHJhbmdlPWNyZWF0ZVJhbmdlKCk7dmFyIHJhbmdlUmlnaHQ9Y3JlYXRlUmFuZ2UodHJ1ZSk7ZnVuY3Rpb24gdGltZXMobixpdGVyYXRlZSl7biA9IHRvSW50ZWdlcihuKTtpZihuIDwgMSB8fCBuID4gTUFYX1NBRkVfSU5URUdFUil7cmV0dXJuIFtdO312YXIgaW5kZXg9TUFYX0FSUkFZX0xFTkdUSCxsZW5ndGg9bmF0aXZlTWluKG4sTUFYX0FSUkFZX0xFTkdUSCk7aXRlcmF0ZWUgPSB0b0Z1bmN0aW9uKGl0ZXJhdGVlKTtuIC09IE1BWF9BUlJBWV9MRU5HVEg7dmFyIHJlc3VsdD1iYXNlVGltZXMobGVuZ3RoLGl0ZXJhdGVlKTt3aGlsZSgrK2luZGV4IDwgbikge2l0ZXJhdGVlKGluZGV4KTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gdG9QYXRoKHZhbHVlKXtyZXR1cm4gaXNBcnJheSh2YWx1ZSk/YXJyYXlNYXAodmFsdWUsU3RyaW5nKTpzdHJpbmdUb1BhdGgodmFsdWUpO31mdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpe3ZhciBpZD0rK2lkQ291bnRlcjtyZXR1cm4gdG9TdHJpbmcocHJlZml4KSArIGlkO31mdW5jdGlvbiBhZGQoYXVnZW5kLGFkZGVuZCl7dmFyIHJlc3VsdDtpZihhdWdlbmQgIT09IHVuZGVmaW5lZCl7cmVzdWx0ID0gYXVnZW5kO31pZihhZGRlbmQgIT09IHVuZGVmaW5lZCl7cmVzdWx0ID0gcmVzdWx0ID09PSB1bmRlZmluZWQ/YWRkZW5kOnJlc3VsdCArIGFkZGVuZDt9cmV0dXJuIHJlc3VsdDt9dmFyIGNlaWw9Y3JlYXRlUm91bmQoXCJjZWlsXCIpO3ZhciBmbG9vcj1jcmVhdGVSb3VuZChcImZsb29yXCIpO2Z1bmN0aW9uIG1heChhcnJheSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlRXh0cmVtdW0oYXJyYXksaWRlbnRpdHksZ3QpOnVuZGVmaW5lZDt9ZnVuY3Rpb24gbWF4QnkoYXJyYXksaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZUV4dHJlbXVtKGFycmF5LGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSxndCk6dW5kZWZpbmVkO31mdW5jdGlvbiBtZWFuKGFycmF5KXtyZXR1cm4gc3VtKGFycmF5KSAvIChhcnJheT9hcnJheS5sZW5ndGg6MCk7fWZ1bmN0aW9uIG1pbihhcnJheSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlRXh0cmVtdW0oYXJyYXksaWRlbnRpdHksbHQpOnVuZGVmaW5lZDt9ZnVuY3Rpb24gbWluQnkoYXJyYXksaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZUV4dHJlbXVtKGFycmF5LGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSxsdCk6dW5kZWZpbmVkO312YXIgcm91bmQ9Y3JlYXRlUm91bmQoXCJyb3VuZFwiKTtmdW5jdGlvbiBzdWJ0cmFjdChtaW51ZW5kLHN1YnRyYWhlbmQpe3ZhciByZXN1bHQ7aWYobWludWVuZCAhPT0gdW5kZWZpbmVkKXtyZXN1bHQgPSBtaW51ZW5kO31pZihzdWJ0cmFoZW5kICE9PSB1bmRlZmluZWQpe3Jlc3VsdCA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkP3N1YnRyYWhlbmQ6cmVzdWx0IC0gc3VidHJhaGVuZDt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gc3VtKGFycmF5KXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VTdW0oYXJyYXksaWRlbnRpdHkpOjA7fWZ1bmN0aW9uIHN1bUJ5KGFycmF5LGl0ZXJhdGVlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VTdW0oYXJyYXksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTowO31sb2Rhc2gucHJvdG90eXBlID0gYmFzZUxvZGFzaC5wcm90b3R5cGU7TG9kYXNoV3JhcHBlci5wcm90b3R5cGUgPSBiYXNlQ3JlYXRlKGJhc2VMb2Rhc2gucHJvdG90eXBlKTtMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExvZGFzaFdyYXBwZXI7TGF6eVdyYXBwZXIucHJvdG90eXBlID0gYmFzZUNyZWF0ZShiYXNlTG9kYXNoLnByb3RvdHlwZSk7TGF6eVdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF6eVdyYXBwZXI7SGFzaC5wcm90b3R5cGUgPSBuYXRpdmVDcmVhdGU/bmF0aXZlQ3JlYXRlKG51bGwpOm9iamVjdFByb3RvO01hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENsZWFyO01hcENhY2hlLnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IG1hcERlbGV0ZTtNYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwR2V0O01hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBIYXM7TWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcFNldDtTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IGNhY2hlUHVzaDtTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1N0YWNrLnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IHN0YWNrRGVsZXRlO1N0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtTdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7U3RhY2sucHJvdG90eXBlLnNldCA9IHN0YWNrU2V0O21lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtsb2Rhc2guYWZ0ZXIgPSBhZnRlcjtsb2Rhc2guYXJ5ID0gYXJ5O2xvZGFzaC5hc3NpZ24gPSBhc3NpZ247bG9kYXNoLmFzc2lnbkluID0gYXNzaWduSW47bG9kYXNoLmFzc2lnbkluV2l0aCA9IGFzc2lnbkluV2l0aDtsb2Rhc2guYXNzaWduV2l0aCA9IGFzc2lnbldpdGg7bG9kYXNoLmF0ID0gYXQ7bG9kYXNoLmJlZm9yZSA9IGJlZm9yZTtsb2Rhc2guYmluZCA9IGJpbmQ7bG9kYXNoLmJpbmRBbGwgPSBiaW5kQWxsO2xvZGFzaC5iaW5kS2V5ID0gYmluZEtleTtsb2Rhc2guY2hhaW4gPSBjaGFpbjtsb2Rhc2guY2h1bmsgPSBjaHVuaztsb2Rhc2guY29tcGFjdCA9IGNvbXBhY3Q7bG9kYXNoLmNvbmNhdCA9IGNvbmNhdDtsb2Rhc2guY29uZCA9IGNvbmQ7bG9kYXNoLmNvbmZvcm1zID0gY29uZm9ybXM7bG9kYXNoLmNvbnN0YW50ID0gY29uc3RhbnQ7bG9kYXNoLmNvdW50QnkgPSBjb3VudEJ5O2xvZGFzaC5jcmVhdGUgPSBjcmVhdGU7bG9kYXNoLmN1cnJ5ID0gY3Vycnk7bG9kYXNoLmN1cnJ5UmlnaHQgPSBjdXJyeVJpZ2h0O2xvZGFzaC5kZWJvdW5jZSA9IGRlYm91bmNlO2xvZGFzaC5kZWZhdWx0cyA9IGRlZmF1bHRzO2xvZGFzaC5kZWZhdWx0c0RlZXAgPSBkZWZhdWx0c0RlZXA7bG9kYXNoLmRlZmVyID0gZGVmZXI7bG9kYXNoLmRlbGF5ID0gZGVsYXk7bG9kYXNoLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO2xvZGFzaC5kaWZmZXJlbmNlQnkgPSBkaWZmZXJlbmNlQnk7bG9kYXNoLmRpZmZlcmVuY2VXaXRoID0gZGlmZmVyZW5jZVdpdGg7bG9kYXNoLmRyb3AgPSBkcm9wO2xvZGFzaC5kcm9wUmlnaHQgPSBkcm9wUmlnaHQ7bG9kYXNoLmRyb3BSaWdodFdoaWxlID0gZHJvcFJpZ2h0V2hpbGU7bG9kYXNoLmRyb3BXaGlsZSA9IGRyb3BXaGlsZTtsb2Rhc2guZmlsbCA9IGZpbGw7bG9kYXNoLmZpbHRlciA9IGZpbHRlcjtsb2Rhc2guZmxhdE1hcCA9IGZsYXRNYXA7bG9kYXNoLmZsYXR0ZW4gPSBmbGF0dGVuO2xvZGFzaC5mbGF0dGVuRGVlcCA9IGZsYXR0ZW5EZWVwO2xvZGFzaC5mbGlwID0gZmxpcDtsb2Rhc2guZmxvdyA9IGZsb3c7bG9kYXNoLmZsb3dSaWdodCA9IGZsb3dSaWdodDtsb2Rhc2guZnJvbVBhaXJzID0gZnJvbVBhaXJzO2xvZGFzaC5mdW5jdGlvbnMgPSBmdW5jdGlvbnM7bG9kYXNoLmZ1bmN0aW9uc0luID0gZnVuY3Rpb25zSW47bG9kYXNoLmdyb3VwQnkgPSBncm91cEJ5O2xvZGFzaC5pbml0aWFsID0gaW5pdGlhbDtsb2Rhc2guaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO2xvZGFzaC5pbnRlcnNlY3Rpb25CeSA9IGludGVyc2VjdGlvbkJ5O2xvZGFzaC5pbnRlcnNlY3Rpb25XaXRoID0gaW50ZXJzZWN0aW9uV2l0aDtsb2Rhc2guaW52ZXJ0ID0gaW52ZXJ0O2xvZGFzaC5pbnZlcnRCeSA9IGludmVydEJ5O2xvZGFzaC5pbnZva2VNYXAgPSBpbnZva2VNYXA7bG9kYXNoLml0ZXJhdGVlID0gaXRlcmF0ZWU7bG9kYXNoLmtleUJ5ID0ga2V5Qnk7bG9kYXNoLmtleXMgPSBrZXlzO2xvZGFzaC5rZXlzSW4gPSBrZXlzSW47bG9kYXNoLm1hcCA9IG1hcDtsb2Rhc2gubWFwS2V5cyA9IG1hcEtleXM7bG9kYXNoLm1hcFZhbHVlcyA9IG1hcFZhbHVlcztsb2Rhc2gubWF0Y2hlcyA9IG1hdGNoZXM7bG9kYXNoLm1hdGNoZXNQcm9wZXJ0eSA9IG1hdGNoZXNQcm9wZXJ0eTtsb2Rhc2gubWVtb2l6ZSA9IG1lbW9pemU7bG9kYXNoLm1lcmdlID0gbWVyZ2U7bG9kYXNoLm1lcmdlV2l0aCA9IG1lcmdlV2l0aDtsb2Rhc2gubWV0aG9kID0gbWV0aG9kO2xvZGFzaC5tZXRob2RPZiA9IG1ldGhvZE9mO2xvZGFzaC5taXhpbiA9IG1peGluO2xvZGFzaC5uZWdhdGUgPSBuZWdhdGU7bG9kYXNoLm50aEFyZyA9IG50aEFyZztsb2Rhc2gub21pdCA9IG9taXQ7bG9kYXNoLm9taXRCeSA9IG9taXRCeTtsb2Rhc2gub25jZSA9IG9uY2U7bG9kYXNoLm9yZGVyQnkgPSBvcmRlckJ5O2xvZGFzaC5vdmVyID0gb3Zlcjtsb2Rhc2gub3ZlckFyZ3MgPSBvdmVyQXJncztsb2Rhc2gub3ZlckV2ZXJ5ID0gb3ZlckV2ZXJ5O2xvZGFzaC5vdmVyU29tZSA9IG92ZXJTb21lO2xvZGFzaC5wYXJ0aWFsID0gcGFydGlhbDtsb2Rhc2gucGFydGlhbFJpZ2h0ID0gcGFydGlhbFJpZ2h0O2xvZGFzaC5wYXJ0aXRpb24gPSBwYXJ0aXRpb247bG9kYXNoLnBpY2sgPSBwaWNrO2xvZGFzaC5waWNrQnkgPSBwaWNrQnk7bG9kYXNoLnByb3BlcnR5ID0gcHJvcGVydHk7bG9kYXNoLnByb3BlcnR5T2YgPSBwcm9wZXJ0eU9mO2xvZGFzaC5wdWxsID0gcHVsbDtsb2Rhc2gucHVsbEFsbCA9IHB1bGxBbGw7bG9kYXNoLnB1bGxBbGxCeSA9IHB1bGxBbGxCeTtsb2Rhc2gucHVsbEF0ID0gcHVsbEF0O2xvZGFzaC5yYW5nZSA9IHJhbmdlO2xvZGFzaC5yYW5nZVJpZ2h0ID0gcmFuZ2VSaWdodDtsb2Rhc2gucmVhcmcgPSByZWFyZztsb2Rhc2gucmVqZWN0ID0gcmVqZWN0O2xvZGFzaC5yZW1vdmUgPSByZW1vdmU7bG9kYXNoLnJlc3QgPSByZXN0O2xvZGFzaC5yZXZlcnNlID0gcmV2ZXJzZTtsb2Rhc2guc2FtcGxlU2l6ZSA9IHNhbXBsZVNpemU7bG9kYXNoLnNldCA9IHNldDtsb2Rhc2guc2V0V2l0aCA9IHNldFdpdGg7bG9kYXNoLnNodWZmbGUgPSBzaHVmZmxlO2xvZGFzaC5zbGljZSA9IHNsaWNlO2xvZGFzaC5zb3J0QnkgPSBzb3J0Qnk7bG9kYXNoLnNvcnRlZFVuaXEgPSBzb3J0ZWRVbmlxO2xvZGFzaC5zb3J0ZWRVbmlxQnkgPSBzb3J0ZWRVbmlxQnk7bG9kYXNoLnNwbGl0ID0gc3BsaXQ7bG9kYXNoLnNwcmVhZCA9IHNwcmVhZDtsb2Rhc2gudGFpbCA9IHRhaWw7bG9kYXNoLnRha2UgPSB0YWtlO2xvZGFzaC50YWtlUmlnaHQgPSB0YWtlUmlnaHQ7bG9kYXNoLnRha2VSaWdodFdoaWxlID0gdGFrZVJpZ2h0V2hpbGU7bG9kYXNoLnRha2VXaGlsZSA9IHRha2VXaGlsZTtsb2Rhc2gudGFwID0gdGFwO2xvZGFzaC50aHJvdHRsZSA9IHRocm90dGxlO2xvZGFzaC50aHJ1ID0gdGhydTtsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7bG9kYXNoLnRvUGFpcnMgPSB0b1BhaXJzO2xvZGFzaC50b1BhaXJzSW4gPSB0b1BhaXJzSW47bG9kYXNoLnRvUGF0aCA9IHRvUGF0aDtsb2Rhc2gudG9QbGFpbk9iamVjdCA9IHRvUGxhaW5PYmplY3Q7bG9kYXNoLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtsb2Rhc2gudW5hcnkgPSB1bmFyeTtsb2Rhc2gudW5pb24gPSB1bmlvbjtsb2Rhc2gudW5pb25CeSA9IHVuaW9uQnk7bG9kYXNoLnVuaW9uV2l0aCA9IHVuaW9uV2l0aDtsb2Rhc2gudW5pcSA9IHVuaXE7bG9kYXNoLnVuaXFCeSA9IHVuaXFCeTtsb2Rhc2gudW5pcVdpdGggPSB1bmlxV2l0aDtsb2Rhc2gudW5zZXQgPSB1bnNldDtsb2Rhc2gudW56aXAgPSB1bnppcDtsb2Rhc2gudW56aXBXaXRoID0gdW56aXBXaXRoO2xvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7bG9kYXNoLnZhbHVlc0luID0gdmFsdWVzSW47bG9kYXNoLndpdGhvdXQgPSB3aXRob3V0O2xvZGFzaC53b3JkcyA9IHdvcmRzO2xvZGFzaC53cmFwID0gd3JhcDtsb2Rhc2gueG9yID0geG9yO2xvZGFzaC54b3JCeSA9IHhvckJ5O2xvZGFzaC54b3JXaXRoID0geG9yV2l0aDtsb2Rhc2guemlwID0gemlwO2xvZGFzaC56aXBPYmplY3QgPSB6aXBPYmplY3Q7bG9kYXNoLnppcE9iamVjdERlZXAgPSB6aXBPYmplY3REZWVwO2xvZGFzaC56aXBXaXRoID0gemlwV2l0aDtsb2Rhc2guZXh0ZW5kID0gYXNzaWduSW47bG9kYXNoLmV4dGVuZFdpdGggPSBhc3NpZ25JbldpdGg7bWl4aW4obG9kYXNoLGxvZGFzaCk7bG9kYXNoLmFkZCA9IGFkZDtsb2Rhc2guYXR0ZW1wdCA9IGF0dGVtcHQ7bG9kYXNoLmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtsb2Rhc2guY2FwaXRhbGl6ZSA9IGNhcGl0YWxpemU7bG9kYXNoLmNlaWwgPSBjZWlsO2xvZGFzaC5jbGFtcCA9IGNsYW1wO2xvZGFzaC5jbG9uZSA9IGNsb25lO2xvZGFzaC5jbG9uZURlZXAgPSBjbG9uZURlZXA7bG9kYXNoLmNsb25lRGVlcFdpdGggPSBjbG9uZURlZXBXaXRoO2xvZGFzaC5jbG9uZVdpdGggPSBjbG9uZVdpdGg7bG9kYXNoLmRlYnVyciA9IGRlYnVycjtsb2Rhc2guZW5kc1dpdGggPSBlbmRzV2l0aDtsb2Rhc2guZXEgPSBlcTtsb2Rhc2guZXNjYXBlID0gZXNjYXBlO2xvZGFzaC5lc2NhcGVSZWdFeHAgPSBlc2NhcGVSZWdFeHA7bG9kYXNoLmV2ZXJ5ID0gZXZlcnk7bG9kYXNoLmZpbmQgPSBmaW5kO2xvZGFzaC5maW5kSW5kZXggPSBmaW5kSW5kZXg7bG9kYXNoLmZpbmRLZXkgPSBmaW5kS2V5O2xvZGFzaC5maW5kTGFzdCA9IGZpbmRMYXN0O2xvZGFzaC5maW5kTGFzdEluZGV4ID0gZmluZExhc3RJbmRleDtsb2Rhc2guZmluZExhc3RLZXkgPSBmaW5kTGFzdEtleTtsb2Rhc2guZmxvb3IgPSBmbG9vcjtsb2Rhc2guZm9yRWFjaCA9IGZvckVhY2g7bG9kYXNoLmZvckVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtsb2Rhc2guZm9ySW4gPSBmb3JJbjtsb2Rhc2guZm9ySW5SaWdodCA9IGZvckluUmlnaHQ7bG9kYXNoLmZvck93biA9IGZvck93bjtsb2Rhc2guZm9yT3duUmlnaHQgPSBmb3JPd25SaWdodDtsb2Rhc2guZ2V0ID0gZ2V0O2xvZGFzaC5ndCA9IGd0O2xvZGFzaC5ndGUgPSBndGU7bG9kYXNoLmhhcyA9IGhhcztsb2Rhc2guaGFzSW4gPSBoYXNJbjtsb2Rhc2guaGVhZCA9IGhlYWQ7bG9kYXNoLmlkZW50aXR5ID0gaWRlbnRpdHk7bG9kYXNoLmluY2x1ZGVzID0gaW5jbHVkZXM7bG9kYXNoLmluZGV4T2YgPSBpbmRleE9mO2xvZGFzaC5pblJhbmdlID0gaW5SYW5nZTtsb2Rhc2guaW52b2tlID0gaW52b2tlO2xvZGFzaC5pc0FyZ3VtZW50cyA9IGlzQXJndW1lbnRzO2xvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtsb2Rhc2guaXNBcnJheUxpa2UgPSBpc0FycmF5TGlrZTtsb2Rhc2guaXNBcnJheUxpa2VPYmplY3QgPSBpc0FycmF5TGlrZU9iamVjdDtsb2Rhc2guaXNCb29sZWFuID0gaXNCb29sZWFuO2xvZGFzaC5pc0RhdGUgPSBpc0RhdGU7bG9kYXNoLmlzRWxlbWVudCA9IGlzRWxlbWVudDtsb2Rhc2guaXNFbXB0eSA9IGlzRW1wdHk7bG9kYXNoLmlzRXF1YWwgPSBpc0VxdWFsO2xvZGFzaC5pc0VxdWFsV2l0aCA9IGlzRXF1YWxXaXRoO2xvZGFzaC5pc0Vycm9yID0gaXNFcnJvcjtsb2Rhc2guaXNGaW5pdGUgPSBpc0Zpbml0ZTtsb2Rhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247bG9kYXNoLmlzSW50ZWdlciA9IGlzSW50ZWdlcjtsb2Rhc2guaXNMZW5ndGggPSBpc0xlbmd0aDtsb2Rhc2guaXNNYXRjaCA9IGlzTWF0Y2g7bG9kYXNoLmlzTWF0Y2hXaXRoID0gaXNNYXRjaFdpdGg7bG9kYXNoLmlzTmFOID0gaXNOYU47bG9kYXNoLmlzTmF0aXZlID0gaXNOYXRpdmU7bG9kYXNoLmlzTmlsID0gaXNOaWw7bG9kYXNoLmlzTnVsbCA9IGlzTnVsbDtsb2Rhc2guaXNOdW1iZXIgPSBpc051bWJlcjtsb2Rhc2guaXNPYmplY3QgPSBpc09iamVjdDtsb2Rhc2guaXNPYmplY3RMaWtlID0gaXNPYmplY3RMaWtlO2xvZGFzaC5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtsb2Rhc2guaXNSZWdFeHAgPSBpc1JlZ0V4cDtsb2Rhc2guaXNTYWZlSW50ZWdlciA9IGlzU2FmZUludGVnZXI7bG9kYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7bG9kYXNoLmlzU3ltYm9sID0gaXNTeW1ib2w7bG9kYXNoLmlzVHlwZWRBcnJheSA9IGlzVHlwZWRBcnJheTtsb2Rhc2guaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtsb2Rhc2guam9pbiA9IGpvaW47bG9kYXNoLmtlYmFiQ2FzZSA9IGtlYmFiQ2FzZTtsb2Rhc2gubGFzdCA9IGxhc3Q7bG9kYXNoLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7bG9kYXNoLmxvd2VyQ2FzZSA9IGxvd2VyQ2FzZTtsb2Rhc2gubG93ZXJGaXJzdCA9IGxvd2VyRmlyc3Q7bG9kYXNoLmx0ID0gbHQ7bG9kYXNoLmx0ZSA9IGx0ZTtsb2Rhc2gubWF4ID0gbWF4O2xvZGFzaC5tYXhCeSA9IG1heEJ5O2xvZGFzaC5tZWFuID0gbWVhbjtsb2Rhc2gubWluID0gbWluO2xvZGFzaC5taW5CeSA9IG1pbkJ5O2xvZGFzaC5ub0NvbmZsaWN0ID0gbm9Db25mbGljdDtsb2Rhc2gubm9vcCA9IG5vb3A7bG9kYXNoLm5vdyA9IG5vdztsb2Rhc2gucGFkID0gcGFkO2xvZGFzaC5wYWRFbmQgPSBwYWRFbmQ7bG9kYXNoLnBhZFN0YXJ0ID0gcGFkU3RhcnQ7bG9kYXNoLnBhcnNlSW50ID0gcGFyc2VJbnQ7bG9kYXNoLnJhbmRvbSA9IHJhbmRvbTtsb2Rhc2gucmVkdWNlID0gcmVkdWNlO2xvZGFzaC5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O2xvZGFzaC5yZXBlYXQgPSByZXBlYXQ7bG9kYXNoLnJlcGxhY2UgPSByZXBsYWNlO2xvZGFzaC5yZXN1bHQgPSByZXN1bHQ7bG9kYXNoLnJvdW5kID0gcm91bmQ7bG9kYXNoLnJ1bkluQ29udGV4dCA9IHJ1bkluQ29udGV4dDtsb2Rhc2guc2FtcGxlID0gc2FtcGxlO2xvZGFzaC5zaXplID0gc2l6ZTtsb2Rhc2guc25ha2VDYXNlID0gc25ha2VDYXNlO2xvZGFzaC5zb21lID0gc29tZTtsb2Rhc2guc29ydGVkSW5kZXggPSBzb3J0ZWRJbmRleDtsb2Rhc2guc29ydGVkSW5kZXhCeSA9IHNvcnRlZEluZGV4Qnk7bG9kYXNoLnNvcnRlZEluZGV4T2YgPSBzb3J0ZWRJbmRleE9mO2xvZGFzaC5zb3J0ZWRMYXN0SW5kZXggPSBzb3J0ZWRMYXN0SW5kZXg7bG9kYXNoLnNvcnRlZExhc3RJbmRleEJ5ID0gc29ydGVkTGFzdEluZGV4Qnk7bG9kYXNoLnNvcnRlZExhc3RJbmRleE9mID0gc29ydGVkTGFzdEluZGV4T2Y7bG9kYXNoLnN0YXJ0Q2FzZSA9IHN0YXJ0Q2FzZTtsb2Rhc2guc3RhcnRzV2l0aCA9IHN0YXJ0c1dpdGg7bG9kYXNoLnN1YnRyYWN0ID0gc3VidHJhY3Q7bG9kYXNoLnN1bSA9IHN1bTtsb2Rhc2guc3VtQnkgPSBzdW1CeTtsb2Rhc2gudGVtcGxhdGUgPSB0ZW1wbGF0ZTtsb2Rhc2gudGltZXMgPSB0aW1lcztsb2Rhc2gudG9JbnRlZ2VyID0gdG9JbnRlZ2VyO2xvZGFzaC50b0xlbmd0aCA9IHRvTGVuZ3RoO2xvZGFzaC50b0xvd2VyID0gdG9Mb3dlcjtsb2Rhc2gudG9OdW1iZXIgPSB0b051bWJlcjtsb2Rhc2gudG9TYWZlSW50ZWdlciA9IHRvU2FmZUludGVnZXI7bG9kYXNoLnRvU3RyaW5nID0gdG9TdHJpbmc7bG9kYXNoLnRvVXBwZXIgPSB0b1VwcGVyO2xvZGFzaC50cmltID0gdHJpbTtsb2Rhc2gudHJpbUVuZCA9IHRyaW1FbmQ7bG9kYXNoLnRyaW1TdGFydCA9IHRyaW1TdGFydDtsb2Rhc2gudHJ1bmNhdGUgPSB0cnVuY2F0ZTtsb2Rhc2gudW5lc2NhcGUgPSB1bmVzY2FwZTtsb2Rhc2gudW5pcXVlSWQgPSB1bmlxdWVJZDtsb2Rhc2gudXBwZXJDYXNlID0gdXBwZXJDYXNlO2xvZGFzaC51cHBlckZpcnN0ID0gdXBwZXJGaXJzdDtsb2Rhc2guZWFjaCA9IGZvckVhY2g7bG9kYXNoLmVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtsb2Rhc2guZmlyc3QgPSBoZWFkO21peGluKGxvZGFzaCwoZnVuY3Rpb24oKXt2YXIgc291cmNlPXt9O2Jhc2VGb3JPd24obG9kYXNoLGZ1bmN0aW9uKGZ1bmMsbWV0aG9kTmFtZSl7aWYoIWhhc093blByb3BlcnR5LmNhbGwobG9kYXNoLnByb3RvdHlwZSxtZXRob2ROYW1lKSl7c291cmNlW21ldGhvZE5hbWVdID0gZnVuYzt9fSk7cmV0dXJuIHNvdXJjZTt9KSgpLHtjaGFpbjpmYWxzZX0pO2xvZGFzaC5WRVJTSU9OID0gVkVSU0lPTjthcnJheUVhY2goW1wiYmluZFwiLFwiYmluZEtleVwiLFwiY3VycnlcIixcImN1cnJ5UmlnaHRcIixcInBhcnRpYWxcIixcInBhcnRpYWxSaWdodFwiXSxmdW5jdGlvbihtZXRob2ROYW1lKXtsb2Rhc2hbbWV0aG9kTmFtZV0ucGxhY2Vob2xkZXIgPSBsb2Rhc2g7fSk7YXJyYXlFYWNoKFtcImRyb3BcIixcInRha2VcIl0sZnVuY3Rpb24obWV0aG9kTmFtZSxpbmRleCl7TGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24obil7dmFyIGZpbHRlcmVkPXRoaXMuX19maWx0ZXJlZF9fO2lmKGZpbHRlcmVkICYmICFpbmRleCl7cmV0dXJuIG5ldyBMYXp5V3JhcHBlcih0aGlzKTt9biA9IG4gPT09IHVuZGVmaW5lZD8xOm5hdGl2ZU1heCh0b0ludGVnZXIobiksMCk7dmFyIHJlc3VsdD10aGlzLmNsb25lKCk7aWYoZmlsdGVyZWQpe3Jlc3VsdC5fX3Rha2VDb3VudF9fID0gbmF0aXZlTWluKG4scmVzdWx0Ll9fdGFrZUNvdW50X18pO31lbHNlIHtyZXN1bHQuX192aWV3c19fLnB1c2goe3NpemU6bmF0aXZlTWluKG4sTUFYX0FSUkFZX0xFTkdUSCksdHlwZTptZXRob2ROYW1lICsgKHJlc3VsdC5fX2Rpcl9fIDwgMD9cIlJpZ2h0XCI6XCJcIil9KTt9cmV0dXJuIHJlc3VsdDt9O0xhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lICsgXCJSaWdodFwiXSA9IGZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnJldmVyc2UoKVttZXRob2ROYW1lXShuKS5yZXZlcnNlKCk7fTt9KTthcnJheUVhY2goW1wiZmlsdGVyXCIsXCJtYXBcIixcInRha2VXaGlsZVwiXSxmdW5jdGlvbihtZXRob2ROYW1lLGluZGV4KXt2YXIgdHlwZT1pbmRleCArIDEsaXNGaWx0ZXI9dHlwZSA9PSBMQVpZX0ZJTFRFUl9GTEFHIHx8IHR5cGUgPT0gTEFaWV9XSElMRV9GTEFHO0xhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKGl0ZXJhdGVlKXt2YXIgcmVzdWx0PXRoaXMuY2xvbmUoKTtyZXN1bHQuX19pdGVyYXRlZXNfXy5wdXNoKHtpdGVyYXRlZTpnZXRJdGVyYXRlZShpdGVyYXRlZSwzKSx0eXBlOnR5cGV9KTtyZXN1bHQuX19maWx0ZXJlZF9fID0gcmVzdWx0Ll9fZmlsdGVyZWRfXyB8fCBpc0ZpbHRlcjtyZXR1cm4gcmVzdWx0O307fSk7YXJyYXlFYWNoKFtcImhlYWRcIixcImxhc3RcIl0sZnVuY3Rpb24obWV0aG9kTmFtZSxpbmRleCl7dmFyIHRha2VOYW1lPVwidGFrZVwiICsgKGluZGV4P1wiUmlnaHRcIjpcIlwiKTtMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpe3JldHVybiB0aGlzW3Rha2VOYW1lXSgxKS52YWx1ZSgpWzBdO307fSk7YXJyYXlFYWNoKFtcImluaXRpYWxcIixcInRhaWxcIl0sZnVuY3Rpb24obWV0aG9kTmFtZSxpbmRleCl7dmFyIGRyb3BOYW1lPVwiZHJvcFwiICsgKGluZGV4P1wiXCI6XCJSaWdodFwiKTtMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZmlsdGVyZWRfXz9uZXcgTGF6eVdyYXBwZXIodGhpcyk6dGhpc1tkcm9wTmFtZV0oMSk7fTt9KTtMYXp5V3JhcHBlci5wcm90b3R5cGUuY29tcGFjdCA9IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGlkZW50aXR5KTt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24ocHJlZGljYXRlKXtyZXR1cm4gdGhpcy5maWx0ZXIocHJlZGljYXRlKS5oZWFkKCk7fTtMYXp5V3JhcHBlci5wcm90b3R5cGUuZmluZExhc3QgPSBmdW5jdGlvbihwcmVkaWNhdGUpe3JldHVybiB0aGlzLnJldmVyc2UoKS5maW5kKHByZWRpY2F0ZSk7fTtMYXp5V3JhcHBlci5wcm90b3R5cGUuaW52b2tlTWFwID0gcmVzdChmdW5jdGlvbihwYXRoLGFyZ3Mpe2lmKHR5cGVvZiBwYXRoID09IFwiZnVuY3Rpb25cIil7cmV0dXJuIG5ldyBMYXp5V3JhcHBlcih0aGlzKTt9cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYmFzZUludm9rZSh2YWx1ZSxwYXRoLGFyZ3MpO30pO30pO0xhenlXcmFwcGVyLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihwcmVkaWNhdGUpe3ByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24odmFsdWUpe3JldHVybiAhcHJlZGljYXRlKHZhbHVlKTt9KTt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKHN0YXJ0LGVuZCl7c3RhcnQgPSB0b0ludGVnZXIoc3RhcnQpO3ZhciByZXN1bHQ9dGhpcztpZihyZXN1bHQuX19maWx0ZXJlZF9fICYmIChzdGFydCA+IDAgfHwgZW5kIDwgMCkpe3JldHVybiBuZXcgTGF6eVdyYXBwZXIocmVzdWx0KTt9aWYoc3RhcnQgPCAwKXtyZXN1bHQgPSByZXN1bHQudGFrZVJpZ2h0KC1zdGFydCk7fWVsc2UgaWYoc3RhcnQpe3Jlc3VsdCA9IHJlc3VsdC5kcm9wKHN0YXJ0KTt9aWYoZW5kICE9PSB1bmRlZmluZWQpe2VuZCA9IHRvSW50ZWdlcihlbmQpO3Jlc3VsdCA9IGVuZCA8IDA/cmVzdWx0LmRyb3BSaWdodCgtZW5kKTpyZXN1bHQudGFrZShlbmQgLSBzdGFydCk7fXJldHVybiByZXN1bHQ7fTtMYXp5V3JhcHBlci5wcm90b3R5cGUudGFrZVJpZ2h0V2hpbGUgPSBmdW5jdGlvbihwcmVkaWNhdGUpe3JldHVybiB0aGlzLnJldmVyc2UoKS50YWtlV2hpbGUocHJlZGljYXRlKS5yZXZlcnNlKCk7fTtMYXp5V3JhcHBlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFrZShNQVhfQVJSQVlfTEVOR1RIKTt9O2Jhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLGZ1bmN0aW9uKGZ1bmMsbWV0aG9kTmFtZSl7dmFyIGNoZWNrSXRlcmF0ZWU9L14oPzpmaWx0ZXJ8ZmluZHxtYXB8cmVqZWN0KXxXaGlsZSQvLnRlc3QobWV0aG9kTmFtZSksaXNUYWtlcj0vXig/OmhlYWR8bGFzdCkkLy50ZXN0KG1ldGhvZE5hbWUpLGxvZGFzaEZ1bmM9bG9kYXNoW2lzVGFrZXI/XCJ0YWtlXCIgKyAobWV0aG9kTmFtZSA9PSBcImxhc3RcIj9cIlJpZ2h0XCI6XCJcIik6bWV0aG9kTmFtZV0scmV0VW53cmFwcGVkPWlzVGFrZXIgfHwgL15maW5kLy50ZXN0KG1ldGhvZE5hbWUpO2lmKCFsb2Rhc2hGdW5jKXtyZXR1cm47fWxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpe3ZhciB2YWx1ZT10aGlzLl9fd3JhcHBlZF9fLGFyZ3M9aXNUYWtlcj9bMV06YXJndW1lbnRzLGlzTGF6eT12YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyLGl0ZXJhdGVlPWFyZ3NbMF0sdXNlTGF6eT1pc0xhenkgfHwgaXNBcnJheSh2YWx1ZSk7dmFyIGludGVyY2VwdG9yPWZ1bmN0aW9uIGludGVyY2VwdG9yKHZhbHVlKXt2YXIgcmVzdWx0PWxvZGFzaEZ1bmMuYXBwbHkobG9kYXNoLGFycmF5UHVzaChbdmFsdWVdLGFyZ3MpKTtyZXR1cm4gaXNUYWtlciAmJiBjaGFpbkFsbD9yZXN1bHRbMF06cmVzdWx0O307aWYodXNlTGF6eSAmJiBjaGVja0l0ZXJhdGVlICYmIHR5cGVvZiBpdGVyYXRlZSA9PSBcImZ1bmN0aW9uXCIgJiYgaXRlcmF0ZWUubGVuZ3RoICE9IDEpe2lzTGF6eSA9IHVzZUxhenkgPSBmYWxzZTt9dmFyIGNoYWluQWxsPXRoaXMuX19jaGFpbl9fLGlzSHlicmlkPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsaXNVbndyYXBwZWQ9cmV0VW53cmFwcGVkICYmICFjaGFpbkFsbCxvbmx5TGF6eT1pc0xhenkgJiYgIWlzSHlicmlkO2lmKCFyZXRVbndyYXBwZWQgJiYgdXNlTGF6eSl7dmFsdWUgPSBvbmx5TGF6eT92YWx1ZTpuZXcgTGF6eVdyYXBwZXIodGhpcyk7dmFyIHJlc3VsdD1mdW5jLmFwcGx5KHZhbHVlLGFyZ3MpO3Jlc3VsdC5fX2FjdGlvbnNfXy5wdXNoKHtmdW5jOnRocnUsYXJnczpbaW50ZXJjZXB0b3JdLHRoaXNBcmc6dW5kZWZpbmVkfSk7cmV0dXJuIG5ldyBMb2Rhc2hXcmFwcGVyKHJlc3VsdCxjaGFpbkFsbCk7fWlmKGlzVW53cmFwcGVkICYmIG9ubHlMYXp5KXtyZXR1cm4gZnVuYy5hcHBseSh0aGlzLGFyZ3MpO31yZXN1bHQgPSB0aGlzLnRocnUoaW50ZXJjZXB0b3IpO3JldHVybiBpc1Vud3JhcHBlZD9pc1Rha2VyP3Jlc3VsdC52YWx1ZSgpWzBdOnJlc3VsdC52YWx1ZSgpOnJlc3VsdDt9O30pO2FycmF5RWFjaChbXCJwb3BcIixcInB1c2hcIixcInNoaWZ0XCIsXCJzb3J0XCIsXCJzcGxpY2VcIixcInVuc2hpZnRcIl0sZnVuY3Rpb24obWV0aG9kTmFtZSl7dmFyIGZ1bmM9YXJyYXlQcm90b1ttZXRob2ROYW1lXSxjaGFpbk5hbWU9L14oPzpwdXNofHNvcnR8dW5zaGlmdCkkLy50ZXN0KG1ldGhvZE5hbWUpP1widGFwXCI6XCJ0aHJ1XCIscmV0VW53cmFwcGVkPS9eKD86cG9wfHNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSk7bG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO2lmKHJldFVud3JhcHBlZCAmJiAhdGhpcy5fX2NoYWluX18pe3JldHVybiBmdW5jLmFwcGx5KHRoaXMudmFsdWUoKSxhcmdzKTt9cmV0dXJuIHRoaXNbY2hhaW5OYW1lXShmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmMuYXBwbHkodmFsdWUsYXJncyk7fSk7fTt9KTtiYXNlRm9yT3duKExhenlXcmFwcGVyLnByb3RvdHlwZSxmdW5jdGlvbihmdW5jLG1ldGhvZE5hbWUpe3ZhciBsb2Rhc2hGdW5jPWxvZGFzaFttZXRob2ROYW1lXTtpZihsb2Rhc2hGdW5jKXt2YXIga2V5PWxvZGFzaEZ1bmMubmFtZSArIFwiXCIsbmFtZXM9cmVhbE5hbWVzW2tleV0gfHwgKHJlYWxOYW1lc1trZXldID0gW10pO25hbWVzLnB1c2goe25hbWU6bWV0aG9kTmFtZSxmdW5jOmxvZGFzaEZ1bmN9KTt9fSk7cmVhbE5hbWVzW2NyZWF0ZUh5YnJpZFdyYXBwZXIodW5kZWZpbmVkLEJJTkRfS0VZX0ZMQUcpLm5hbWVdID0gW3tuYW1lOlwid3JhcHBlclwiLGZ1bmM6dW5kZWZpbmVkfV07TGF6eVdyYXBwZXIucHJvdG90eXBlLmNsb25lID0gbGF6eUNsb25lO0xhenlXcmFwcGVyLnByb3RvdHlwZS5yZXZlcnNlID0gbGF6eVJldmVyc2U7TGF6eVdyYXBwZXIucHJvdG90eXBlLnZhbHVlID0gbGF6eVZhbHVlO2xvZGFzaC5wcm90b3R5cGUuYXQgPSB3cmFwcGVyQXQ7bG9kYXNoLnByb3RvdHlwZS5jaGFpbiA9IHdyYXBwZXJDaGFpbjtsb2Rhc2gucHJvdG90eXBlLmNvbW1pdCA9IHdyYXBwZXJDb21taXQ7bG9kYXNoLnByb3RvdHlwZS5mbGF0TWFwID0gd3JhcHBlckZsYXRNYXA7bG9kYXNoLnByb3RvdHlwZS5uZXh0ID0gd3JhcHBlck5leHQ7bG9kYXNoLnByb3RvdHlwZS5wbGFudCA9IHdyYXBwZXJQbGFudDtsb2Rhc2gucHJvdG90eXBlLnJldmVyc2UgPSB3cmFwcGVyUmV2ZXJzZTtsb2Rhc2gucHJvdG90eXBlLnRvSlNPTiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWVPZiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWUgPSB3cmFwcGVyVmFsdWU7aWYoaXRlcmF0b3JTeW1ib2wpe2xvZGFzaC5wcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gd3JhcHBlclRvSXRlcmF0b3I7fXJldHVybiBsb2Rhc2g7fXZhciBfPXJ1bkluQ29udGV4dCgpOyhmcmVlV2luZG93IHx8IGZyZWVTZWxmIHx8IHt9KS5fID0gXztpZih0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSBcIm9iamVjdFwiICYmIGRlZmluZS5hbWQpe2RlZmluZShmdW5jdGlvbigpe3JldHVybiBfO30pO31lbHNlIGlmKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpe2lmKG1vZHVsZUV4cG9ydHMpeyhmcmVlTW9kdWxlLmV4cG9ydHMgPSBfKS5fID0gXzt9ZnJlZUV4cG9ydHMuXyA9IF87fWVsc2Uge3Jvb3QuXyA9IF87fX0pLmNhbGwodW5kZWZpbmVkKTtcblxuY2MuX1JGcG9wKCk7IiwiY2MuX1JGcHVzaChtb2R1bGUsICc0Nzg4ZVZNU0ZoTDJxZ0NnVE4xcnB1aicsICdtYWluJyk7XG4vLyBiaXovbWFpbi9zY3JpcHQvbWFpbi5qc1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBiaXpTb2NrZXQgPSByZXF1aXJlKCcuLi8uLi9zb2NrZXQvYml6LXNvY2tldCcpO1xuXG5jYy5DbGFzcyh7XG4gICAgJ2V4dGVuZHMnOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7fSxcblxuICAgIGVudGVyQWN0aW9uOiBmdW5jdGlvbiBlbnRlckFjdGlvbigpIHtcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdjb250cm9sbGVyJyk7XG4gICAgICAgIGJpelNvY2tldC5jb25uZWN0KCk7XG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge30sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkdCkge31cbn0pO1xuXG5jYy5fUkZwb3AoKTsiLCJjYy5fUkZwdXNoKG1vZHVsZSwgJzM0Mjc1NnBQbHRQdkl0aUt1ZDd6dWNEJywgJ3NvY2tldC5pbycpO1xuLy8gbGliL3NvY2tldC5pby5qc1xuXG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChmKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmKCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGYpO1xuICB9IGVsc2Uge1xuICAgIHZhciBnO2lmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnID0gd2luZG93O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZyA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgZyA9IHRoaXM7XG4gICAgfWcuaW8gPSBmKCk7XG4gIH1cbn0pKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LCBuLCByKSB7XG4gICAgZnVuY3Rpb24gcyhvLCB1KSB7XG4gICAgICBpZiAoIW5bb10pIHtcbiAgICAgICAgaWYgKCF0W29dKSB7XG4gICAgICAgICAgdmFyIGEgPSB0eXBlb2YgcmVxdWlyZSA9PSBcImZ1bmN0aW9uXCIgJiYgcmVxdWlyZTtpZiAoIXUgJiYgYSkgcmV0dXJuIGEobywgITApO2lmIChpKSByZXR1cm4gaShvLCAhMCk7dmFyIGYgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgbyArIFwiJ1wiKTt0aHJvdyAoZi5jb2RlID0gXCJNT0RVTEVfTk9UX0ZPVU5EXCIsIGYpO1xuICAgICAgICB9dmFyIGwgPSBuW29dID0geyBleHBvcnRzOiB7fSB9O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIG4gPSB0W29dWzFdW2VdO3JldHVybiBzKG4gPyBuIDogZSk7XG4gICAgICAgIH0sIGwsIGwuZXhwb3J0cywgZSwgdCwgbiwgcik7XG4gICAgICB9cmV0dXJuIG5bb10uZXhwb3J0cztcbiAgICB9dmFyIGkgPSB0eXBlb2YgcmVxdWlyZSA9PSBcImZ1bmN0aW9uXCIgJiYgcmVxdWlyZTtmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHMocltvXSk7cmV0dXJuIHM7XG4gIH0pKHsgMTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gX2RlcmVxXyhcIi4vbGliL1wiKTtcbiAgICB9LCB7IFwiLi9saWIvXCI6IDIgfV0sIDI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oXCIuL3NvY2tldFwiKTttb2R1bGUuZXhwb3J0cy5wYXJzZXIgPSBfZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTtcbiAgICB9LCB7IFwiLi9zb2NrZXRcIjogMywgXCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5IH1dLCAzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIHRyYW5zcG9ydHMgPSBfZGVyZXFfKFwiLi90cmFuc3BvcnRzXCIpO3ZhciBFbWl0dGVyID0gX2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6c29ja2V0XCIpO3ZhciBpbmRleCA9IF9kZXJlcV8oXCJpbmRleG9mXCIpO3ZhciBwYXJzZXIgPSBfZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTt2YXIgcGFyc2V1cmkgPSBfZGVyZXFfKFwicGFyc2V1cmlcIik7dmFyIHBhcnNlanNvbiA9IF9kZXJlcV8oXCJwYXJzZWpzb25cIik7dmFyIHBhcnNlcXMgPSBfZGVyZXFfKFwicGFyc2Vxc1wiKTttb2R1bGUuZXhwb3J0cyA9IFNvY2tldDtmdW5jdGlvbiBub29wKCkge31mdW5jdGlvbiBTb2NrZXQodXJpLCBvcHRzKSB7XG4gICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNvY2tldCkpIHJldHVybiBuZXcgU29ja2V0KHVyaSwgb3B0cyk7b3B0cyA9IG9wdHMgfHwge307aWYgKHVyaSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB1cmkpIHtcbiAgICAgICAgICAgIG9wdHMgPSB1cmk7dXJpID0gbnVsbDtcbiAgICAgICAgICB9aWYgKHVyaSkge1xuICAgICAgICAgICAgdXJpID0gcGFyc2V1cmkodXJpKTtvcHRzLmhvc3RuYW1lID0gdXJpLmhvc3Q7b3B0cy5zZWN1cmUgPSB1cmkucHJvdG9jb2wgPT0gXCJodHRwc1wiIHx8IHVyaS5wcm90b2NvbCA9PSBcIndzc1wiO29wdHMucG9ydCA9IHVyaS5wb3J0O2lmICh1cmkucXVlcnkpIG9wdHMucXVlcnkgPSB1cmkucXVlcnk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmhvc3QpIHtcbiAgICAgICAgICAgIG9wdHMuaG9zdG5hbWUgPSBwYXJzZXVyaShvcHRzLmhvc3QpLmhvc3Q7XG4gICAgICAgICAgfXRoaXMuc2VjdXJlID0gbnVsbCAhPSBvcHRzLnNlY3VyZSA/IG9wdHMuc2VjdXJlIDogZ2xvYmFsLmxvY2F0aW9uICYmIFwiaHR0cHM6XCIgPT0gbG9jYXRpb24ucHJvdG9jb2w7aWYgKG9wdHMuaG9zdG5hbWUgJiYgIW9wdHMucG9ydCkge1xuICAgICAgICAgICAgb3B0cy5wb3J0ID0gdGhpcy5zZWN1cmUgPyBcIjQ0M1wiIDogXCI4MFwiO1xuICAgICAgICAgIH10aGlzLmFnZW50ID0gb3B0cy5hZ2VudCB8fCBmYWxzZTt0aGlzLmhvc3RuYW1lID0gb3B0cy5ob3N0bmFtZSB8fCAoZ2xvYmFsLmxvY2F0aW9uID8gbG9jYXRpb24uaG9zdG5hbWUgOiBcImxvY2FsaG9zdFwiKTt0aGlzLnBvcnQgPSBvcHRzLnBvcnQgfHwgKGdsb2JhbC5sb2NhdGlvbiAmJiBsb2NhdGlvbi5wb3J0ID8gbG9jYXRpb24ucG9ydCA6IHRoaXMuc2VjdXJlID8gNDQzIDogODApO3RoaXMucXVlcnkgPSBvcHRzLnF1ZXJ5IHx8IHt9O2lmIChcInN0cmluZ1wiID09IHR5cGVvZiB0aGlzLnF1ZXJ5KSB0aGlzLnF1ZXJ5ID0gcGFyc2Vxcy5kZWNvZGUodGhpcy5xdWVyeSk7dGhpcy51cGdyYWRlID0gZmFsc2UgIT09IG9wdHMudXBncmFkZTt0aGlzLnBhdGggPSAob3B0cy5wYXRoIHx8IFwiL2VuZ2luZS5pb1wiKS5yZXBsYWNlKC9cXC8kLywgXCJcIikgKyBcIi9cIjt0aGlzLmZvcmNlSlNPTlAgPSAhIW9wdHMuZm9yY2VKU09OUDt0aGlzLmpzb25wID0gZmFsc2UgIT09IG9wdHMuanNvbnA7dGhpcy5mb3JjZUJhc2U2NCA9ICEhb3B0cy5mb3JjZUJhc2U2NDt0aGlzLmVuYWJsZXNYRFIgPSAhIW9wdHMuZW5hYmxlc1hEUjt0aGlzLnRpbWVzdGFtcFBhcmFtID0gb3B0cy50aW1lc3RhbXBQYXJhbSB8fCBcInRcIjt0aGlzLnRpbWVzdGFtcFJlcXVlc3RzID0gb3B0cy50aW1lc3RhbXBSZXF1ZXN0czt0aGlzLnRyYW5zcG9ydHMgPSBvcHRzLnRyYW5zcG9ydHMgfHwgW1wicG9sbGluZ1wiLCBcIndlYnNvY2tldFwiXTt0aGlzLnJlYWR5U3RhdGUgPSBcIlwiO3RoaXMud3JpdGVCdWZmZXIgPSBbXTt0aGlzLnBvbGljeVBvcnQgPSBvcHRzLnBvbGljeVBvcnQgfHwgODQzO3RoaXMucmVtZW1iZXJVcGdyYWRlID0gb3B0cy5yZW1lbWJlclVwZ3JhZGUgfHwgZmFsc2U7dGhpcy5iaW5hcnlUeXBlID0gbnVsbDt0aGlzLm9ubHlCaW5hcnlVcGdyYWRlcyA9IG9wdHMub25seUJpbmFyeVVwZ3JhZGVzO3RoaXMucGVyTWVzc2FnZURlZmxhdGUgPSBmYWxzZSAhPT0gb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSA/IG9wdHMucGVyTWVzc2FnZURlZmxhdGUgfHwge30gOiBmYWxzZTtpZiAodHJ1ZSA9PT0gdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSkgdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IHt9O2lmICh0aGlzLnBlck1lc3NhZ2VEZWZsYXRlICYmIG51bGwgPT0gdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkID0gMTAyNDtcbiAgICAgICAgICB9dGhpcy5wZnggPSBvcHRzLnBmeCB8fCBudWxsO3RoaXMua2V5ID0gb3B0cy5rZXkgfHwgbnVsbDt0aGlzLnBhc3NwaHJhc2UgPSBvcHRzLnBhc3NwaHJhc2UgfHwgbnVsbDt0aGlzLmNlcnQgPSBvcHRzLmNlcnQgfHwgbnVsbDt0aGlzLmNhID0gb3B0cy5jYSB8fCBudWxsO3RoaXMuY2lwaGVycyA9IG9wdHMuY2lwaGVycyB8fCBudWxsO3RoaXMucmVqZWN0VW5hdXRob3JpemVkID0gb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gXCJvYmplY3RcIiAmJiBnbG9iYWw7aWYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5leHRyYUhlYWRlcnMgJiYgT2JqZWN0LmtleXMob3B0cy5leHRyYUhlYWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9dGhpcy5vcGVuKCk7XG4gICAgICAgIH1Tb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7RW1pdHRlcihTb2NrZXQucHJvdG90eXBlKTtTb2NrZXQucHJvdG9jb2wgPSBwYXJzZXIucHJvdG9jb2w7U29ja2V0LlNvY2tldCA9IFNvY2tldDtTb2NrZXQuVHJhbnNwb3J0ID0gX2RlcmVxXyhcIi4vdHJhbnNwb3J0XCIpO1NvY2tldC50cmFuc3BvcnRzID0gX2RlcmVxXyhcIi4vdHJhbnNwb3J0c1wiKTtTb2NrZXQucGFyc2VyID0gX2RlcmVxXyhcImVuZ2luZS5pby1wYXJzZXJcIik7U29ja2V0LnByb3RvdHlwZS5jcmVhdGVUcmFuc3BvcnQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIGRlYnVnKCdjcmVhdGluZyB0cmFuc3BvcnQgXCIlc1wiJywgbmFtZSk7dmFyIHF1ZXJ5ID0gY2xvbmUodGhpcy5xdWVyeSk7cXVlcnkuRUlPID0gcGFyc2VyLnByb3RvY29sO3F1ZXJ5LnRyYW5zcG9ydCA9IG5hbWU7aWYgKHRoaXMuaWQpIHF1ZXJ5LnNpZCA9IHRoaXMuaWQ7dmFyIHRyYW5zcG9ydCA9IG5ldyB0cmFuc3BvcnRzW25hbWVdKHsgYWdlbnQ6IHRoaXMuYWdlbnQsIGhvc3RuYW1lOiB0aGlzLmhvc3RuYW1lLCBwb3J0OiB0aGlzLnBvcnQsIHNlY3VyZTogdGhpcy5zZWN1cmUsIHBhdGg6IHRoaXMucGF0aCwgcXVlcnk6IHF1ZXJ5LCBmb3JjZUpTT05QOiB0aGlzLmZvcmNlSlNPTlAsIGpzb25wOiB0aGlzLmpzb25wLCBmb3JjZUJhc2U2NDogdGhpcy5mb3JjZUJhc2U2NCwgZW5hYmxlc1hEUjogdGhpcy5lbmFibGVzWERSLCB0aW1lc3RhbXBSZXF1ZXN0czogdGhpcy50aW1lc3RhbXBSZXF1ZXN0cywgdGltZXN0YW1wUGFyYW06IHRoaXMudGltZXN0YW1wUGFyYW0sIHBvbGljeVBvcnQ6IHRoaXMucG9saWN5UG9ydCwgc29ja2V0OiB0aGlzLCBwZng6IHRoaXMucGZ4LCBrZXk6IHRoaXMua2V5LCBwYXNzcGhyYXNlOiB0aGlzLnBhc3NwaHJhc2UsIGNlcnQ6IHRoaXMuY2VydCwgY2E6IHRoaXMuY2EsIGNpcGhlcnM6IHRoaXMuY2lwaGVycywgcmVqZWN0VW5hdXRob3JpemVkOiB0aGlzLnJlamVjdFVuYXV0aG9yaXplZCwgcGVyTWVzc2FnZURlZmxhdGU6IHRoaXMucGVyTWVzc2FnZURlZmxhdGUsIGV4dHJhSGVhZGVyczogdGhpcy5leHRyYUhlYWRlcnMgfSk7cmV0dXJuIHRyYW5zcG9ydDtcbiAgICAgICAgfTtmdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgICAgICAgICB2YXIgbyA9IHt9O2ZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgIG9baV0gPSBvYmpbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfXJldHVybiBvO1xuICAgICAgICB9U29ja2V0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciB0cmFuc3BvcnQ7aWYgKHRoaXMucmVtZW1iZXJVcGdyYWRlICYmIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgJiYgdGhpcy50cmFuc3BvcnRzLmluZGV4T2YoXCJ3ZWJzb2NrZXRcIikgIT0gLTEpIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IFwid2Vic29ja2V0XCI7XG4gICAgICAgICAgfSBlbHNlIGlmICgwID09PSB0aGlzLnRyYW5zcG9ydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIFwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGVcIik7XG4gICAgICAgICAgICB9LCAwKTtyZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IHRoaXMudHJhbnNwb3J0c1swXTtcbiAgICAgICAgICB9dGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7dHJ5IHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnRzLnNoaWZ0KCk7dGhpcy5vcGVuKCk7cmV0dXJuO1xuICAgICAgICAgIH10cmFuc3BvcnQub3BlbigpO3RoaXMuc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5zZXRUcmFuc3BvcnQgPSBmdW5jdGlvbiAodHJhbnNwb3J0KSB7XG4gICAgICAgICAgZGVidWcoXCJzZXR0aW5nIHRyYW5zcG9ydCAlc1wiLCB0cmFuc3BvcnQubmFtZSk7dmFyIHNlbGYgPSB0aGlzO2lmICh0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgZGVidWcoXCJjbGVhcmluZyBleGlzdGluZyB0cmFuc3BvcnQgJXNcIiwgdGhpcy50cmFuc3BvcnQubmFtZSk7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgfXRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0O3RyYW5zcG9ydC5vbihcImRyYWluXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYub25EcmFpbigpO1xuICAgICAgICAgIH0pLm9uKFwicGFja2V0XCIsIGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgICAgIHNlbGYub25QYWNrZXQocGFja2V0KTtcbiAgICAgICAgICB9KS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzZWxmLm9uRXJyb3IoZSk7XG4gICAgICAgICAgfSkub24oXCJjbG9zZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5wcm9iZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgZGVidWcoJ3Byb2JpbmcgdHJhbnNwb3J0IFwiJXNcIicsIG5hbWUpO3ZhciB0cmFuc3BvcnQgPSB0aGlzLmNyZWF0ZVRyYW5zcG9ydChuYW1lLCB7IHByb2JlOiAxIH0pLFxuICAgICAgICAgICAgICBmYWlsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgc2VsZiA9IHRoaXM7U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO2Z1bmN0aW9uIG9uVHJhbnNwb3J0T3BlbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm9ubHlCaW5hcnlVcGdyYWRlcykge1xuICAgICAgICAgICAgICB2YXIgdXBncmFkZUxvc2VzQmluYXJ5ID0gIXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgc2VsZi50cmFuc3BvcnQuc3VwcG9ydHNCaW5hcnk7ZmFpbGVkID0gZmFpbGVkIHx8IHVwZ3JhZGVMb3Nlc0JpbmFyeTtcbiAgICAgICAgICAgIH1pZiAoZmFpbGVkKSByZXR1cm47ZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgb3BlbmVkJywgbmFtZSk7dHJhbnNwb3J0LnNlbmQoW3sgdHlwZTogXCJwaW5nXCIsIGRhdGE6IFwicHJvYmVcIiB9XSk7dHJhbnNwb3J0Lm9uY2UoXCJwYWNrZXRcIiwgZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICBpZiAoZmFpbGVkKSByZXR1cm47aWYgKFwicG9uZ1wiID09IG1zZy50eXBlICYmIFwicHJvYmVcIiA9PSBtc2cuZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIHBvbmcnLCBuYW1lKTtzZWxmLnVwZ3JhZGluZyA9IHRydWU7c2VsZi5lbWl0KFwidXBncmFkaW5nXCIsIHRyYW5zcG9ydCk7aWYgKCF0cmFuc3BvcnQpIHJldHVybjtTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gXCJ3ZWJzb2NrZXRcIiA9PSB0cmFuc3BvcnQubmFtZTtkZWJ1ZygncGF1c2luZyBjdXJyZW50IHRyYW5zcG9ydCBcIiVzXCInLCBzZWxmLnRyYW5zcG9ydC5uYW1lKTtzZWxmLnRyYW5zcG9ydC5wYXVzZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZmFpbGVkKSByZXR1cm47aWYgKFwiY2xvc2VkXCIgPT0gc2VsZi5yZWFkeVN0YXRlKSByZXR1cm47ZGVidWcoXCJjaGFuZ2luZyB0cmFuc3BvcnQgYW5kIHNlbmRpbmcgdXBncmFkZSBwYWNrZXRcIik7Y2xlYW51cCgpO3NlbGYuc2V0VHJhbnNwb3J0KHRyYW5zcG9ydCk7dHJhbnNwb3J0LnNlbmQoW3sgdHlwZTogXCJ1cGdyYWRlXCIgfV0pO3NlbGYuZW1pdChcInVwZ3JhZGVcIiwgdHJhbnNwb3J0KTt0cmFuc3BvcnQgPSBudWxsO3NlbGYudXBncmFkaW5nID0gZmFsc2U7c2VsZi5mbHVzaCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCcsIG5hbWUpO3ZhciBlcnIgPSBuZXcgRXJyb3IoXCJwcm9iZSBlcnJvclwiKTtlcnIudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7c2VsZi5lbWl0KFwidXBncmFkZUVycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1mdW5jdGlvbiBmcmVlemVUcmFuc3BvcnQoKSB7XG4gICAgICAgICAgICBpZiAoZmFpbGVkKSByZXR1cm47ZmFpbGVkID0gdHJ1ZTtjbGVhbnVwKCk7dHJhbnNwb3J0LmNsb3NlKCk7dHJhbnNwb3J0ID0gbnVsbDtcbiAgICAgICAgICB9ZnVuY3Rpb24gb25lcnJvcihlcnIpIHtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yOiBcIiArIGVycik7ZXJyb3IudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7ZnJlZXplVHJhbnNwb3J0KCk7ZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgZmFpbGVkIGJlY2F1c2Ugb2YgZXJyb3I6ICVzJywgbmFtZSwgZXJyKTtzZWxmLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyb3IpO1xuICAgICAgICAgIH1mdW5jdGlvbiBvblRyYW5zcG9ydENsb3NlKCkge1xuICAgICAgICAgICAgb25lcnJvcihcInRyYW5zcG9ydCBjbG9zZWRcIik7XG4gICAgICAgICAgfWZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgICAgICAgICBvbmVycm9yKFwic29ja2V0IGNsb3NlZFwiKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gb251cGdyYWRlKHRvKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNwb3J0ICYmIHRvLm5hbWUgIT0gdHJhbnNwb3J0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgZGVidWcoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsIHRvLm5hbWUsIHRyYW5zcG9ydC5uYW1lKTtmcmVlemVUcmFuc3BvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcIm9wZW5cIiwgb25UcmFuc3BvcnRPcGVuKTt0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBvbmVycm9yKTt0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvblRyYW5zcG9ydENsb3NlKTtzZWxmLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIiwgb25jbG9zZSk7c2VsZi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGluZ1wiLCBvbnVwZ3JhZGUpO1xuICAgICAgICAgIH10cmFuc3BvcnQub25jZShcIm9wZW5cIiwgb25UcmFuc3BvcnRPcGVuKTt0cmFuc3BvcnQub25jZShcImVycm9yXCIsIG9uZXJyb3IpO3RyYW5zcG9ydC5vbmNlKFwiY2xvc2VcIiwgb25UcmFuc3BvcnRDbG9zZSk7dGhpcy5vbmNlKFwiY2xvc2VcIiwgb25jbG9zZSk7dGhpcy5vbmNlKFwidXBncmFkaW5nXCIsIG9udXBncmFkZSk7dHJhbnNwb3J0Lm9wZW4oKTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkZWJ1ZyhcInNvY2tldCBvcGVuXCIpO3RoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO1NvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBcIndlYnNvY2tldFwiID09IHRoaXMudHJhbnNwb3J0Lm5hbWU7dGhpcy5lbWl0KFwib3BlblwiKTt0aGlzLmZsdXNoKCk7aWYgKFwib3BlblwiID09IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnVwZ3JhZGUgJiYgdGhpcy50cmFuc3BvcnQucGF1c2UpIHtcbiAgICAgICAgICAgIGRlYnVnKFwic3RhcnRpbmcgdXBncmFkZSBwcm9iZXNcIik7Zm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLnVwZ3JhZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICB0aGlzLnByb2JlKHRoaXMudXBncmFkZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uUGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICBkZWJ1Zygnc29ja2V0IHJlY2VpdmU6IHR5cGUgXCIlc1wiLCBkYXRhIFwiJXNcIicsIHBhY2tldC50eXBlLCBwYWNrZXQuZGF0YSk7dGhpcy5lbWl0KFwicGFja2V0XCIsIHBhY2tldCk7dGhpcy5lbWl0KFwiaGVhcnRiZWF0XCIpO3N3aXRjaCAocGFja2V0LnR5cGUpIHtjYXNlIFwib3BlblwiOlxuICAgICAgICAgICAgICAgIHRoaXMub25IYW5kc2hha2UocGFyc2Vqc29uKHBhY2tldC5kYXRhKSk7YnJlYWs7Y2FzZSBcInBvbmdcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBpbmcoKTt0aGlzLmVtaXQoXCJwb25nXCIpO2JyZWFrO2Nhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7ZXJyLmNvZGUgPSBwYWNrZXQuZGF0YTt0aGlzLm9uRXJyb3IoZXJyKTticmVhaztjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImRhdGFcIiwgcGFja2V0LmRhdGEpO3RoaXMuZW1pdChcIm1lc3NhZ2VcIiwgcGFja2V0LmRhdGEpO2JyZWFrO31cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWcoJ3BhY2tldCByZWNlaXZlZCB3aXRoIHNvY2tldCByZWFkeVN0YXRlIFwiJXNcIicsIHRoaXMucmVhZHlTdGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUub25IYW5kc2hha2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHRoaXMuZW1pdChcImhhbmRzaGFrZVwiLCBkYXRhKTt0aGlzLmlkID0gZGF0YS5zaWQ7dGhpcy50cmFuc3BvcnQucXVlcnkuc2lkID0gZGF0YS5zaWQ7dGhpcy51cGdyYWRlcyA9IHRoaXMuZmlsdGVyVXBncmFkZXMoZGF0YS51cGdyYWRlcyk7dGhpcy5waW5nSW50ZXJ2YWwgPSBkYXRhLnBpbmdJbnRlcnZhbDt0aGlzLnBpbmdUaW1lb3V0ID0gZGF0YS5waW5nVGltZW91dDt0aGlzLm9uT3BlbigpO2lmIChcImNsb3NlZFwiID09IHRoaXMucmVhZHlTdGF0ZSkgcmV0dXJuO3RoaXMuc2V0UGluZygpO3RoaXMucmVtb3ZlTGlzdGVuZXIoXCJoZWFydGJlYXRcIiwgdGhpcy5vbkhlYXJ0YmVhdCk7dGhpcy5vbihcImhlYXJ0YmVhdFwiLCB0aGlzLm9uSGVhcnRiZWF0KTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uSGVhcnRiZWF0ID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5waW5nVGltZW91dFRpbWVyKTt2YXIgc2VsZiA9IHRoaXM7c2VsZi5waW5nVGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoXCJjbG9zZWRcIiA9PSBzZWxmLnJlYWR5U3RhdGUpIHJldHVybjtzZWxmLm9uQ2xvc2UoXCJwaW5nIHRpbWVvdXRcIik7XG4gICAgICAgICAgfSwgdGltZW91dCB8fCBzZWxmLnBpbmdJbnRlcnZhbCArIHNlbGYucGluZ1RpbWVvdXQpO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUuc2V0UGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7Y2xlYXJUaW1lb3V0KHNlbGYucGluZ0ludGVydmFsVGltZXIpO3NlbGYucGluZ0ludGVydmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlYnVnKFwid3JpdGluZyBwaW5nIHBhY2tldCAtIGV4cGVjdGluZyBwb25nIHdpdGhpbiAlc21zXCIsIHNlbGYucGluZ1RpbWVvdXQpO3NlbGYucGluZygpO3NlbGYub25IZWFydGJlYXQoc2VsZi5waW5nVGltZW91dCk7XG4gICAgICAgICAgfSwgc2VsZi5waW5nSW50ZXJ2YWwpO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUucGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dGhpcy5zZW5kUGFja2V0KFwicGluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmVtaXQoXCJwaW5nXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUub25EcmFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLndyaXRlQnVmZmVyLnNwbGljZSgwLCB0aGlzLnByZXZCdWZmZXJMZW4pO3RoaXMucHJldkJ1ZmZlckxlbiA9IDA7aWYgKDAgPT09IHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJkcmFpblwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChcImNsb3NlZFwiICE9IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnRyYW5zcG9ydC53cml0YWJsZSAmJiAhdGhpcy51cGdyYWRpbmcgJiYgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlYnVnKFwiZmx1c2hpbmcgJWQgcGFja2V0cyBpbiBzb2NrZXRcIiwgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpO3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy53cml0ZUJ1ZmZlcik7dGhpcy5wcmV2QnVmZmVyTGVuID0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg7dGhpcy5lbWl0KFwiZmx1c2hcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUud3JpdGUgPSBTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAobXNnLCBvcHRpb25zLCBmbikge1xuICAgICAgICAgIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIiwgbXNnLCBvcHRpb25zLCBmbik7cmV0dXJuIHRoaXM7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5zZW5kUGFja2V0ID0gZnVuY3Rpb24gKHR5cGUsIGRhdGEsIG9wdGlvbnMsIGZuKSB7XG4gICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGF0YSkge1xuICAgICAgICAgICAgZm4gPSBkYXRhO2RhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfWlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGZuID0gb3B0aW9ucztvcHRpb25zID0gbnVsbDtcbiAgICAgICAgICB9aWYgKFwiY2xvc2luZ1wiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcImNsb3NlZFwiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtvcHRpb25zLmNvbXByZXNzID0gZmFsc2UgIT09IG9wdGlvbnMuY29tcHJlc3M7dmFyIHBhY2tldCA9IHsgdHlwZTogdHlwZSwgZGF0YTogZGF0YSwgb3B0aW9uczogb3B0aW9ucyB9O3RoaXMuZW1pdChcInBhY2tldENyZWF0ZVwiLCBwYWNrZXQpO3RoaXMud3JpdGVCdWZmZXIucHVzaChwYWNrZXQpO2lmIChmbikgdGhpcy5vbmNlKFwiZmx1c2hcIiwgZm4pO3RoaXMuZmx1c2goKTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NpbmdcIjt2YXIgc2VsZiA9IHRoaXM7aWYgKHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoaXMub25jZShcImRyYWluXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51cGdyYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgIHdhaXRGb3JVcGdyYWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy51cGdyYWRpbmcpIHtcbiAgICAgICAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICAgc2VsZi5vbkNsb3NlKFwiZm9yY2VkIGNsb3NlXCIpO2RlYnVnKFwic29ja2V0IGNsb3NpbmcgLSB0ZWxsaW5nIHRyYW5zcG9ydCB0byBjbG9zZVwiKTtzZWxmLnRyYW5zcG9ydC5jbG9zZSgpO1xuICAgICAgICAgIH1mdW5jdGlvbiBjbGVhbnVwQW5kQ2xvc2UoKSB7XG4gICAgICAgICAgICBzZWxmLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkZVwiLCBjbGVhbnVwQW5kQ2xvc2UpO3NlbGYucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlRXJyb3JcIiwgY2xlYW51cEFuZENsb3NlKTtjbG9zZSgpO1xuICAgICAgICAgIH1mdW5jdGlvbiB3YWl0Rm9yVXBncmFkZSgpIHtcbiAgICAgICAgICAgIHNlbGYub25jZShcInVwZ3JhZGVcIiwgY2xlYW51cEFuZENsb3NlKTtzZWxmLm9uY2UoXCJ1cGdyYWRlRXJyb3JcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgICAgICB9cmV0dXJuIHRoaXM7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGRlYnVnKFwic29ja2V0IGVycm9yICVqXCIsIGVycik7U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO3RoaXMuZW1pdChcImVycm9yXCIsIGVycik7dGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsIGVycik7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKHJlYXNvbiwgZGVzYykge1xuICAgICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlIHx8IFwiY2xvc2luZ1wiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgZGVidWcoJ3NvY2tldCBjbG9zZSB3aXRoIHJlYXNvbjogXCIlc1wiJywgcmVhc29uKTt2YXIgc2VsZiA9IHRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ0ludGVydmFsVGltZXIpO2NsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO3RoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycyhcImNsb3NlXCIpO3RoaXMudHJhbnNwb3J0LmNsb3NlKCk7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7dGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjt0aGlzLmlkID0gbnVsbDt0aGlzLmVtaXQoXCJjbG9zZVwiLCByZWFzb24sIGRlc2MpO3NlbGYud3JpdGVCdWZmZXIgPSBbXTtzZWxmLnByZXZCdWZmZXJMZW4gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmZpbHRlclVwZ3JhZGVzID0gZnVuY3Rpb24gKHVwZ3JhZGVzKSB7XG4gICAgICAgICAgdmFyIGZpbHRlcmVkVXBncmFkZXMgPSBbXTtmb3IgKHZhciBpID0gMCwgaiA9IHVwZ3JhZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgaWYgKH5pbmRleCh0aGlzLnRyYW5zcG9ydHMsIHVwZ3JhZGVzW2ldKSkgZmlsdGVyZWRVcGdyYWRlcy5wdXNoKHVwZ3JhZGVzW2ldKTtcbiAgICAgICAgICB9cmV0dXJuIGZpbHRlcmVkVXBncmFkZXM7XG4gICAgICAgIH07XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL3RyYW5zcG9ydFwiOiA0LCBcIi4vdHJhbnNwb3J0c1wiOiA1LCBcImNvbXBvbmVudC1lbWl0dGVyXCI6IDE1LCBkZWJ1ZzogMTcsIFwiZW5naW5lLmlvLXBhcnNlclwiOiAxOSwgaW5kZXhvZjogMjMsIHBhcnNlanNvbjogMjYsIHBhcnNlcXM6IDI3LCBwYXJzZXVyaTogMjggfV0sIDQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgcGFyc2VyID0gX2RlcmVxXyhcImVuZ2luZS5pby1wYXJzZXJcIik7dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7bW9kdWxlLmV4cG9ydHMgPSBUcmFuc3BvcnQ7ZnVuY3Rpb24gVHJhbnNwb3J0KG9wdHMpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gb3B0cy5wYXRoO3RoaXMuaG9zdG5hbWUgPSBvcHRzLmhvc3RuYW1lO3RoaXMucG9ydCA9IG9wdHMucG9ydDt0aGlzLnNlY3VyZSA9IG9wdHMuc2VjdXJlO3RoaXMucXVlcnkgPSBvcHRzLnF1ZXJ5O3RoaXMudGltZXN0YW1wUGFyYW0gPSBvcHRzLnRpbWVzdGFtcFBhcmFtO3RoaXMudGltZXN0YW1wUmVxdWVzdHMgPSBvcHRzLnRpbWVzdGFtcFJlcXVlc3RzO3RoaXMucmVhZHlTdGF0ZSA9IFwiXCI7dGhpcy5hZ2VudCA9IG9wdHMuYWdlbnQgfHwgZmFsc2U7dGhpcy5zb2NrZXQgPSBvcHRzLnNvY2tldDt0aGlzLmVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7dGhpcy5wZnggPSBvcHRzLnBmeDt0aGlzLmtleSA9IG9wdHMua2V5O3RoaXMucGFzc3BocmFzZSA9IG9wdHMucGFzc3BocmFzZTt0aGlzLmNlcnQgPSBvcHRzLmNlcnQ7dGhpcy5jYSA9IG9wdHMuY2E7dGhpcy5jaXBoZXJzID0gb3B0cy5jaXBoZXJzO3RoaXMucmVqZWN0VW5hdXRob3JpemVkID0gb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7dGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVycztcbiAgICAgIH1FbWl0dGVyKFRyYW5zcG9ydC5wcm90b3R5cGUpO1RyYW5zcG9ydC5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChtc2csIGRlc2MpIHtcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihtc2cpO2Vyci50eXBlID0gXCJUcmFuc3BvcnRFcnJvclwiO2Vyci5kZXNjcmlwdGlvbiA9IGRlc2M7dGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtyZXR1cm4gdGhpcztcbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXCJjbG9zZWRcIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJcIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjt0aGlzLmRvT3BlbigpO1xuICAgICAgICB9cmV0dXJuIHRoaXM7XG4gICAgICB9O1RyYW5zcG9ydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgdGhpcy5kb0Nsb3NlKCk7dGhpcy5vbkNsb3NlKCk7XG4gICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKHBhY2tldHMpIHtcbiAgICAgICAgaWYgKFwib3BlblwiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHRoaXMud3JpdGUocGFja2V0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IG5vdCBvcGVuXCIpO1xuICAgICAgICB9XG4gICAgICB9O1RyYW5zcG9ydC5wcm90b3R5cGUub25PcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5cIjt0aGlzLndyaXRhYmxlID0gdHJ1ZTt0aGlzLmVtaXQoXCJvcGVuXCIpO1xuICAgICAgfTtUcmFuc3BvcnQucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBwYWNrZXQgPSBwYXJzZXIuZGVjb2RlUGFja2V0KGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO3RoaXMub25QYWNrZXQocGFja2V0KTtcbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5vblBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgdGhpcy5lbWl0KFwicGFja2V0XCIsIHBhY2tldCk7XG4gICAgICB9O1RyYW5zcG9ydC5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjt0aGlzLmVtaXQoXCJjbG9zZVwiKTtcbiAgICAgIH07XG4gICAgfSwgeyBcImNvbXBvbmVudC1lbWl0dGVyXCI6IDE1LCBcImVuZ2luZS5pby1wYXJzZXJcIjogMTkgfV0sIDU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3QgPSBfZGVyZXFfKFwieG1saHR0cHJlcXVlc3Qtc3NsXCIpO3ZhciBYSFIgPSBfZGVyZXFfKFwiLi9wb2xsaW5nLXhoclwiKTt2YXIgSlNPTlAgPSBfZGVyZXFfKFwiLi9wb2xsaW5nLWpzb25wXCIpO3ZhciB3ZWJzb2NrZXQgPSBfZGVyZXFfKFwiLi93ZWJzb2NrZXRcIik7ZXhwb3J0cy5wb2xsaW5nID0gcG9sbGluZztleHBvcnRzLndlYnNvY2tldCA9IHdlYnNvY2tldDtmdW5jdGlvbiBwb2xsaW5nKG9wdHMpIHtcbiAgICAgICAgICB2YXIgeGhyO3ZhciB4ZCA9IGZhbHNlO3ZhciB4cyA9IGZhbHNlO3ZhciBqc29ucCA9IGZhbHNlICE9PSBvcHRzLmpzb25wO2lmIChnbG9iYWwubG9jYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBpc1NTTCA9IFwiaHR0cHM6XCIgPT0gbG9jYXRpb24ucHJvdG9jb2w7dmFyIHBvcnQgPSBsb2NhdGlvbi5wb3J0O2lmICghcG9ydCkge1xuICAgICAgICAgICAgICBwb3J0ID0gaXNTU0wgPyA0NDMgOiA4MDtcbiAgICAgICAgICAgIH14ZCA9IG9wdHMuaG9zdG5hbWUgIT0gbG9jYXRpb24uaG9zdG5hbWUgfHwgcG9ydCAhPSBvcHRzLnBvcnQ7eHMgPSBvcHRzLnNlY3VyZSAhPSBpc1NTTDtcbiAgICAgICAgICB9b3B0cy54ZG9tYWluID0geGQ7b3B0cy54c2NoZW1lID0geHM7eGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO2lmIChcIm9wZW5cIiBpbiB4aHIgJiYgIW9wdHMuZm9yY2VKU09OUCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYSFIob3B0cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghanNvbnApIHRocm93IG5ldyBFcnJvcihcIkpTT05QIGRpc2FibGVkXCIpO3JldHVybiBuZXcgSlNPTlAob3B0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL3BvbGxpbmctanNvbnBcIjogNiwgXCIuL3BvbGxpbmcteGhyXCI6IDcsIFwiLi93ZWJzb2NrZXRcIjogOSwgXCJ4bWxodHRwcmVxdWVzdC1zc2xcIjogMTAgfV0sIDY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgUG9sbGluZyA9IF9kZXJlcV8oXCIuL3BvbGxpbmdcIik7dmFyIGluaGVyaXQgPSBfZGVyZXFfKFwiY29tcG9uZW50LWluaGVyaXRcIik7bW9kdWxlLmV4cG9ydHMgPSBKU09OUFBvbGxpbmc7dmFyIHJOZXdsaW5lID0gL1xcbi9nO3ZhciByRXNjYXBlZE5ld2xpbmUgPSAvXFxcXG4vZzt2YXIgY2FsbGJhY2tzO3ZhciBpbmRleCA9IDA7ZnVuY3Rpb24gZW1wdHkoKSB7fWZ1bmN0aW9uIEpTT05QUG9sbGluZyhvcHRzKSB7XG4gICAgICAgICAgUG9sbGluZy5jYWxsKHRoaXMsIG9wdHMpO3RoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O2lmICghY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICBpZiAoIWdsb2JhbC5fX19laW8pIGdsb2JhbC5fX19laW8gPSBbXTtjYWxsYmFja3MgPSBnbG9iYWwuX19fZWlvO1xuICAgICAgICAgIH10aGlzLmluZGV4ID0gY2FsbGJhY2tzLmxlbmd0aDt2YXIgc2VsZiA9IHRoaXM7Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgc2VsZi5vbkRhdGEobXNnKTtcbiAgICAgICAgICB9KTt0aGlzLnF1ZXJ5LmogPSB0aGlzLmluZGV4O2lmIChnbG9iYWwuZG9jdW1lbnQgJiYgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHNlbGYuc2NyaXB0KSBzZWxmLnNjcmlwdC5vbmVycm9yID0gZW1wdHk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9aW5oZXJpdChKU09OUFBvbGxpbmcsIFBvbGxpbmcpO0pTT05QUG9sbGluZy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtKU09OUFBvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2NyaXB0KSB7XG4gICAgICAgICAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KTt0aGlzLnNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgfWlmICh0aGlzLmZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZm9ybSk7dGhpcy5mb3JtID0gbnVsbDt0aGlzLmlmcmFtZSA9IG51bGw7XG4gICAgICAgICAgfVBvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtKU09OUFBvbGxpbmcucHJvdG90eXBlLmRvUG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7aWYgKHRoaXMuc2NyaXB0KSB7XG4gICAgICAgICAgICB0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KTt0aGlzLnNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgfXNjcmlwdC5hc3luYyA9IHRydWU7c2NyaXB0LnNyYyA9IHRoaXMudXJpKCk7c2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2VsZi5vbkVycm9yKFwianNvbnAgcG9sbCBlcnJvclwiLCBlKTtcbiAgICAgICAgICB9O3ZhciBpbnNlcnRBdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdO2lmIChpbnNlcnRBdCkge1xuICAgICAgICAgICAgaW5zZXJ0QXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2NyaXB0LCBpbnNlcnRBdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgfXRoaXMuc2NyaXB0ID0gc2NyaXB0O3ZhciBpc1VBZ2Vja28gPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL2dlY2tvL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZiAoaXNVQWdlY2tvKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Xcml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBmbikge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztpZiAoIXRoaXMuZm9ybSkge1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTt2YXIgYXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTt2YXIgaWQgPSB0aGlzLmlmcmFtZUlkID0gXCJlaW9faWZyYW1lX1wiICsgdGhpcy5pbmRleDt2YXIgaWZyYW1lO2Zvcm0uY2xhc3NOYW1lID0gXCJzb2NrZXRpb1wiO2Zvcm0uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7Zm9ybS5zdHlsZS50b3AgPSBcIi0xMDAwcHhcIjtmb3JtLnN0eWxlLmxlZnQgPSBcIi0xMDAwcHhcIjtmb3JtLnRhcmdldCA9IGlkO2Zvcm0ubWV0aG9kID0gXCJQT1NUXCI7Zm9ybS5zZXRBdHRyaWJ1dGUoXCJhY2NlcHQtY2hhcnNldFwiLCBcInV0Zi04XCIpO2FyZWEubmFtZSA9IFwiZFwiO2Zvcm0uYXBwZW5kQ2hpbGQoYXJlYSk7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTt0aGlzLmZvcm0gPSBmb3JtO3RoaXMuYXJlYSA9IGFyZWE7XG4gICAgICAgICAgfXRoaXMuZm9ybS5hY3Rpb24gPSB0aGlzLnVyaSgpO2Z1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICAgICAgaW5pdElmcmFtZSgpO2ZuKCk7XG4gICAgICAgICAgfWZ1bmN0aW9uIGluaXRJZnJhbWUoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5pZnJhbWUpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZWxmLmZvcm0ucmVtb3ZlQ2hpbGQoc2VsZi5pZnJhbWUpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yKFwianNvbnAgcG9sbGluZyBpZnJhbWUgcmVtb3ZhbCBlcnJvclwiLCBlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfXRyeSB7XG4gICAgICAgICAgICAgIHZhciBodG1sID0gJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgbmFtZT1cIicgKyBzZWxmLmlmcmFtZUlkICsgJ1wiPic7aWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChodG1sKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtpZnJhbWUubmFtZSA9IHNlbGYuaWZyYW1lSWQ7aWZyYW1lLnNyYyA9IFwiamF2YXNjcmlwdDowXCI7XG4gICAgICAgICAgICB9aWZyYW1lLmlkID0gc2VsZi5pZnJhbWVJZDtzZWxmLmZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lKTtzZWxmLmlmcmFtZSA9IGlmcmFtZTtcbiAgICAgICAgICB9aW5pdElmcmFtZSgpO2RhdGEgPSBkYXRhLnJlcGxhY2UockVzY2FwZWROZXdsaW5lLCBcIlxcXFxcXG5cIik7dGhpcy5hcmVhLnZhbHVlID0gZGF0YS5yZXBsYWNlKHJOZXdsaW5lLCBcIlxcXFxuXCIpO3RyeSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31pZiAodGhpcy5pZnJhbWUuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKHNlbGYuaWZyYW1lLnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pZnJhbWUub25sb2FkID0gY29tcGxldGU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IFwiLi9wb2xsaW5nXCI6IDgsIFwiY29tcG9uZW50LWluaGVyaXRcIjogMTYgfV0sIDc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3QgPSBfZGVyZXFfKFwieG1saHR0cHJlcXVlc3Qtc3NsXCIpO3ZhciBQb2xsaW5nID0gX2RlcmVxXyhcIi4vcG9sbGluZ1wiKTt2YXIgRW1pdHRlciA9IF9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTt2YXIgaW5oZXJpdCA9IF9kZXJlcV8oXCJjb21wb25lbnQtaW5oZXJpdFwiKTt2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcteGhyXCIpO21vZHVsZS5leHBvcnRzID0gWEhSO21vZHVsZS5leHBvcnRzLlJlcXVlc3QgPSBSZXF1ZXN0O2Z1bmN0aW9uIGVtcHR5KCkge31mdW5jdGlvbiBYSFIob3B0cykge1xuICAgICAgICAgIFBvbGxpbmcuY2FsbCh0aGlzLCBvcHRzKTtpZiAoZ2xvYmFsLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaXNTU0wgPSBcImh0dHBzOlwiID09IGxvY2F0aW9uLnByb3RvY29sO3ZhciBwb3J0ID0gbG9jYXRpb24ucG9ydDtpZiAoIXBvcnQpIHtcbiAgICAgICAgICAgICAgcG9ydCA9IGlzU1NMID8gNDQzIDogODA7XG4gICAgICAgICAgICB9dGhpcy54ZCA9IG9wdHMuaG9zdG5hbWUgIT0gZ2xvYmFsLmxvY2F0aW9uLmhvc3RuYW1lIHx8IHBvcnQgIT0gb3B0cy5wb3J0O3RoaXMueHMgPSBvcHRzLnNlY3VyZSAhPSBpc1NTTDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVycztcbiAgICAgICAgICB9XG4gICAgICAgIH1pbmhlcml0KFhIUiwgUG9sbGluZyk7WEhSLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeSA9IHRydWU7WEhSLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtvcHRzLnVyaSA9IHRoaXMudXJpKCk7b3B0cy54ZCA9IHRoaXMueGQ7b3B0cy54cyA9IHRoaXMueHM7b3B0cy5hZ2VudCA9IHRoaXMuYWdlbnQgfHwgZmFsc2U7b3B0cy5zdXBwb3J0c0JpbmFyeSA9IHRoaXMuc3VwcG9ydHNCaW5hcnk7b3B0cy5lbmFibGVzWERSID0gdGhpcy5lbmFibGVzWERSO29wdHMucGZ4ID0gdGhpcy5wZng7b3B0cy5rZXkgPSB0aGlzLmtleTtvcHRzLnBhc3NwaHJhc2UgPSB0aGlzLnBhc3NwaHJhc2U7b3B0cy5jZXJ0ID0gdGhpcy5jZXJ0O29wdHMuY2EgPSB0aGlzLmNhO29wdHMuY2lwaGVycyA9IHRoaXMuY2lwaGVycztvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9IHRoaXMucmVqZWN0VW5hdXRob3JpemVkO29wdHMuZXh0cmFIZWFkZXJzID0gdGhpcy5leHRyYUhlYWRlcnM7cmV0dXJuIG5ldyBSZXF1ZXN0KG9wdHMpO1xuICAgICAgICB9O1hIUi5wcm90b3R5cGUuZG9Xcml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBmbikge1xuICAgICAgICAgIHZhciBpc0JpbmFyeSA9IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICYmIGRhdGEgIT09IHVuZGVmaW5lZDt2YXIgcmVxID0gdGhpcy5yZXF1ZXN0KHsgbWV0aG9kOiBcIlBPU1RcIiwgZGF0YTogZGF0YSwgaXNCaW5hcnk6IGlzQmluYXJ5IH0pO3ZhciBzZWxmID0gdGhpcztyZXEub24oXCJzdWNjZXNzXCIsIGZuKTtyZXEub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBzZWxmLm9uRXJyb3IoXCJ4aHIgcG9zdCBlcnJvclwiLCBlcnIpO1xuICAgICAgICAgIH0pO3RoaXMuc2VuZFhociA9IHJlcTtcbiAgICAgICAgfTtYSFIucHJvdG90eXBlLmRvUG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkZWJ1ZyhcInhociBwb2xsXCIpO3ZhciByZXEgPSB0aGlzLnJlcXVlc3QoKTt2YXIgc2VsZiA9IHRoaXM7cmVxLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgc2VsZi5vbkRhdGEoZGF0YSk7XG4gICAgICAgICAgfSk7cmVxLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgc2VsZi5vbkVycm9yKFwieGhyIHBvbGwgZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICB9KTt0aGlzLnBvbGxYaHIgPSByZXE7XG4gICAgICAgIH07ZnVuY3Rpb24gUmVxdWVzdChvcHRzKSB7XG4gICAgICAgICAgdGhpcy5tZXRob2QgPSBvcHRzLm1ldGhvZCB8fCBcIkdFVFwiO3RoaXMudXJpID0gb3B0cy51cmk7dGhpcy54ZCA9ICEhb3B0cy54ZDt0aGlzLnhzID0gISFvcHRzLnhzO3RoaXMuYXN5bmMgPSBmYWxzZSAhPT0gb3B0cy5hc3luYzt0aGlzLmRhdGEgPSB1bmRlZmluZWQgIT0gb3B0cy5kYXRhID8gb3B0cy5kYXRhIDogbnVsbDt0aGlzLmFnZW50ID0gb3B0cy5hZ2VudDt0aGlzLmlzQmluYXJ5ID0gb3B0cy5pc0JpbmFyeTt0aGlzLnN1cHBvcnRzQmluYXJ5ID0gb3B0cy5zdXBwb3J0c0JpbmFyeTt0aGlzLmVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7dGhpcy5wZnggPSBvcHRzLnBmeDt0aGlzLmtleSA9IG9wdHMua2V5O3RoaXMucGFzc3BocmFzZSA9IG9wdHMucGFzc3BocmFzZTt0aGlzLmNlcnQgPSBvcHRzLmNlcnQ7dGhpcy5jYSA9IG9wdHMuY2E7dGhpcy5jaXBoZXJzID0gb3B0cy5jaXBoZXJzO3RoaXMucmVqZWN0VW5hdXRob3JpemVkID0gb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7dGhpcy5leHRyYUhlYWRlcnMgPSBvcHRzLmV4dHJhSGVhZGVyczt0aGlzLmNyZWF0ZSgpO1xuICAgICAgICB9RW1pdHRlcihSZXF1ZXN0LnByb3RvdHlwZSk7UmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvcHRzID0geyBhZ2VudDogdGhpcy5hZ2VudCwgeGRvbWFpbjogdGhpcy54ZCwgeHNjaGVtZTogdGhpcy54cywgZW5hYmxlc1hEUjogdGhpcy5lbmFibGVzWERSIH07b3B0cy5wZnggPSB0aGlzLnBmeDtvcHRzLmtleSA9IHRoaXMua2V5O29wdHMucGFzc3BocmFzZSA9IHRoaXMucGFzc3BocmFzZTtvcHRzLmNlcnQgPSB0aGlzLmNlcnQ7b3B0cy5jYSA9IHRoaXMuY2E7b3B0cy5jaXBoZXJzID0gdGhpcy5jaXBoZXJzO29wdHMucmVqZWN0VW5hdXRob3JpemVkID0gdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ7dmFyIHhociA9IHRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO3ZhciBzZWxmID0gdGhpczt0cnkge1xuICAgICAgICAgICAgZGVidWcoXCJ4aHIgb3BlbiAlczogJXNcIiwgdGhpcy5tZXRob2QsIHRoaXMudXJpKTt4aHIub3Blbih0aGlzLm1ldGhvZCwgdGhpcy51cmksIHRoaXMuYXN5bmMpO3RyeSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgIHhoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sodHJ1ZSk7Zm9yICh2YXIgaSBpbiB0aGlzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFIZWFkZXJzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGksIHRoaXMuZXh0cmFIZWFkZXJzW2ldKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9aWYgKHRoaXMuc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgICAgICAgIH1pZiAoXCJQT1NUXCIgPT0gdGhpcy5tZXRob2QpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0JpbmFyeSkge1xuICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIH1pZiAoXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHIpIHtcbiAgICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9aWYgKHRoaXMuaGFzWERSKCkpIHtcbiAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm9uTG9hZCgpO1xuICAgICAgICAgICAgICB9O3hoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYub25FcnJvcih4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKDQgIT0geGhyLnJlYWR5U3RhdGUpIHJldHVybjtpZiAoMjAwID09IHhoci5zdGF0dXMgfHwgMTIyMyA9PSB4aHIuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLm9uTG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yKHhoci5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfWRlYnVnKFwieGhyIGRhdGEgJXNcIiwgdGhpcy5kYXRhKTt4aHIuc2VuZCh0aGlzLmRhdGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzZWxmLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9LCAwKTtyZXR1cm47XG4gICAgICAgICAgfWlmIChnbG9iYWwuZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSBSZXF1ZXN0LnJlcXVlc3RzQ291bnQrKztSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdID0gdGhpcztcbiAgICAgICAgICB9XG4gICAgICAgIH07UmVxdWVzdC5wcm90b3R5cGUub25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuZW1pdChcInN1Y2Nlc3NcIik7dGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIH07UmVxdWVzdC5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJkYXRhXCIsIGRhdGEpO3RoaXMub25TdWNjZXNzKCk7XG4gICAgICAgIH07UmVxdWVzdC5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO3RoaXMuY2xlYW51cCh0cnVlKTtcbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gKGZyb21FcnJvcikge1xuICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiB0aGlzLnhociB8fCBudWxsID09PSB0aGlzLnhocikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1pZiAodGhpcy5oYXNYRFIoKSkge1xuICAgICAgICAgICAgdGhpcy54aHIub25sb2FkID0gdGhpcy54aHIub25lcnJvciA9IGVtcHR5O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBlbXB0eTtcbiAgICAgICAgICB9aWYgKGZyb21FcnJvcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgdGhpcy54aHIuYWJvcnQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgfWlmIChnbG9iYWwuZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdO1xuICAgICAgICAgIH10aGlzLnhociA9IG51bGw7XG4gICAgICAgIH07UmVxdWVzdC5wcm90b3R5cGUub25Mb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBkYXRhO3RyeSB7XG4gICAgICAgICAgICB2YXIgY29udGVudFR5cGU7dHJ5IHtcbiAgICAgICAgICAgICAgY29udGVudFR5cGUgPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKS5zcGxpdChcIjtcIilbMF07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fWlmIChjb250ZW50VHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIikge1xuICAgICAgICAgICAgICBkYXRhID0gdGhpcy54aHIucmVzcG9uc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIXRoaXMuc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy54aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciB1aThBcnIgPSBuZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSk7dmFyIGRhdGFBcnJheSA9IFtdO2ZvciAodmFyIGlkeCA9IDAsIGxlbmd0aCA9IHVpOEFyci5sZW5ndGg7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUFycmF5LnB1c2godWk4QXJyW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgfWRhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGRhdGFBcnJheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGUpO1xuICAgICAgICAgIH1pZiAobnVsbCAhPSBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YShkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07UmVxdWVzdC5wcm90b3R5cGUuaGFzWERSID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgZ2xvYmFsLlhEb21haW5SZXF1ZXN0ICYmICF0aGlzLnhzICYmIHRoaXMuZW5hYmxlc1hEUjtcbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgfTtpZiAoZ2xvYmFsLmRvY3VtZW50KSB7XG4gICAgICAgICAgUmVxdWVzdC5yZXF1ZXN0c0NvdW50ID0gMDtSZXF1ZXN0LnJlcXVlc3RzID0ge307aWYgKGdsb2JhbC5hdHRhY2hFdmVudCkge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlcik7XG4gICAgICAgICAgfSBlbHNlIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfWZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSBpbiBSZXF1ZXN0LnJlcXVlc3RzKSB7XG4gICAgICAgICAgICBpZiAoUmVxdWVzdC5yZXF1ZXN0cy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICBSZXF1ZXN0LnJlcXVlc3RzW2ldLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL3BvbGxpbmdcIjogOCwgXCJjb21wb25lbnQtZW1pdHRlclwiOiAxNSwgXCJjb21wb25lbnQtaW5oZXJpdFwiOiAxNiwgZGVidWc6IDE3LCBcInhtbGh0dHByZXF1ZXN0LXNzbFwiOiAxMCB9XSwgODogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciBUcmFuc3BvcnQgPSBfZGVyZXFfKFwiLi4vdHJhbnNwb3J0XCIpO3ZhciBwYXJzZXFzID0gX2RlcmVxXyhcInBhcnNlcXNcIik7dmFyIHBhcnNlciA9IF9kZXJlcV8oXCJlbmdpbmUuaW8tcGFyc2VyXCIpO3ZhciBpbmhlcml0ID0gX2RlcmVxXyhcImNvbXBvbmVudC1pbmhlcml0XCIpO3ZhciB5ZWFzdCA9IF9kZXJlcV8oXCJ5ZWFzdFwiKTt2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmdcIik7bW9kdWxlLmV4cG9ydHMgPSBQb2xsaW5nO3ZhciBoYXNYSFIyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFhNTEh0dHBSZXF1ZXN0ID0gX2RlcmVxXyhcInhtbGh0dHByZXF1ZXN0LXNzbFwiKTt2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KHsgeGRvbWFpbjogZmFsc2UgfSk7cmV0dXJuIG51bGwgIT0geGhyLnJlc3BvbnNlVHlwZTtcbiAgICAgIH0pKCk7ZnVuY3Rpb24gUG9sbGluZyhvcHRzKSB7XG4gICAgICAgIHZhciBmb3JjZUJhc2U2NCA9IG9wdHMgJiYgb3B0cy5mb3JjZUJhc2U2NDtpZiAoIWhhc1hIUjIgfHwgZm9yY2VCYXNlNjQpIHtcbiAgICAgICAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gZmFsc2U7XG4gICAgICAgIH1UcmFuc3BvcnQuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICAgIH1pbmhlcml0KFBvbGxpbmcsIFRyYW5zcG9ydCk7UG9sbGluZy5wcm90b3R5cGUubmFtZSA9IFwicG9sbGluZ1wiO1BvbGxpbmcucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb2xsKCk7XG4gICAgICB9O1BvbGxpbmcucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKG9uUGF1c2UpIHtcbiAgICAgICAgdmFyIHBlbmRpbmcgPSAwO3ZhciBzZWxmID0gdGhpczt0aGlzLnJlYWR5U3RhdGUgPSBcInBhdXNpbmdcIjtmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgICAgICBkZWJ1ZyhcInBhdXNlZFwiKTtzZWxmLnJlYWR5U3RhdGUgPSBcInBhdXNlZFwiO29uUGF1c2UoKTtcbiAgICAgICAgfWlmICh0aGlzLnBvbGxpbmcgfHwgIXRoaXMud3JpdGFibGUpIHtcbiAgICAgICAgICB2YXIgdG90YWwgPSAwO2lmICh0aGlzLnBvbGxpbmcpIHtcbiAgICAgICAgICAgIGRlYnVnKFwid2UgYXJlIGN1cnJlbnRseSBwb2xsaW5nIC0gd2FpdGluZyB0byBwYXVzZVwiKTt0b3RhbCsrO3RoaXMub25jZShcInBvbGxDb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGRlYnVnKFwicHJlLXBhdXNlIHBvbGxpbmcgY29tcGxldGVcIik7LS10b3RhbCB8fCBwYXVzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWlmICghdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgICAgZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO3RvdGFsKys7dGhpcy5vbmNlKFwiZHJhaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBkZWJ1ZyhcInByZS1wYXVzZSB3cml0aW5nIGNvbXBsZXRlXCIpOy0tdG90YWwgfHwgcGF1c2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXVzZSgpO1xuICAgICAgICB9XG4gICAgICB9O1BvbGxpbmcucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlYnVnKFwicG9sbGluZ1wiKTt0aGlzLnBvbGxpbmcgPSB0cnVlO3RoaXMuZG9Qb2xsKCk7dGhpcy5lbWl0KFwicG9sbFwiKTtcbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO2RlYnVnKFwicG9sbGluZyBnb3QgZGF0YSAlc1wiLCBkYXRhKTt2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhwYWNrZXQsIGluZGV4LCB0b3RhbCkge1xuICAgICAgICAgIGlmIChcIm9wZW5pbmdcIiA9PSBzZWxmLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIHNlbGYub25PcGVuKCk7XG4gICAgICAgICAgfWlmIChcImNsb3NlXCIgPT0gcGFja2V0LnR5cGUpIHtcbiAgICAgICAgICAgIHNlbGYub25DbG9zZSgpO3JldHVybiBmYWxzZTtcbiAgICAgICAgICB9c2VsZi5vblBhY2tldChwYWNrZXQpO1xuICAgICAgICB9O3BhcnNlci5kZWNvZGVQYXlsb2FkKGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUsIGNhbGxiYWNrKTtpZiAoXCJjbG9zZWRcIiAhPSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLnBvbGxpbmcgPSBmYWxzZTt0aGlzLmVtaXQoXCJwb2xsQ29tcGxldGVcIik7aWYgKFwib3BlblwiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5wb2xsKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnKCdpZ25vcmluZyBwb2xsIC0gdHJhbnNwb3J0IHN0YXRlIFwiJXNcIicsIHRoaXMucmVhZHlTdGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1BvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICBkZWJ1ZyhcIndyaXRpbmcgY2xvc2UgcGFja2V0XCIpO3NlbGYud3JpdGUoW3sgdHlwZTogXCJjbG9zZVwiIH1dKTtcbiAgICAgICAgfWlmIChcIm9wZW5cIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICBkZWJ1ZyhcInRyYW5zcG9ydCBvcGVuIC0gY2xvc2luZ1wiKTtjbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnKFwidHJhbnNwb3J0IG5vdCBvcGVuIC0gZGVmZXJyaW5nIGNsb3NlXCIpO3RoaXMub25jZShcIm9wZW5cIiwgY2xvc2UpO1xuICAgICAgICB9XG4gICAgICB9O1BvbGxpbmcucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKHBhY2tldHMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO3RoaXMud3JpdGFibGUgPSBmYWxzZTt2YXIgY2FsbGJhY2tmbiA9IGZ1bmN0aW9uIGNhbGxiYWNrZm4oKSB7XG4gICAgICAgICAgc2VsZi53cml0YWJsZSA9IHRydWU7c2VsZi5lbWl0KFwiZHJhaW5cIik7XG4gICAgICAgIH07dmFyIHNlbGYgPSB0aGlzO3BhcnNlci5lbmNvZGVQYXlsb2FkKHBhY2tldHMsIHRoaXMuc3VwcG9ydHNCaW5hcnksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgc2VsZi5kb1dyaXRlKGRhdGEsIGNhbGxiYWNrZm4pO1xuICAgICAgICB9KTtcbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUudXJpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O3ZhciBzY2hlbWEgPSB0aGlzLnNlY3VyZSA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO3ZhciBwb3J0ID0gXCJcIjtpZiAoZmFsc2UgIT09IHRoaXMudGltZXN0YW1wUmVxdWVzdHMpIHtcbiAgICAgICAgICBxdWVyeVt0aGlzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG4gICAgICAgIH1pZiAoIXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgIXF1ZXJ5LnNpZCkge1xuICAgICAgICAgIHF1ZXJ5LmI2NCA9IDE7XG4gICAgICAgIH1xdWVyeSA9IHBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtpZiAodGhpcy5wb3J0ICYmIChcImh0dHBzXCIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA0NDMgfHwgXCJodHRwXCIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA4MCkpIHtcbiAgICAgICAgICBwb3J0ID0gXCI6XCIgKyB0aGlzLnBvcnQ7XG4gICAgICAgIH1pZiAocXVlcnkubGVuZ3RoKSB7XG4gICAgICAgICAgcXVlcnkgPSBcIj9cIiArIHF1ZXJ5O1xuICAgICAgICB9dmFyIGlwdjYgPSB0aGlzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpICE9PSAtMTtyZXR1cm4gc2NoZW1hICsgXCI6Ly9cIiArIChpcHY2ID8gXCJbXCIgKyB0aGlzLmhvc3RuYW1lICsgXCJdXCIgOiB0aGlzLmhvc3RuYW1lKSArIHBvcnQgKyB0aGlzLnBhdGggKyBxdWVyeTtcbiAgICAgIH07XG4gICAgfSwgeyBcIi4uL3RyYW5zcG9ydFwiOiA0LCBcImNvbXBvbmVudC1pbmhlcml0XCI6IDE2LCBkZWJ1ZzogMTcsIFwiZW5naW5lLmlvLXBhcnNlclwiOiAxOSwgcGFyc2VxczogMjcsIFwieG1saHR0cHJlcXVlc3Qtc3NsXCI6IDEwLCB5ZWFzdDogMzAgfV0sIDk6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgVHJhbnNwb3J0ID0gX2RlcmVxXyhcIi4uL3RyYW5zcG9ydFwiKTt2YXIgcGFyc2VyID0gX2RlcmVxXyhcImVuZ2luZS5pby1wYXJzZXJcIik7dmFyIHBhcnNlcXMgPSBfZGVyZXFfKFwicGFyc2Vxc1wiKTt2YXIgaW5oZXJpdCA9IF9kZXJlcV8oXCJjb21wb25lbnQtaW5oZXJpdFwiKTt2YXIgeWVhc3QgPSBfZGVyZXFfKFwieWVhc3RcIik7dmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDp3ZWJzb2NrZXRcIik7dmFyIEJyb3dzZXJXZWJTb2NrZXQgPSBnbG9iYWwuV2ViU29ja2V0IHx8IGdsb2JhbC5Nb3pXZWJTb2NrZXQ7dmFyIFdlYlNvY2tldCA9IEJyb3dzZXJXZWJTb2NrZXQ7aWYgKCFXZWJTb2NrZXQgJiYgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBXZWJTb2NrZXQgPSBfZGVyZXFfKFwid3NcIik7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgfW1vZHVsZS5leHBvcnRzID0gV1M7ZnVuY3Rpb24gV1Mob3B0cykge1xuICAgICAgICAgIHZhciBmb3JjZUJhc2U2NCA9IG9wdHMgJiYgb3B0cy5mb3JjZUJhc2U2NDtpZiAoZm9yY2VCYXNlNjQpIHtcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcbiAgICAgICAgICB9dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IG9wdHMucGVyTWVzc2FnZURlZmxhdGU7VHJhbnNwb3J0LmNhbGwodGhpcywgb3B0cyk7XG4gICAgICAgIH1pbmhlcml0KFdTLCBUcmFuc3BvcnQpO1dTLnByb3RvdHlwZS5uYW1lID0gXCJ3ZWJzb2NrZXRcIjtXUy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSB0cnVlO1dTLnByb3RvdHlwZS5kb09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmNoZWNrKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9dmFyIHNlbGYgPSB0aGlzO3ZhciB1cmkgPSB0aGlzLnVyaSgpO3ZhciBwcm90b2NvbHMgPSB2b2lkIDA7dmFyIG9wdHMgPSB7IGFnZW50OiB0aGlzLmFnZW50LCBwZXJNZXNzYWdlRGVmbGF0ZTogdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSB9O29wdHMucGZ4ID0gdGhpcy5wZng7b3B0cy5rZXkgPSB0aGlzLmtleTtvcHRzLnBhc3NwaHJhc2UgPSB0aGlzLnBhc3NwaHJhc2U7b3B0cy5jZXJ0ID0gdGhpcy5jZXJ0O29wdHMuY2EgPSB0aGlzLmNhO29wdHMuY2lwaGVycyA9IHRoaXMuY2lwaGVycztvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9IHRoaXMucmVqZWN0VW5hdXRob3JpemVkO2lmICh0aGlzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgb3B0cy5oZWFkZXJzID0gdGhpcy5leHRyYUhlYWRlcnM7XG4gICAgICAgICAgfXRoaXMud3MgPSBCcm93c2VyV2ViU29ja2V0ID8gbmV3IFdlYlNvY2tldCh1cmkpIDogbmV3IFdlYlNvY2tldCh1cmksIHByb3RvY29scywgb3B0cyk7aWYgKHRoaXMud3MuYmluYXJ5VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gZmFsc2U7XG4gICAgICAgICAgfWlmICh0aGlzLndzLnN1cHBvcnRzICYmIHRoaXMud3Muc3VwcG9ydHMuYmluYXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRzQmluYXJ5ID0gdHJ1ZTt0aGlzLndzLmJpbmFyeVR5cGUgPSBcImJ1ZmZlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XG4gICAgICAgICAgfXRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgfTtXUy5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO3RoaXMud3Mub25vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5vbk9wZW4oKTtcbiAgICAgICAgICB9O3RoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYub25DbG9zZSgpO1xuICAgICAgICAgIH07dGhpcy53cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHNlbGYub25EYXRhKGV2LmRhdGEpO1xuICAgICAgICAgIH07dGhpcy53cy5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHNlbGYub25FcnJvcihcIndlYnNvY2tldCBlcnJvclwiLCBlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O2lmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL2lQYWR8aVBob25lfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgV1MucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIFRyYW5zcG9ydC5wcm90b3R5cGUub25EYXRhLmNhbGwoc2VsZiwgZGF0YSk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9V1MucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKHBhY2tldHMpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dGhpcy53cml0YWJsZSA9IGZhbHNlO3ZhciB0b3RhbCA9IHBhY2tldHMubGVuZ3RoO2ZvciAodmFyIGkgPSAwLCBsID0gdG90YWw7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIChmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgICAgICAgIHBhcnNlci5lbmNvZGVQYWNrZXQocGFja2V0LCBzZWxmLnN1cHBvcnRzQmluYXJ5LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghQnJvd3NlcldlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB7fTtpZiAocGFja2V0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5jb21wcmVzcyA9IHBhY2tldC5vcHRpb25zLmNvbXByZXNzO1xuICAgICAgICAgICAgICAgICAgfWlmIChzZWxmLnBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSBcInN0cmluZ1wiID09IHR5cGVvZiBkYXRhID8gZ2xvYmFsLkJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpIDogZGF0YS5sZW5ndGg7aWYgKGxlbiA8IHNlbGYucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb3B0cy5jb21wcmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfXRyeSB7XG4gICAgICAgICAgICAgICAgICBpZiAoQnJvd3NlcldlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLndzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLndzLnNlbmQoZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgZGVidWcoXCJ3ZWJzb2NrZXQgY2xvc2VkIGJlZm9yZSBvbmNsb3NlIGV2ZW50XCIpO1xuICAgICAgICAgICAgICAgIH0tLXRvdGFsIHx8IGRvbmUoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KShwYWNrZXRzW2ldKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgICAgICAgIHNlbGYuZW1pdChcImZsdXNoXCIpO3NldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzZWxmLndyaXRhYmxlID0gdHJ1ZTtzZWxmLmVtaXQoXCJkcmFpblwiKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtXUy5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBUcmFuc3BvcnQucHJvdG90eXBlLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtXUy5wcm90b3R5cGUuZG9DbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMud3MgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRoaXMud3MuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07V1MucHJvdG90eXBlLnVyaSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O3ZhciBzY2hlbWEgPSB0aGlzLnNlY3VyZSA/IFwid3NzXCIgOiBcIndzXCI7dmFyIHBvcnQgPSBcIlwiO2lmICh0aGlzLnBvcnQgJiYgKFwid3NzXCIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA0NDMgfHwgXCJ3c1wiID09IHNjaGVtYSAmJiB0aGlzLnBvcnQgIT0gODApKSB7XG4gICAgICAgICAgICBwb3J0ID0gXCI6XCIgKyB0aGlzLnBvcnQ7XG4gICAgICAgICAgfWlmICh0aGlzLnRpbWVzdGFtcFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBxdWVyeVt0aGlzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG4gICAgICAgICAgfWlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICAgICAgICB9cXVlcnkgPSBwYXJzZXFzLmVuY29kZShxdWVyeSk7aWYgKHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgcXVlcnkgPSBcIj9cIiArIHF1ZXJ5O1xuICAgICAgICAgIH12YXIgaXB2NiA9IHRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgIT09IC0xO3JldHVybiBzY2hlbWEgKyBcIjovL1wiICsgKGlwdjYgPyBcIltcIiArIHRoaXMuaG9zdG5hbWUgKyBcIl1cIiA6IHRoaXMuaG9zdG5hbWUpICsgcG9ydCArIHRoaXMucGF0aCArIHF1ZXJ5O1xuICAgICAgICB9O1dTLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gISFXZWJTb2NrZXQgJiYgIShcIl9faW5pdGlhbGl6ZVwiIGluIFdlYlNvY2tldCAmJiB0aGlzLm5hbWUgPT09IFdTLnByb3RvdHlwZS5uYW1lKTtcbiAgICAgICAgfTtcbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBcIi4uL3RyYW5zcG9ydFwiOiA0LCBcImNvbXBvbmVudC1pbmhlcml0XCI6IDE2LCBkZWJ1ZzogMTcsIFwiZW5naW5lLmlvLXBhcnNlclwiOiAxOSwgcGFyc2VxczogMjcsIHdzOiB1bmRlZmluZWQsIHllYXN0OiAzMCB9XSwgMTA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgaGFzQ09SUyA9IF9kZXJlcV8oXCJoYXMtY29yc1wiKTttb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIHZhciB4ZG9tYWluID0gb3B0cy54ZG9tYWluO3ZhciB4c2NoZW1lID0gb3B0cy54c2NoZW1lO3ZhciBlbmFibGVzWERSID0gb3B0cy5lbmFibGVzWERSO3RyeSB7XG4gICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICYmICgheGRvbWFpbiB8fCBoYXNDT1JTKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge310cnkge1xuICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBYRG9tYWluUmVxdWVzdCAmJiAheHNjaGVtZSAmJiBlbmFibGVzWERSKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fWlmICgheGRvbWFpbikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sIHsgXCJoYXMtY29yc1wiOiAyMiB9XSwgMTE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGFmdGVyO2Z1bmN0aW9uIGFmdGVyKGNvdW50LCBjYWxsYmFjaywgZXJyX2NiKSB7XG4gICAgICAgIHZhciBiYWlsID0gZmFsc2U7ZXJyX2NiID0gZXJyX2NiIHx8IG5vb3A7cHJveHkuY291bnQgPSBjb3VudDtyZXR1cm4gY291bnQgPT09IDAgPyBjYWxsYmFjaygpIDogcHJveHk7ZnVuY3Rpb24gcHJveHkoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICBpZiAocHJveHkuY291bnQgPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYWZ0ZXIgY2FsbGVkIHRvbyBtYW55IHRpbWVzXCIpO1xuICAgICAgICAgIH0tLXByb3h5LmNvdW50O2lmIChlcnIpIHtcbiAgICAgICAgICAgIGJhaWwgPSB0cnVlO2NhbGxiYWNrKGVycik7Y2FsbGJhY2sgPSBlcnJfY2I7XG4gICAgICAgICAgfSBlbHNlIGlmIChwcm94eS5jb3VudCA9PT0gMCAmJiAhYmFpbCkge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1mdW5jdGlvbiBub29wKCkge31cbiAgICB9LCB7fV0sIDEyOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyYXlidWZmZXIsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgdmFyIGJ5dGVzID0gYXJyYXlidWZmZXIuYnl0ZUxlbmd0aDtzdGFydCA9IHN0YXJ0IHx8IDA7ZW5kID0gZW5kIHx8IGJ5dGVzO2lmIChhcnJheWJ1ZmZlci5zbGljZSkge1xuICAgICAgICAgIHJldHVybiBhcnJheWJ1ZmZlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgfWlmIChzdGFydCA8IDApIHtcbiAgICAgICAgICBzdGFydCArPSBieXRlcztcbiAgICAgICAgfWlmIChlbmQgPCAwKSB7XG4gICAgICAgICAgZW5kICs9IGJ5dGVzO1xuICAgICAgICB9aWYgKGVuZCA+IGJ5dGVzKSB7XG4gICAgICAgICAgZW5kID0gYnl0ZXM7XG4gICAgICAgIH1pZiAoc3RhcnQgPj0gYnl0ZXMgfHwgc3RhcnQgPj0gZW5kIHx8IGJ5dGVzID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgfXZhciBhYnYgPSBuZXcgVWludDhBcnJheShhcnJheWJ1ZmZlcik7dmFyIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGVuZCAtIHN0YXJ0KTtmb3IgKHZhciBpID0gc3RhcnQsIGlpID0gMDsgaSA8IGVuZDsgaSsrLCBpaSsrKSB7XG4gICAgICAgICAgcmVzdWx0W2lpXSA9IGFidltpXTtcbiAgICAgICAgfXJldHVybiByZXN1bHQuYnVmZmVyO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDEzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChjaGFycykge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlcikge1xuICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSxcbiAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgbGVuID0gYnl0ZXMubGVuZ3RoLFxuICAgICAgICAgICAgICBiYXNlNjQgPSBcIlwiO2ZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykge1xuICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2ldID4+IDJdO1xuICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpXSAmIDMpIDw8IDQgfCBieXRlc1tpICsgMV0gPj4gNF07YmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpICsgMV0gJiAxNSkgPDwgMiB8IGJ5dGVzW2kgKyAyXSA+PiA2XTtiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdO1xuICAgICAgICAgIH1pZiAobGVuICUgMyA9PT0gMikge1xuICAgICAgICAgICAgYmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLCBiYXNlNjQubGVuZ3RoIC0gMSkgKyBcIj1cIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxlbiAlIDMgPT09IDEpIHtcbiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgXCI9PVwiO1xuICAgICAgICAgIH1yZXR1cm4gYmFzZTY0O1xuICAgICAgICB9O2V4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24gKGJhc2U2NCkge1xuICAgICAgICAgIHZhciBidWZmZXJMZW5ndGggPSBiYXNlNjQubGVuZ3RoICogLjc1LFxuICAgICAgICAgICAgICBsZW4gPSBiYXNlNjQubGVuZ3RoLFxuICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICBwID0gMCxcbiAgICAgICAgICAgICAgZW5jb2RlZDEsXG4gICAgICAgICAgICAgIGVuY29kZWQyLFxuICAgICAgICAgICAgICBlbmNvZGVkMyxcbiAgICAgICAgICAgICAgZW5jb2RlZDQ7aWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMV0gPT09IFwiPVwiKSB7XG4gICAgICAgICAgICBidWZmZXJMZW5ndGgtLTtpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAyXSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfXZhciBhcnJheWJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLFxuICAgICAgICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICAgICAgICAgIGVuY29kZWQxID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaV0pO2VuY29kZWQyID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSArIDFdKTtlbmNvZGVkMyA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2kgKyAyXSk7ZW5jb2RlZDQgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpICsgM10pO2J5dGVzW3ArK10gPSBlbmNvZGVkMSA8PCAyIHwgZW5jb2RlZDIgPj4gNDtieXRlc1twKytdID0gKGVuY29kZWQyICYgMTUpIDw8IDQgfCBlbmNvZGVkMyA+PiAyO2J5dGVzW3ArK10gPSAoZW5jb2RlZDMgJiAzKSA8PCA2IHwgZW5jb2RlZDQgJiA2MztcbiAgICAgICAgICB9cmV0dXJuIGFycmF5YnVmZmVyO1xuICAgICAgICB9O1xuICAgICAgfSkoXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIpO1xuICAgIH0sIHt9XSwgMTQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgQmxvYkJ1aWxkZXIgPSBnbG9iYWwuQmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLldlYktpdEJsb2JCdWlsZGVyIHx8IGdsb2JhbC5NU0Jsb2JCdWlsZGVyIHx8IGdsb2JhbC5Nb3pCbG9iQnVpbGRlcjt2YXIgYmxvYlN1cHBvcnRlZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhID0gbmV3IEJsb2IoW1wiaGlcIl0pO3JldHVybiBhLnNpemUgPT09IDI7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTt2YXIgYmxvYlN1cHBvcnRzQXJyYXlCdWZmZXJWaWV3ID0gYmxvYlN1cHBvcnRlZCAmJiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShbMSwgMl0pXSk7cmV0dXJuIGIuc2l6ZSA9PT0gMjtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO3ZhciBibG9iQnVpbGRlclN1cHBvcnRlZCA9IEJsb2JCdWlsZGVyICYmIEJsb2JCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmQgJiYgQmxvYkJ1aWxkZXIucHJvdG90eXBlLmdldEJsb2I7ZnVuY3Rpb24gbWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNodW5rID0gYXJ5W2ldO2lmIChjaHVuay5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICB2YXIgYnVmID0gY2h1bmsuYnVmZmVyO2lmIChjaHVuay5ieXRlTGVuZ3RoICE9PSBidWYuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmsuYnl0ZUxlbmd0aCk7Y29weS5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmLCBjaHVuay5ieXRlT2Zmc2V0LCBjaHVuay5ieXRlTGVuZ3RoKSk7YnVmID0gY29weS5idWZmZXI7XG4gICAgICAgICAgICAgIH1hcnlbaV0gPSBidWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9ZnVuY3Rpb24gQmxvYkJ1aWxkZXJDb25zdHJ1Y3RvcihhcnksIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTt2YXIgYmIgPSBuZXcgQmxvYkJ1aWxkZXIoKTttYXBBcnJheUJ1ZmZlclZpZXdzKGFyeSk7Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJiLmFwcGVuZChhcnlbaV0pO1xuICAgICAgICAgIH1yZXR1cm4gb3B0aW9ucy50eXBlID8gYmIuZ2V0QmxvYihvcHRpb25zLnR5cGUpIDogYmIuZ2V0QmxvYigpO1xuICAgICAgICB9ZnVuY3Rpb24gQmxvYkNvbnN0cnVjdG9yKGFyeSwgb3B0aW9ucykge1xuICAgICAgICAgIG1hcEFycmF5QnVmZmVyVmlld3MoYXJ5KTtyZXR1cm4gbmV3IEJsb2IoYXJ5LCBvcHRpb25zIHx8IHt9KTtcbiAgICAgICAgfW1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoYmxvYlN1cHBvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJsb2JTdXBwb3J0c0FycmF5QnVmZmVyVmlldyA/IGdsb2JhbC5CbG9iIDogQmxvYkNvbnN0cnVjdG9yO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYmxvYkJ1aWxkZXJTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBCbG9iQnVpbGRlckNvbnN0cnVjdG9yO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwge31dLCAxNTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtmdW5jdGlvbiBFbWl0dGVyKG9iaikge1xuICAgICAgICBpZiAob2JqKSByZXR1cm4gbWl4aW4ob2JqKTtcbiAgICAgIH1mdW5jdGlvbiBtaXhpbihvYmopIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIEVtaXR0ZXIucHJvdG90eXBlKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBFbWl0dGVyLnByb3RvdHlwZVtrZXldO1xuICAgICAgICB9cmV0dXJuIG9iajtcbiAgICAgIH1FbWl0dGVyLnByb3RvdHlwZS5vbiA9IEVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsodGhpcy5fY2FsbGJhY2tzW2V2ZW50XSA9IHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW10pLnB1c2goZm4pO3JldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O2Z1bmN0aW9uIG9uKCkge1xuICAgICAgICAgIHNlbGYub2ZmKGV2ZW50LCBvbik7Zm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfW9uLmZuID0gZm47dGhpcy5vbihldmVudCwgb24pO3JldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0ge307cmV0dXJuIHRoaXM7XG4gICAgICAgIH12YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7aWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdO3JldHVybiB0aGlzO1xuICAgICAgICB9dmFyIGNiO2ZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY2IgPSBjYWxsYmFja3NbaV07aWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7YnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3ZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO2ZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgIH07RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXTtcbiAgICAgIH07RW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMTY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGZuKCkge307Zm4ucHJvdG90eXBlID0gYi5wcm90b3R5cGU7YS5wcm90b3R5cGUgPSBuZXcgZm4oKTthLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGE7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMTc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKFwiLi9kZWJ1Z1wiKTtleHBvcnRzLmxvZyA9IGxvZztleHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO2V4cG9ydHMuc2F2ZSA9IHNhdmU7ZXhwb3J0cy5sb2FkID0gbG9hZDtleHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztleHBvcnRzLnN0b3JhZ2UgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjaHJvbWUgJiYgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgY2hyb21lLnN0b3JhZ2UgPyBjaHJvbWUuc3RvcmFnZS5sb2NhbCA6IGxvY2Fsc3RvcmFnZSgpO2V4cG9ydHMuY29sb3JzID0gW1wibGlnaHRzZWFncmVlblwiLCBcImZvcmVzdGdyZWVuXCIsIFwiZ29sZGVucm9kXCIsIFwiZG9kZ2VyYmx1ZVwiLCBcImRhcmtvcmNoaWRcIiwgXCJjcmltc29uXCJdO2Z1bmN0aW9uIHVzZUNvbG9ycygpIHtcbiAgICAgICAgcmV0dXJuIFwiV2Via2l0QXBwZWFyYW5jZVwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSB8fCB3aW5kb3cuY29uc29sZSAmJiAoY29uc29sZS5maXJlYnVnIHx8IGNvbnNvbGUuZXhjZXB0aW9uICYmIGNvbnNvbGUudGFibGUpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pICYmIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApID49IDMxO1xuICAgICAgfWV4cG9ydHMuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgfTtmdW5jdGlvbiBmb3JtYXRBcmdzKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czt2YXIgdXNlQ29sb3JzID0gdGhpcy51c2VDb2xvcnM7YXJnc1swXSA9ICh1c2VDb2xvcnMgPyBcIiVjXCIgOiBcIlwiKSArIHRoaXMubmFtZXNwYWNlICsgKHVzZUNvbG9ycyA/IFwiICVjXCIgOiBcIiBcIikgKyBhcmdzWzBdICsgKHVzZUNvbG9ycyA/IFwiJWMgXCIgOiBcIiBcIikgKyBcIitcIiArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtpZiAoIXVzZUNvbG9ycykgcmV0dXJuIGFyZ3M7dmFyIGMgPSBcImNvbG9yOiBcIiArIHRoaXMuY29sb3I7YXJncyA9IFthcmdzWzBdLCBjLCBcImNvbG9yOiBpbmhlcml0XCJdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAxKSk7dmFyIGluZGV4ID0gMDt2YXIgbGFzdEMgPSAwO2FyZ3NbMF0ucmVwbGFjZSgvJVthLXolXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICBpZiAoXCIlJVwiID09PSBtYXRjaCkgcmV0dXJuO2luZGV4Kys7aWYgKFwiJWNcIiA9PT0gbWF0Y2gpIHtcbiAgICAgICAgICAgIGxhc3RDID0gaW5kZXg7XG4gICAgICAgICAgfVxuICAgICAgICB9KTthcmdzLnNwbGljZShsYXN0QywgMCwgYyk7cmV0dXJuIGFyZ3M7XG4gICAgICB9ZnVuY3Rpb24gbG9nKCkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PT0gdHlwZW9mIGNvbnNvbGUgJiYgY29uc29sZS5sb2cgJiYgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9ZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKG51bGwgPT0gbmFtZXNwYWNlcykge1xuICAgICAgICAgICAgZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oXCJkZWJ1Z1wiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwb3J0cy5zdG9yYWdlLmRlYnVnID0gbmFtZXNwYWNlcztcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9ZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgICAgdmFyIHI7dHJ5IHtcbiAgICAgICAgICByID0gZXhwb3J0cy5zdG9yYWdlLmRlYnVnO1xuICAgICAgICB9IGNhdGNoIChlKSB7fXJldHVybiByO1xuICAgICAgfWV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7ZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH0sIHsgXCIuL2RlYnVnXCI6IDE4IH1dLCAxODogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGRlYnVnO2V4cG9ydHMuY29lcmNlID0gY29lcmNlO2V4cG9ydHMuZGlzYWJsZSA9IGRpc2FibGU7ZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7ZXhwb3J0cy5lbmFibGVkID0gZW5hYmxlZDtleHBvcnRzLmh1bWFuaXplID0gX2RlcmVxXyhcIm1zXCIpO2V4cG9ydHMubmFtZXMgPSBbXTtleHBvcnRzLnNraXBzID0gW107ZXhwb3J0cy5mb3JtYXR0ZXJzID0ge307dmFyIHByZXZDb2xvciA9IDA7dmFyIHByZXZUaW1lO2Z1bmN0aW9uIHNlbGVjdENvbG9yKCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbcHJldkNvbG9yKysgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xuICAgICAgfWZ1bmN0aW9uIGRlYnVnKG5hbWVzcGFjZSkge1xuICAgICAgICBmdW5jdGlvbiBkaXNhYmxlZCgpIHt9ZGlzYWJsZWQuZW5hYmxlZCA9IGZhbHNlO2Z1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICAgICAgdmFyIHNlbGYgPSBlbmFibGVkO3ZhciBjdXJyID0gK25ldyBEYXRlKCk7dmFyIG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtzZWxmLmRpZmYgPSBtcztzZWxmLnByZXYgPSBwcmV2VGltZTtzZWxmLmN1cnIgPSBjdXJyO3ByZXZUaW1lID0gY3VycjtpZiAobnVsbCA9PSBzZWxmLnVzZUNvbG9ycykgc2VsZi51c2VDb2xvcnMgPSBleHBvcnRzLnVzZUNvbG9ycygpO2lmIChudWxsID09IHNlbGYuY29sb3IgJiYgc2VsZi51c2VDb2xvcnMpIHNlbGYuY29sb3IgPSBzZWxlY3RDb2xvcigpO3ZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTthcmdzWzBdID0gZXhwb3J0cy5jb2VyY2UoYXJnc1swXSk7aWYgKFwic3RyaW5nXCIgIT09IHR5cGVvZiBhcmdzWzBdKSB7XG4gICAgICAgICAgICBhcmdzID0gW1wiJW9cIl0uY29uY2F0KGFyZ3MpO1xuICAgICAgICAgIH12YXIgaW5kZXggPSAwO2FyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EteiVdKS9nLCBmdW5jdGlvbiAobWF0Y2gsIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKG1hdGNoID09PSBcIiUlXCIpIHJldHVybiBtYXRjaDtpbmRleCsrO3ZhciBmb3JtYXR0ZXIgPSBleHBvcnRzLmZvcm1hdHRlcnNbZm9ybWF0XTtpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgZm9ybWF0dGVyKSB7XG4gICAgICAgICAgICAgIHZhciB2YWwgPSBhcmdzW2luZGV4XTttYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7YXJncy5zcGxpY2UoaW5kZXgsIDEpO2luZGV4LS07XG4gICAgICAgICAgICB9cmV0dXJuIG1hdGNoO1xuICAgICAgICAgIH0pO2lmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBleHBvcnRzLmZvcm1hdEFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBleHBvcnRzLmZvcm1hdEFyZ3MuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfXZhciBsb2dGbiA9IGVuYWJsZWQubG9nIHx8IGV4cG9ydHMubG9nIHx8IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgIH1lbmFibGVkLmVuYWJsZWQgPSB0cnVlO3ZhciBmbiA9IGV4cG9ydHMuZW5hYmxlZChuYW1lc3BhY2UpID8gZW5hYmxlZCA6IGRpc2FibGVkO2ZuLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtyZXR1cm4gZm47XG4gICAgICB9ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcbiAgICAgICAgZXhwb3J0cy5zYXZlKG5hbWVzcGFjZXMpO3ZhciBzcGxpdCA9IChuYW1lc3BhY2VzIHx8IFwiXCIpLnNwbGl0KC9bXFxzLF0rLyk7dmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCBcIi4qP1wiKTtpZiAobmFtZXNwYWNlc1swXSA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyBcIiRcIikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHBvcnRzLm5hbWVzLnB1c2gobmV3IFJlZ0V4cChcIl5cIiArIG5hbWVzcGFjZXMgKyBcIiRcIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfWZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIGV4cG9ydHMuZW5hYmxlKFwiXCIpO1xuICAgICAgfWZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuICAgICAgICB2YXIgaSwgbGVuO2ZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9Zm9yIChpID0gMCwgbGVuID0gZXhwb3J0cy5uYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGlmIChleHBvcnRzLm5hbWVzW2ldLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiBmYWxzZTtcbiAgICAgIH1mdW5jdGlvbiBjb2VyY2UodmFsKSB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtyZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH0sIHsgbXM6IDI1IH1dLCAxOTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBrZXlzID0gX2RlcmVxXyhcIi4va2V5c1wiKTt2YXIgaGFzQmluYXJ5ID0gX2RlcmVxXyhcImhhcy1iaW5hcnlcIik7dmFyIHNsaWNlQnVmZmVyID0gX2RlcmVxXyhcImFycmF5YnVmZmVyLnNsaWNlXCIpO3ZhciBiYXNlNjRlbmNvZGVyID0gX2RlcmVxXyhcImJhc2U2NC1hcnJheWJ1ZmZlclwiKTt2YXIgYWZ0ZXIgPSBfZGVyZXFfKFwiYWZ0ZXJcIik7dmFyIHV0ZjggPSBfZGVyZXFfKFwidXRmOFwiKTt2YXIgaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKTt2YXIgaXNQaGFudG9tSlMgPSAvUGhhbnRvbUpTL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgZG9udFNlbmRCbG9icyA9IGlzQW5kcm9pZCB8fCBpc1BoYW50b21KUztleHBvcnRzLnByb3RvY29sID0gMzt2YXIgcGFja2V0cyA9IGV4cG9ydHMucGFja2V0cyA9IHsgb3BlbjogMCwgY2xvc2U6IDEsIHBpbmc6IDIsIHBvbmc6IDMsIG1lc3NhZ2U6IDQsIHVwZ3JhZGU6IDUsIG5vb3A6IDYgfTt2YXIgcGFja2V0c2xpc3QgPSBrZXlzKHBhY2tldHMpO3ZhciBlcnIgPSB7IHR5cGU6IFwiZXJyb3JcIiwgZGF0YTogXCJwYXJzZXIgZXJyb3JcIiB9O3ZhciBCbG9iID0gX2RlcmVxXyhcImJsb2JcIik7ZXhwb3J0cy5lbmNvZGVQYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgdXRmOGVuY29kZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBzdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBzdXBwb3J0c0JpbmFyeTtzdXBwb3J0c0JpbmFyeSA9IGZhbHNlO1xuICAgICAgICAgIH1pZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiB1dGY4ZW5jb2RlKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHV0ZjhlbmNvZGU7dXRmOGVuY29kZSA9IG51bGw7XG4gICAgICAgICAgfXZhciBkYXRhID0gcGFja2V0LmRhdGEgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHBhY2tldC5kYXRhLmJ1ZmZlciB8fCBwYWNrZXQuZGF0YTtpZiAoZ2xvYmFsLkFycmF5QnVmZmVyICYmIGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGVuY29kZUFycmF5QnVmZmVyKHBhY2tldCwgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEJsb2IgJiYgZGF0YSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQmxvYihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjayk7XG4gICAgICAgICAgfWlmIChkYXRhICYmIGRhdGEuYmFzZTY0KSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQmFzZTY0T2JqZWN0KHBhY2tldCwgY2FsbGJhY2spO1xuICAgICAgICAgIH12YXIgZW5jb2RlZCA9IHBhY2tldHNbcGFja2V0LnR5cGVdO2lmICh1bmRlZmluZWQgIT09IHBhY2tldC5kYXRhKSB7XG4gICAgICAgICAgICBlbmNvZGVkICs9IHV0ZjhlbmNvZGUgPyB1dGY4LmVuY29kZShTdHJpbmcocGFja2V0LmRhdGEpKSA6IFN0cmluZyhwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgfXJldHVybiBjYWxsYmFjayhcIlwiICsgZW5jb2RlZCk7XG4gICAgICAgIH07ZnVuY3Rpb24gZW5jb2RlQmFzZTY0T2JqZWN0KHBhY2tldCwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiYlwiICsgZXhwb3J0cy5wYWNrZXRzW3BhY2tldC50eXBlXSArIHBhY2tldC5kYXRhLmRhdGE7cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICB9ZnVuY3Rpb24gZW5jb2RlQXJyYXlCdWZmZXIocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAoIXN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LCBjYWxsYmFjayk7XG4gICAgICAgICAgfXZhciBkYXRhID0gcGFja2V0LmRhdGE7dmFyIGNvbnRlbnRBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO3ZhciByZXN1bHRCdWZmZXIgPSBuZXcgVWludDhBcnJheSgxICsgZGF0YS5ieXRlTGVuZ3RoKTtyZXN1bHRCdWZmZXJbMF0gPSBwYWNrZXRzW3BhY2tldC50eXBlXTtmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0QnVmZmVyW2kgKyAxXSA9IGNvbnRlbnRBcnJheVtpXTtcbiAgICAgICAgICB9cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICB9ZnVuY3Rpb24gZW5jb2RlQmxvYkFzQXJyYXlCdWZmZXIocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAoIXN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LCBjYWxsYmFjayk7XG4gICAgICAgICAgfXZhciBmciA9IG5ldyBGaWxlUmVhZGVyKCk7ZnIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcGFja2V0LmRhdGEgPSBmci5yZXN1bHQ7ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgdHJ1ZSwgY2FsbGJhY2spO1xuICAgICAgICAgIH07cmV0dXJuIGZyLnJlYWRBc0FycmF5QnVmZmVyKHBhY2tldC5kYXRhKTtcbiAgICAgICAgfWZ1bmN0aW9uIGVuY29kZUJsb2IocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAoIXN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LCBjYWxsYmFjayk7XG4gICAgICAgICAgfWlmIChkb250U2VuZEJsb2JzKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQmxvYkFzQXJyYXlCdWZmZXIocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spO1xuICAgICAgICAgIH12YXIgbGVuZ3RoID0gbmV3IFVpbnQ4QXJyYXkoMSk7bGVuZ3RoWzBdID0gcGFja2V0c1twYWNrZXQudHlwZV07dmFyIGJsb2IgPSBuZXcgQmxvYihbbGVuZ3RoLmJ1ZmZlciwgcGFja2V0LmRhdGFdKTtyZXR1cm4gY2FsbGJhY2soYmxvYik7XG4gICAgICAgIH1leHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcImJcIiArIGV4cG9ydHMucGFja2V0c1twYWNrZXQudHlwZV07aWYgKEJsb2IgJiYgcGFja2V0LmRhdGEgaW5zdGFuY2VvZiBnbG9iYWwuQmxvYikge1xuICAgICAgICAgICAgdmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtmci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBiNjQgPSBmci5yZXN1bHQuc3BsaXQoXCIsXCIpWzFdO2NhbGxiYWNrKG1lc3NhZ2UgKyBiNjQpO1xuICAgICAgICAgICAgfTtyZXR1cm4gZnIucmVhZEFzRGF0YVVSTChwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgfXZhciBiNjRkYXRhO3RyeSB7XG4gICAgICAgICAgICBiNjRkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShwYWNrZXQuZGF0YSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHZhciB0eXBlZCA9IG5ldyBVaW50OEFycmF5KHBhY2tldC5kYXRhKTt2YXIgYmFzaWMgPSBuZXcgQXJyYXkodHlwZWQubGVuZ3RoKTtmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGJhc2ljW2ldID0gdHlwZWRbaV07XG4gICAgICAgICAgICB9YjY0ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYmFzaWMpO1xuICAgICAgICAgIH1tZXNzYWdlICs9IGdsb2JhbC5idG9hKGI2NGRhdGEpO3JldHVybiBjYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgfTtleHBvcnRzLmRlY29kZVBhY2tldCA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCB1dGY4ZGVjb2RlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09IFwic3RyaW5nXCIgfHwgZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5jaGFyQXQoMCkgPT0gXCJiXCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuZGVjb2RlQmFzZTY0UGFja2V0KGRhdGEuc3Vic3RyKDEpLCBiaW5hcnlUeXBlKTtcbiAgICAgICAgICAgIH1pZiAodXRmOGRlY29kZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB1dGY4LmRlY29kZShkYXRhKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH12YXIgdHlwZSA9IGRhdGEuY2hhckF0KDApO2lmIChOdW1iZXIodHlwZSkgIT0gdHlwZSB8fCAhcGFja2V0c2xpc3RbdHlwZV0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH1pZiAoZGF0YS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IHBhY2tldHNsaXN0W3R5cGVdLCBkYXRhOiBkYXRhLnN1YnN0cmluZygxKSB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogcGFja2V0c2xpc3RbdHlwZV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9dmFyIGFzQXJyYXkgPSBuZXcgVWludDhBcnJheShkYXRhKTt2YXIgdHlwZSA9IGFzQXJyYXlbMF07dmFyIHJlc3QgPSBzbGljZUJ1ZmZlcihkYXRhLCAxKTtpZiAoQmxvYiAmJiBiaW5hcnlUeXBlID09PSBcImJsb2JcIikge1xuICAgICAgICAgICAgcmVzdCA9IG5ldyBCbG9iKFtyZXN0XSk7XG4gICAgICAgICAgfXJldHVybiB7IHR5cGU6IHBhY2tldHNsaXN0W3R5cGVdLCBkYXRhOiByZXN0IH07XG4gICAgICAgIH07ZXhwb3J0cy5kZWNvZGVCYXNlNjRQYWNrZXQgPSBmdW5jdGlvbiAobXNnLCBiaW5hcnlUeXBlKSB7XG4gICAgICAgICAgdmFyIHR5cGUgPSBwYWNrZXRzbGlzdFttc2cuY2hhckF0KDApXTtpZiAoIWdsb2JhbC5BcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogdHlwZSwgZGF0YTogeyBiYXNlNjQ6IHRydWUsIGRhdGE6IG1zZy5zdWJzdHIoMSkgfSB9O1xuICAgICAgICAgIH12YXIgZGF0YSA9IGJhc2U2NGVuY29kZXIuZGVjb2RlKG1zZy5zdWJzdHIoMSkpO2lmIChiaW5hcnlUeXBlID09PSBcImJsb2JcIiAmJiBCbG9iKSB7XG4gICAgICAgICAgICBkYXRhID0gbmV3IEJsb2IoW2RhdGFdKTtcbiAgICAgICAgICB9cmV0dXJuIHsgdHlwZTogdHlwZSwgZGF0YTogZGF0YSB9O1xuICAgICAgICB9O2V4cG9ydHMuZW5jb2RlUGF5bG9hZCA9IGZ1bmN0aW9uIChwYWNrZXRzLCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1cHBvcnRzQmluYXJ5ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBzdXBwb3J0c0JpbmFyeTtzdXBwb3J0c0JpbmFyeSA9IG51bGw7XG4gICAgICAgICAgfXZhciBpc0JpbmFyeSA9IGhhc0JpbmFyeShwYWNrZXRzKTtpZiAoc3VwcG9ydHNCaW5hcnkgJiYgaXNCaW5hcnkpIHtcbiAgICAgICAgICAgIGlmIChCbG9iICYmICFkb250U2VuZEJsb2JzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0Jsb2IocGFja2V0cywgY2FsbGJhY2spO1xuICAgICAgICAgICAgfXJldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyKHBhY2tldHMsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9aWYgKCFwYWNrZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFwiMDpcIik7XG4gICAgICAgICAgfWZ1bmN0aW9uIHNldExlbmd0aEhlYWRlcihtZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5sZW5ndGggKyBcIjpcIiArIG1lc3NhZ2U7XG4gICAgICAgICAgfWZ1bmN0aW9uIGVuY29kZU9uZShwYWNrZXQsIGRvbmVDYWxsYmFjaykge1xuICAgICAgICAgICAgZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCAhaXNCaW5hcnkgPyBmYWxzZSA6IHN1cHBvcnRzQmluYXJ5LCB0cnVlLCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICBkb25lQ2FsbGJhY2sobnVsbCwgc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1tYXAocGFja2V0cywgZW5jb2RlT25lLCBmdW5jdGlvbiAoZXJyLCByZXN1bHRzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVzdWx0cy5qb2luKFwiXCIpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtmdW5jdGlvbiBtYXAoYXJ5LCBlYWNoLCBkb25lKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShhcnkubGVuZ3RoKTt2YXIgbmV4dCA9IGFmdGVyKGFyeS5sZW5ndGgsIGRvbmUpO3ZhciBlYWNoV2l0aEluZGV4ID0gZnVuY3Rpb24gZWFjaFdpdGhJbmRleChpLCBlbCwgY2IpIHtcbiAgICAgICAgICAgIGVhY2goZWwsIGZ1bmN0aW9uIChlcnJvciwgbXNnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdFtpXSA9IG1zZztjYihlcnJvciwgcmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGVhY2hXaXRoSW5kZXgoaSwgYXJ5W2ldLCBuZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1leHBvcnRzLmRlY29kZVBheWxvYWQgPSBmdW5jdGlvbiAoZGF0YSwgYmluYXJ5VHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuZGVjb2RlUGF5bG9hZEFzQmluYXJ5KGRhdGEsIGJpbmFyeVR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9aWYgKHR5cGVvZiBiaW5hcnlUeXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYmluYXJ5VHlwZTtiaW5hcnlUeXBlID0gbnVsbDtcbiAgICAgICAgICB9dmFyIHBhY2tldDtpZiAoZGF0YSA9PSBcIlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcbiAgICAgICAgICB9dmFyIGxlbmd0aCA9IFwiXCIsXG4gICAgICAgICAgICAgIG4sXG4gICAgICAgICAgICAgIG1zZztmb3IgKHZhciBpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hyID0gZGF0YS5jaGFyQXQoaSk7aWYgKFwiOlwiICE9IGNocikge1xuICAgICAgICAgICAgICBsZW5ndGggKz0gY2hyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKFwiXCIgPT0gbGVuZ3RoIHx8IGxlbmd0aCAhPSAobiA9IE51bWJlcihsZW5ndGgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIDAsIDEpO1xuICAgICAgICAgICAgICB9bXNnID0gZGF0YS5zdWJzdHIoaSArIDEsIG4pO2lmIChsZW5ndGggIT0gbXNnLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIDAsIDEpO1xuICAgICAgICAgICAgICB9aWYgKG1zZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBwYWNrZXQgPSBleHBvcnRzLmRlY29kZVBhY2tldChtc2csIGJpbmFyeVR5cGUsIHRydWUpO2lmIChlcnIudHlwZSA9PSBwYWNrZXQudHlwZSAmJiBlcnIuZGF0YSA9PSBwYWNrZXQuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7XG4gICAgICAgICAgICAgICAgfXZhciByZXQgPSBjYWxsYmFjayhwYWNrZXQsIGkgKyBuLCBsKTtpZiAoZmFsc2UgPT09IHJldCkgcmV0dXJuO1xuICAgICAgICAgICAgICB9aSArPSBuO2xlbmd0aCA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWlmIChsZW5ndGggIT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O2V4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAocGFja2V0cywgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAoIXBhY2tldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEFycmF5QnVmZmVyKDApKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCwgZG9uZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsIHRydWUsIHRydWUsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkb25lQ2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9bWFwKHBhY2tldHMsIGVuY29kZU9uZSwgZnVuY3Rpb24gKGVyciwgZW5jb2RlZFBhY2tldHMpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbExlbmd0aCA9IGVuY29kZWRQYWNrZXRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwKSB7XG4gICAgICAgICAgICAgIHZhciBsZW47aWYgKHR5cGVvZiBwID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbGVuID0gcC5sZW5ndGg7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVuID0gcC5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICB9cmV0dXJuIGFjYyArIGxlbi50b1N0cmluZygpLmxlbmd0aCArIGxlbiArIDI7XG4gICAgICAgICAgICB9LCAwKTt2YXIgcmVzdWx0QXJyYXkgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7dmFyIGJ1ZmZlckluZGV4ID0gMDtlbmNvZGVkUGFja2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAgIHZhciBpc1N0cmluZyA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiO3ZhciBhYiA9IHA7aWYgKGlzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShwLmxlbmd0aCk7Zm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICB2aWV3W2ldID0gcC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgIH1hYiA9IHZpZXcuYnVmZmVyO1xuICAgICAgICAgICAgICB9aWYgKGlzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK10gPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gMTtcbiAgICAgICAgICAgICAgfXZhciBsZW5TdHIgPSBhYi5ieXRlTGVuZ3RoLnRvU3RyaW5nKCk7Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5TdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IHBhcnNlSW50KGxlblN0cltpXSk7XG4gICAgICAgICAgICAgIH1yZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDI1NTt2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGFiKTtmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IHZpZXdbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO3JldHVybiBjYWxsYmFjayhyZXN1bHRBcnJheS5idWZmZXIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O2V4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQmxvYiA9IGZ1bmN0aW9uIChwYWNrZXRzLCBjYWxsYmFjaykge1xuICAgICAgICAgIGZ1bmN0aW9uIGVuY29kZU9uZShwYWNrZXQsIGRvbmVDYWxsYmFjaykge1xuICAgICAgICAgICAgZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LCB0cnVlLCB0cnVlLCBmdW5jdGlvbiAoZW5jb2RlZCkge1xuICAgICAgICAgICAgICB2YXIgYmluYXJ5SWRlbnRpZmllciA9IG5ldyBVaW50OEFycmF5KDEpO2JpbmFyeUlkZW50aWZpZXJbMF0gPSAxO2lmICh0eXBlb2YgZW5jb2RlZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZW5jb2RlZC5sZW5ndGgpO2ZvciAodmFyIGkgPSAwOyBpIDwgZW5jb2RlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgdmlld1tpXSA9IGVuY29kZWQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgICAgICB9ZW5jb2RlZCA9IHZpZXcuYnVmZmVyO2JpbmFyeUlkZW50aWZpZXJbMF0gPSAwO1xuICAgICAgICAgICAgICB9dmFyIGxlbiA9IGVuY29kZWQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IGVuY29kZWQuYnl0ZUxlbmd0aCA6IGVuY29kZWQuc2l6ZTt2YXIgbGVuU3RyID0gbGVuLnRvU3RyaW5nKCk7dmFyIGxlbmd0aEFyeSA9IG5ldyBVaW50OEFycmF5KGxlblN0ci5sZW5ndGggKyAxKTtmb3IgKHZhciBpID0gMDsgaSA8IGxlblN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxlbmd0aEFyeVtpXSA9IHBhcnNlSW50KGxlblN0cltpXSk7XG4gICAgICAgICAgICAgIH1sZW5ndGhBcnlbbGVuU3RyLmxlbmd0aF0gPSAyNTU7aWYgKEJsb2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtiaW5hcnlJZGVudGlmaWVyLmJ1ZmZlciwgbGVuZ3RoQXJ5LmJ1ZmZlciwgZW5jb2RlZF0pO2RvbmVDYWxsYmFjayhudWxsLCBibG9iKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfW1hcChwYWNrZXRzLCBlbmNvZGVPbmUsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgQmxvYihyZXN1bHRzKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07ZXhwb3J0cy5kZWNvZGVQYXlsb2FkQXNCaW5hcnkgPSBmdW5jdGlvbiAoZGF0YSwgYmluYXJ5VHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGJpbmFyeVR5cGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBiaW5hcnlUeXBlO2JpbmFyeVR5cGUgPSBudWxsO1xuICAgICAgICAgIH12YXIgYnVmZmVyVGFpbCA9IGRhdGE7dmFyIGJ1ZmZlcnMgPSBbXTt2YXIgbnVtYmVyVG9vTG9uZyA9IGZhbHNlO3doaWxlIChidWZmZXJUYWlsLmJ5dGVMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgdGFpbEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyVGFpbCk7dmFyIGlzU3RyaW5nID0gdGFpbEFycmF5WzBdID09PSAwO3ZhciBtc2dMZW5ndGggPSBcIlwiO2ZvciAodmFyIGkgPSAxOzsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0YWlsQXJyYXlbaV0gPT0gMjU1KSBicmVhaztpZiAobXNnTGVuZ3RoLmxlbmd0aCA+IDMxMCkge1xuICAgICAgICAgICAgICAgIG51bWJlclRvb0xvbmcgPSB0cnVlO2JyZWFrO1xuICAgICAgICAgICAgICB9bXNnTGVuZ3RoICs9IHRhaWxBcnJheVtpXTtcbiAgICAgICAgICAgIH1pZiAobnVtYmVyVG9vTG9uZykgcmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7YnVmZmVyVGFpbCA9IHNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsIDIgKyBtc2dMZW5ndGgubGVuZ3RoKTttc2dMZW5ndGggPSBwYXJzZUludChtc2dMZW5ndGgpO3ZhciBtc2cgPSBzbGljZUJ1ZmZlcihidWZmZXJUYWlsLCAwLCBtc2dMZW5ndGgpO2lmIChpc1N0cmluZykge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG1zZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkobXNnKSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZWQgPSBuZXcgVWludDhBcnJheShtc2cpO21zZyA9IFwiXCI7Zm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgbXNnICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodHlwZWRbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWJ1ZmZlcnMucHVzaChtc2cpO2J1ZmZlclRhaWwgPSBzbGljZUJ1ZmZlcihidWZmZXJUYWlsLCBtc2dMZW5ndGgpO1xuICAgICAgICAgIH12YXIgdG90YWwgPSBidWZmZXJzLmxlbmd0aDtidWZmZXJzLmZvckVhY2goZnVuY3Rpb24gKGJ1ZmZlciwgaSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZXhwb3J0cy5kZWNvZGVQYWNrZXQoYnVmZmVyLCBiaW5hcnlUeXBlLCB0cnVlKSwgaSwgdG90YWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IFwiLi9rZXlzXCI6IDIwLCBhZnRlcjogMTEsIFwiYXJyYXlidWZmZXIuc2xpY2VcIjogMTIsIFwiYmFzZTY0LWFycmF5YnVmZmVyXCI6IDEzLCBibG9iOiAxNCwgXCJoYXMtYmluYXJ5XCI6IDIxLCB1dGY4OiAyOSB9XSwgMjA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gICAgICAgIHZhciBhcnIgPSBbXTt2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmb3IgKHZhciBpIGluIG9iaikge1xuICAgICAgICAgIGlmIChoYXMuY2FsbChvYmosIGkpKSB7XG4gICAgICAgICAgICBhcnIucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gYXJyO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDIxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBfZGVyZXFfKFwiaXNhcnJheVwiKTttb2R1bGUuZXhwb3J0cyA9IGhhc0JpbmFyeTtmdW5jdGlvbiBoYXNCaW5hcnkoZGF0YSkge1xuICAgICAgICAgIGZ1bmN0aW9uIF9oYXNCaW5hcnkob2JqKSB7XG4gICAgICAgICAgICBpZiAoIW9iaikgcmV0dXJuIGZhbHNlO2lmIChnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIob2JqKSB8fCBnbG9iYWwuQXJyYXlCdWZmZXIgJiYgb2JqIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgZ2xvYmFsLkJsb2IgJiYgb2JqIGluc3RhbmNlb2YgQmxvYiB8fCBnbG9iYWwuRmlsZSAmJiBvYmogaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfWlmIChpc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoX2hhc0JpbmFyeShvYmpbaV0pKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIG9iaikge1xuICAgICAgICAgICAgICBpZiAob2JqLnRvSlNPTikge1xuICAgICAgICAgICAgICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgICAgICAgICAgICAgfWZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSAmJiBfaGFzQmluYXJ5KG9ialtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9cmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1yZXR1cm4gX2hhc0JpbmFyeShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IGlzYXJyYXk6IDI0IH1dLCAyMjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFwid2l0aENyZWRlbnRpYWxzXCIgaW4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9LCB7fV0sIDIzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIGluZGV4T2YgPSBbXS5pbmRleE9mO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgb2JqKSB7XG4gICAgICAgIGlmIChpbmRleE9mKSByZXR1cm4gYXJyLmluZGV4T2Yob2JqKTtmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG4gICAgICAgIH1yZXR1cm4gLTE7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMjQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDI1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIHMgPSAxZTM7dmFyIG0gPSBzICogNjA7dmFyIGggPSBtICogNjA7dmFyIGQgPSBoICogMjQ7dmFyIHkgPSBkICogMzY1LjI1O21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdmFsKSByZXR1cm4gcGFyc2UodmFsKTtyZXR1cm4gb3B0aW9ucy5sb25nID8gbG9uZyh2YWwpIDogc2hvcnQodmFsKTtcbiAgICAgIH07ZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gICAgICAgIHN0ciA9IFwiXCIgKyBzdHI7aWYgKHN0ci5sZW5ndGggPiAxZTQpIHJldHVybjt2YXIgbWF0Y2ggPSAvXigoPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKHN0cik7aWYgKCFtYXRjaCkgcmV0dXJuO3ZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7dmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgXCJtc1wiKS50b0xvd2VyQ2FzZSgpO3N3aXRjaCAodHlwZSkge2Nhc2UgXCJ5ZWFyc1wiOmNhc2UgXCJ5ZWFyXCI6Y2FzZSBcInlyc1wiOmNhc2UgXCJ5clwiOmNhc2UgXCJ5XCI6XG4gICAgICAgICAgICByZXR1cm4gbiAqIHk7Y2FzZSBcImRheXNcIjpjYXNlIFwiZGF5XCI6Y2FzZSBcImRcIjpcbiAgICAgICAgICAgIHJldHVybiBuICogZDtjYXNlIFwiaG91cnNcIjpjYXNlIFwiaG91clwiOmNhc2UgXCJocnNcIjpjYXNlIFwiaHJcIjpjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIG4gKiBoO2Nhc2UgXCJtaW51dGVzXCI6Y2FzZSBcIm1pbnV0ZVwiOmNhc2UgXCJtaW5zXCI6Y2FzZSBcIm1pblwiOmNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gbiAqIG07Y2FzZSBcInNlY29uZHNcIjpjYXNlIFwic2Vjb25kXCI6Y2FzZSBcInNlY3NcIjpjYXNlIFwic2VjXCI6Y2FzZSBcInNcIjpcbiAgICAgICAgICAgIHJldHVybiBuICogcztjYXNlIFwibWlsbGlzZWNvbmRzXCI6Y2FzZSBcIm1pbGxpc2Vjb25kXCI6Y2FzZSBcIm1zZWNzXCI6Y2FzZSBcIm1zZWNcIjpjYXNlIFwibXNcIjpcbiAgICAgICAgICAgIHJldHVybiBuO31cbiAgICAgIH1mdW5jdGlvbiBzaG9ydChtcykge1xuICAgICAgICBpZiAobXMgPj0gZCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArIFwiZFwiO2lmIChtcyA+PSBoKSByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgXCJoXCI7aWYgKG1zID49IG0pIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyBcIm1cIjtpZiAobXMgPj0gcykgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArIFwic1wiO3JldHVybiBtcyArIFwibXNcIjtcbiAgICAgIH1mdW5jdGlvbiBsb25nKG1zKSB7XG4gICAgICAgIHJldHVybiBwbHVyYWwobXMsIGQsIFwiZGF5XCIpIHx8IHBsdXJhbChtcywgaCwgXCJob3VyXCIpIHx8IHBsdXJhbChtcywgbSwgXCJtaW51dGVcIikgfHwgcGx1cmFsKG1zLCBzLCBcInNlY29uZFwiKSB8fCBtcyArIFwiIG1zXCI7XG4gICAgICB9ZnVuY3Rpb24gcGx1cmFsKG1zLCBuLCBuYW1lKSB7XG4gICAgICAgIGlmIChtcyA8IG4pIHJldHVybjtpZiAobXMgPCBuICogMS41KSByZXR1cm4gTWF0aC5mbG9vcihtcyAvIG4pICsgXCIgXCIgKyBuYW1lO3JldHVybiBNYXRoLmNlaWwobXMgLyBuKSArIFwiIFwiICsgbmFtZSArIFwic1wiO1xuICAgICAgfVxuICAgIH0sIHt9XSwgMjY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgcnZhbGlkY2hhcnMgPSAvXltcXF0sOnt9XFxzXSokLzt2YXIgcnZhbGlkZXNjYXBlID0gL1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZzt2YXIgcnZhbGlkdG9rZW5zID0gL1wiW15cIlxcXFxcXG5cXHJdKlwifHRydWV8ZmFsc2V8bnVsbHwtP1xcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy9nO3ZhciBydmFsaWRicmFjZXMgPSAvKD86Xnw6fCwpKD86XFxzKlxcWykrL2c7dmFyIHJ0cmltTGVmdCA9IC9eXFxzKy87dmFyIHJ0cmltUmlnaHQgPSAvXFxzKyQvO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2Vqc29uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgZGF0YSB8fCAhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfWRhdGEgPSBkYXRhLnJlcGxhY2UocnRyaW1MZWZ0LCBcIlwiKS5yZXBsYWNlKHJ0cmltUmlnaHQsIFwiXCIpO2lmIChnbG9iYWwuSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICB9aWYgKHJ2YWxpZGNoYXJzLnRlc3QoZGF0YS5yZXBsYWNlKHJ2YWxpZGVzY2FwZSwgXCJAXCIpLnJlcGxhY2UocnZhbGlkdG9rZW5zLCBcIl1cIikucmVwbGFjZShydmFsaWRicmFjZXMsIFwiXCIpKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInJldHVybiBcIiArIGRhdGEpKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7fV0sIDI3OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgZXhwb3J0cy5lbmNvZGUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciBzdHIgPSBcIlwiO2ZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGgpIHN0ciArPSBcIiZcIjtzdHIgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gc3RyO1xuICAgICAgfTtleHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uIChxcykge1xuICAgICAgICB2YXIgcXJ5ID0ge307dmFyIHBhaXJzID0gcXMuc3BsaXQoXCImXCIpO2ZvciAodmFyIGkgPSAwLCBsID0gcGFpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdChcIj1cIik7cXJ5W2RlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICAgIH1yZXR1cm4gcXJ5O1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDI4OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIHJlID0gL14oPzooPyFbXjpAXSs6W146QFxcL10qQCkoaHR0cHxodHRwc3x3c3x3c3MpOlxcL1xcLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oKD86W2EtZjAtOV17MCw0fTopezIsN31bYS1mMC05XXswLDR9fFteOlxcLz8jXSopKD86OihcXGQqKSk/KSgoKFxcLyg/OltePyNdKD8hW14/I1xcL10qXFwuW14/I1xcLy5dKyg/Ols/I118JCkpKSpcXC8/KT8oW14/I1xcL10qKSkoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/KS87dmFyIHBhcnRzID0gW1wic291cmNlXCIsIFwicHJvdG9jb2xcIiwgXCJhdXRob3JpdHlcIiwgXCJ1c2VySW5mb1wiLCBcInVzZXJcIiwgXCJwYXNzd29yZFwiLCBcImhvc3RcIiwgXCJwb3J0XCIsIFwicmVsYXRpdmVcIiwgXCJwYXRoXCIsIFwiZGlyZWN0b3J5XCIsIFwiZmlsZVwiLCBcInF1ZXJ5XCIsIFwiYW5jaG9yXCJdO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2V1cmkoc3RyKSB7XG4gICAgICAgIHZhciBzcmMgPSBzdHIsXG4gICAgICAgICAgICBiID0gc3RyLmluZGV4T2YoXCJbXCIpLFxuICAgICAgICAgICAgZSA9IHN0ci5pbmRleE9mKFwiXVwiKTtpZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG4gICAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCBiKSArIHN0ci5zdWJzdHJpbmcoYiwgZSkucmVwbGFjZSgvOi9nLCBcIjtcIikgKyBzdHIuc3Vic3RyaW5nKGUsIHN0ci5sZW5ndGgpO1xuICAgICAgICB9dmFyIG0gPSByZS5leGVjKHN0ciB8fCBcIlwiKSxcbiAgICAgICAgICAgIHVyaSA9IHt9LFxuICAgICAgICAgICAgaSA9IDE0O3doaWxlIChpLS0pIHtcbiAgICAgICAgICB1cmlbcGFydHNbaV1dID0gbVtpXSB8fCBcIlwiO1xuICAgICAgICB9aWYgKGIgIT0gLTEgJiYgZSAhPSAtMSkge1xuICAgICAgICAgIHVyaS5zb3VyY2UgPSBzcmM7dXJpLmhvc3QgPSB1cmkuaG9zdC5zdWJzdHJpbmcoMSwgdXJpLmhvc3QubGVuZ3RoIC0gMSkucmVwbGFjZSgvOy9nLCBcIjpcIik7dXJpLmF1dGhvcml0eSA9IHVyaS5hdXRob3JpdHkucmVwbGFjZShcIltcIiwgXCJcIikucmVwbGFjZShcIl1cIiwgXCJcIikucmVwbGFjZSgvOy9nLCBcIjpcIik7dXJpLmlwdjZ1cmkgPSB0cnVlO1xuICAgICAgICB9cmV0dXJuIHVyaTtcbiAgICAgIH07XG4gICAgfSwge31dLCAyOTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIChmdW5jdGlvbiAocm9vdCkge1xuICAgICAgICAgIHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgZXhwb3J0czt2YXIgZnJlZU1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIiAmJiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMgJiYgbW9kdWxlO3ZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbDtpZiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwpIHtcbiAgICAgICAgICAgIHJvb3QgPSBmcmVlR2xvYmFsO1xuICAgICAgICAgIH12YXIgc3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtmdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IFtdO3ZhciBjb3VudGVyID0gMDt2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDt2YXIgdmFsdWU7dmFyIGV4dHJhO3doaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtpZiAodmFsdWUgPj0gNTUyOTYgJiYgdmFsdWUgPD0gNTYzMTkgJiYgY291bnRlciA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtpZiAoKGV4dHJhICYgNjQ1MTIpID09IDU2MzIwKSB7XG4gICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgoKHZhbHVlICYgMTAyMykgPDwgMTApICsgKGV4dHJhICYgMTAyMykgKyA2NTUzNik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHZhbHVlKTtjb3VudGVyLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfXJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgfWZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7dmFyIGluZGV4ID0gLTE7dmFyIHZhbHVlO3ZhciBvdXRwdXQgPSBcIlwiO3doaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gYXJyYXlbaW5kZXhdO2lmICh2YWx1ZSA+IDY1NTM1KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgLT0gNjU1MzY7b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAxMDIzIHwgNTUyOTYpO3ZhbHVlID0gNTYzMjAgfCB2YWx1ZSAmIDEwMjM7XG4gICAgICAgICAgICAgIH1vdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIH1yZXR1cm4gb3V0cHV0O1xuICAgICAgICAgIH1mdW5jdGlvbiBjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCkge1xuICAgICAgICAgICAgaWYgKGNvZGVQb2ludCA+PSA1NTI5NiAmJiBjb2RlUG9pbnQgPD0gNTczNDMpIHtcbiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJMb25lIHN1cnJvZ2F0ZSBVK1wiICsgY29kZVBvaW50LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpICsgXCIgaXMgbm90IGEgc2NhbGFyIHZhbHVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1mdW5jdGlvbiBjcmVhdGVCeXRlKGNvZGVQb2ludCwgc2hpZnQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ID4+IHNoaWZ0ICYgNjMgfCAxMjgpO1xuICAgICAgICAgIH1mdW5jdGlvbiBlbmNvZGVDb2RlUG9pbnQoY29kZVBvaW50KSB7XG4gICAgICAgICAgICBpZiAoKGNvZGVQb2ludCAmIDQyOTQ5NjcxNjgpID09IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xuICAgICAgICAgICAgfXZhciBzeW1ib2wgPSBcIlwiO2lmICgoY29kZVBvaW50ICYgNDI5NDk2NTI0OCkgPT0gMCkge1xuICAgICAgICAgICAgICBzeW1ib2wgPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ID4+IDYgJiAzMSB8IDE5Mik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChjb2RlUG9pbnQgJiA0Mjk0OTAxNzYwKSA9PSAwKSB7XG4gICAgICAgICAgICAgIGNoZWNrU2NhbGFyVmFsdWUoY29kZVBvaW50KTtzeW1ib2wgPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ID4+IDEyICYgMTUgfCAyMjQpO3N5bWJvbCArPSBjcmVhdGVCeXRlKGNvZGVQb2ludCwgNik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChjb2RlUG9pbnQgJiA0MjkyODcwMTQ0KSA9PSAwKSB7XG4gICAgICAgICAgICAgIHN5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gMTggJiA3IHwgMjQwKTtzeW1ib2wgKz0gY3JlYXRlQnl0ZShjb2RlUG9pbnQsIDEyKTtzeW1ib2wgKz0gY3JlYXRlQnl0ZShjb2RlUG9pbnQsIDYpO1xuICAgICAgICAgICAgfXN5bWJvbCArPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ICYgNjMgfCAxMjgpO3JldHVybiBzeW1ib2w7XG4gICAgICAgICAgfWZ1bmN0aW9uIHV0ZjhlbmNvZGUoc3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgY29kZVBvaW50cyA9IHVjczJkZWNvZGUoc3RyaW5nKTt2YXIgbGVuZ3RoID0gY29kZVBvaW50cy5sZW5ndGg7dmFyIGluZGV4ID0gLTE7dmFyIGNvZGVQb2ludDt2YXIgYnl0ZVN0cmluZyA9IFwiXCI7d2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gY29kZVBvaW50c1tpbmRleF07Ynl0ZVN0cmluZyArPSBlbmNvZGVDb2RlUG9pbnQoY29kZVBvaW50KTtcbiAgICAgICAgICAgIH1yZXR1cm4gYnl0ZVN0cmluZztcbiAgICAgICAgICB9ZnVuY3Rpb24gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKSB7XG4gICAgICAgICAgICBpZiAoYnl0ZUluZGV4ID49IGJ5dGVDb3VudCkge1xuICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgYnl0ZSBpbmRleFwiKTtcbiAgICAgICAgICAgIH12YXIgY29udGludWF0aW9uQnl0ZSA9IGJ5dGVBcnJheVtieXRlSW5kZXhdICYgMjU1O2J5dGVJbmRleCsrO2lmICgoY29udGludWF0aW9uQnl0ZSAmIDE5MikgPT0gMTI4KSB7XG4gICAgICAgICAgICAgIHJldHVybiBjb250aW51YXRpb25CeXRlICYgNjM7XG4gICAgICAgICAgICB9dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpO1xuICAgICAgICAgIH1mdW5jdGlvbiBkZWNvZGVTeW1ib2woKSB7XG4gICAgICAgICAgICB2YXIgYnl0ZTE7dmFyIGJ5dGUyO3ZhciBieXRlMzt2YXIgYnl0ZTQ7dmFyIGNvZGVQb2ludDtpZiAoYnl0ZUluZGV4ID4gYnl0ZUNvdW50KSB7XG4gICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpO1xuICAgICAgICAgICAgfWlmIChieXRlSW5kZXggPT0gYnl0ZUNvdW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1ieXRlMSA9IGJ5dGVBcnJheVtieXRlSW5kZXhdICYgMjU1O2J5dGVJbmRleCsrO2lmICgoYnl0ZTEgJiAxMjgpID09IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJ5dGUxO1xuICAgICAgICAgICAgfWlmICgoYnl0ZTEgJiAyMjQpID09IDE5Mikge1xuICAgICAgICAgICAgICB2YXIgYnl0ZTIgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO2NvZGVQb2ludCA9IChieXRlMSAmIDMxKSA8PCA2IHwgYnl0ZTI7aWYgKGNvZGVQb2ludCA+PSAxMjgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29kZVBvaW50O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWlmICgoYnl0ZTEgJiAyNDApID09IDIyNCkge1xuICAgICAgICAgICAgICBieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Ynl0ZTMgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO2NvZGVQb2ludCA9IChieXRlMSAmIDE1KSA8PCAxMiB8IGJ5dGUyIDw8IDYgfCBieXRlMztpZiAoY29kZVBvaW50ID49IDIwNDgpIHtcbiAgICAgICAgICAgICAgICBjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCk7cmV0dXJuIGNvZGVQb2ludDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1pZiAoKGJ5dGUxICYgMjQ4KSA9PSAyNDApIHtcbiAgICAgICAgICAgICAgYnl0ZTIgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO2J5dGUzID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtieXRlNCA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50ID0gKGJ5dGUxICYgMTUpIDw8IDE4IHwgYnl0ZTIgPDwgMTIgfCBieXRlMyA8PCA2IHwgYnl0ZTQ7aWYgKGNvZGVQb2ludCA+PSA2NTUzNiAmJiBjb2RlUG9pbnQgPD0gMTExNDExMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2RlUG9pbnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH10aHJvdyBFcnJvcihcIkludmFsaWQgVVRGLTggZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgfXZhciBieXRlQXJyYXk7dmFyIGJ5dGVDb3VudDt2YXIgYnl0ZUluZGV4O2Z1bmN0aW9uIHV0ZjhkZWNvZGUoYnl0ZVN0cmluZykge1xuICAgICAgICAgICAgYnl0ZUFycmF5ID0gdWNzMmRlY29kZShieXRlU3RyaW5nKTtieXRlQ291bnQgPSBieXRlQXJyYXkubGVuZ3RoO2J5dGVJbmRleCA9IDA7dmFyIGNvZGVQb2ludHMgPSBbXTt2YXIgdG1wO3doaWxlICgodG1wID0gZGVjb2RlU3ltYm9sKCkpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnRzLnB1c2godG1wKTtcbiAgICAgICAgICAgIH1yZXR1cm4gdWNzMmVuY29kZShjb2RlUG9pbnRzKTtcbiAgICAgICAgICB9dmFyIHV0ZjggPSB7IHZlcnNpb246IFwiMi4wLjBcIiwgZW5jb2RlOiB1dGY4ZW5jb2RlLCBkZWNvZGU6IHV0ZjhkZWNvZGUgfTtpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gXCJvYmplY3RcIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXRmODtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgIWZyZWVFeHBvcnRzLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpZiAoZnJlZU1vZHVsZSkge1xuICAgICAgICAgICAgICBmcmVlTW9kdWxlLmV4cG9ydHMgPSB1dGY4O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O3ZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdC5oYXNPd25Qcm9wZXJ0eTtmb3IgKHZhciBrZXkgaW4gdXRmOCkge1xuICAgICAgICAgICAgICAgIGhhc093blByb3BlcnR5LmNhbGwodXRmOCwga2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHV0Zjhba2V5XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm9vdC51dGY4ID0gdXRmODtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKHRoaXMpO1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7fV0sIDMwOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgXCJ1c2Ugc3RyaWN0XCI7dmFyIGFscGhhYmV0ID0gXCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ei1fXCIuc3BsaXQoXCJcIiksXG4gICAgICAgICAgbGVuZ3RoID0gNjQsXG4gICAgICAgICAgbWFwID0ge30sXG4gICAgICAgICAgc2VlZCA9IDAsXG4gICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgcHJldjtmdW5jdGlvbiBlbmNvZGUobnVtKSB7XG4gICAgICAgIHZhciBlbmNvZGVkID0gXCJcIjtkbyB7XG4gICAgICAgICAgZW5jb2RlZCA9IGFscGhhYmV0W251bSAlIGxlbmd0aF0gKyBlbmNvZGVkO251bSA9IE1hdGguZmxvb3IobnVtIC8gbGVuZ3RoKTtcbiAgICAgICAgfSB3aGlsZSAobnVtID4gMCk7cmV0dXJuIGVuY29kZWQ7XG4gICAgICB9ZnVuY3Rpb24gZGVjb2RlKHN0cikge1xuICAgICAgICB2YXIgZGVjb2RlZCA9IDA7Zm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGRlY29kZWQgPSBkZWNvZGVkICogbGVuZ3RoICsgbWFwW3N0ci5jaGFyQXQoaSldO1xuICAgICAgICB9cmV0dXJuIGRlY29kZWQ7XG4gICAgICB9ZnVuY3Rpb24geWVhc3QoKSB7XG4gICAgICAgIHZhciBub3cgPSBlbmNvZGUoK25ldyBEYXRlKCkpO2lmIChub3cgIT09IHByZXYpIHJldHVybiBzZWVkID0gMCwgcHJldiA9IG5vdztyZXR1cm4gbm93ICsgXCIuXCIgKyBlbmNvZGUoc2VlZCsrKTtcbiAgICAgIH1mb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSBtYXBbYWxwaGFiZXRbaV1dID0gaTt5ZWFzdC5lbmNvZGUgPSBlbmNvZGU7eWVhc3QuZGVjb2RlID0gZGVjb2RlO21vZHVsZS5leHBvcnRzID0geWVhc3Q7XG4gICAgfSwge31dLCAzMTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciB1cmwgPSBfZGVyZXFfKFwiLi91cmxcIik7dmFyIHBhcnNlciA9IF9kZXJlcV8oXCJzb2NrZXQuaW8tcGFyc2VyXCIpO3ZhciBNYW5hZ2VyID0gX2RlcmVxXyhcIi4vbWFuYWdlclwiKTt2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tY2xpZW50XCIpO21vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGxvb2t1cDt2YXIgY2FjaGUgPSBleHBvcnRzLm1hbmFnZXJzID0ge307ZnVuY3Rpb24gbG9va3VwKHVyaSwgb3B0cykge1xuICAgICAgICBpZiAodHlwZW9mIHVyaSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgb3B0cyA9IHVyaTt1cmkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1vcHRzID0gb3B0cyB8fCB7fTt2YXIgcGFyc2VkID0gdXJsKHVyaSk7dmFyIHNvdXJjZSA9IHBhcnNlZC5zb3VyY2U7dmFyIGlkID0gcGFyc2VkLmlkO3ZhciBwYXRoID0gcGFyc2VkLnBhdGg7dmFyIHNhbWVOYW1lc3BhY2UgPSBjYWNoZVtpZF0gJiYgcGF0aCBpbiBjYWNoZVtpZF0ubnNwczt2YXIgbmV3Q29ubmVjdGlvbiA9IG9wdHMuZm9yY2VOZXcgfHwgb3B0c1tcImZvcmNlIG5ldyBjb25uZWN0aW9uXCJdIHx8IGZhbHNlID09PSBvcHRzLm11bHRpcGxleCB8fCBzYW1lTmFtZXNwYWNlO3ZhciBpbztpZiAobmV3Q29ubmVjdGlvbikge1xuICAgICAgICAgIGRlYnVnKFwiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlc1wiLCBzb3VyY2UpO2lvID0gTWFuYWdlcihzb3VyY2UsIG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcIm5ldyBpbyBpbnN0YW5jZSBmb3IgJXNcIiwgc291cmNlKTtjYWNoZVtpZF0gPSBNYW5hZ2VyKHNvdXJjZSwgb3B0cyk7XG4gICAgICAgICAgfWlvID0gY2FjaGVbaWRdO1xuICAgICAgICB9cmV0dXJuIGlvLnNvY2tldChwYXJzZWQucGF0aCk7XG4gICAgICB9ZXhwb3J0cy5wcm90b2NvbCA9IHBhcnNlci5wcm90b2NvbDtleHBvcnRzLmNvbm5lY3QgPSBsb29rdXA7ZXhwb3J0cy5NYW5hZ2VyID0gX2RlcmVxXyhcIi4vbWFuYWdlclwiKTtleHBvcnRzLlNvY2tldCA9IF9kZXJlcV8oXCIuL3NvY2tldFwiKTtcbiAgICB9LCB7IFwiLi9tYW5hZ2VyXCI6IDMyLCBcIi4vc29ja2V0XCI6IDM0LCBcIi4vdXJsXCI6IDM1LCBkZWJ1ZzogMzksIFwic29ja2V0LmlvLXBhcnNlclwiOiA0NyB9XSwgMzI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgZWlvID0gX2RlcmVxXyhcImVuZ2luZS5pby1jbGllbnRcIik7dmFyIFNvY2tldCA9IF9kZXJlcV8oXCIuL3NvY2tldFwiKTt2YXIgRW1pdHRlciA9IF9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTt2YXIgcGFyc2VyID0gX2RlcmVxXyhcInNvY2tldC5pby1wYXJzZXJcIik7dmFyIG9uID0gX2RlcmVxXyhcIi4vb25cIik7dmFyIGJpbmQgPSBfZGVyZXFfKFwiY29tcG9uZW50LWJpbmRcIik7dmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudDptYW5hZ2VyXCIpO3ZhciBpbmRleE9mID0gX2RlcmVxXyhcImluZGV4b2ZcIik7dmFyIEJhY2tvZmYgPSBfZGVyZXFfKFwiYmFja28yXCIpO3ZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O21vZHVsZS5leHBvcnRzID0gTWFuYWdlcjtmdW5jdGlvbiBNYW5hZ2VyKHVyaSwgb3B0cykge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgTWFuYWdlcikpIHJldHVybiBuZXcgTWFuYWdlcih1cmksIG9wdHMpO2lmICh1cmkgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdXJpKSB7XG4gICAgICAgICAgb3B0cyA9IHVyaTt1cmkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1vcHRzID0gb3B0cyB8fCB7fTtvcHRzLnBhdGggPSBvcHRzLnBhdGggfHwgXCIvc29ja2V0LmlvXCI7dGhpcy5uc3BzID0ge307dGhpcy5zdWJzID0gW107dGhpcy5vcHRzID0gb3B0czt0aGlzLnJlY29ubmVjdGlvbihvcHRzLnJlY29ubmVjdGlvbiAhPT0gZmFsc2UpO3RoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMob3B0cy5yZWNvbm5lY3Rpb25BdHRlbXB0cyB8fCBJbmZpbml0eSk7dGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5IHx8IDFlMyk7dGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heChvcHRzLnJlY29ubmVjdGlvbkRlbGF5TWF4IHx8IDVlMyk7dGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKG9wdHMucmFuZG9taXphdGlvbkZhY3RvciB8fCAuNSk7dGhpcy5iYWNrb2ZmID0gbmV3IEJhY2tvZmYoeyBtaW46IHRoaXMucmVjb25uZWN0aW9uRGVsYXkoKSwgbWF4OiB0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KCksIGppdHRlcjogdGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKCkgfSk7dGhpcy50aW1lb3V0KG51bGwgPT0gb3B0cy50aW1lb3V0ID8gMmU0IDogb3B0cy50aW1lb3V0KTt0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO3RoaXMudXJpID0gdXJpO3RoaXMuY29ubmVjdGluZyA9IFtdO3RoaXMubGFzdFBpbmcgPSBudWxsO3RoaXMuZW5jb2RpbmcgPSBmYWxzZTt0aGlzLnBhY2tldEJ1ZmZlciA9IFtdO3RoaXMuZW5jb2RlciA9IG5ldyBwYXJzZXIuRW5jb2RlcigpO3RoaXMuZGVjb2RlciA9IG5ldyBwYXJzZXIuRGVjb2RlcigpO3RoaXMuYXV0b0Nvbm5lY3QgPSBvcHRzLmF1dG9Db25uZWN0ICE9PSBmYWxzZTtpZiAodGhpcy5hdXRvQ29ubmVjdCkgdGhpcy5vcGVuKCk7XG4gICAgICB9TWFuYWdlci5wcm90b3R5cGUuZW1pdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Zm9yICh2YXIgbnNwIGluIHRoaXMubnNwcykge1xuICAgICAgICAgIGlmIChoYXMuY2FsbCh0aGlzLm5zcHMsIG5zcCkpIHtcbiAgICAgICAgICAgIHRoaXMubnNwc1tuc3BdLmVtaXQuYXBwbHkodGhpcy5uc3BzW25zcF0sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVNvY2tldElkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgbnNwIGluIHRoaXMubnNwcykge1xuICAgICAgICAgIGlmIChoYXMuY2FsbCh0aGlzLm5zcHMsIG5zcCkpIHtcbiAgICAgICAgICAgIHRoaXMubnNwc1tuc3BdLmlkID0gdGhpcy5lbmdpbmUuaWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O0VtaXR0ZXIoTWFuYWdlci5wcm90b3R5cGUpO01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdGlvbiA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbjt0aGlzLl9yZWNvbm5lY3Rpb24gPSAhIXY7cmV0dXJuIHRoaXM7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdGlvbkF0dGVtcHRzID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHM7dGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMgPSB2O3JldHVybiB0aGlzO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5O3RoaXMuX3JlY29ubmVjdGlvbkRlbGF5ID0gdjt0aGlzLmJhY2tvZmYgJiYgdGhpcy5iYWNrb2ZmLnNldE1pbih2KTtyZXR1cm4gdGhpcztcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucmFuZG9taXphdGlvbkZhY3RvciA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I7dGhpcy5fcmFuZG9taXphdGlvbkZhY3RvciA9IHY7dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRKaXR0ZXIodik7cmV0dXJuIHRoaXM7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5TWF4ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg7dGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXggPSB2O3RoaXMuYmFja29mZiAmJiB0aGlzLmJhY2tvZmYuc2V0TWF4KHYpO3JldHVybiB0aGlzO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fdGltZW91dDt0aGlzLl90aW1lb3V0ID0gdjtyZXR1cm4gdGhpcztcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUubWF5YmVSZWNvbm5lY3RPbk9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWNvbm5lY3RpbmcgJiYgdGhpcy5fcmVjb25uZWN0aW9uICYmIHRoaXMuYmFja29mZi5hdHRlbXB0cyA9PT0gMCkge1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub3BlbiA9IE1hbmFnZXIucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgZGVidWcoXCJyZWFkeVN0YXRlICVzXCIsIHRoaXMucmVhZHlTdGF0ZSk7aWYgKH50aGlzLnJlYWR5U3RhdGUuaW5kZXhPZihcIm9wZW5cIikpIHJldHVybiB0aGlzO2RlYnVnKFwib3BlbmluZyAlc1wiLCB0aGlzLnVyaSk7dGhpcy5lbmdpbmUgPSBlaW8odGhpcy51cmksIHRoaXMub3B0cyk7dmFyIHNvY2tldCA9IHRoaXMuZW5naW5lO3ZhciBzZWxmID0gdGhpczt0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjt0aGlzLnNraXBSZWNvbm5lY3QgPSBmYWxzZTt2YXIgb3BlblN1YiA9IG9uKHNvY2tldCwgXCJvcGVuXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLm9ub3BlbigpO2ZuICYmIGZuKCk7XG4gICAgICAgIH0pO3ZhciBlcnJvclN1YiA9IG9uKHNvY2tldCwgXCJlcnJvclwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGRlYnVnKFwiY29ubmVjdF9lcnJvclwiKTtzZWxmLmNsZWFudXAoKTtzZWxmLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO3NlbGYuZW1pdEFsbChcImNvbm5lY3RfZXJyb3JcIiwgZGF0YSk7aWYgKGZuKSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKFwiQ29ubmVjdGlvbiBlcnJvclwiKTtlcnIuZGF0YSA9IGRhdGE7Zm4oZXJyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5tYXliZVJlY29ubmVjdE9uT3BlbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7aWYgKGZhbHNlICE9PSB0aGlzLl90aW1lb3V0KSB7XG4gICAgICAgICAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O2RlYnVnKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLCB0aW1lb3V0KTt2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlYnVnKFwiY29ubmVjdCBhdHRlbXB0IHRpbWVkIG91dCBhZnRlciAlZFwiLCB0aW1lb3V0KTtvcGVuU3ViLmRlc3Ryb3koKTtzb2NrZXQuY2xvc2UoKTtzb2NrZXQuZW1pdChcImVycm9yXCIsIFwidGltZW91dFwiKTtzZWxmLmVtaXRBbGwoXCJjb25uZWN0X3RpbWVvdXRcIiwgdGltZW91dCk7XG4gICAgICAgICAgfSwgdGltZW91dCk7dGhpcy5zdWJzLnB1c2goeyBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgfXRoaXMuc3Vicy5wdXNoKG9wZW5TdWIpO3RoaXMuc3Vicy5wdXNoKGVycm9yU3ViKTtyZXR1cm4gdGhpcztcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWJ1ZyhcIm9wZW5cIik7dGhpcy5jbGVhbnVwKCk7dGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuXCI7dGhpcy5lbWl0KFwib3BlblwiKTt2YXIgc29ja2V0ID0gdGhpcy5lbmdpbmU7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCBcImRhdGFcIiwgYmluZCh0aGlzLCBcIm9uZGF0YVwiKSkpO3RoaXMuc3Vicy5wdXNoKG9uKHNvY2tldCwgXCJwaW5nXCIsIGJpbmQodGhpcywgXCJvbnBpbmdcIikpKTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsIFwicG9uZ1wiLCBiaW5kKHRoaXMsIFwib25wb25nXCIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCBcImVycm9yXCIsIGJpbmQodGhpcywgXCJvbmVycm9yXCIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCBcImNsb3NlXCIsIGJpbmQodGhpcywgXCJvbmNsb3NlXCIpKSk7dGhpcy5zdWJzLnB1c2gob24odGhpcy5kZWNvZGVyLCBcImRlY29kZWRcIiwgYmluZCh0aGlzLCBcIm9uZGVjb2RlZFwiKSkpO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5vbnBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGFzdFBpbmcgPSBuZXcgRGF0ZSgpO3RoaXMuZW1pdEFsbChcInBpbmdcIik7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLm9ucG9uZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbWl0QWxsKFwicG9uZ1wiLCBuZXcgRGF0ZSgpIC0gdGhpcy5sYXN0UGluZyk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLm9uZGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRoaXMuZGVjb2Rlci5hZGQoZGF0YSk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLm9uZGVjb2RlZCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgdGhpcy5lbWl0KFwicGFja2V0XCIsIHBhY2tldCk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGRlYnVnKFwiZXJyb3JcIiwgZXJyKTt0aGlzLmVtaXRBbGwoXCJlcnJvclwiLCBlcnIpO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5zb2NrZXQgPSBmdW5jdGlvbiAobnNwKSB7XG4gICAgICAgIHZhciBzb2NrZXQgPSB0aGlzLm5zcHNbbnNwXTtpZiAoIXNvY2tldCkge1xuICAgICAgICAgIHNvY2tldCA9IG5ldyBTb2NrZXQodGhpcywgbnNwKTt0aGlzLm5zcHNbbnNwXSA9IHNvY2tldDt2YXIgc2VsZiA9IHRoaXM7c29ja2V0Lm9uKFwiY29ubmVjdGluZ1wiLCBvbkNvbm5lY3RpbmcpO1xuICAgICAgICAgIHNvY2tldC5vbihcImNvbm5lY3RcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29ja2V0LmlkID0gc2VsZi5lbmdpbmUuaWQ7XG4gICAgICAgICAgfSk7aWYgKHRoaXMuYXV0b0Nvbm5lY3QpIHtcbiAgICAgICAgICAgIG9uQ29ubmVjdGluZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfWZ1bmN0aW9uIG9uQ29ubmVjdGluZygpIHtcbiAgICAgICAgICBpZiAoISB+aW5kZXhPZihzZWxmLmNvbm5lY3RpbmcsIHNvY2tldCkpIHtcbiAgICAgICAgICAgIHNlbGYuY29ubmVjdGluZy5wdXNoKHNvY2tldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9cmV0dXJuIHNvY2tldDtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChzb2NrZXQpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLmNvbm5lY3RpbmcsIHNvY2tldCk7aWYgKH5pbmRleCkgdGhpcy5jb25uZWN0aW5nLnNwbGljZShpbmRleCwgMSk7aWYgKHRoaXMuY29ubmVjdGluZy5sZW5ndGgpIHJldHVybjt0aGlzLmNsb3NlKCk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgZGVidWcoXCJ3cml0aW5nIHBhY2tldCAlalwiLCBwYWNrZXQpO3ZhciBzZWxmID0gdGhpcztpZiAoIXNlbGYuZW5jb2RpbmcpIHtcbiAgICAgICAgICBzZWxmLmVuY29kaW5nID0gdHJ1ZTt0aGlzLmVuY29kZXIuZW5jb2RlKHBhY2tldCwgZnVuY3Rpb24gKGVuY29kZWRQYWNrZXRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuY29kZWRQYWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHNlbGYuZW5naW5lLndyaXRlKGVuY29kZWRQYWNrZXRzW2ldLCBwYWNrZXQub3B0aW9ucyk7XG4gICAgICAgICAgICB9c2VsZi5lbmNvZGluZyA9IGZhbHNlO3NlbGYucHJvY2Vzc1BhY2tldFF1ZXVlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5wYWNrZXRCdWZmZXIucHVzaChwYWNrZXQpO1xuICAgICAgICB9XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnByb2Nlc3NQYWNrZXRRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFja2V0QnVmZmVyLmxlbmd0aCA+IDAgJiYgIXRoaXMuZW5jb2RpbmcpIHtcbiAgICAgICAgICB2YXIgcGFjayA9IHRoaXMucGFja2V0QnVmZmVyLnNoaWZ0KCk7dGhpcy5wYWNrZXQocGFjayk7XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUuY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVidWcoXCJjbGVhbnVwXCIpO3ZhciBzdWI7d2hpbGUgKHN1YiA9IHRoaXMuc3Vicy5zaGlmdCgpKSBzdWIuZGVzdHJveSgpO3RoaXMucGFja2V0QnVmZmVyID0gW107dGhpcy5lbmNvZGluZyA9IGZhbHNlO3RoaXMubGFzdFBpbmcgPSBudWxsO3RoaXMuZGVjb2Rlci5kZXN0cm95KCk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLmNsb3NlID0gTWFuYWdlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVidWcoXCJkaXNjb25uZWN0XCIpO3RoaXMuc2tpcFJlY29ubmVjdCA9IHRydWU7dGhpcy5yZWNvbm5lY3RpbmcgPSBmYWxzZTtpZiAoXCJvcGVuaW5nXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIH10aGlzLmJhY2tvZmYucmVzZXQoKTt0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO2lmICh0aGlzLmVuZ2luZSkgdGhpcy5lbmdpbmUuY2xvc2UoKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25jbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgZGVidWcoXCJvbmNsb3NlXCIpO3RoaXMuY2xlYW51cCgpO3RoaXMuYmFja29mZi5yZXNldCgpO3RoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7dGhpcy5lbWl0KFwiY2xvc2VcIiwgcmVhc29uKTtpZiAodGhpcy5fcmVjb25uZWN0aW9uICYmICF0aGlzLnNraXBSZWNvbm5lY3QpIHtcbiAgICAgICAgICB0aGlzLnJlY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0aW5nIHx8IHRoaXMuc2tpcFJlY29ubmVjdCkgcmV0dXJuIHRoaXM7dmFyIHNlbGYgPSB0aGlzO2lmICh0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPj0gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMpIHtcbiAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBmYWlsZWRcIik7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy5lbWl0QWxsKFwicmVjb25uZWN0X2ZhaWxlZFwiKTt0aGlzLnJlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBkZWxheSA9IHRoaXMuYmFja29mZi5kdXJhdGlvbigpO2RlYnVnKFwid2lsbCB3YWl0ICVkbXMgYmVmb3JlIHJlY29ubmVjdCBhdHRlbXB0XCIsIGRlbGF5KTt0aGlzLnJlY29ubmVjdGluZyA9IHRydWU7dmFyIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5za2lwUmVjb25uZWN0KSByZXR1cm47ZGVidWcoXCJhdHRlbXB0aW5nIHJlY29ubmVjdFwiKTtzZWxmLmVtaXRBbGwoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO3NlbGYuZW1pdEFsbChcInJlY29ubmVjdGluZ1wiLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO2lmIChzZWxmLnNraXBSZWNvbm5lY3QpIHJldHVybjtzZWxmLm9wZW4oZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZGVidWcoXCJyZWNvbm5lY3QgYXR0ZW1wdCBlcnJvclwiKTtzZWxmLnJlY29ubmVjdGluZyA9IGZhbHNlO3NlbGYucmVjb25uZWN0KCk7c2VsZi5lbWl0QWxsKFwicmVjb25uZWN0X2Vycm9yXCIsIGVyci5kYXRhKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBzdWNjZXNzXCIpO3NlbGYub25yZWNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgZGVsYXkpO3RoaXMuc3Vicy5wdXNoKHsgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25yZWNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhdHRlbXB0ID0gdGhpcy5iYWNrb2ZmLmF0dGVtcHRzO3RoaXMucmVjb25uZWN0aW5nID0gZmFsc2U7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy51cGRhdGVTb2NrZXRJZHMoKTt0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RcIiwgYXR0ZW1wdCk7XG4gICAgICB9O1xuICAgIH0sIHsgXCIuL29uXCI6IDMzLCBcIi4vc29ja2V0XCI6IDM0LCBiYWNrbzI6IDM2LCBcImNvbXBvbmVudC1iaW5kXCI6IDM3LCBcImNvbXBvbmVudC1lbWl0dGVyXCI6IDM4LCBkZWJ1ZzogMzksIFwiZW5naW5lLmlvLWNsaWVudFwiOiAxLCBpbmRleG9mOiA0MiwgXCJzb2NrZXQuaW8tcGFyc2VyXCI6IDQ3IH1dLCAzMzogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gb247ZnVuY3Rpb24gb24ob2JqLCBldiwgZm4pIHtcbiAgICAgICAgb2JqLm9uKGV2LCBmbik7cmV0dXJuIHsgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIG9iai5yZW1vdmVMaXN0ZW5lcihldiwgZm4pO1xuICAgICAgICAgIH0gfTtcbiAgICAgIH1cbiAgICB9LCB7fV0sIDM0OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIHBhcnNlciA9IF9kZXJlcV8oXCJzb2NrZXQuaW8tcGFyc2VyXCIpO3ZhciBFbWl0dGVyID0gX2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciB0b0FycmF5ID0gX2RlcmVxXyhcInRvLWFycmF5XCIpO3ZhciBvbiA9IF9kZXJlcV8oXCIuL29uXCIpO3ZhciBiaW5kID0gX2RlcmVxXyhcImNvbXBvbmVudC1iaW5kXCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6c29ja2V0XCIpO3ZhciBoYXNCaW4gPSBfZGVyZXFfKFwiaGFzLWJpbmFyeVwiKTttb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBTb2NrZXQ7dmFyIGV2ZW50cyA9IHsgY29ubmVjdDogMSwgY29ubmVjdF9lcnJvcjogMSwgY29ubmVjdF90aW1lb3V0OiAxLCBjb25uZWN0aW5nOiAxLCBkaXNjb25uZWN0OiAxLCBlcnJvcjogMSwgcmVjb25uZWN0OiAxLCByZWNvbm5lY3RfYXR0ZW1wdDogMSwgcmVjb25uZWN0X2ZhaWxlZDogMSwgcmVjb25uZWN0X2Vycm9yOiAxLCByZWNvbm5lY3Rpbmc6IDEsIHBpbmc6IDEsIHBvbmc6IDEgfTt2YXIgZW1pdCA9IEVtaXR0ZXIucHJvdG90eXBlLmVtaXQ7ZnVuY3Rpb24gU29ja2V0KGlvLCBuc3ApIHtcbiAgICAgICAgdGhpcy5pbyA9IGlvO3RoaXMubnNwID0gbnNwO3RoaXMuanNvbiA9IHRoaXM7dGhpcy5pZHMgPSAwO3RoaXMuYWNrcyA9IHt9O3RoaXMucmVjZWl2ZUJ1ZmZlciA9IFtdO3RoaXMuc2VuZEJ1ZmZlciA9IFtdO3RoaXMuY29ubmVjdGVkID0gZmFsc2U7dGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO2lmICh0aGlzLmlvLmF1dG9Db25uZWN0KSB0aGlzLm9wZW4oKTtcbiAgICAgIH1FbWl0dGVyKFNvY2tldC5wcm90b3R5cGUpO1NvY2tldC5wcm90b3R5cGUuc3ViRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzKSByZXR1cm47dmFyIGlvID0gdGhpcy5pbzt0aGlzLnN1YnMgPSBbb24oaW8sIFwib3BlblwiLCBiaW5kKHRoaXMsIFwib25vcGVuXCIpKSwgb24oaW8sIFwicGFja2V0XCIsIGJpbmQodGhpcywgXCJvbnBhY2tldFwiKSksIG9uKGlvLCBcImNsb3NlXCIsIGJpbmQodGhpcywgXCJvbmNsb3NlXCIpKV07XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub3BlbiA9IFNvY2tldC5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSByZXR1cm4gdGhpczt0aGlzLnN1YkV2ZW50cygpO3RoaXMuaW8ub3BlbigpO2lmIChcIm9wZW5cIiA9PSB0aGlzLmlvLnJlYWR5U3RhdGUpIHRoaXMub25vcGVuKCk7dGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiKTtyZXR1cm4gdGhpcztcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTthcmdzLnVuc2hpZnQoXCJtZXNzYWdlXCIpO3RoaXMuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtyZXR1cm4gdGhpcztcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoZXYpKSB7XG4gICAgICAgICAgZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO3JldHVybiB0aGlzO1xuICAgICAgICB9dmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7dmFyIHBhcnNlclR5cGUgPSBwYXJzZXIuRVZFTlQ7aWYgKGhhc0JpbihhcmdzKSkge1xuICAgICAgICAgIHBhcnNlclR5cGUgPSBwYXJzZXIuQklOQVJZX0VWRU5UO1xuICAgICAgICB9dmFyIHBhY2tldCA9IHsgdHlwZTogcGFyc2VyVHlwZSwgZGF0YTogYXJncyB9O3BhY2tldC5vcHRpb25zID0ge307cGFja2V0Lm9wdGlvbnMuY29tcHJlc3MgPSAhdGhpcy5mbGFncyB8fCBmYWxzZSAhPT0gdGhpcy5mbGFncy5jb21wcmVzcztpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICBkZWJ1ZyhcImVtaXR0aW5nIHBhY2tldCB3aXRoIGFjayBpZCAlZFwiLCB0aGlzLmlkcyk7dGhpcy5hY2tzW3RoaXMuaWRzXSA9IGFyZ3MucG9wKCk7cGFja2V0LmlkID0gdGhpcy5pZHMrKztcbiAgICAgICAgfWlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIHRoaXMucGFja2V0KHBhY2tldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZW5kQnVmZmVyLnB1c2gocGFja2V0KTtcbiAgICAgICAgfWRlbGV0ZSB0aGlzLmZsYWdzO3JldHVybiB0aGlzO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLnBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgcGFja2V0Lm5zcCA9IHRoaXMubnNwO3RoaXMuaW8ucGFja2V0KHBhY2tldCk7XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub25vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWJ1ZyhcInRyYW5zcG9ydCBpcyBvcGVuIC0gY29ubmVjdGluZ1wiKTtpZiAoXCIvXCIgIT0gdGhpcy5uc3ApIHtcbiAgICAgICAgICB0aGlzLnBhY2tldCh7IHR5cGU6IHBhcnNlci5DT05ORUNUIH0pO1xuICAgICAgICB9XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub25jbG9zZSA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgZGVidWcoXCJjbG9zZSAoJXMpXCIsIHJlYXNvbik7dGhpcy5jb25uZWN0ZWQgPSBmYWxzZTt0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7ZGVsZXRlIHRoaXMuaWQ7dGhpcy5lbWl0KFwiZGlzY29ubmVjdFwiLCByZWFzb24pO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9ucGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICBpZiAocGFja2V0Lm5zcCAhPSB0aGlzLm5zcCkgcmV0dXJuO3N3aXRjaCAocGFja2V0LnR5cGUpIHtjYXNlIHBhcnNlci5DT05ORUNUOlxuICAgICAgICAgICAgdGhpcy5vbmNvbm5lY3QoKTticmVhaztjYXNlIHBhcnNlci5FVkVOVDpcbiAgICAgICAgICAgIHRoaXMub25ldmVudChwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkJJTkFSWV9FVkVOVDpcbiAgICAgICAgICAgIHRoaXMub25ldmVudChwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkFDSzpcbiAgICAgICAgICAgIHRoaXMub25hY2socGFja2V0KTticmVhaztjYXNlIHBhcnNlci5CSU5BUllfQUNLOlxuICAgICAgICAgICAgdGhpcy5vbmFjayhwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICB0aGlzLm9uZGlzY29ubmVjdCgpO2JyZWFrO2Nhc2UgcGFyc2VyLkVSUk9SOlxuICAgICAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgcGFja2V0LmRhdGEpO2JyZWFrO31cbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbmV2ZW50ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICB2YXIgYXJncyA9IHBhY2tldC5kYXRhIHx8IFtdO2RlYnVnKFwiZW1pdHRpbmcgZXZlbnQgJWpcIiwgYXJncyk7aWYgKG51bGwgIT0gcGFja2V0LmlkKSB7XG4gICAgICAgICAgZGVidWcoXCJhdHRhY2hpbmcgYWNrIGNhbGxiYWNrIHRvIGV2ZW50XCIpO2FyZ3MucHVzaCh0aGlzLmFjayhwYWNrZXQuaWQpKTtcbiAgICAgICAgfWlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIGVtaXQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZWNlaXZlQnVmZmVyLnB1c2goYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5hY2sgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO3ZhciBzZW50ID0gZmFsc2U7cmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoc2VudCkgcmV0dXJuO3NlbnQgPSB0cnVlO3ZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO2RlYnVnKFwic2VuZGluZyBhY2sgJWpcIiwgYXJncyk7dmFyIHR5cGUgPSBoYXNCaW4oYXJncykgPyBwYXJzZXIuQklOQVJZX0FDSyA6IHBhcnNlci5BQ0s7c2VsZi5wYWNrZXQoeyB0eXBlOiB0eXBlLCBpZDogaWQsIGRhdGE6IGFyZ3MgfSk7XG4gICAgICAgIH07XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub25hY2sgPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgIHZhciBhY2sgPSB0aGlzLmFja3NbcGFja2V0LmlkXTtpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBhY2spIHtcbiAgICAgICAgICBkZWJ1ZyhcImNhbGxpbmcgYWNrICVzIHdpdGggJWpcIiwgcGFja2V0LmlkLCBwYWNrZXQuZGF0YSk7YWNrLmFwcGx5KHRoaXMsIHBhY2tldC5kYXRhKTtkZWxldGUgdGhpcy5hY2tzW3BhY2tldC5pZF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWcoXCJiYWQgYWNrICVzXCIsIHBhY2tldC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTt0aGlzLmRpc2Nvbm5lY3RlZCA9IGZhbHNlO3RoaXMuZW1pdChcImNvbm5lY3RcIik7dGhpcy5lbWl0QnVmZmVyZWQoKTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5lbWl0QnVmZmVyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpO2ZvciAoaSA9IDA7IGkgPCB0aGlzLnJlY2VpdmVCdWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBlbWl0LmFwcGx5KHRoaXMsIHRoaXMucmVjZWl2ZUJ1ZmZlcltpXSk7XG4gICAgICAgIH10aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtmb3IgKGkgPSAwOyBpIDwgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5wYWNrZXQodGhpcy5zZW5kQnVmZmVyW2ldKTtcbiAgICAgICAgfXRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVidWcoXCJzZXJ2ZXIgZGlzY29ubmVjdCAoJXMpXCIsIHRoaXMubnNwKTt0aGlzLmRlc3Ryb3koKTt0aGlzLm9uY2xvc2UoXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic1tpXS5kZXN0cm95KCk7XG4gICAgICAgICAgfXRoaXMuc3VicyA9IG51bGw7XG4gICAgICAgIH10aGlzLmlvLmRlc3Ryb3kodGhpcyk7XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUuY2xvc2UgPSBTb2NrZXQucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIGRlYnVnKFwicGVyZm9ybWluZyBkaXNjb25uZWN0ICglcylcIiwgdGhpcy5uc3ApO3RoaXMucGFja2V0KHsgdHlwZTogcGFyc2VyLkRJU0NPTk5FQ1QgfSk7XG4gICAgICAgIH10aGlzLmRlc3Ryb3koKTtpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICB0aGlzLm9uY2xvc2UoXCJpbyBjbGllbnQgZGlzY29ubmVjdFwiKTtcbiAgICAgICAgfXJldHVybiB0aGlzO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmNvbXByZXNzID0gZnVuY3Rpb24gKGNvbXByZXNzKSB7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSB0aGlzLmZsYWdzIHx8IHt9O3RoaXMuZmxhZ3MuY29tcHJlc3MgPSBjb21wcmVzcztyZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgfSwgeyBcIi4vb25cIjogMzMsIFwiY29tcG9uZW50LWJpbmRcIjogMzcsIFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMzgsIGRlYnVnOiAzOSwgXCJoYXMtYmluYXJ5XCI6IDQxLCBcInNvY2tldC5pby1wYXJzZXJcIjogNDcsIFwidG8tYXJyYXlcIjogNTEgfV0sIDM1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIHBhcnNldXJpID0gX2RlcmVxXyhcInBhcnNldXJpXCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO21vZHVsZS5leHBvcnRzID0gdXJsO2Z1bmN0aW9uIHVybCh1cmksIGxvYykge1xuICAgICAgICAgIHZhciBvYmogPSB1cmk7dmFyIGxvYyA9IGxvYyB8fCBnbG9iYWwubG9jYXRpb247aWYgKG51bGwgPT0gdXJpKSB1cmkgPSBsb2MucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2MuaG9zdDtpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdXJpKSB7XG4gICAgICAgICAgICBpZiAoXCIvXCIgPT0gdXJpLmNoYXJBdCgwKSkge1xuICAgICAgICAgICAgICBpZiAoXCIvXCIgPT0gdXJpLmNoYXJBdCgxKSkge1xuICAgICAgICAgICAgICAgIHVyaSA9IGxvYy5wcm90b2NvbCArIHVyaTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MuaG9zdCArIHVyaTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWlmICghL14oaHR0cHM/fHdzcz8pOlxcL1xcLy8udGVzdCh1cmkpKSB7XG4gICAgICAgICAgICAgIGRlYnVnKFwicHJvdG9jb2wtbGVzcyB1cmwgJXNcIiwgdXJpKTtpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbG9jKSB7XG4gICAgICAgICAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgXCIvL1wiICsgdXJpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVyaSA9IFwiaHR0cHM6Ly9cIiArIHVyaTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWRlYnVnKFwicGFyc2UgJXNcIiwgdXJpKTtvYmogPSBwYXJzZXVyaSh1cmkpO1xuICAgICAgICAgIH1pZiAoIW9iai5wb3J0KSB7XG4gICAgICAgICAgICBpZiAoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgICAgb2JqLnBvcnQgPSBcIjgwXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKC9eKGh0dHB8d3MpcyQvLnRlc3Qob2JqLnByb3RvY29sKSkge1xuICAgICAgICAgICAgICBvYmoucG9ydCA9IFwiNDQzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfW9iai5wYXRoID0gb2JqLnBhdGggfHwgXCIvXCI7dmFyIGlwdjYgPSBvYmouaG9zdC5pbmRleE9mKFwiOlwiKSAhPT0gLTE7dmFyIGhvc3QgPSBpcHY2ID8gXCJbXCIgKyBvYmouaG9zdCArIFwiXVwiIDogb2JqLmhvc3Q7b2JqLmlkID0gb2JqLnByb3RvY29sICsgXCI6Ly9cIiArIGhvc3QgKyBcIjpcIiArIG9iai5wb3J0O29iai5ocmVmID0gb2JqLnByb3RvY29sICsgXCI6Ly9cIiArIGhvc3QgKyAobG9jICYmIGxvYy5wb3J0ID09IG9iai5wb3J0ID8gXCJcIiA6IFwiOlwiICsgb2JqLnBvcnQpO3JldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBkZWJ1ZzogMzksIHBhcnNldXJpOiA0NSB9XSwgMzY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IEJhY2tvZmY7ZnVuY3Rpb24gQmFja29mZihvcHRzKSB7XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O3RoaXMubXMgPSBvcHRzLm1pbiB8fCAxMDA7dGhpcy5tYXggPSBvcHRzLm1heCB8fCAxZTQ7dGhpcy5mYWN0b3IgPSBvcHRzLmZhY3RvciB8fCAyO3RoaXMuaml0dGVyID0gb3B0cy5qaXR0ZXIgPiAwICYmIG9wdHMuaml0dGVyIDw9IDEgPyBvcHRzLmppdHRlciA6IDA7dGhpcy5hdHRlbXB0cyA9IDA7XG4gICAgICB9QmFja29mZi5wcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtcyA9IHRoaXMubXMgKiBNYXRoLnBvdyh0aGlzLmZhY3RvciwgdGhpcy5hdHRlbXB0cysrKTtpZiAodGhpcy5qaXR0ZXIpIHtcbiAgICAgICAgICB2YXIgcmFuZCA9IE1hdGgucmFuZG9tKCk7dmFyIGRldmlhdGlvbiA9IE1hdGguZmxvb3IocmFuZCAqIHRoaXMuaml0dGVyICogbXMpO21zID0gKE1hdGguZmxvb3IocmFuZCAqIDEwKSAmIDEpID09IDAgPyBtcyAtIGRldmlhdGlvbiA6IG1zICsgZGV2aWF0aW9uO1xuICAgICAgICB9cmV0dXJuIE1hdGgubWluKG1zLCB0aGlzLm1heCkgfCAwO1xuICAgICAgfTtCYWNrb2ZmLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0cyA9IDA7XG4gICAgICB9O0JhY2tvZmYucHJvdG90eXBlLnNldE1pbiA9IGZ1bmN0aW9uIChtaW4pIHtcbiAgICAgICAgdGhpcy5tcyA9IG1pbjtcbiAgICAgIH07QmFja29mZi5wcm90b3R5cGUuc2V0TWF4ID0gZnVuY3Rpb24gKG1heCkge1xuICAgICAgICB0aGlzLm1heCA9IG1heDtcbiAgICAgIH07QmFja29mZi5wcm90b3R5cGUuc2V0Sml0dGVyID0gZnVuY3Rpb24gKGppdHRlcikge1xuICAgICAgICB0aGlzLmppdHRlciA9IGppdHRlcjtcbiAgICAgIH07XG4gICAgfSwge31dLCAzNzogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciBzbGljZSA9IFtdLnNsaWNlO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgZm4pIHtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGZuKSBmbiA9IG9ialtmbl07aWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZm4pIHRocm93IG5ldyBFcnJvcihcImJpbmQoKSByZXF1aXJlcyBhIGZ1bmN0aW9uXCIpO3ZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO3JldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG9iaiwgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMzg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7ZnVuY3Rpb24gRW1pdHRlcihvYmopIHtcbiAgICAgICAgaWYgKG9iaikgcmV0dXJuIG1peGluKG9iaik7XG4gICAgICB9ZnVuY3Rpb24gbWl4aW4ob2JqKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge1xuICAgICAgICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcbiAgICAgICAgfXJldHVybiBvYmo7XG4gICAgICB9RW1pdHRlci5wcm90b3R5cGUub24gPSBFbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307KHRoaXMuX2NhbGxiYWNrc1tcIiRcIiArIGV2ZW50XSA9IHRoaXMuX2NhbGxiYWNrc1tcIiRcIiArIGV2ZW50XSB8fCBbXSkucHVzaChmbik7cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7Zm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfW9uLmZuID0gZm47dGhpcy5vbihldmVudCwgb24pO3JldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtpZiAoMCA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0ge307cmV0dXJuIHRoaXM7XG4gICAgICAgIH12YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdO2lmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tcIiRcIiArIGV2ZW50XTtyZXR1cm4gdGhpcztcbiAgICAgICAgfXZhciBjYjtmb3IgKHZhciBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNiID0gY2FsbGJhY2tzW2ldO2lmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG4gICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGksIDEpO2JyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTt2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcbiAgICAgICAgICAgIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1tcIiRcIiArIGV2ZW50XTtpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO2ZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgIH07RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdIHx8IFtdO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcbiAgICAgIH07XG4gICAgfSwge31dLCAzOTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsxN11bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IFwiLi9kZWJ1Z1wiOiA0MCwgZHVwOiAxNyB9XSwgNDA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBhcmd1bWVudHNbNF1bMThdWzBdLmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgfSwgeyBkdXA6IDE4LCBtczogNDQgfV0sIDQxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBfZGVyZXFfKFwiaXNhcnJheVwiKTttb2R1bGUuZXhwb3J0cyA9IGhhc0JpbmFyeTtmdW5jdGlvbiBoYXNCaW5hcnkoZGF0YSkge1xuICAgICAgICAgIGZ1bmN0aW9uIF9oYXNCaW5hcnkob2JqKSB7XG4gICAgICAgICAgICBpZiAoIW9iaikgcmV0dXJuIGZhbHNlO2lmIChnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBnbG9iYWwuQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iIHx8IGdsb2JhbC5GaWxlICYmIG9iaiBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9aWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChfaGFzQmluYXJ5KG9ialtpXSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgXCJvYmplY3RcIiA9PSB0eXBlb2Ygb2JqKSB7XG4gICAgICAgICAgICAgIGlmIChvYmoudG9KU09OICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygb2JqLnRvSlNPTikge1xuICAgICAgICAgICAgICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgICAgICAgICAgICAgfWZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSAmJiBfaGFzQmluYXJ5KG9ialtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9cmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1yZXR1cm4gX2hhc0JpbmFyeShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IGlzYXJyYXk6IDQzIH1dLCA0MjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsyM11bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IGR1cDogMjMgfV0sIDQzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgYXJndW1lbnRzWzRdWzI0XVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgIH0sIHsgZHVwOiAyNCB9XSwgNDQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBhcmd1bWVudHNbNF1bMjVdWzBdLmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgfSwgeyBkdXA6IDI1IH1dLCA0NTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsyOF1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IGR1cDogMjggfV0sIDQ2OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIGlzQXJyYXkgPSBfZGVyZXFfKFwiaXNhcnJheVwiKTt2YXIgaXNCdWYgPSBfZGVyZXFfKFwiLi9pcy1idWZmZXJcIik7ZXhwb3J0cy5kZWNvbnN0cnVjdFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgICB2YXIgYnVmZmVycyA9IFtdO3ZhciBwYWNrZXREYXRhID0gcGFja2V0LmRhdGE7ZnVuY3Rpb24gX2RlY29uc3RydWN0UGFja2V0KGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuIGRhdGE7aWYgKGlzQnVmKGRhdGEpKSB7XG4gICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IHsgX3BsYWNlaG9sZGVyOiB0cnVlLCBudW06IGJ1ZmZlcnMubGVuZ3RoIH07YnVmZmVycy5wdXNoKGRhdGEpO3JldHVybiBwbGFjZWhvbGRlcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICB2YXIgbmV3RGF0YSA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmV3RGF0YVtpXSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2ldKTtcbiAgICAgICAgICAgICAgfXJldHVybiBuZXdEYXRhO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBkYXRhICYmICEoZGF0YSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgICAgIHZhciBuZXdEYXRhID0ge307Zm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW2tleV0gPSBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgfXJldHVybiBuZXdEYXRhO1xuICAgICAgICAgICAgfXJldHVybiBkYXRhO1xuICAgICAgICAgIH12YXIgcGFjayA9IHBhY2tldDtwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSk7cGFjay5hdHRhY2htZW50cyA9IGJ1ZmZlcnMubGVuZ3RoO3JldHVybiB7IHBhY2tldDogcGFjaywgYnVmZmVyczogYnVmZmVycyB9O1xuICAgICAgICB9O2V4cG9ydHMucmVjb25zdHJ1Y3RQYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0LCBidWZmZXJzKSB7XG4gICAgICAgICAgdmFyIGN1clBsYWNlSG9sZGVyID0gMDtmdW5jdGlvbiBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5fcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgdmFyIGJ1ZiA9IGJ1ZmZlcnNbZGF0YS5udW1dO3JldHVybiBidWY7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2ldKTtcbiAgICAgICAgICAgICAgfXJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIGRhdGEpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgfXJldHVybiBkYXRhO1xuICAgICAgICAgICAgfXJldHVybiBkYXRhO1xuICAgICAgICAgIH1wYWNrZXQuZGF0YSA9IF9yZWNvbnN0cnVjdFBhY2tldChwYWNrZXQuZGF0YSk7cGFja2V0LmF0dGFjaG1lbnRzID0gdW5kZWZpbmVkO3JldHVybiBwYWNrZXQ7XG4gICAgICAgIH07ZXhwb3J0cy5yZW1vdmVCbG9icyA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgIGZ1bmN0aW9uIF9yZW1vdmVCbG9icyhvYmosIGN1cktleSwgY29udGFpbmluZ09iamVjdCkge1xuICAgICAgICAgICAgaWYgKCFvYmopIHJldHVybiBvYmo7aWYgKGdsb2JhbC5CbG9iICYmIG9iaiBpbnN0YW5jZW9mIEJsb2IgfHwgZ2xvYmFsLkZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICBwZW5kaW5nQmxvYnMrKzt2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7ZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5pbmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRhaW5pbmdPYmplY3RbY3VyS2V5XSA9IHRoaXMucmVzdWx0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBibG9ibGVzc0RhdGEgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9aWYgKCEgLS1wZW5kaW5nQmxvYnMpIHtcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJsb2JsZXNzRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O2ZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIob2JqKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX3JlbW92ZUJsb2JzKG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgXCJvYmplY3RcIiA9PSB0eXBlb2Ygb2JqICYmICFpc0J1ZihvYmopKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBfcmVtb3ZlQmxvYnMob2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH12YXIgcGVuZGluZ0Jsb2JzID0gMDt2YXIgYmxvYmxlc3NEYXRhID0gZGF0YTtfcmVtb3ZlQmxvYnMoYmxvYmxlc3NEYXRhKTtpZiAoIXBlbmRpbmdCbG9icykge1xuICAgICAgICAgICAgY2FsbGJhY2soYmxvYmxlc3NEYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL2lzLWJ1ZmZlclwiOiA0OCwgaXNhcnJheTogNDMgfV0sIDQ3OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLXBhcnNlclwiKTt2YXIganNvbiA9IF9kZXJlcV8oXCJqc29uM1wiKTt2YXIgaXNBcnJheSA9IF9kZXJlcV8oXCJpc2FycmF5XCIpO3ZhciBFbWl0dGVyID0gX2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciBiaW5hcnkgPSBfZGVyZXFfKFwiLi9iaW5hcnlcIik7dmFyIGlzQnVmID0gX2RlcmVxXyhcIi4vaXMtYnVmZmVyXCIpO2V4cG9ydHMucHJvdG9jb2wgPSA0O2V4cG9ydHMudHlwZXMgPSBbXCJDT05ORUNUXCIsIFwiRElTQ09OTkVDVFwiLCBcIkVWRU5UXCIsIFwiQklOQVJZX0VWRU5UXCIsIFwiQUNLXCIsIFwiQklOQVJZX0FDS1wiLCBcIkVSUk9SXCJdO2V4cG9ydHMuQ09OTkVDVCA9IDA7ZXhwb3J0cy5ESVNDT05ORUNUID0gMTtleHBvcnRzLkVWRU5UID0gMjtleHBvcnRzLkFDSyA9IDM7ZXhwb3J0cy5FUlJPUiA9IDQ7ZXhwb3J0cy5CSU5BUllfRVZFTlQgPSA1O2V4cG9ydHMuQklOQVJZX0FDSyA9IDY7ZXhwb3J0cy5FbmNvZGVyID0gRW5jb2RlcjtleHBvcnRzLkRlY29kZXIgPSBEZWNvZGVyO2Z1bmN0aW9uIEVuY29kZXIoKSB7fUVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChvYmosIGNhbGxiYWNrKSB7XG4gICAgICAgIGRlYnVnKFwiZW5jb2RpbmcgcGFja2V0ICVqXCIsIG9iaik7aWYgKGV4cG9ydHMuQklOQVJZX0VWRU5UID09IG9iai50eXBlIHx8IGV4cG9ydHMuQklOQVJZX0FDSyA9PSBvYmoudHlwZSkge1xuICAgICAgICAgIGVuY29kZUFzQmluYXJ5KG9iaiwgY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBlbmNvZGluZyA9IGVuY29kZUFzU3RyaW5nKG9iaik7Y2FsbGJhY2soW2VuY29kaW5nXSk7XG4gICAgICAgIH1cbiAgICAgIH07ZnVuY3Rpb24gZW5jb2RlQXNTdHJpbmcob2JqKSB7XG4gICAgICAgIHZhciBzdHIgPSBcIlwiO3ZhciBuc3AgPSBmYWxzZTtzdHIgKz0gb2JqLnR5cGU7aWYgKGV4cG9ydHMuQklOQVJZX0VWRU5UID09IG9iai50eXBlIHx8IGV4cG9ydHMuQklOQVJZX0FDSyA9PSBvYmoudHlwZSkge1xuICAgICAgICAgIHN0ciArPSBvYmouYXR0YWNobWVudHM7c3RyICs9IFwiLVwiO1xuICAgICAgICB9aWYgKG9iai5uc3AgJiYgXCIvXCIgIT0gb2JqLm5zcCkge1xuICAgICAgICAgIG5zcCA9IHRydWU7c3RyICs9IG9iai5uc3A7XG4gICAgICAgIH1pZiAobnVsbCAhPSBvYmouaWQpIHtcbiAgICAgICAgICBpZiAobnNwKSB7XG4gICAgICAgICAgICBzdHIgKz0gXCIsXCI7bnNwID0gZmFsc2U7XG4gICAgICAgICAgfXN0ciArPSBvYmouaWQ7XG4gICAgICAgIH1pZiAobnVsbCAhPSBvYmouZGF0YSkge1xuICAgICAgICAgIGlmIChuc3ApIHN0ciArPSBcIixcIjtzdHIgKz0ganNvbi5zdHJpbmdpZnkob2JqLmRhdGEpO1xuICAgICAgICB9ZGVidWcoXCJlbmNvZGVkICVqIGFzICVzXCIsIG9iaiwgc3RyKTtyZXR1cm4gc3RyO1xuICAgICAgfWZ1bmN0aW9uIGVuY29kZUFzQmluYXJ5KG9iaiwgY2FsbGJhY2spIHtcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVFbmNvZGluZyhibG9ibGVzc0RhdGEpIHtcbiAgICAgICAgICB2YXIgZGVjb25zdHJ1Y3Rpb24gPSBiaW5hcnkuZGVjb25zdHJ1Y3RQYWNrZXQoYmxvYmxlc3NEYXRhKTt2YXIgcGFjayA9IGVuY29kZUFzU3RyaW5nKGRlY29uc3RydWN0aW9uLnBhY2tldCk7dmFyIGJ1ZmZlcnMgPSBkZWNvbnN0cnVjdGlvbi5idWZmZXJzO2J1ZmZlcnMudW5zaGlmdChwYWNrKTtjYWxsYmFjayhidWZmZXJzKTtcbiAgICAgICAgfWJpbmFyeS5yZW1vdmVCbG9icyhvYmosIHdyaXRlRW5jb2RpbmcpO1xuICAgICAgfWZ1bmN0aW9uIERlY29kZXIoKSB7XG4gICAgICAgIHRoaXMucmVjb25zdHJ1Y3RvciA9IG51bGw7XG4gICAgICB9RW1pdHRlcihEZWNvZGVyLnByb3RvdHlwZSk7RGVjb2Rlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgcGFja2V0O2lmIChcInN0cmluZ1wiID09IHR5cGVvZiBvYmopIHtcbiAgICAgICAgICBwYWNrZXQgPSBkZWNvZGVTdHJpbmcob2JqKTtpZiAoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gcGFja2V0LnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IHBhY2tldC50eXBlKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBuZXcgQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpO2lmICh0aGlzLnJlY29uc3RydWN0b3IucmVjb25QYWNrLmF0dGFjaG1lbnRzID09PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuZW1pdChcImRlY29kZWRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc0J1ZihvYmopIHx8IG9iai5iYXNlNjQpIHtcbiAgICAgICAgICBpZiAoIXRoaXMucmVjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZ290IGJpbmFyeSBkYXRhIHdoZW4gbm90IHJlY29uc3RydWN0aW5nIGEgcGFja2V0XCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWNrZXQgPSB0aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEob2JqKTtpZiAocGFja2V0KSB7XG4gICAgICAgICAgICAgIHRoaXMucmVjb25zdHJ1Y3RvciA9IG51bGw7dGhpcy5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiICsgb2JqKTtcbiAgICAgICAgfVxuICAgICAgfTtmdW5jdGlvbiBkZWNvZGVTdHJpbmcoc3RyKSB7XG4gICAgICAgIHZhciBwID0ge307dmFyIGkgPSAwO3AudHlwZSA9IE51bWJlcihzdHIuY2hhckF0KDApKTtpZiAobnVsbCA9PSBleHBvcnRzLnR5cGVzW3AudHlwZV0pIHJldHVybiBlcnJvcigpO2lmIChleHBvcnRzLkJJTkFSWV9FVkVOVCA9PSBwLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IHAudHlwZSkge1xuICAgICAgICAgIHZhciBidWYgPSBcIlwiO3doaWxlIChzdHIuY2hhckF0KCsraSkgIT0gXCItXCIpIHtcbiAgICAgICAgICAgIGJ1ZiArPSBzdHIuY2hhckF0KGkpO2lmIChpID09IHN0ci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgIH1pZiAoYnVmICE9IE51bWJlcihidWYpIHx8IHN0ci5jaGFyQXQoaSkgIT0gXCItXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIik7XG4gICAgICAgICAgfXAuYXR0YWNobWVudHMgPSBOdW1iZXIoYnVmKTtcbiAgICAgICAgfWlmIChcIi9cIiA9PSBzdHIuY2hhckF0KGkgKyAxKSkge1xuICAgICAgICAgIHAubnNwID0gXCJcIjt3aGlsZSAoKytpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQXQoaSk7aWYgKFwiLFwiID09IGMpIGJyZWFrO3AubnNwICs9IGM7aWYgKGkgPT0gc3RyLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHAubnNwID0gXCIvXCI7XG4gICAgICAgIH12YXIgbmV4dCA9IHN0ci5jaGFyQXQoaSArIDEpO2lmIChcIlwiICE9PSBuZXh0ICYmIE51bWJlcihuZXh0KSA9PSBuZXh0KSB7XG4gICAgICAgICAgcC5pZCA9IFwiXCI7d2hpbGUgKCsraSkge1xuICAgICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckF0KGkpO2lmIChudWxsID09IGMgfHwgTnVtYmVyKGMpICE9IGMpIHtcbiAgICAgICAgICAgICAgLS1pO2JyZWFrO1xuICAgICAgICAgICAgfXAuaWQgKz0gc3RyLmNoYXJBdChpKTtpZiAoaSA9PSBzdHIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgICB9cC5pZCA9IE51bWJlcihwLmlkKTtcbiAgICAgICAgfWlmIChzdHIuY2hhckF0KCsraSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcC5kYXRhID0ganNvbi5wYXJzZShzdHIuc3Vic3RyKGkpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1kZWJ1ZyhcImRlY29kZWQgJXMgYXMgJWpcIiwgc3RyLCBwKTtyZXR1cm4gcDtcbiAgICAgIH1EZWNvZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZWNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgfTtmdW5jdGlvbiBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCkge1xuICAgICAgICB0aGlzLnJlY29uUGFjayA9IHBhY2tldDt0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgIH1CaW5hcnlSZWNvbnN0cnVjdG9yLnByb3RvdHlwZS50YWtlQmluYXJ5RGF0YSA9IGZ1bmN0aW9uIChiaW5EYXRhKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJpbkRhdGEpO2lmICh0aGlzLmJ1ZmZlcnMubGVuZ3RoID09IHRoaXMucmVjb25QYWNrLmF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgdmFyIHBhY2tldCA9IGJpbmFyeS5yZWNvbnN0cnVjdFBhY2tldCh0aGlzLnJlY29uUGFjaywgdGhpcy5idWZmZXJzKTt0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtyZXR1cm4gcGFja2V0O1xuICAgICAgICB9cmV0dXJuIG51bGw7XG4gICAgICB9O0JpbmFyeVJlY29uc3RydWN0b3IucHJvdG90eXBlLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVjb25QYWNrID0gbnVsbDt0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgIH07ZnVuY3Rpb24gZXJyb3IoZGF0YSkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBleHBvcnRzLkVSUk9SLCBkYXRhOiBcInBhcnNlciBlcnJvclwiIH07XG4gICAgICB9XG4gICAgfSwgeyBcIi4vYmluYXJ5XCI6IDQ2LCBcIi4vaXMtYnVmZmVyXCI6IDQ4LCBcImNvbXBvbmVudC1lbWl0dGVyXCI6IDQ5LCBkZWJ1ZzogMzksIGlzYXJyYXk6IDQzLCBqc29uMzogNTAgfV0sIDQ4OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBpc0J1ZjtmdW5jdGlvbiBpc0J1ZihvYmopIHtcbiAgICAgICAgICByZXR1cm4gZ2xvYmFsLkJ1ZmZlciAmJiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgZ2xvYmFsLkFycmF5QnVmZmVyICYmIG9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyO1xuICAgICAgICB9XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHt9XSwgNDk6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBhcmd1bWVudHNbNF1bMTVdWzBdLmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgfSwgeyBkdXA6IDE1IH1dLCA1MDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGlzTG9hZGVyID0gdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQ7dmFyIG9iamVjdFR5cGVzID0geyBcImZ1bmN0aW9uXCI6IHRydWUsIG9iamVjdDogdHJ1ZSB9O3ZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7dmFyIHJvb3QgPSBvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cgfHwgdGhpcyxcbiAgICAgICAgICAgICAgZnJlZUdsb2JhbCA9IGZyZWVFeHBvcnRzICYmIG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIHR5cGVvZiBnbG9iYWwgPT0gXCJvYmplY3RcIiAmJiBnbG9iYWw7aWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWxbXCJnbG9iYWxcIl0gPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbFtcIndpbmRvd1wiXSA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsW1wic2VsZlwiXSA9PT0gZnJlZUdsb2JhbCkpIHtcbiAgICAgICAgICAgIHJvb3QgPSBmcmVlR2xvYmFsO1xuICAgICAgICAgIH1mdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCwgZXhwb3J0cykge1xuICAgICAgICAgICAgY29udGV4dCB8fCAoY29udGV4dCA9IHJvb3RbXCJPYmplY3RcIl0oKSk7ZXhwb3J0cyB8fCAoZXhwb3J0cyA9IHJvb3RbXCJPYmplY3RcIl0oKSk7dmFyIE51bWJlciA9IGNvbnRleHRbXCJOdW1iZXJcIl0gfHwgcm9vdFtcIk51bWJlclwiXSxcbiAgICAgICAgICAgICAgICBTdHJpbmcgPSBjb250ZXh0W1wiU3RyaW5nXCJdIHx8IHJvb3RbXCJTdHJpbmdcIl0sXG4gICAgICAgICAgICAgICAgT2JqZWN0ID0gY29udGV4dFtcIk9iamVjdFwiXSB8fCByb290W1wiT2JqZWN0XCJdLFxuICAgICAgICAgICAgICAgIERhdGUgPSBjb250ZXh0W1wiRGF0ZVwiXSB8fCByb290W1wiRGF0ZVwiXSxcbiAgICAgICAgICAgICAgICBTeW50YXhFcnJvciA9IGNvbnRleHRbXCJTeW50YXhFcnJvclwiXSB8fCByb290W1wiU3ludGF4RXJyb3JcIl0sXG4gICAgICAgICAgICAgICAgVHlwZUVycm9yID0gY29udGV4dFtcIlR5cGVFcnJvclwiXSB8fCByb290W1wiVHlwZUVycm9yXCJdLFxuICAgICAgICAgICAgICAgIE1hdGggPSBjb250ZXh0W1wiTWF0aFwiXSB8fCByb290W1wiTWF0aFwiXSxcbiAgICAgICAgICAgICAgICBuYXRpdmVKU09OID0gY29udGV4dFtcIkpTT05cIl0gfHwgcm9vdFtcIkpTT05cIl07aWYgKHR5cGVvZiBuYXRpdmVKU09OID09IFwib2JqZWN0XCIgJiYgbmF0aXZlSlNPTikge1xuICAgICAgICAgICAgICBleHBvcnRzLnN0cmluZ2lmeSA9IG5hdGl2ZUpTT04uc3RyaW5naWZ5O2V4cG9ydHMucGFyc2UgPSBuYXRpdmVKU09OLnBhcnNlO1xuICAgICAgICAgICAgfXZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgICAgICAgICAgICAgZ2V0Q2xhc3MgPSBvYmplY3RQcm90by50b1N0cmluZyxcbiAgICAgICAgICAgICAgICBpc1Byb3BlcnR5LFxuICAgICAgICAgICAgICAgIGZvckVhY2gsXG4gICAgICAgICAgICAgICAgdW5kZWY7dmFyIGlzRXh0ZW5kZWQgPSBuZXcgRGF0ZSgtMHhjNzgyYjViODAwY2VjKTt0cnkge1xuICAgICAgICAgICAgICBpc0V4dGVuZGVkID0gaXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpID09IC0xMDkyNTIgJiYgaXNFeHRlbmRlZC5nZXRVVENNb250aCgpID09PSAwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDRGF0ZSgpID09PSAxICYmIGlzRXh0ZW5kZWQuZ2V0VVRDSG91cnMoKSA9PSAxMCAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbnV0ZXMoKSA9PSAzNyAmJiBpc0V4dGVuZGVkLmdldFVUQ1NlY29uZHMoKSA9PSA2ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgPT0gNzA4O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fWZ1bmN0aW9uIGhhcyhuYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNbbmFtZV0gIT09IHVuZGVmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc1tuYW1lXTtcbiAgICAgICAgICAgICAgfXZhciBpc1N1cHBvcnRlZDtpZiAobmFtZSA9PSBcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKSB7XG4gICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWQgPSBcImFcIlswXSAhPSBcImFcIjtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09IFwianNvblwiKSB7XG4gICAgICAgICAgICAgICAgaXNTdXBwb3J0ZWQgPSBoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiBoYXMoXCJqc29uLXBhcnNlXCIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZCA9IFwie1xcXCJhXFxcIjpbMSx0cnVlLGZhbHNlLG51bGwsXFxcIlxcXFx1MDAwMFxcXFxiXFxcXG5cXFxcZlxcXFxyXFxcXHRcXFwiXX1cIjtpZiAobmFtZSA9PSBcImpzb24tc3RyaW5naWZ5XCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzdHJpbmdpZnkgPSBleHBvcnRzLnN0cmluZ2lmeSxcbiAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPSB0eXBlb2Ygc3RyaW5naWZ5ID09IFwiZnVuY3Rpb25cIiAmJiBpc0V4dGVuZGVkO2lmIChzdHJpbmdpZnlTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgKHZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9KS50b0pTT04gPSB2YWx1ZTt0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ2lmeVN1cHBvcnRlZCA9IHN0cmluZ2lmeSgwKSA9PT0gXCIwXCIgJiYgc3RyaW5naWZ5KG5ldyBOdW1iZXIoKSkgPT09IFwiMFwiICYmIHN0cmluZ2lmeShuZXcgU3RyaW5nKCkpID09ICdcIlwiJyAmJiBzdHJpbmdpZnkoZ2V0Q2xhc3MpID09PSB1bmRlZiAmJiBzdHJpbmdpZnkodW5kZWYpID09PSB1bmRlZiAmJiBzdHJpbmdpZnkoKSA9PT0gdW5kZWYgJiYgc3RyaW5naWZ5KHZhbHVlKSA9PT0gXCIxXCIgJiYgc3RyaW5naWZ5KFt2YWx1ZV0pID09IFwiWzFdXCIgJiYgc3RyaW5naWZ5KFt1bmRlZl0pID09IFwiW251bGxdXCIgJiYgc3RyaW5naWZ5KG51bGwpID09IFwibnVsbFwiICYmIHN0cmluZ2lmeShbdW5kZWYsIGdldENsYXNzLCBudWxsXSkgPT0gXCJbbnVsbCxudWxsLG51bGxdXCIgJiYgc3RyaW5naWZ5KHsgYTogW3ZhbHVlLCB0cnVlLCBmYWxzZSwgbnVsbCwgXCJcXHgwMFxcYlxcblxcZlxcclx0XCJdIH0pID09IHNlcmlhbGl6ZWQgJiYgc3RyaW5naWZ5KG51bGwsIHZhbHVlKSA9PT0gXCIxXCIgJiYgc3RyaW5naWZ5KFsxLCAyXSwgbnVsbCwgMSkgPT0gXCJbXFxuIDEsXFxuIDJcXG5dXCIgJiYgc3RyaW5naWZ5KG5ldyBEYXRlKC04NjRlMTMpKSA9PSAnXCItMjcxODIxLTA0LTIwVDAwOjAwOjAwLjAwMFpcIicgJiYgc3RyaW5naWZ5KG5ldyBEYXRlKDg2NGUxMykpID09ICdcIisyNzU3NjAtMDktMTNUMDA6MDA6MDAuMDAwWlwiJyAmJiBzdHJpbmdpZnkobmV3IERhdGUoLTYyMTk4NzU1MmU1KSkgPT0gJ1wiLTAwMDAwMS0wMS0wMVQwMDowMDowMC4wMDBaXCInICYmIHN0cmluZ2lmeShuZXcgRGF0ZSgtMSkpID09ICdcIjE5NjktMTItMzFUMjM6NTk6NTkuOTk5WlwiJztcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc3RyaW5naWZ5U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1pc1N1cHBvcnRlZCA9IHN0cmluZ2lmeVN1cHBvcnRlZDtcbiAgICAgICAgICAgICAgICB9aWYgKG5hbWUgPT0gXCJqc29uLXBhcnNlXCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBwYXJzZSA9IGV4cG9ydHMucGFyc2U7aWYgKHR5cGVvZiBwYXJzZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2UoXCIwXCIpID09PSAwICYmICFwYXJzZShmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2Uoc2VyaWFsaXplZCk7dmFyIHBhcnNlU3VwcG9ydGVkID0gdmFsdWVbXCJhXCJdLmxlbmd0aCA9PSA1ICYmIHZhbHVlW1wiYVwiXVswXSA9PT0gMTtpZiAocGFyc2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9ICFwYXJzZSgnXCJcdFwiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31pZiAocGFyc2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjAxXCIpICE9PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9IHBhcnNlKFwiMS5cIikgIT09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9aXNTdXBwb3J0ZWQgPSBwYXJzZVN1cHBvcnRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1yZXR1cm4gaGFzW25hbWVdID0gISFpc1N1cHBvcnRlZDtcbiAgICAgICAgICAgIH1pZiAoIWhhcyhcImpzb25cIikpIHtcbiAgICAgICAgICAgICAgdmFyIGZ1bmN0aW9uQ2xhc3MgPSBcIltvYmplY3QgRnVuY3Rpb25dXCIsXG4gICAgICAgICAgICAgICAgICBkYXRlQ2xhc3MgPSBcIltvYmplY3QgRGF0ZV1cIixcbiAgICAgICAgICAgICAgICAgIG51bWJlckNsYXNzID0gXCJbb2JqZWN0IE51bWJlcl1cIixcbiAgICAgICAgICAgICAgICAgIHN0cmluZ0NsYXNzID0gXCJbb2JqZWN0IFN0cmluZ11cIixcbiAgICAgICAgICAgICAgICAgIGFycmF5Q2xhc3MgPSBcIltvYmplY3QgQXJyYXldXCIsXG4gICAgICAgICAgICAgICAgICBib29sZWFuQ2xhc3MgPSBcIltvYmplY3QgQm9vbGVhbl1cIjt2YXIgY2hhckluZGV4QnVnZ3kgPSBoYXMoXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIik7aWYgKCFpc0V4dGVuZGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vcjt2YXIgTW9udGhzID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTt2YXIgZ2V0RGF5ID0gZnVuY3Rpb24gZ2V0RGF5KHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gTW9udGhzW21vbnRoXSArIDM2NSAqICh5ZWFyIC0gMTk3MCkgKyBmbG9vcigoeWVhciAtIDE5NjkgKyAobW9udGggPSArKG1vbnRoID4gMSkpKSAvIDQpIC0gZmxvb3IoKHllYXIgLSAxOTAxICsgbW9udGgpIC8gMTAwKSArIGZsb29yKCh5ZWFyIC0gMTYwMSArIG1vbnRoKSAvIDQwMCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfWlmICghKGlzUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICBpc1Byb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgbWVtYmVycyA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yO2lmICgobWVtYmVycy5fX3Byb3RvX18gPSBudWxsLCBtZW1iZXJzLl9fcHJvdG9fXyA9IHsgdG9TdHJpbmc6IDEgfSwgbWVtYmVycykudG9TdHJpbmcgIT0gZ2V0Q2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbCA9IHRoaXMuX19wcm90b19fLFxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAocHJvcGVydHkgaW4gKHRoaXMuX19wcm90b19fID0gbnVsbCwgdGhpcykpO3RoaXMuX19wcm90b19fID0gb3JpZ2luYWw7cmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yID0gbWVtYmVycy5jb25zdHJ1Y3Rvcjtpc1Byb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9ICh0aGlzLmNvbnN0cnVjdG9yIHx8IGNvbnN0cnVjdG9yKS5wcm90b3R5cGU7cmV0dXJuIHByb3BlcnR5IGluIHRoaXMgJiYgIShwcm9wZXJ0eSBpbiBwYXJlbnQgJiYgdGhpc1twcm9wZXJ0eV0gPT09IHBhcmVudFtwcm9wZXJ0eV0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfW1lbWJlcnMgPSBudWxsO3JldHVybiBpc1Byb3BlcnR5LmNhbGwodGhpcywgcHJvcGVydHkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1mb3JFYWNoID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcnMsXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OyhQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZU9mID0gMDtcbiAgICAgICAgICAgICAgICB9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7bWVtYmVycyA9IG5ldyBQcm9wZXJ0aWVzKCk7Zm9yIChwcm9wZXJ0eSBpbiBtZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNQcm9wZXJ0eS5jYWxsKG1lbWJlcnMsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgICAgICBzaXplKys7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVByb3BlcnRpZXMgPSBtZW1iZXJzID0gbnVsbDtpZiAoIXNpemUpIHtcbiAgICAgICAgICAgICAgICAgIG1lbWJlcnMgPSBbXCJ2YWx1ZU9mXCIsIFwidG9TdHJpbmdcIiwgXCJ0b0xvY2FsZVN0cmluZ1wiLCBcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsIFwiaXNQcm90b3R5cGVPZlwiLCBcImhhc093blByb3BlcnR5XCIsIFwiY29uc3RydWN0b3JcIl07Zm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDt2YXIgaGFzUHJvcGVydHkgPSAhaXNGdW5jdGlvbiAmJiB0eXBlb2Ygb2JqZWN0LmNvbnN0cnVjdG9yICE9IFwiZnVuY3Rpb25cIiAmJiBvYmplY3RUeXBlc1t0eXBlb2Ygb2JqZWN0Lmhhc093blByb3BlcnR5XSAmJiBvYmplY3QuaGFzT3duUHJvcGVydHkgfHwgaXNQcm9wZXJ0eTtmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWZvciAobGVuZ3RoID0gbWVtYmVycy5sZW5ndGg7IHByb3BlcnR5ID0gbWVtYmVyc1stLWxlbmd0aF07IGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkgJiYgY2FsbGJhY2socHJvcGVydHkpKTtcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaXplID09IDIpIHtcbiAgICAgICAgICAgICAgICAgIGZvckVhY2ggPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVtYmVycyA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGdW5jdGlvbiA9IGdldENsYXNzLmNhbGwob2JqZWN0KSA9PSBmdW5jdGlvbkNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk7Zm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmICFpc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpICYmIChtZW1iZXJzW3Byb3BlcnR5XSA9IDEpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uc3RydWN0b3I7Zm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSAmJiAhKGlzQ29uc3RydWN0b3IgPSBwcm9wZXJ0eSA9PT0gXCJjb25zdHJ1Y3RvclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWlmIChpc0NvbnN0cnVjdG9yIHx8IGlzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5ID0gXCJjb25zdHJ1Y3RvclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9cmV0dXJuIGZvckVhY2gob2JqZWN0LCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH07aWYgKCFoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBFc2NhcGVzID0geyA5MjogXCJcXFxcXFxcXFwiLCAzNDogJ1xcXFxcIicsIDg6IFwiXFxcXGJcIiwgMTI6IFwiXFxcXGZcIiwgMTA6IFwiXFxcXG5cIiwgMTM6IFwiXFxcXHJcIiwgOTogXCJcXFxcdFwiIH07dmFyIGxlYWRpbmdaZXJvZXMgPSBcIjAwMDAwMFwiO3ZhciB0b1BhZGRlZFN0cmluZyA9IGZ1bmN0aW9uIHRvUGFkZGVkU3RyaW5nKHdpZHRoLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIChsZWFkaW5nWmVyb2VzICsgKHZhbHVlIHx8IDApKS5zbGljZSgtd2lkdGgpO1xuICAgICAgICAgICAgICAgIH07dmFyIHVuaWNvZGVQcmVmaXggPSBcIlxcXFx1MDBcIjt2YXIgcXVvdGUgPSBmdW5jdGlvbiBxdW90ZSh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICdcIicsXG4gICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IHZhbHVlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICB1c2VDaGFySW5kZXggPSAhY2hhckluZGV4QnVnZ3kgfHwgbGVuZ3RoID4gMTA7dmFyIHN5bWJvbHMgPSB1c2VDaGFySW5kZXggJiYgKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuc3BsaXQoXCJcIikgOiB2YWx1ZSk7Zm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IHZhbHVlLmNoYXJDb2RlQXQoaW5kZXgpO3N3aXRjaCAoY2hhckNvZGUpIHtjYXNlIDg6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMjpjYXNlIDEzOmNhc2UgMzQ6Y2FzZSA5MjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBFc2NhcGVzW2NoYXJDb2RlXTticmVhaztkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHVuaWNvZGVQcmVmaXggKyB0b1BhZGRlZFN0cmluZygyLCBjaGFyQ29kZS50b1N0cmluZygxNikpO2JyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfXJlc3VsdCArPSB1c2VDaGFySW5kZXggPyBzeW1ib2xzW2luZGV4XSA6IHZhbHVlLmNoYXJBdChpbmRleCk7fVxuICAgICAgICAgICAgICAgICAgfXJldHVybiByZXN1bHQgKyAnXCInO1xuICAgICAgICAgICAgICAgIH07dmFyIHNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShwcm9wZXJ0eSwgb2JqZWN0LCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdmFsdWUsIGNsYXNzTmFtZSwgeWVhciwgbW9udGgsIGRhdGUsIHRpbWUsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMsIHJlc3VsdHMsIGVsZW1lbnQsIGluZGV4LCBsZW5ndGgsIHByZWZpeCwgcmVzdWx0O3RyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31pZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh2YWx1ZSk7aWYgKGNsYXNzTmFtZSA9PSBkYXRlQ2xhc3MgJiYgIWlzUHJvcGVydHkuY2FsbCh2YWx1ZSwgXCJ0b0pTT05cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAtMSAvIDAgJiYgdmFsdWUgPCAxIC8gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldERheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gZmxvb3IodmFsdWUgLyA4NjRlNSk7Zm9yICh5ZWFyID0gZmxvb3IoZGF0ZSAvIDM2NS4yNDI1KSArIDE5NzAgLSAxOyBnZXREYXkoeWVhciArIDEsIDApIDw9IGRhdGU7IHllYXIrKyk7Zm9yIChtb250aCA9IGZsb29yKChkYXRlIC0gZ2V0RGF5KHllYXIsIDApKSAvIDMwLjQyKTsgZ2V0RGF5KHllYXIsIG1vbnRoICsgMSkgPD0gZGF0ZTsgbW9udGgrKyk7ZGF0ZSA9IDEgKyBkYXRlIC0gZ2V0RGF5KHllYXIsIG1vbnRoKTt0aW1lID0gKHZhbHVlICUgODY0ZTUgKyA4NjRlNSkgJSA4NjRlNTtob3VycyA9IGZsb29yKHRpbWUgLyAzNmU1KSAlIDI0O21pbnV0ZXMgPSBmbG9vcih0aW1lIC8gNmU0KSAlIDYwO3NlY29uZHMgPSBmbG9vcih0aW1lIC8gMWUzKSAlIDYwO21pbGxpc2Vjb25kcyA9IHRpbWUgJSAxZTM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyID0gdmFsdWUuZ2V0VVRDRnVsbFllYXIoKTttb250aCA9IHZhbHVlLmdldFVUQ01vbnRoKCk7ZGF0ZSA9IHZhbHVlLmdldFVUQ0RhdGUoKTtob3VycyA9IHZhbHVlLmdldFVUQ0hvdXJzKCk7bWludXRlcyA9IHZhbHVlLmdldFVUQ01pbnV0ZXMoKTtzZWNvbmRzID0gdmFsdWUuZ2V0VVRDU2Vjb25kcygpO21pbGxpc2Vjb25kcyA9IHZhbHVlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfXZhbHVlID0gKHllYXIgPD0gMCB8fCB5ZWFyID49IDFlNCA/ICh5ZWFyIDwgMCA/IFwiLVwiIDogXCIrXCIpICsgdG9QYWRkZWRTdHJpbmcoNiwgeWVhciA8IDAgPyAteWVhciA6IHllYXIpIDogdG9QYWRkZWRTdHJpbmcoNCwgeWVhcikpICsgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBtb250aCArIDEpICsgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBkYXRlKSArIFwiVFwiICsgdG9QYWRkZWRTdHJpbmcoMiwgaG91cnMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBtaW51dGVzKSArIFwiOlwiICsgdG9QYWRkZWRTdHJpbmcoMiwgc2Vjb25kcykgKyBcIi5cIiArIHRvUGFkZGVkU3RyaW5nKDMsIG1pbGxpc2Vjb25kcykgKyBcIlpcIjtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUudG9KU09OID09IFwiZnVuY3Rpb25cIiAmJiAoY2xhc3NOYW1lICE9IG51bWJlckNsYXNzICYmIGNsYXNzTmFtZSAhPSBzdHJpbmdDbGFzcyAmJiBjbGFzc05hbWUgIT0gYXJyYXlDbGFzcyB8fCBpc1Byb3BlcnR5LmNhbGwodmFsdWUsIFwidG9KU09OXCIpKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9KU09OKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfWlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfWlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICB9Y2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh2YWx1ZSk7aWYgKGNsYXNzTmFtZSA9PSBib29sZWFuQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA+IC0xIC8gMCAmJiB2YWx1ZSA8IDEgLyAwID8gXCJcIiArIHZhbHVlIDogXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVvdGUoXCJcIiArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1pZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZW5ndGggPSBzdGFjay5sZW5ndGg7IGxlbmd0aC0tOykge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFja1tsZW5ndGhdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9c3RhY2sucHVzaCh2YWx1ZSk7cmVzdWx0cyA9IFtdO3ByZWZpeCA9IGluZGVudGF0aW9uO2luZGVudGF0aW9uICs9IHdoaXRlc3BhY2U7aWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBzZXJpYWxpemUoaW5kZXgsIHZhbHVlLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKTtyZXN1bHRzLnB1c2goZWxlbWVudCA9PT0gdW5kZWYgPyBcIm51bGxcIiA6IGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIH1yZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/IHdoaXRlc3BhY2UgPyBcIltcXG5cIiArIGluZGVudGF0aW9uICsgcmVzdWx0cy5qb2luKFwiLFxcblwiICsgaW5kZW50YXRpb24pICsgXCJcXG5cIiArIHByZWZpeCArIFwiXVwiIDogXCJbXCIgKyByZXN1bHRzLmpvaW4oXCIsXCIpICsgXCJdXCIgOiBcIltdXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChwcm9wZXJ0aWVzIHx8IHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2VyaWFsaXplKHByb3BlcnR5LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7aWYgKGVsZW1lbnQgIT09IHVuZGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChxdW90ZShwcm9wZXJ0eSkgKyBcIjpcIiArICh3aGl0ZXNwYWNlID8gXCIgXCIgOiBcIlwiKSArIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO3Jlc3VsdCA9IHJlc3VsdHMubGVuZ3RoID8gd2hpdGVzcGFjZSA/IFwie1xcblwiICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oXCIsXFxuXCIgKyBpbmRlbnRhdGlvbikgKyBcIlxcblwiICsgcHJlZml4ICsgXCJ9XCIgOiBcIntcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIn1cIiA6IFwie31cIjtcbiAgICAgICAgICAgICAgICAgICAgfXN0YWNrLnBvcCgpO3JldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtleHBvcnRzLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIChzb3VyY2UsIGZpbHRlciwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgIHZhciB3aGl0ZXNwYWNlLCBjYWxsYmFjaywgcHJvcGVydGllcywgY2xhc3NOYW1lO2lmIChvYmplY3RUeXBlc1t0eXBlb2YgZmlsdGVyXSAmJiBmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKGZpbHRlcikpID09IGZ1bmN0aW9uQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUgPT0gYXJyYXlDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtmb3IgKHZhciBpbmRleCA9IDAsIGxlbmd0aCA9IGZpbHRlci5sZW5ndGgsIHZhbHVlOyBpbmRleCA8IGxlbmd0aDsgdmFsdWUgPSBmaWx0ZXJbaW5kZXgrK10sIChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKSwgY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzIHx8IGNsYXNzTmFtZSA9PSBudW1iZXJDbGFzcykgJiYgKHByb3BlcnRpZXNbdmFsdWVdID0gMSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9aWYgKHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh3aWR0aCkpID09IG51bWJlckNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCh3aWR0aCAtPSB3aWR0aCAlIDEpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh3aGl0ZXNwYWNlID0gXCJcIiwgd2lkdGggPiAxMCAmJiAod2lkdGggPSAxMCk7IHdoaXRlc3BhY2UubGVuZ3RoIDwgd2lkdGg7IHdoaXRlc3BhY2UgKz0gXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlID0gd2lkdGgubGVuZ3RoIDw9IDEwID8gd2lkdGggOiB3aWR0aC5zbGljZSgwLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1yZXR1cm4gc2VyaWFsaXplKFwiXCIsICh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHNvdXJjZSwgdmFsdWUpLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgXCJcIiwgW10pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1pZiAoIWhhcyhcImpzb24tcGFyc2VcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTt2YXIgVW5lc2NhcGVzID0geyA5MjogXCJcXFxcXCIsIDM0OiAnXCInLCA0NzogXCIvXCIsIDk4OiBcIlxcYlwiLCAxMTY6IFwiXHRcIiwgMTEwOiBcIlxcblwiLCAxMDI6IFwiXFxmXCIsIDExNDogXCJcXHJcIiB9O3ZhciBJbmRleCwgU291cmNlO3ZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgICAgICAgICAgICAgSW5kZXggPSBTb3VyY2UgPSBudWxsO3Rocm93IFN5bnRheEVycm9yKCk7XG4gICAgICAgICAgICAgICAgfTt2YXIgbGV4ID0gZnVuY3Rpb24gbGV4KCkge1xuICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IFNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBzb3VyY2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgIGJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlO3doaWxlIChJbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtzd2l0Y2ggKGNoYXJDb2RlKSB7Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgSW5kZXgrKzticmVhaztjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDQ0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjaGFySW5kZXhCdWdneSA/IHNvdXJjZS5jaGFyQXQoSW5kZXgpIDogc291cmNlW0luZGV4XTtJbmRleCsrO3JldHVybiB2YWx1ZTtjYXNlIDM0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YWx1ZSA9IFwiQFwiLCBJbmRleCsrOyBJbmRleCA8IGxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7aWYgKGNoYXJDb2RlIDwgMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXJDb2RlID09IDkyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtzd2l0Y2ggKGNoYXJDb2RlKSB7Y2FzZSA5MjpjYXNlIDM0OmNhc2UgNDc6Y2FzZSA5ODpjYXNlIDExNjpjYXNlIDExMDpjYXNlIDEwMjpjYXNlIDExNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gVW5lc2NhcGVzW2NoYXJDb2RlXTtJbmRleCsrO2JyZWFrO2Nhc2UgMTE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbiA9ICsrSW5kZXg7Zm9yIChwb3NpdGlvbiA9IEluZGV4ICsgNDsgSW5kZXggPCBwb3NpdGlvbjsgSW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO2lmICghKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3IHx8IGNoYXJDb2RlID49IDk3ICYmIGNoYXJDb2RlIDw9IDEwMiB8fCBjaGFyQ29kZSA+PSA2NSAmJiBjaGFyQ29kZSA8PSA3MCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9dmFsdWUgKz0gZnJvbUNoYXJDb2RlKFwiMHhcIiArIHNvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpKTticmVhaztkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1jaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtiZWdpbiA9IEluZGV4O3doaWxlIChjaGFyQ29kZSA+PSAzMiAmJiBjaGFyQ29kZSAhPSA5MiAmJiBjaGFyQ29kZSAhPSAzNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9dmFsdWUgKz0gc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1pZiAoc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpID09IDM0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7cmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWFib3J0KCk7ZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luID0gSW5kZXg7aWYgKGNoYXJDb2RlID09IDQ1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVkID0gdHJ1ZTtjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gNDggJiYgKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXggKyAxKSwgY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfWlzU2lnbmVkID0gZmFsc2U7Zm9yICg7IEluZGV4IDwgbGVuZ3RoICYmIChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSwgY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpOyBJbmRleCsrKTtpZiAoc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpID09IDQ2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSArK0luZGV4O2ZvciAoOyBwb3NpdGlvbiA8IGxlbmd0aCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbiksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KTsgcG9zaXRpb24rKyk7aWYgKHBvc2l0aW9uID09IEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1JbmRleCA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9Y2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7aWYgKGNoYXJDb2RlID09IDEwMSB8fCBjaGFyQ29kZSA9PSA2OSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7aWYgKGNoYXJDb2RlID09IDQzIHx8IGNoYXJDb2RlID09IDQ1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1mb3IgKHBvc2l0aW9uID0gSW5kZXg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmIChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKSwgY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpOyBwb3NpdGlvbisrKTtpZiAocG9zaXRpb24gPT0gSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfUluZGV4ID0gcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1yZXR1cm4gK3NvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChpc1NpZ25lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNDtyZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlLnNsaWNlKEluZGV4LCBJbmRleCArIDUpID09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRleCArPSA1O3JldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlLnNsaWNlKEluZGV4LCBJbmRleCArIDQpID09IFwibnVsbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDQ7cmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9YWJvcnQoKTt9XG4gICAgICAgICAgICAgICAgICB9cmV0dXJuIFwiJFwiO1xuICAgICAgICAgICAgICAgIH07dmFyIGdldCA9IGZ1bmN0aW9uIGdldCh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMsIGhhc01lbWJlcnM7aWYgKHZhbHVlID09IFwiJFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9aWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgPT0gXCJAXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIH1pZiAodmFsdWUgPT0gXCJbXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107Zm9yICg7OyBoYXNNZW1iZXJzIHx8IChoYXNNZW1iZXJzID0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7aWYgKHZhbHVlID09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChoYXNNZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIixcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7aWYgKHZhbHVlID09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9cmVzdWx0cy5wdXNoKGdldCh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1yZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBcIntcIikge1xuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB7fTtmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtpZiAodmFsdWUgPT0gXCJ9XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKGhhc01lbWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtpZiAodmFsdWUgPT0gXCJ9XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1pZiAodmFsdWUgPT0gXCIsXCIgfHwgdHlwZW9mIHZhbHVlICE9IFwic3RyaW5nXCIgfHwgKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuY2hhckF0KDApIDogdmFsdWVbMF0pICE9IFwiQFwiIHx8IGxleCgpICE9IFwiOlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9cmVzdWx0c1t2YWx1ZS5zbGljZSgxKV0gPSBnZXQobGV4KCkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1yZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgfWFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9cmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH07dmFyIHVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UsIHByb3BlcnR5LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB3YWxrKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKTtpZiAoZWxlbWVudCA9PT0gdW5kZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNvdXJjZVtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VbcHJvcGVydHldID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O3ZhciB3YWxrID0gZnVuY3Rpb24gd2Fsayhzb3VyY2UsIHByb3BlcnR5LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XSxcbiAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg7aWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRDbGFzcy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGxlbmd0aC0tOykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKHZhbHVlLCBsZW5ndGgsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIHByb3BlcnR5LCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1yZXR1cm4gY2FsbGJhY2suY2FsbChzb3VyY2UsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfTtleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQsIHZhbHVlO0luZGV4ID0gMDtTb3VyY2UgPSBcIlwiICsgc291cmNlO3Jlc3VsdCA9IGdldChsZXgoKSk7aWYgKGxleCgpICE9IFwiJFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9SW5kZXggPSBTb3VyY2UgPSBudWxsO3JldHVybiBjYWxsYmFjayAmJiBnZXRDbGFzcy5jYWxsKGNhbGxiYWNrKSA9PSBmdW5jdGlvbkNsYXNzID8gd2FsaygodmFsdWUgPSB7fSwgdmFsdWVbXCJcIl0gPSByZXN1bHQsIHZhbHVlKSwgXCJcIiwgY2FsbGJhY2spIDogcmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1leHBvcnRzW1wicnVuSW5Db250ZXh0XCJdID0gcnVuSW5Db250ZXh0O3JldHVybiBleHBvcnRzO1xuICAgICAgICAgIH1pZiAoZnJlZUV4cG9ydHMgJiYgIWlzTG9hZGVyKSB7XG4gICAgICAgICAgICBydW5JbkNvbnRleHQocm9vdCwgZnJlZUV4cG9ydHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbmF0aXZlSlNPTiA9IHJvb3QuSlNPTixcbiAgICAgICAgICAgICAgICBwcmV2aW91c0pTT04gPSByb290W1wiSlNPTjNcIl0sXG4gICAgICAgICAgICAgICAgaXNSZXN0b3JlZCA9IGZhbHNlO3ZhciBKU09OMyA9IHJ1bkluQ29udGV4dChyb290LCByb290W1wiSlNPTjNcIl0gPSB7IG5vQ29uZmxpY3Q6IGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc3RvcmVkKSB7XG4gICAgICAgICAgICAgICAgICBpc1Jlc3RvcmVkID0gdHJ1ZTtyb290LkpTT04gPSBuYXRpdmVKU09OO3Jvb3RbXCJKU09OM1wiXSA9IHByZXZpb3VzSlNPTjtuYXRpdmVKU09OID0gcHJldmlvdXNKU09OID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9cmV0dXJuIEpTT04zO1xuICAgICAgICAgICAgICB9IH0pO3Jvb3QuSlNPTiA9IHsgcGFyc2U6IEpTT04zLnBhcnNlLCBzdHJpbmdpZnk6IEpTT04zLnN0cmluZ2lmeSB9O1xuICAgICAgICAgIH1pZiAoaXNMb2FkZXIpIHtcbiAgICAgICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBKU09OMztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwge31dLCA1MTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gdG9BcnJheTtmdW5jdGlvbiB0b0FycmF5KGxpc3QsIGluZGV4KSB7XG4gICAgICAgIHZhciBhcnJheSA9IFtdO2luZGV4ID0gaW5kZXggfHwgMDtmb3IgKHZhciBpID0gaW5kZXggfHwgMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnJheVtpIC0gaW5kZXhdID0gbGlzdFtpXTtcbiAgICAgICAgfXJldHVybiBhcnJheTtcbiAgICAgIH1cbiAgICB9LCB7fV0gfSwge30sIFszMV0pKDMxKTtcbn0pO1xuXG5jYy5fUkZwb3AoKTsiXX0=
