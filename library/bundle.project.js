require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],"api":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4c169pnu1VJqIgC2umDXj89', 'api');
// lib/api.js

var qwest = require('qwest');

var ajax = function ajax(type, url, data) {
    var promise = new Promise(function (resolve, reject) {
        qwest.map(type, url, data).then(function (res, data) {
            if (data.ok) {
                resolve(data);
            } else {
                reject(data);
            }
        });
    });
    return promise;
};

var api = {
    login: function login(data) {
        return ajax('POST', 'http://127.0.0.1:8123/api/login/', data);
    },
    register: function register(data) {
        return ajax('POST', 'http://127.0.0.1:8123/api/register/', data);
    },
    update: function update(data) {
        return ajax('PATCH', 'http://127.0.0.1:8123/api/user/', data);
    }
};

module.exports = api;

cc._RFpop();
},{"qwest":"qwest"}],"connect":[function(require,module,exports){
"use strict";
cc._RFpush(module, '628b1Sm1j9LRYrbMGpLPljr', 'connect');
// biz/connect/script/connect.js

var sio = require('socket.io');
var User = require('user');

var Connect = (function () {
    var URI = '10.10.1.38:3000/tankControllers';

    var ws;

    var connect = function connect() {
        ws = sio(URI + '?uid=' + User.Id);
    };

    var disconnect = function disconnect() {
        ws.disconnect();
    };

    var on = function on(eventName, callback) {
        ws.on(eventName, callback);
    };

    var emit = function emit(eventName, eventObj) {
        ws.emit(eventName, {
            uid: User.Id,
            data: eventObj
        });
    };

    return {
        connect: connect,
        disconnect: disconnect,
        on: on,
        emit: emit
    };
})();

module.exports = Connect;

cc._RFpop();
},{"socket.io":"socket.io","user":"user"}],"controller":[function(require,module,exports){
"use strict";
cc._RFpush(module, '567615sefhI94g/0tQTKQ6o', 'controller');
// biz/controller/script/controller.js

var Connect = require('connect');

cc.Class({
    'extends': cc.Component,

    properties: {},

    onLoad: function onLoad() {},

    backHandler: function backHandler() {
        Connect.disconnect();
        cc.director.loadScene('Main');
    }
});

cc._RFpop();
},{"connect":"connect"}],"direct":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd84f583V+NNcaK876y7fzDp', 'direct');
// biz/controller/script/direct.js

var Connect = require('connect');

cc.Class({
    'extends': cc.Component,

    properties: {
        follower: {
            'default': null,
            type: cc.Node
        },
        direction: 4
    },

    onLoad: function onLoad() {
        this.setTouchControl();
        this.onSendDirection();
    },

    setTouchControl: function setTouchControl() {
        var self = this;
        cc.eventManager.addListener({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            onTouchBegan: self.onTouchBegin.bind(self),
            onTouchMoved: self.onTouchMove.bind(self),
            onTouchEnded: self.onTouchEnd.bind(self)
        }, self.node);
    },

    _getAngle: function _getAngle(pos) {
        this.angle = Math.atan2(pos.y, pos.x) / 3.1415926 * 180;
        return this.angle;
    },

    _getRadians: function _getRadians(pos) {
        this.radians = Math.atan2(pos.y, pos.x);
        return this.radians;
    },

    _getLength: function _getLength(pos) {
        return Math.sqrt(pos.x * pos.x + pos.y * pos.y);
    },

    onTouchBegin: function onTouchBegin(touch, event) {
        var target = this.follower;
        var touchLoc = touch.getLocation();
        var locInNode = this.node.convertToNodeSpaceAR(touchLoc);
        var tmpLength = this._getLength(locInNode);
        return tmpLength < 103;
    },

    onTouchMove: function onTouchMove(touch, event) {
        var target = this.follower;
        var touchLoc = touch.getLocation();
        var locInNode = this.node.convertToNodeSpaceAR(touchLoc);

        this._getAngle(locInNode);
        this._getRadians(locInNode);

        var tmpLength = this._getLength(locInNode);

        if (tmpLength < 103) {
            target.setPosition(locInNode);
        } else {
            var x = Math.cos(this.radians) * 103;
            var y = Math.sin(this.radians) * 103;
            target.setPosition(cc.p(x, y));
        }

        this.onEmitDirection(tmpLength);
    },

    onTouchEnd: function onTouchEnd() {
        var target = this.follower;
        target.setPosition({ x: 0, y: 0 });

        this.node.emit('direction', {
            direction: 4
        });
    },

    onSendDirection: function onSendDirection() {
        var self = this;
        this.node.on('direction', function (event) {
            if (self.direction !== event.detail.direction) {
                self.direction = event.detail.direction;
                Connect.emit('c-direction', {
                    direction: self.direction
                });
            }
        });
    },

    onEmitDirection: function onEmitDirection(length) {
        var direction;

        if (length <= 10) {
            return this.node.emit('direction', {
                direction: 4
            });
        }

        if (this.angle < 0) this.angle = this.angle + 360;

        if (this.angle >= 0 && this.angle <= 45 || this.angle > 315 && this.angle <= 360) {
            direction = 1;
        } else if (this.angle > 45 && this.angle <= 135) {
            direction = 0;
        } else if (this.angle > 135 && this.angle <= 225) {
            direction = 3;
        } else if (this.angle > 225 && this.angle <= 315) {
            direction = 2;
        }

        return this.node.emit('direction', {
            direction: direction
        });
    }
});

cc._RFpop();
},{"connect":"connect"}],"equip_data":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1b1cayaZSRNU4ieNthkGkTh', 'equip_data');
// biz/equip/script/equip_data.js

var head = [{
    desc: '最基础的炮弹，适合新手菜鸟',
    cost: 0
}, {
    desc: '其实就是换上了弹药，不过可以用来吓人',
    cost: 200
}, {
    desc: '看上去非常威武，用起来貌似也不错',
    cost: 400
}, {
    desc: '勇气沸腾想要散发出来，似乎可以去当勇者了',
    cost: 800
}, {
    desc: '强大的攻击力，史上排名第二的坦克炮',
    cost: 1600
}, {
    desc: '最强的火炮，没有比这个更炫了',
    cost: 3200
}, {
    desc: '已经升级到了顶级',
    cost: '顶级'
}];

var body = [{
    desc: '提供最基础的防御能力而已',
    cost: 0
}, {
    desc: '只是多了一些修饰的钢甲',
    cost: 200
}, {
    desc: '钢造的，非常坚硬但不防震',
    cost: 400
}, {
    desc: '用沙子非常仔细的打磨过，自信满满的作品',
    cost: 800
}, {
    desc: '相当优秀的防御能力，助你驰骋疆场',
    cost: 1600
}, {
    desc: '只有久经沙场独孤求败的你才有资格拥有',
    cost: 3200
}, {
    desc: '已经升级到了顶级',
    cost: '顶级'
}];

var wheel = [{
    desc: '最最最普通的履带，有了它，你才能动',
    cost: 0
}, {
    desc: '稍微改变了些造型而已，速度小有提升',
    cost: 200
}, {
    desc: '可以承受较强的压力，装上后似乎开的不慢',
    cost: 400
}, {
    desc: '已经不错的行驶能力，还有继续提升空间',
    cost: 800
}, {
    desc: '优秀的合金打造，似乎燃起了飙坦克的欲望',
    cost: 1600
}, {
    desc: '又硬又轻，装上它可以跑第一名',
    cost: 3200
}, {
    desc: '已经升级到了顶级',
    cost: '顶级'
}];

module.exports = {
    tankHead: head,
    tankBody: body,
    tankWheel: wheel
};

cc._RFpop();
},{}],"equip_infobox":[function(require,module,exports){
"use strict";
cc._RFpush(module, '992f3VMJUpHLozQRabAZi9p', 'equip_infobox');
// biz/equip/script/equip_infobox.js



cc._RFpop();
},{}],"equip_item":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1883asn6SJKXY50uNG7yIZv', 'equip_item');
// biz/equip/script/equip_item.js

var user = require('user');
var tank = require('equip_data');

cc.Class({
    'extends': cc.Component,

    properties: {
        items: {
            'default': [],
            type: cc.SpriteFrame
        },
        now: {
            'default': null,
            type: cc.Sprite
        },
        next: {
            'default': null,
            type: cc.Sprite
        },
        desc: {
            'default': null,
            type: cc.Label
        },
        cost: {
            'default': null,
            type: cc.Label
        },
        btn: {
            'default': null,
            type: cc.Button
        },
        equipType: ''
    },

    setLevel: function setLevel(level) {
        this.now.spriteFrame = this.items[level];
        this.next.spriteFrame = this.items[level + 1];
        this.desc.string = tank[this.equipType][level + 1].desc;
        this.cost.string = tank[this.equipType][level + 1].cost;
    },

    upgrade: function upgrade() {
        if (+tank[this.equipType][user[this.equipType] + 1].cost > +user.diamond) {
            return this.node.emit('nocost');
        }
        user.cost(this.equipType, +tank[this.equipType][user[this.equipType] + 1].cost);
        if (user[this.equipType] === 5) {
            this.btn.interactable = false;
        }
        this.setLevel(user[this.equipType]);
        this.node.emit('cost');
    },

    onLoad: function onLoad() {
        this.setLevel(user[this.equipType]);
    }
});

cc._RFpop();
},{"equip_data":"equip_data","user":"user"}],"equip":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b2e86biu09Hy7mfNcjUwbGN', 'equip');
// biz/equip/script/equip.js

var user = require('user');
var api = require('api');

cc.Class({
    'extends': cc.Component,

    properties: {
        top: {
            'default': null,
            type: cc.Node
        },
        bottom: {
            'default': null,
            type: cc.Node
        },
        nickname: {
            'default': null,
            type: cc.Label
        },
        diamond: {
            'default': null,
            type: cc.Label
        },
        kill: {
            'default': null,
            type: cc.Label
        },
        dead: {
            'default': null,
            type: cc.Label
        },
        head: {
            'default': null,
            type: cc.Component
        },
        body: {
            'default': null,
            type: cc.Component
        },
        wheel: {
            'default': null,
            type: cc.Component
        },
        infoBox: {
            'default': null,
            type: cc.Node
        }
    },

    uiShow: function uiShow() {
        var self = this;
        this.bottom.runAction(cc.moveTo(0.5, 0, 0).easing(cc.easeIn(3.0)));
        setTimeout(function () {
            self.top.runAction(cc.moveTo(0.5, 0, 0).easing(cc.easeIn(3.0)));
        }, 250);
    },

    initData: function initData() {
        this.nickname.string = user.nickname;
        this.diamond.string = user.diamond;
        this.kill.string = user.kill;
        this.dead.string = user.dead;
    },

    onLoad: function onLoad() {
        this.initData();
        this.uiShow();

        this.headComponent = this.head.getComponent('equip_item');
        this.bodyComponent = this.body.getComponent('equip_item');
        this.wheelComponent = this.wheel.getComponent('equip_item');

        this.onCost();
    },

    onCost: function onCost() {
        var self = this;

        this.headComponent.node.on('cost', function (event) {
            self.initData();self.updateRemote();
        });
        this.bodyComponent.node.on('cost', function (event) {
            self.initData();self.updateRemote();
        });
        this.wheelComponent.node.on('cost', function (event) {
            self.initData();self.updateRemote();
        });
    },

    updateRemote: function updateRemote() {
        api.update(user);
    },

    onNoCost: function onNoCost() {
        var self = this;

        this.headComponent.node.on('nocost', function (event) {
            self.initData();
        });
        this.bodyComponent.node.on('nocost', function (event) {
            self.initData();
        });
        this.wheelComponent.node.on('nocost', function (event) {
            self.initData();
        });
    },

    onBackHandler: function onBackHandler() {
        cc.director.loadScene('Main');
    }
});

cc._RFpop();
},{"api":"api","user":"user"}],"fire":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c6b4cSF38ZHxorLIkgGelBo', 'fire');
// biz/controller/script/fire.js

var Connect = require('connect');

cc.Class({
    'extends': cc.Component,

    properties: {},

    onLoad: function onLoad() {},

    onFire: function onFire() {
        Connect.emit('c-fire', { fire: 'fire' });
    }
});

cc._RFpop();
},{"connect":"connect"}],"lodash":[function(require,module,exports){
(function (global){
"use strict";
cc._RFpush(module, '9f2f1hkSF9Nk6WvHxAs9uqP', 'lodash');
// lib/lodash.js

"use strict";(function(){var undefined;var VERSION="4.2.0";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,FLIP_FLAG=512;var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1 / 0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=0 / 0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH - 1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH >>> 1;var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0x/i;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsQuoteRange="\\u2018\\u2019\\u201c\\u201d",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange + rsNonCharRange + rsQuoteRange + rsSpaceRange;var rsAstral="[" + rsAstralRange + "]",rsBreak="[" + rsBreakRange + "]",rsCombo="[" + rsComboMarksRange + rsComboSymbolsRange + "]",rsDigits="\\d+",rsDingbat="[" + rsDingbatRange + "]",rsLower="[" + rsLowerRange + "]",rsMisc="[^" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + "]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:" + rsCombo + "|" + rsFitz + ")",rsNonAstral="[^" + rsAstralRange + "]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[" + rsUpperRange + "]",rsZWJ="\\u200d";var rsLowerMisc="(?:" + rsLower + "|" + rsMisc + ")",rsUpperMisc="(?:" + rsUpper + "|" + rsMisc + ")",reOptMod=rsModifier + "?",rsOptVar="[" + rsVarRange + "]?",rsOptJoin="(?:" + rsZWJ + "(?:" + [rsNonAstral,rsRegional,rsSurrPair].join("|") + ")" + rsOptVar + reOptMod + ")*",rsSeq=rsOptVar + reOptMod + rsOptJoin,rsEmoji="(?:" + [rsDingbat,rsRegional,rsSurrPair].join("|") + ")" + rsSeq,rsSymbol="(?:" + [rsNonAstral + rsCombo + "?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|") + ")";var reComboMark=RegExp(rsCombo,"g");var reComplexSymbol=RegExp(rsFitz + "(?=" + rsFitz + ")|" + rsSymbol + rsSeq,"g");var reHasComplexSymbol=RegExp("[" + rsZWJ + rsAstralRange + rsComboMarksRange + rsComboSymbolsRange + rsVarRange + "]");var reBasicWord=/[a-zA-Z0-9]+/g;var reComplexWord=RegExp([rsUpper + "?" + rsLower + "+(?=" + [rsBreak,rsUpper,"$"].join("|") + ")",rsUpperMisc + "+(?=" + [rsBreak,rsUpper + rsLowerMisc,"$"].join("|") + ")",rsUpper + "?" + rsLowerMisc + "+",rsUpper + "+",rsDigits,rsEmoji].join("|"),"g");var reHasComplexWord=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;var cloneableTags={};cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;var deburredLetters={"脌":"A","脕":"A","脗":"A","脙":"A","脛":"A","脜":"A","脿":"a","谩":"a","芒":"a","茫":"a","盲":"a","氓":"a","脟":"C","莽":"c","脨":"D","冒":"d","脠":"E","脡":"E","脢":"E","脣":"E","猫":"e","茅":"e","锚":"e","毛":"e","脤":"I","脥":"I","脦":"I","脧":"I","矛":"i","铆":"i","卯":"i","茂":"i","脩":"N","帽":"n","脪":"O","脫":"O","脭":"O","脮":"O","脰":"O","脴":"O","貌":"o","贸":"o","么":"o","玫":"o","枚":"o","酶":"o","脵":"U","脷":"U","脹":"U","脺":"U","霉":"u","煤":"u","没":"u","眉":"u","脻":"Y","媒":"y","每":"y","脝":"Ae","忙":"ae","脼":"Th","镁":"th","脽":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeExports=objectTypes[typeof exports] && exports && !exports.nodeType?exports:null;var freeModule=objectTypes[typeof module] && module && !module.nodeType?module:null;var freeGlobal=checkGlobal(freeExports && freeModule && typeof global == "object" && global);var freeSelf=checkGlobal(objectTypes[typeof self] && self);var freeWindow=checkGlobal(objectTypes[typeof window] && window);var moduleExports=freeModule && freeModule.exports === freeExports?freeExports:null;var thisGlobal=checkGlobal(objectTypes[typeof this] && this);var root=freeGlobal || freeWindow !== (thisGlobal && thisGlobal.window) && freeWindow || freeSelf || thisGlobal || Function("return this")();function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map;}function addSetEntry(set,value){set.add(value);return set;}function apply(func,thisArg,args){var length=args.length;switch(length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array.length;while(++index < length) {var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length + othLength);while(++index < length) {result[index] = array[index];}while(++othIndex < othLength) {result[index++] = other[othIndex];}return result;}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index < length) {if(iteratee(array[index],index,array) === false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array.length;while(length--) {if(iteratee(array[length],length,array) === false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index < length) {if(!predicate(array[index],index,array)){return false;}}return true;}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index < length) {var value=array[index];if(predicate(value,index,array)){result[++resIndex] = value;}}return result;}function arrayIncludes(array,value){return !!array.length && baseIndexOf(array,value,0) > -1;}function arrayIncludesWith(array,value,comparator){var index=-1,length=array.length;while(++index < length) {if(comparator(value,array[index])){return true;}}return false;}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index < length) {result[index] = iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index < length) {array[offset + index] = values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length;if(initAccum && length){accumulator = array[++index];}while(++index < length) {accumulator = iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array.length;if(initAccum && length){accumulator = array[--length];}while(length--) {accumulator = iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array.length;while(++index < length) {if(predicate(array[index],index,array)){return true;}}return false;}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index < length) {var value=array[index],current=iteratee(value);if(current != null && (computed === undefined?current === current:comparator(current,computed))){var computed=current,result=value;}}return result;}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result = retKey?key:value;return false;}});return result;}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index < length) {if(predicate(array[index],index,array)){return index;}}return -1;}function baseIndexOf(array,value,fromIndex){if(value !== value){return indexOfNaN(array,fromIndex);}var index=fromIndex - 1,length=array.length;while(++index < length) {if(array[index] === value){return index;}}return -1;}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator = initAccum?(initAccum = false,value):iteratee(accumulator,value,index,collection);});return accumulator;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--) {array[length] = array[length].value;}return array;}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index < length) {var current=iteratee(array[index]);if(current !== undefined){result = result === undefined?current:result + current;}}return result;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index < n) {result[index] = iteratee(index);}return result;}function baseToPairs(object,props){return arrayMap(props,function(key){return [key,object[key]];});}function baseUnary(func){return function(value){return func(value);};}function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index < length && baseIndexOf(chrSymbols,strSymbols[index],0) > -1) {}return index;}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index-- && baseIndexOf(chrSymbols,strSymbols[index],0) > -1) {}return index;}function checkGlobal(value){return value && value.Object === Object?value:null;}function compareAscending(value,other){if(value !== other){var valIsNull=value === null,valIsUndef=value === undefined,valIsReflexive=value === value;var othIsNull=other === null,othIsUndef=other === undefined,othIsReflexive=other === other;if(value > other && !othIsNull || !valIsReflexive || valIsNull && !othIsUndef && othIsReflexive || valIsUndef && othIsReflexive){return 1;}if(value < other && !valIsNull || !othIsReflexive || othIsNull && !valIsUndef && valIsReflexive || othIsUndef && valIsReflexive){return -1;}}return 0;}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index < length) {var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index >= ordersLength){return result;}var order=orders[index];return result * (order == "desc"?-1:1);}}return object.index - other.index;}function deburrLetter(letter){return deburredLetters[letter];}function escapeHtmlChar(chr){return htmlEscapes[chr];}function escapeStringChar(chr){return "\\" + stringEscapes[chr];}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex + (fromRight?0:-1);while(fromRight?index--:++index < length) {var other=array[index];if(other !== other){return index;}}return -1;}function isHostObject(value){var result=false;if(value != null && typeof value.toString != "function"){try{result = !!(value + "");}catch(e) {}}return result;}function isIndex(value,length){value = typeof value == "number" || reIsUint.test(value)?+value:-1;length = length == null?MAX_SAFE_INTEGER:length;return value > -1 && value % 1 == 0 && value < length;}function iteratorToArray(iterator){var data,result=[];while(!(data = iterator.next()).done) {result.push(data.value);}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index] = [key,value];});return result;}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index < length) {if(array[index] === placeholder){array[index] = PLACEHOLDER;result[++resIndex] = index;}}return result;}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index] = value;});return result;}function stringSize(string){if(!(string && reHasComplexSymbol.test(string))){return string.length;}var result=reComplexSymbol.lastIndex = 0;while(reComplexSymbol.test(string)) {result++;}return result;}function stringToArray(string){return string.match(reComplexSymbol);}function unescapeHtmlChar(chr){return htmlUnescapes[chr];}function runInContext(context){context = context?_.defaults({},context,_.pick(root,contextProps)):root;var Date=context.Date,Error=context.Error,Math=context.Math,RegExp=context.RegExp,TypeError=context.TypeError;var arrayProto=context.Array.prototype,objectProto=context.Object.prototype;var funcToString=context.Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objectCtorString=funcToString.call(Object);var objectToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp("^" + funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?") + "$");var Reflect=context.Reflect,Symbol=context.Symbol,Uint8Array=context.Uint8Array,clearTimeout=context.clearTimeout,enumerate=Reflect?Reflect.enumerate:undefined,getPrototypeOf=Object.getPrototypeOf,getOwnPropertySymbols=Object.getOwnPropertySymbols,iteratorSymbol=typeof (iteratorSymbol = Symbol && Symbol.iterator) == "symbol"?iteratorSymbol:undefined,propertyIsEnumerable=objectProto.propertyIsEnumerable,setTimeout=context.setTimeout,splice=arrayProto.splice;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=Object.keys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var Map=getNative(context,"Map"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap && new WeakMap();var mapCtorString=Map?funcToString.call(Map):"",setCtorString=Set?funcToString.call(Set):"";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=Symbol?symbolProto.valueOf:undefined,symbolToString=Symbol?symbolProto.toString:undefined;var realNames={};function lodash(value){if(isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value);}}return new LodashWrapper(value);}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__ = value;this.__actions__ = [];this.__chain__ = !!chainAll;this.__index__ = 0;this.__values__ = undefined;}lodash.templateSettings = {escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__ = value;this.__actions__ = [];this.__dir__ = 1;this.__filtered__ = false;this.__iteratees__ = [];this.__takeCount__ = MAX_ARRAY_LENGTH;this.__views__ = [];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__ = copyArray(this.__actions__);result.__dir__ = this.__dir__;result.__filtered__ = this.__filtered__;result.__iteratees__ = copyArray(this.__iteratees__);result.__takeCount__ = this.__takeCount__;result.__views__ = copyArray(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__ = -1;result.__filtered__ = true;}else {result = this.clone();result.__dir__ *= -1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir < 0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end - start,index=isRight?end:start - 1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr || arrLength < LARGE_ARRAY_SIZE || arrLength == length && takeCount == length){return baseWrapperValue(array,this.__actions__);}var result=[];outer: while(length-- && resIndex < takeCount) {index += dir;var iterIndex=-1,value=array[index];while(++iterIndex < iterLength) {var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type == LAZY_MAP_FLAG){value = computed;}else if(!computed){if(type == LAZY_FILTER_FLAG){continue outer;}else {break outer;}}}result[resIndex++] = value;}return result;}function Hash(){}function hashDelete(hash,key){return hashHas(hash,key) && delete hash[key];}function hashGet(hash,key){if(nativeCreate){var result=hash[key];return result === HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(hash,key)?hash[key]:undefined;}function hashHas(hash,key){return nativeCreate?hash[key] !== undefined:hasOwnProperty.call(hash,key);}function hashSet(hash,key,value){hash[key] = nativeCreate && value === undefined?HASH_UNDEFINED:value;}function MapCache(values){var index=-1,length=values?values.length:0;this.clear();while(++index < length) {var entry=values[index];this.set(entry[0],entry[1]);}}function mapClear(){this.__data__ = {hash:new Hash(),map:Map?new Map():[],string:new Hash()};}function mapDelete(key){var data=this.__data__;if(isKeyable(key)){return hashDelete(typeof key == "string"?data.string:data.hash,key);}return Map?data.map["delete"](key):assocDelete(data.map,key);}function mapGet(key){var data=this.__data__;if(isKeyable(key)){return hashGet(typeof key == "string"?data.string:data.hash,key);}return Map?data.map.get(key):assocGet(data.map,key);}function mapHas(key){var data=this.__data__;if(isKeyable(key)){return hashHas(typeof key == "string"?data.string:data.hash,key);}return Map?data.map.has(key):assocHas(data.map,key);}function mapSet(key,value){var data=this.__data__;if(isKeyable(key)){hashSet(typeof key == "string"?data.string:data.hash,key,value);}else if(Map){data.map.set(key,value);}else {assocSet(data.map,key,value);}return this;}function SetCache(values){var index=-1,length=values?values.length:0;this.__data__ = new MapCache();while(++index < length) {this.push(values[index]);}}function cacheHas(cache,value){var map=cache.__data__;if(isKeyable(value)){var data=map.__data__,hash=typeof value == "string"?data.string:data.hash;return hash[value] === HASH_UNDEFINED;}return map.has(value);}function cachePush(value){var map=this.__data__;if(isKeyable(value)){var data=map.__data__,hash=typeof value == "string"?data.string:data.hash;hash[value] = HASH_UNDEFINED;}else {map.set(value,HASH_UNDEFINED);}}function Stack(values){var index=-1,length=values?values.length:0;this.clear();while(++index < length) {var entry=values[index];this.set(entry[0],entry[1]);}}function stackClear(){this.__data__ = {array:[],map:null};}function stackDelete(key){var data=this.__data__,array=data.array;return array?assocDelete(array,key):data.map["delete"](key);}function stackGet(key){var data=this.__data__,array=data.array;return array?assocGet(array,key):data.map.get(key);}function stackHas(key){var data=this.__data__,array=data.array;return array?assocHas(array,key):data.map.has(key);}function stackSet(key,value){var data=this.__data__,array=data.array;if(array){if(array.length < LARGE_ARRAY_SIZE - 1){assocSet(array,key,value);}else {data.array = null;data.map = new MapCache(array);}}var map=data.map;if(map){map.set(key,value);}return this;}function assocDelete(array,key){var index=assocIndexOf(array,key);if(index < 0){return false;}var lastIndex=array.length - 1;if(index == lastIndex){array.pop();}else {splice.call(array,index,1);}return true;}function assocGet(array,key){var index=assocIndexOf(array,key);return index < 0?undefined:array[index][1];}function assocHas(array,key){return assocIndexOf(array,key) > -1;}function assocIndexOf(array,key){var length=array.length;while(length--) {if(eq(array[length][0],key)){return length;}}return -1;}function assocSet(array,key,value){var index=assocIndexOf(array,key);if(index < 0){array.push([key,value]);}else {array[index][1] = value;}}function assignInDefaults(objValue,srcValue,key,object){if(objValue === undefined || eq(objValue,objectProto[key]) && !hasOwnProperty.call(object,key)){return srcValue;}return objValue;}function assignMergeValue(object,key,value){if(value !== undefined && !eq(object[key],value) || typeof key == "number" && value === undefined && !(key in object)){object[key] = value;}}function assignValue(object,key,value){var objValue=object[key];if(!eq(objValue,value) || eq(objValue,objectProto[key]) && !hasOwnProperty.call(object,key) || value === undefined && !(key in object)){object[key] = value;}}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection);});return accumulator;}function baseAssign(object,source){return object && copyObject(source,keys(source),object);}function baseAt(object,paths){var index=-1,isNil=object == null,length=paths.length,result=Array(length);while(++index < length) {result[index] = isNil?undefined:get(object,paths[index]);}return result;}function baseClamp(number,lower,upper){if(number === number){if(upper !== undefined){number = number <= upper?number:upper;}if(lower !== undefined){number = number >= lower?number:lower;}}return number;}function baseClone(value,isDeep,customizer,key,object,stack){var result;if(customizer){result = object?customizer(value,key,object,stack):customizer(value);}if(result !== undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result = initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else {var tag=getTag(value),isFunc=tag == funcTag || tag == genTag;if(tag == objectTag || tag == argsTag || isFunc && !object){if(isHostObject(value)){return object?value:{};}result = initCloneObject(isFunc?{}:value);if(!isDeep){return copySymbols(value,baseAssign(result,value));}}else {return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};}}stack || (stack = new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){assignValue(result,key,baseClone(subValue,isDeep,customizer,key,value,stack));});return isArr?result:copySymbols(value,result);}function baseConforms(source){var props=keys(source),length=props.length;return function(object){if(object == null){return !length;}var index=length;while(index--) {var key=props[index],predicate=source[key],value=object[key];if(value === undefined && !(key in Object(object)) || !predicate(value)){return false;}}return true;};}var baseCreate=(function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype = prototype;var result=new object();object.prototype = undefined;}return result || {};};})();function baseDelay(func,wait,args){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result;}if(iteratee){values = arrayMap(values,baseUnary(iteratee));}if(comparator){includes = arrayIncludesWith;isCommon = false;}else if(values.length >= LARGE_ARRAY_SIZE){includes = cacheHas;isCommon = false;values = new SetCache(values);}outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(isCommon && computed === computed){var valuesIndex=valuesLength;while(valuesIndex--) {if(values[valuesIndex] === computed){continue outer;}}result.push(value);}else if(!includes(values,computed,comparator)){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result = !!predicate(value,index,collection);return result;});return result;}function baseFill(array,value,start,end){var length=array.length;start = toInteger(start);if(start < 0){start = -start > length?0:length + start;}end = end === undefined || end > length?length:toInteger(end);if(end < 0){end += length;}end = start > end?0:toLength(end);while(start < end) {array[start++] = value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFlatten(array,isDeep,isStrict,result){result || (result = []);var index=-1,length=array.length;while(++index < length) {var value=array[index];if(isArrayLikeObject(value) && (isStrict || isArray(value) || isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result);}else {arrayPush(result,value);}}else if(!isStrict){result[result.length] = value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return object == null?object:baseFor(object,iteratee,keysIn);}function baseForOwn(object,iteratee){return object && baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return object && baseForRight(object,iteratee,keys);}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key]);});}function baseGet(object,path){path = isKey(path,object)?[path + ""]:baseToPath(path);var index=0,length=path.length;while(object != null && index < length) {object = object[path[index++]];}return index && index == length?object:undefined;}function baseHas(object,key){return hasOwnProperty.call(object,key) || typeof object == "object" && key in object && getPrototypeOf(object) === null;}function baseHasIn(object,key){return key in Object(object);}function baseInRange(number,start,end){return number >= nativeMin(start,end) && number < nativeMax(start,end);}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),result=[];while(othIndex--) {var array=arrays[othIndex];if(othIndex && iteratee){array = arrayMap(array,baseUnary(iteratee));}caches[othIndex] = !comparator && (iteratee || array.length >= 120)?new SetCache(othIndex && array):undefined;}array = arrays[0];var index=-1,length=array.length,seen=caches[0];outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){var othIndex=othLength;while(--othIndex) {var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer;}}if(seen){seen.push(computed);}result.push(value);}}return result;}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object);});return accumulator;}function baseInvoke(object,path,args){if(!isKey(path,object)){path = baseToPath(path);object = parent(object,path);path = last(path);}var func=object == null?object:object[path];return func == null?undefined:apply(func,object,args);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value === other){return true;}if(value == null || other == null || !isObject(value) && !isObjectLike(other)){return value !== value && other !== other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag = getTag(object);if(objTag == argsTag){objTag = objectTag;}else if(objTag != objectTag){objIsArr = isTypedArray(object);}}if(!othIsArr){othTag = getTag(other);if(othTag == argsTag){othTag = objectTag;}else if(othTag != objectTag){othIsArr = isTypedArray(other);}}var objIsObj=objTag == objectTag && !isHostObject(object),othIsObj=othTag == objectTag && !isHostObject(other),isSameTag=objTag == othTag;if(isSameTag && !(objIsArr || objIsObj)){return equalByTag(object,other,objTag,equalFunc,customizer,bitmask);}var isPartial=bitmask & PARTIAL_COMPARE_FLAG;if(!isPartial){var objIsWrapped=objIsObj && hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj && hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped || othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack || (stack = new Stack());return (objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,bitmask,stack);}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object == null){return !length;}object = Object(object);while(index--) {var data=matchData[index];if(noCustomizer && data[2]?data[1] !== object[data[0]]:!(data[0] in object)){return false;}}while(++index < length) {data = matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer && data[2]){if(objValue === undefined && !(key in object)){return false;}}else {var stack=new Stack(),result=customizer?customizer(objValue,srcValue,key,object,source,stack):undefined;if(!(result === undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG,stack):result)){return false;}}}return true;}function baseIteratee(value){var type=typeof value;if(type == "function"){return value;}if(value == null){return identity;}if(type == "object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){return nativeKeys(Object(object));}function baseKeysIn(object){object = object == null?object:Object(object);var result=[];for(var key in object) {result.push(key);}return result;}if(enumerate && !propertyIsEnumerable.call({valueOf:1},"valueOf")){baseKeysIn = function(object){return iteratorToArray(enumerate(object));};}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index] = iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length == 1 && matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object == null){return false;}return object[key] === value && (value !== undefined || key in Object(object));};}return function(object){return object === source || baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){return function(object){var objValue=get(object,path);return objValue === undefined && objValue === srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);};}function baseMerge(object,source,srcIndex,customizer,stack){if(object === source){return;}var props=isArray(source) || isTypedArray(source)?undefined:keysIn(source);arrayEach(props || source,function(srcValue,key){if(props){key = srcValue;srcValue = source[key];}if(isObject(srcValue)){stack || (stack = new Stack());baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else {var newValue=customizer?customizer(object[key],srcValue,key + "",object,source,stack):undefined;if(newValue === undefined){newValue = srcValue;}assignMergeValue(object,key,newValue);}});}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key + "",object,source,stack):undefined,isCommon=newValue === undefined;if(isCommon){newValue = srcValue;if(isArray(srcValue) || isTypedArray(srcValue)){if(isArray(objValue)){newValue = srcIndex?copyArray(objValue):objValue;}else if(isArrayLikeObject(objValue)){newValue = copyArray(objValue);}else {isCommon = false;newValue = baseClone(srcValue);}}else if(isPlainObject(srcValue) || isArguments(srcValue)){if(isArguments(objValue)){newValue = toPlainObject(objValue);}else if(!isObject(objValue) || srcIndex && isFunction(objValue)){isCommon = false;newValue = baseClone(srcValue);}else {newValue = srcIndex?baseClone(objValue):objValue;}}else {isCommon = false;}}stack.set(srcValue,newValue);if(isCommon){mergeFunc(newValue,srcValue,srcIndex,customizer,stack);}assignMergeValue(object,key,newValue);}function baseOrderBy(collection,iteratees,orders){var index=-1,toIteratee=getIteratee();iteratees = arrayMap(iteratees.length?iteratees:Array(1),function(iteratee){return toIteratee(iteratee);});var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return {criteria:criteria,index:++index,value:value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function basePick(object,props){object = Object(object);return arrayReduce(props,function(result,key){if(key in object){result[key] = object[key];}return result;},{});}function basePickBy(object,predicate){var result={};baseForIn(object,function(value,key){if(predicate(value,key)){result[key] = value;}});return result;}function baseProperty(key){return function(object){return object == null?undefined:object[key];};}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function basePullAll(array,values){return basePullAllBy(array,values);}function basePullAllBy(array,values,iteratee){var index=-1,length=values.length,seen=array;if(iteratee){seen = arrayMap(array,function(value){return iteratee(value);});}while(++index < length) {var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex = baseIndexOf(seen,computed,fromIndex)) > -1) {if(seen !== array){splice.call(seen,fromIndex,1);}splice.call(array,fromIndex,1);}}return array;}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length - 1;while(length--) {var index=indexes[length];if(lastIndex == length || index != previous){var previous=index;if(isIndex(index)){splice.call(array,index,1);}else if(!isKey(index,array)){var path=baseToPath(index),object=parent(array,path);if(object != null){delete object[last(path)];}}else {delete array[index];}}}return array;}function baseRandom(lower,upper){return lower + nativeFloor(nativeRandom() * (upper - lower + 1));}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end - start) / (step || 1)),0),result=Array(length);while(length--) {result[fromRight?length:++index] = start;start += step;}return result;}function baseSet(object,path,value,customizer){path = isKey(path,object)?[path + ""]:baseToPath(path);var index=-1,length=path.length,lastIndex=length - 1,nested=object;while(nested != null && ++index < length) {var key=path[index];if(isObject(nested)){var newValue=value;if(index != lastIndex){var objValue=nested[key];newValue = customizer?customizer(objValue,key,nested):undefined;if(newValue === undefined){newValue = objValue == null?isIndex(path[index + 1])?[]:{}:objValue;}}assignValue(nested,key,newValue);}nested = nested[key];}return object;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};function baseSlice(array,start,end){var index=-1,length=array.length;if(start < 0){start = -start > length?0:length + start;}end = end > length?length:end;if(end < 0){end += length;}length = start > end?0:end - start >>> 0;start >>>= 0;var result=Array(length);while(++index < length) {result[index] = array[index + start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result = predicate(value,index,collection);return !result;});return !!result;}function baseSortedIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value == "number" && value === value && high <= HALF_MAX_ARRAY_LENGTH){while(low < high) {var mid=low + high >>> 1,computed=array[mid];if((retHighest?computed <= value:computed < value) && computed !== null){low = mid + 1;}else {high = mid;}}return high;}return baseSortedIndexBy(array,value,identity,retHighest);}function baseSortedIndexBy(array,value,iteratee,retHighest){value = iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value !== value,valIsNull=value === null,valIsUndef=value === undefined;while(low < high) {var mid=nativeFloor((low + high) / 2),computed=iteratee(array[mid]),isDef=computed !== undefined,isReflexive=computed === computed;if(valIsNaN){var setLow=isReflexive || retHighest;}else if(valIsNull){setLow = isReflexive && isDef && (retHighest || computed != null);}else if(valIsUndef){setLow = isReflexive && (retHighest || isDef);}else if(computed == null){setLow = false;}else {setLow = retHighest?computed <= value:computed < value;}if(setLow){low = mid + 1;}else {high = mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function baseSortedUniq(array){return baseSortedUniqBy(array);}function baseSortedUniqBy(array,iteratee){var index=0,length=array.length,value=array[0],computed=iteratee?iteratee(value):value,seen=computed,resIndex=0,result=[value];while(++index < length) {value = array[index],computed = iteratee?iteratee(value):value;if(!eq(computed,seen)){seen = computed;result[++resIndex] = value;}}return result;}function baseToPath(value){return isArray(value)?value:stringToPath(value);}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon = false;includes = arrayIncludesWith;}else if(length >= LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set);}isCommon = false;includes = cacheHas;seen = new SetCache();}else {seen = iteratee?[]:result;}outer: while(++index < length) {var value=array[index],computed=iteratee?iteratee(value):value;if(isCommon && computed === computed){var seenIndex=seen.length;while(seenIndex--) {if(seen[seenIndex] === computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(!includes(seen,computed,comparator)){if(seen !== result){seen.push(computed);}result.push(value);}}return result;}function baseUnset(object,path){path = isKey(path,object)?[path + ""]:baseToPath(path);object = parent(object,path);var key=last(path);return object != null && has(object,key)?delete object[key]:true;}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index < length) && predicate(array[index],index,array)) {}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index + 1:length):baseSlice(array,fromRight?index + 1:0,fromRight?length:index);}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result = result.value();}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args));},result);}function baseXor(arrays,iteratee,comparator){var index=-1,length=arrays.length;while(++index < length) {var result=result?arrayPush(baseDifference(result,arrays[index],iteratee,comparator),baseDifference(arrays[index],result,iteratee,comparator)):arrays[index];}return result && result.length?baseUniq(result,iteratee,comparator):[];}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index < length) {assignFunc(result,props[index],index < valsLength?values[index]:undefined);}return result;}function cloneBuffer(buffer){var Ctor=buffer.constructor,result=new Ctor(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result;}function cloneMap(map){var Ctor=map.constructor;return arrayReduce(mapToArray(map),addMapEntry,new Ctor());}function cloneRegExp(regexp){var Ctor=regexp.constructor,result=new Ctor(regexp.source,reFlags.exec(regexp));result.lastIndex = regexp.lastIndex;return result;}function cloneSet(set){var Ctor=set.constructor;return arrayReduce(setToArray(set),addSetEntry,new Ctor());}function cloneSymbol(symbol){return Symbol?Object(symbolValueOf.call(symbol)):{};}function cloneTypedArray(typedArray,isDeep){var buffer=typedArray.buffer,Ctor=typedArray.constructor;return new Ctor(isDeep?cloneBuffer(buffer):buffer,typedArray.byteOffset,typedArray.length);}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length - holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength + argsLength);while(++leftIndex < leftLength) {result[leftIndex] = partials[leftIndex];}while(++argsIndex < holdersLength) {result[holders[argsIndex]] = args[argsIndex];}while(argsLength--) {result[leftIndex++] = args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length - holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength + rightLength);while(++argsIndex < argsLength) {result[argsIndex] = args[argsIndex];}var offset=argsIndex;while(++rightIndex < rightLength) {result[offset + rightIndex] = partials[rightIndex];}while(++holdersIndex < holdersLength) {result[offset + holders[holdersIndex]] = args[argsIndex++];}return result;}function copyArray(source,array){var index=-1,length=source.length;array || (array = Array(length));while(++index < length) {array[index] = source[index];}return array;}function copyObject(source,props,object){return copyObjectWith(source,props,object);}function copyObjectWith(source,props,object,customizer){object || (object = {});var index=-1,length=props.length;while(++index < length) {var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key];assignValue(object,key,newValue);}return object;}function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee),accumulator);};}function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length > 1?sources[length - 1]:undefined,guard=length > 2?sources[2]:undefined;customizer = typeof customizer == "function"?(length--,customizer):undefined;if(guard && isIterateeCall(sources[0],sources[1],guard)){customizer = length < 3?undefined:customizer;length = 1;}object = Object(object);while(++index < length) {var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection == null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index < length) {if(iteratee(iterable[index],index,iterable) === false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--) {var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable) === false){break;}}return object;};}function createBaseWrapper(func,bitmask,thisArg){var isBind=bitmask & BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var fn=this && this !== root && this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);}return wrapper;}function createCaseFirst(methodName){return function(string){string = toString(string);var strSymbols=reHasComplexSymbol.test(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?strSymbols.slice(1).join(""):string.slice(1);return chr[methodName]() + trailing;};}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string)),callback,"");};}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurryWrapper(func,bitmask,arity){var Ctor=createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length),fn=this && this !== root && this instanceof wrapper?Ctor:func,placeholder=wrapper.placeholder;while(index--) {args[index] = arguments[index];}var holders=length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder?[]:replaceHolders(args,placeholder);length -= holders.length;return length < arity?createRecurryWrapper(func,bitmask,createHybridWrapper,placeholder,undefined,args,holders,undefined,undefined,arity - length):apply(fn,this,args);}return wrapper;}function createFlow(fromRight){return rest(function(funcs){funcs = baseFlatten(funcs);var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse();}while(index--) {var func=funcs[index];if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}if(prereq && !wrapper && getFuncName(func) == "wrapper"){var wrapper=new LodashWrapper([],true);}}index = wrapper?index:length;while(++index < length) {func = funcs[index];var funcName=getFuncName(func),data=funcName == "wrapper"?getData(func):undefined;if(data && isLaziable(data[0]) && data[1] == (ARY_FLAG | CURRY_FLAG | PARTIAL_FLAG | REARG_FLAG) && !data[4].length && data[9] == 1){wrapper = wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else {wrapper = func.length == 1 && isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper && args.length == 1 && isArray(value) && value.length >= LARGE_ARRAY_SIZE){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index < length) {result = funcs[index].call(this,result);}return result;};});}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask & ARY_FLAG,isBind=bitmask & BIND_FLAG,isBindKey=bitmask & BIND_KEY_FLAG,isCurry=bitmask & CURRY_FLAG,isCurryRight=bitmask & CURRY_RIGHT_FLAG,isFlip=bitmask & FLIP_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--) {args[index] = arguments[index];}if(partials){args = composeArgs(args,partials,holders);}if(partialsRight){args = composeArgsRight(args,partialsRight,holdersRight);}if(isCurry || isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length -= argsHolders.length;if(length < arity){return createRecurryWrapper(func,bitmask,createHybridWrapper,placeholder,thisArg,args,argsHolders,argPos,ary,arity - length);}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args = reorder(args,argPos);}else if(isFlip && args.length > 1){args.reverse();}if(isAry && ary < args.length){args.length = ary;}if(this && this !== root && this instanceof wrapper){fn = Ctor || createCtorWrapper(fn);}return fn.apply(thisBinding,args);}return wrapper;}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{});};}function createOver(arrayFunc){return rest(function(iteratees){iteratees = arrayMap(baseFlatten(iteratees),getIteratee());return rest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args);});});});}function createPadding(string,length,chars){length = toInteger(length);var strLength=stringSize(string);if(!length || strLength >= length){return "";}var padLength=length - strLength;chars = chars === undefined?" ":chars + "";var result=repeat(chars,nativeCeil(padLength / stringSize(chars)));return reHasComplexSymbol.test(chars)?stringToArray(result).slice(0,padLength).join(""):result.slice(0,padLength);}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask & BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength + argsLength),fn=this && this !== root && this instanceof wrapper?Ctor:func;while(++leftIndex < leftLength) {args[leftIndex] = partials[leftIndex];}while(argsLength--) {args[leftIndex++] = arguments[++argsIndex];}return apply(fn,isBind?thisArg:this,args);}return wrapper;}function createRange(fromRight){return function(start,end,step){if(step && typeof step != "number" && isIterateeCall(start,end,step)){end = step = undefined;}start = toNumber(start);start = start === start?start:0;if(end === undefined){end = start;start = 0;}else {end = toNumber(end) || 0;}step = step === undefined?start < end?1:-1:toNumber(step) || 0;return baseRange(start,end,step,fromRight);};}function createRecurryWrapper(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask & CURRY_FLAG,newArgPos=argPos?copyArray(argPos):undefined,newsHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask |= isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask &= ~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!(bitmask & CURRY_BOUND_FLAG)){bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,arity],result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder = placeholder;return result;}function createRound(methodName){var func=Math[methodName];return function(number,precision){number = toNumber(number);precision = toInteger(precision);if(precision){var pair=(toString(number) + "e").split("e"),value=func(pair[0] + "e" + (+pair[1] + precision));pair = (toString(value) + "e").split("e");return +(pair[0] + "e" + (+pair[1] - precision));}return func(number);};}var createSet=!(Set && new Set([1,2]).size === 2)?noop:function(values){return new Set(values);};function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask & BIND_KEY_FLAG;if(!isBindKey && typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);partials = holders = undefined;}ary = ary === undefined?ary:nativeMax(toInteger(ary),0);arity = arity === undefined?arity:toInteger(arity);length -= holders?holders.length:0;if(bitmask & PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials = holders = undefined;}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);}func = newData[0];bitmask = newData[1];thisArg = newData[2];partials = newData[3];holders = newData[4];arity = newData[9] = newData[9] == null?isBindKey?0:func.length:nativeMax(newData[9] - length,0);if(!arity && bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG)){bitmask &= ~(CURRY_FLAG | CURRY_RIGHT_FLAG);}if(!bitmask || bitmask == BIND_FLAG){var result=createBaseWrapper(func,bitmask,thisArg);}else if(bitmask == CURRY_FLAG || bitmask == CURRY_RIGHT_FLAG){result = createCurryWrapper(func,bitmask,arity);}else if((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !holders.length){result = createPartialWrapper(func,bitmask,thisArg,partials);}else {result = createHybridWrapper.apply(undefined,newData);}var setter=data?baseSetData:setData;return setter(result,newData);}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var index=-1,isPartial=bitmask & PARTIAL_COMPARE_FLAG,isUnordered=bitmask & UNORDERED_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength != othLength && !(isPartial && othLength > arrLength)){return false;}var stacked=stack.get(array);if(stacked){return stacked == other;}var result=true;stack.set(array,other);while(++index < arrLength) {var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared !== undefined){if(compared){continue;}result = false;break;}if(isUnordered){if(!arraySome(other,function(othValue){return arrValue === othValue || equalFunc(arrValue,othValue,customizer,bitmask,stack);})){result = false;break;}}else if(!(arrValue === othValue || equalFunc(arrValue,othValue,customizer,bitmask,stack))){result = false;break;}}stack["delete"](array);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask){switch(tag){case arrayBufferTag:if(object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:return +object == +other;case errorTag:return object.name == other.name && object.message == other.message;case numberTag:return object != +object?other != +other:object == +other;case regexpTag:case stringTag:return object == other + "";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask & PARTIAL_COMPARE_FLAG;convert || (convert = setToArray);return (isPartial || object.size == other.size) && equalFunc(convert(object),convert(other),customizer,bitmask | UNORDERED_COMPARE_FLAG);case symbolTag:return !!Symbol && symbolValueOf.call(object) == symbolValueOf.call(other);}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask & PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength != othLength && !isPartial){return false;}var index=objLength;while(index--) {var key=objProps[index];if(!(isPartial?key in other:baseHas(other,key))){return false;}}var stacked=stack.get(object);if(stacked){return stacked == other;}var result=true;stack.set(object,other);var skipCtor=isPartial;while(++index < objLength) {key = objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared === undefined?objValue === othValue || equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result = false;break;}skipCtor || (skipCtor = key == "constructor");}if(result && !skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor != othCtor && "constructor" in object && "constructor" in other && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)){result = false;}}stack["delete"](object);return result;}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name + "",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--) {var data=array[length],otherFunc=data.func;if(otherFunc == null || otherFunc == func){return data.name;}}return result;}function getIteratee(){var result=lodash.iteratee || iteratee;result = result === iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result;}var getLength=baseProperty("length");function getMatchData(object){var result=toPairs(object),length=result.length;while(length--) {result[length][2] = isStrictComparable(result[length][1]);}return result;}function getNative(object,key){var value=object == null?undefined:object[key];return isNative(value)?value:undefined;}var getSymbols=getOwnPropertySymbols || function(){return [];};function getTag(value){return objectToString.call(value);}if(Map && getTag(new Map()) != mapTag || Set && getTag(new Set()) != setTag){getTag = function(value){var result=objectToString.call(value),Ctor=result == objectTag?value.constructor:null,ctorString=typeof Ctor == "function"?funcToString.call(Ctor):"";if(ctorString){if(ctorString == mapCtorString){return mapTag;}if(ctorString == setCtorString){return setTag;}}return result;};}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index < length) {var data=transforms[index],size=data.size;switch(data.type){case "drop":start += size;break;case "dropRight":end -= size;break;case "take":end = nativeMin(end,start + size);break;case "takeRight":start = nativeMax(start,end - size);break;}}return {start:start,end:end};}function hasPath(object,path,hasFunc){if(object == null){return false;}var result=hasFunc(object,path);if(!result && !isKey(path)){path = baseToPath(path);object = parent(object,path);if(object != null){path = last(path);result = hasFunc(object,path);}}var length=object?object.length:undefined;return result || !!length && isLength(length) && isIndex(path,length) && (isArray(object) || isString(object) || isArguments(object));}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length && typeof array[0] == "string" && hasOwnProperty.call(array,"index")){result.index = array.index;result.input = array.input;}return result;}function initCloneObject(object){if(isPrototype(object)){return {};}var Ctor=object.constructor;return baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object);case symbolTag:return cloneSymbol(object);}}function indexKeys(object){var length=object?object.length:undefined;if(isLength(length) && (isArray(object) || isString(object) || isArguments(object))){return baseTimes(length,String);}return null;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type == "number"?isArrayLike(object) && isIndex(index,object.length):type == "string" && index in object){return eq(object[index],value);}return false;}function isKey(value,object){if(typeof value == "number"){return true;}return !isArray(value) && (reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object));}function isKeyable(value){var type=typeof value;return type == "number" || type == "boolean" || type == "string" && value !== "__proto__" || value == null;}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other != "function" || !(funcName in LazyWrapper.prototype)){return false;}if(func === other){return true;}var data=getData(other);return !!data && func === data[0];}function isPrototype(value){var Ctor=value && value.constructor,proto=typeof Ctor == "function" && Ctor.prototype || objectProto;return value === proto;}function isStrictComparable(value){return value === value && !isObject(value);}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask | srcBitmask,isCommon=newBitmask < (BIND_FLAG | BIND_KEY_FLAG | ARY_FLAG);var isCombo=srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG || srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8] || srcBitmask == (ARY_FLAG | REARG_FLAG) && source[7].length <= source[8] && bitmask == CURRY_FLAG;if(!(isCommon || isCombo)){return data;}if(srcBitmask & BIND_FLAG){data[2] = source[2];newBitmask |= bitmask & BIND_FLAG?0:CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3] = partials?composeArgs(partials,value,source[4]):copyArray(value);data[4] = partials?replaceHolders(data[3],PLACEHOLDER):copyArray(source[4]);}value = source[5];if(value){partials = data[5];data[5] = partials?composeArgsRight(partials,value,source[6]):copyArray(value);data[6] = partials?replaceHolders(data[5],PLACEHOLDER):copyArray(source[6]);}value = source[7];if(value){data[7] = copyArray(value);}if(srcBitmask & ARY_FLAG){data[8] = data[8] == null?source[8]:nativeMin(data[8],source[8]);}if(data[9] == null){data[9] = source[9];}data[0] = source[0];data[1] = newBitmask;return data;}function mergeDefaults(objValue,srcValue,key,object,source,stack){if(isObject(objValue) && isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,mergeDefaults,stack);}return objValue;}function parent(object,path){return path.length == 1?object:get(object,baseSlice(path,0,-1));}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--) {var index=indexes[length];array[length] = isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}var setData=(function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN - (stamp - lastCalled);lastCalled = stamp;if(remaining > 0){if(++count >= HOT_COUNT){return key;}}else {count = 0;}return baseSetData(key,value);};})();function stringToPath(string){var result=[];toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number || match);});return result;}function toArrayLikeObject(value){return isArrayLikeObject(value)?value:[];}function toFunction(value){return typeof value == "function"?value:identity;}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone();}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__ = copyArray(wrapper.__actions__);result.__index__ = wrapper.__index__;result.__values__ = wrapper.__values__;return result;}function chunk(array,size){size = nativeMax(toInteger(size),0);var length=array?array.length:0;if(!length || size < 1){return [];}var index=0,resIndex=-1,result=Array(nativeCeil(length / size));while(index < length) {result[++resIndex] = baseSlice(array,index,index += size);}return result;}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index < length) {var value=array[index];if(value){result[++resIndex] = value;}}return result;}var concat=rest(function(array,values){if(!isArray(array)){array = array == null?[]:[Object(array)];}values = baseFlatten(values);return arrayConcat(array,values);});var difference=rest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true)):[];});var differenceBy=rest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true),getIteratee(iteratee)):[];});var differenceWith=rest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator = undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,false,true),undefined,comparator):[];});function drop(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);return baseSlice(array,n < 0?0:n,length);}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);n = length - n;return baseSlice(array,0,n < 0?0:n);}function dropRightWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),true,true):[];}function dropWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),true):[];}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return [];}if(start && typeof start != "number" && isIterateeCall(array,value,start)){start = 0;end = length;}return baseFill(array,value,start,end);}function findIndex(array,predicate){return array && array.length?baseFindIndex(array,getIteratee(predicate,3)):-1;}function findLastIndex(array,predicate){return array && array.length?baseFindIndex(array,getIteratee(predicate,3),true):-1;}function flatten(array){var length=array?array.length:0;return length?baseFlatten(array):[];}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[];}function fromPairs(pairs){var index=-1,length=pairs?pairs.length:0,result={};while(++index < length) {var pair=pairs[index];result[pair[0]] = pair[1];}return result;}function head(array){return array?array[0]:undefined;}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return -1;}fromIndex = toInteger(fromIndex);if(fromIndex < 0){fromIndex = nativeMax(length + fromIndex,0);}return baseIndexOf(array,value,fromIndex);}function initial(array){return dropRight(array,1);}var intersection=rest(function(arrays){var mapped=arrayMap(arrays,toArrayLikeObject);return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped):[];});var intersectionBy=rest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,toArrayLikeObject);if(iteratee === last(mapped)){iteratee = undefined;}else {mapped.pop();}return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped,getIteratee(iteratee)):[];});var intersectionWith=rest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,toArrayLikeObject);if(comparator === last(mapped)){comparator = undefined;}else {mapped.pop();}return mapped.length && mapped[0] === arrays[0]?baseIntersection(mapped,undefined,comparator):[];});function join(array,separator){return array?nativeJoin.call(array,separator):"";}function last(array){var length=array?array.length:0;return length?array[length - 1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return -1;}var index=length;if(fromIndex !== undefined){index = toInteger(fromIndex);index = (index < 0?nativeMax(length + index,0):nativeMin(index,length - 1)) + 1;}if(value !== value){return indexOfNaN(array,index,true);}while(index--) {if(array[index] === value){return index;}}return -1;}var pull=rest(pullAll);function pullAll(array,values){return array && array.length && values && values.length?basePullAll(array,values):array;}function pullAllBy(array,values,iteratee){return array && array.length && values && values.length?basePullAllBy(array,values,getIteratee(iteratee)):array;}var pullAt=rest(function(array,indexes){indexes = arrayMap(baseFlatten(indexes),String);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(compareAscending));return result;});function remove(array,predicate){var result=[];if(!(array && array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate = getIteratee(predicate,3);while(++index < length) {var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function reverse(array){return array?nativeReverse.call(array):array;}function slice(array,start,end){var length=array?array.length:0;if(!length){return [];}if(end && typeof end != "number" && isIterateeCall(array,start,end)){start = 0;end = length;}else {start = start == null?0:toInteger(start);end = end === undefined?length:toInteger(end);}return baseSlice(array,start,end);}function sortedIndex(array,value){return baseSortedIndex(array,value);}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee));}function sortedIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value);if(index < length && eq(array[index],value)){return index;}}return -1;}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true);}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee),true);}function sortedLastIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value,true) - 1;if(eq(array[index],value)){return index;}}return -1;}function sortedUniq(array){return array && array.length?baseSortedUniq(array):[];}function sortedUniqBy(array,iteratee){return array && array.length?baseSortedUniqBy(array,getIteratee(iteratee)):[];}function tail(array){return drop(array,1);}function take(array,n,guard){if(!(array && array.length)){return [];}n = guard || n === undefined?1:toInteger(n);return baseSlice(array,0,n < 0?0:n);}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return [];}n = guard || n === undefined?1:toInteger(n);n = length - n;return baseSlice(array,n < 0?0:n,length);}function takeRightWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3),false,true):[];}function takeWhile(array,predicate){return array && array.length?baseWhile(array,getIteratee(predicate,3)):[];}var union=rest(function(arrays){return baseUniq(baseFlatten(arrays,false,true));});var unionBy=rest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return baseUniq(baseFlatten(arrays,false,true),getIteratee(iteratee));});var unionWith=rest(function(arrays){var comparator=last(arrays);if(isArrayLikeObject(comparator)){comparator = undefined;}return baseUniq(baseFlatten(arrays,false,true),undefined,comparator);});function uniq(array){return array && array.length?baseUniq(array):[];}function uniqBy(array,iteratee){return array && array.length?baseUniq(array,getIteratee(iteratee)):[];}function uniqWith(array,comparator){return array && array.length?baseUniq(array,undefined,comparator):[];}function unzip(array){if(!(array && array.length)){return [];}var length=0;array = arrayFilter(array,function(group){if(isArrayLikeObject(group)){length = nativeMax(group.length,length);return true;}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index));});}function unzipWith(array,iteratee){if(!(array && array.length)){return [];}var result=unzip(array);if(iteratee == null){return result;}return arrayMap(result,function(group){return apply(iteratee,undefined,group);});}var without=rest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];});var xor=rest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject));});var xorBy=rest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee = undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee));});var xorWith=rest(function(arrays){var comparator=last(arrays);if(isArrayLikeObject(comparator)){comparator = undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator);});var zip=rest(unzip);function zipObject(props,values){return baseZipObject(props || [],values || [],assignValue);}function zipObjectDeep(props,values){return baseZipObject(props || [],values || [],baseSet);}var zipWith=rest(function(arrays){var length=arrays.length,iteratee=length > 1?arrays[length - 1]:undefined;iteratee = typeof iteratee == "function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee);});function chain(value){var result=lodash(value);result.__chain__ = true;return result;}function tap(value,interceptor){interceptor(value);return value;}function thru(value,interceptor){return interceptor(value);}var wrapperAt=rest(function(paths){paths = baseFlatten(paths);var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function interceptor(object){return baseAt(object,paths);};if(length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex(start)){return this.thru(interceptor);}value = value.slice(start,+start + (length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length && !array.length){array.push(undefined);}return array;});});function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}function wrapperFlatMap(iteratee){return this.map(iteratee).flatten();}function wrapperNext(){if(this.__values__ === undefined){this.__values__ = toArray(this.value());}var done=this.__index__ >= this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return {done:done,value:value};}function wrapperToIterator(){return this;}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash) {var clone=wrapperClone(parent);clone.__index__ = 0;clone.__values__ = undefined;if(result){previous.__wrapped__ = clone;}else {result = clone;}var previous=clone;parent = parent.__wrapped__;}previous.__wrapped__ = value;return result;}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped = new LazyWrapper(this);}wrapped = wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(reverse);}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key] = 1;});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard && isIterateeCall(collection,predicate,guard)){predicate = undefined;}return func(collection,getIteratee(predicate,3));}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3));}function find(collection,predicate){predicate = getIteratee(predicate,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate);return index > -1?collection[index]:undefined;}return baseFind(collection,predicate,baseEach);}function findLast(collection,predicate){predicate = getIteratee(predicate,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,true);return index > -1?collection[index]:undefined;}return baseFind(collection,predicate,baseEachRight);}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee));}function forEach(collection,iteratee){return typeof iteratee == "function" && isArray(collection)?arrayEach(collection,iteratee):baseEach(collection,toFunction(iteratee));}function forEachRight(collection,iteratee){return typeof iteratee == "function" && isArray(collection)?arrayEachRight(collection,iteratee):baseEachRight(collection,toFunction(iteratee));}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else {result[key] = [value];}});function includes(collection,value,fromIndex,guard){collection = isArrayLike(collection)?collection:values(collection);fromIndex = fromIndex && !guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex < 0){fromIndex = nativeMax(length + fromIndex,0);}return isString(collection)?fromIndex <= length && collection.indexOf(value,fromIndex) > -1:!!length && baseIndexOf(collection,value,fromIndex) > -1;}var invokeMap=rest(function(collection,path,args){var index=-1,isFunc=typeof path == "function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp && value != null?value[path]:undefined;result[++index] = func?apply(func,value,args):baseInvoke(value,path,args);});return result;});var keyBy=createAggregator(function(result,value,key){result[key] = value;});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3));}function orderBy(collection,iteratees,orders,guard){if(collection == null){return [];}if(!isArray(iteratees)){iteratees = iteratees == null?[]:[iteratees];}orders = guard?undefined:orders;if(!isArray(orders)){orders = orders == null?[]:[orders];}return baseOrderBy(collection,iteratees,orders);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return [[],[]];});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length < 3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach);}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length < 3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight);}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;predicate = getIteratee(predicate,3);return func(collection,function(value,index,collection){return !predicate(value,index,collection);});}function sample(collection){var array=isArrayLike(collection)?collection:values(collection),length=array.length;return length > 0?array[baseRandom(0,length - 1)]:undefined;}function sampleSize(collection,n){var index=-1,result=toArray(collection),length=result.length,lastIndex=length - 1;n = baseClamp(toInteger(n),0,length);while(++index < n) {var rand=baseRandom(index,lastIndex),value=result[rand];result[rand] = result[index];result[index] = value;}result.length = n;return result;}function shuffle(collection){return sampleSize(collection,MAX_ARRAY_LENGTH);}function size(collection){if(collection == null){return 0;}if(isArrayLike(collection)){var result=collection.length;return result && isString(collection)?stringSize(collection):result;}return keys(collection).length;}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard && isIterateeCall(collection,predicate,guard)){predicate = undefined;}return func(collection,getIteratee(predicate,3));}var sortBy=rest(function(collection,iteratees){if(collection == null){return [];}var length=iteratees.length;if(length > 1 && isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees = [];}else if(length > 2 && isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees.length = 1;}return baseOrderBy(collection,baseFlatten(iteratees),[]);});var now=Date.now;function after(n,func){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}n = toInteger(n);return function(){if(--n < 1){return func.apply(this,arguments);}};}function ary(func,n,guard){n = guard?undefined:n;n = func && n == null?func.length:n;return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}n = toInteger(n);return function(){if(--n > 0){result = func.apply(this,arguments);}if(n <= 1){func = undefined;}return result;};}var bind=rest(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask |= PARTIAL_FLAG;}return createWrapper(func,bitmask,thisArg,partials,holders);});var bindKey=rest(function(object,key,partials){var bitmask=BIND_FLAG | BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask |= PARTIAL_FLAG;}return createWrapper(key,bitmask,object,partials,holders);});function curry(func,arity,guard){arity = guard?undefined:arity;var result=createWrapper(func,CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder = curry.placeholder;return result;}function curryRight(func,arity,guard){arity = guard?undefined:arity;var result=createWrapper(func,CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder = curryRight.placeholder;return result;}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,leading=false,maxWait=false,trailing=true;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}wait = toNumber(wait) || 0;if(isObject(options)){leading = !!options.leading;maxWait = "maxWait" in options && nativeMax(toNumber(options.maxWait) || 0,wait);trailing = "trailing" in options?!!options.trailing:trailing;}function cancel(){if(timeoutId){clearTimeout(timeoutId);}if(maxTimeoutId){clearTimeout(maxTimeoutId);}lastCalled = 0;args = maxTimeoutId = thisArg = timeoutId = trailingCall = undefined;}function complete(isCalled,id){if(id){clearTimeout(id);}maxTimeoutId = timeoutId = trailingCall = undefined;if(isCalled){lastCalled = now();result = func.apply(thisArg,args);if(!timeoutId && !maxTimeoutId){args = thisArg = undefined;}}}function delayed(){var remaining=wait - (now() - stamp);if(remaining <= 0 || remaining > wait){complete(trailingCall,maxTimeoutId);}else {timeoutId = setTimeout(delayed,remaining);}}function flush(){if(timeoutId && trailingCall || maxTimeoutId && trailing){result = func.apply(thisArg,args);}cancel();return result;}function maxDelayed(){complete(trailing,timeoutId);}function debounced(){args = arguments;stamp = now();thisArg = this;trailingCall = trailing && (timeoutId || !leading);if(maxWait === false){var leadingCall=leading && !timeoutId;}else {if(!maxTimeoutId && !leading){lastCalled = stamp;}var remaining=maxWait - (stamp - lastCalled),isCalled=remaining <= 0 || remaining > maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId = clearTimeout(maxTimeoutId);}lastCalled = stamp;result = func.apply(thisArg,args);}else if(!maxTimeoutId){maxTimeoutId = setTimeout(maxDelayed,remaining);}}if(isCalled && timeoutId){timeoutId = clearTimeout(timeoutId);}else if(!timeoutId && wait !== maxWait){timeoutId = setTimeout(delayed,wait);}if(leadingCall){isCalled = true;result = func.apply(thisArg,args);}if(isCalled && !timeoutId && !maxTimeoutId){args = thisArg = undefined;}return result;}debounced.cancel = cancel;debounced.flush = flush;return debounced;}var defer=rest(function(func,args){return baseDelay(func,1,args);});var delay=rest(function(func,wait,args){return baseDelay(func,toNumber(wait) || 0,args);});function flip(func){return createWrapper(func,FLIP_FLAG);}function memoize(func,resolver){if(typeof func != "function" || resolver && typeof resolver != "function"){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache = cache.set(key,result);return result;};memoized.cache = new memoize.Cache();return memoized;}function negate(predicate){if(typeof predicate != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return function(){return !predicate.apply(this,arguments);};}function once(func){return before(2,func);}var overArgs=rest(function(func,transforms){transforms = arrayMap(baseFlatten(transforms),getIteratee());var funcsLength=transforms.length;return rest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index < length) {args[index] = transforms[index].call(this,args[index]);}return apply(func,this,args);});});var partial=rest(function(func,partials){var holders=replaceHolders(partials,partial.placeholder);return createWrapper(func,PARTIAL_FLAG,undefined,partials,holders);});var partialRight=rest(function(func,partials){var holders=replaceHolders(partials,partialRight.placeholder);return createWrapper(func,PARTIAL_RIGHT_FLAG,undefined,partials,holders);});var rearg=rest(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes));});function rest(func,start){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}start = nativeMax(start === undefined?func.length - 1:toInteger(start),0);return function(){var args=arguments,index=-1,length=nativeMax(args.length - start,0),array=Array(length);while(++index < length) {array[index] = args[start + index];}switch(start){case 0:return func.call(this,array);case 1:return func.call(this,args[0],array);case 2:return func.call(this,args[0],args[1],array);}var otherArgs=Array(start + 1);index = -1;while(++index < start) {otherArgs[index] = args[index];}otherArgs[start] = array;return apply(func,this,otherArgs);};}function spread(func,start){if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}start = start === undefined?0:nativeMax(toInteger(start),0);return rest(function(args){var array=args[start],otherArgs=args.slice(0,start);if(array){arrayPush(otherArgs,array);}return apply(func,this,otherArgs);});}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func != "function"){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading = "leading" in options?!!options.leading:leading;trailing = "trailing" in options?!!options.trailing:trailing;}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing});}function unary(func){return ary(func,1);}function wrap(value,wrapper){wrapper = wrapper == null?identity:wrapper;return partial(wrapper,value);}function clone(value){return baseClone(value);}function cloneWith(value,customizer){return baseClone(value,false,customizer);}function cloneDeep(value){return baseClone(value,true);}function cloneDeepWith(value,customizer){return baseClone(value,true,customizer);}function eq(value,other){return value === other || value !== value && other !== other;}function gt(value,other){return value > other;}function gte(value,other){return value >= other;}function isArguments(value){return isArrayLikeObject(value) && hasOwnProperty.call(value,"callee") && (!propertyIsEnumerable.call(value,"callee") || objectToString.call(value) == argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value != null && !(typeof value == "function" && isFunction(value)) && isLength(getLength(value));}function isArrayLikeObject(value){return isObjectLike(value) && isArrayLike(value);}function isBoolean(value){return value === true || value === false || isObjectLike(value) && objectToString.call(value) == boolTag;}function isDate(value){return isObjectLike(value) && objectToString.call(value) == dateTag;}function isElement(value){return !!value && value.nodeType === 1 && isObjectLike(value) && !isPlainObject(value);}function isEmpty(value){if(isArrayLike(value) && (isArray(value) || isString(value) || isFunction(value.splice) || isArguments(value))){return !value.length;}for(var key in value) {if(hasOwnProperty.call(value,key)){return false;}}return true;}function isEqual(value,other){return baseIsEqual(value,other);}function isEqualWith(value,other,customizer){customizer = typeof customizer == "function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result === undefined?baseIsEqual(value,other,customizer):!!result;}function isError(value){return isObjectLike(value) && typeof value.message == "string" && objectToString.call(value) == errorTag;}function isFinite(value){return typeof value == "number" && nativeIsFinite(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag == funcTag || tag == genTag;}function isInteger(value){return typeof value == "number" && value == toInteger(value);}function isLength(value){return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return !!value && (type == "object" || type == "function");}function isObjectLike(value){return !!value && typeof value == "object";}function isMatch(object,source){return object === source || baseIsMatch(object,source,getMatchData(source));}function isMatchWith(object,source,customizer){customizer = typeof customizer == "function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer);}function isNaN(value){return isNumber(value) && value != +value;}function isNative(value){if(value == null){return false;}if(isFunction(value)){return reIsNative.test(funcToString.call(value));}return isObjectLike(value) && (isHostObject(value)?reIsNative:reIsHostCtor).test(value);}function isNull(value){return value === null;}function isNil(value){return value == null;}function isNumber(value){return typeof value == "number" || isObjectLike(value) && objectToString.call(value) == numberTag;}function isPlainObject(value){if(!isObjectLike(value) || objectToString.call(value) != objectTag || isHostObject(value)){return false;}var proto=objectProto;if(typeof value.constructor == "function"){proto = getPrototypeOf(value);}if(proto === null){return true;}var Ctor=proto.constructor;return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;}function isRegExp(value){return isObject(value) && objectToString.call(value) == regexpTag;}function isSafeInteger(value){return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;}function isString(value){return typeof value == "string" || !isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag;}function isSymbol(value){return typeof value == "symbol" || isObjectLike(value) && objectToString.call(value) == symbolTag;}function isTypedArray(value){return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objectToString.call(value)];}function isUndefined(value){return value === undefined;}function lt(value,other){return value < other;}function lte(value,other){return value <= other;}function toArray(value){if(!value){return [];}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value);}if(iteratorSymbol && value[iteratorSymbol]){return iteratorToArray(value[iteratorSymbol]());}var tag=getTag(value),func=tag == mapTag?mapToArray:tag == setTag?setToArray:values;return func(value);}function toInteger(value){if(!value){return value === 0?value:0;}value = toNumber(value);if(value === INFINITY || value === -INFINITY){var sign=value < 0?-1:1;return sign * MAX_INTEGER;}var remainder=value % 1;return value === value?remainder?value - remainder:value:0;}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0;}function toNumber(value){if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value = isObject(other)?other + "":other;}if(typeof value != "string"){return value === 0?value:+value;}value = value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary || reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toPlainObject(value){return copyObject(value,keysIn(value));}function toSafeInteger(value){return baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);}function toString(value){if(typeof value == "string"){return value;}if(value == null){return "";}if(isSymbol(value)){return Symbol?symbolToString.call(value):"";}var result=value + "";return result == "0" && 1 / value == -INFINITY?"-0":result;}var assign=createAssigner(function(object,source){copyObject(source,keys(source),object);});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keysIn(source),object,customizer);});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keys(source),object,customizer);});var at=rest(function(object,paths){return baseAt(object,baseFlatten(paths));});function create(prototype,properties){var result=baseCreate(prototype);return properties?baseAssign(result,properties):result;}var defaults=rest(function(args){args.push(undefined,assignInDefaults);return apply(assignInWith,undefined,args);});var defaultsDeep=rest(function(args){args.push(undefined,mergeDefaults);return apply(mergeWith,undefined,args);});function findKey(object,predicate){return baseFind(object,getIteratee(predicate,3),baseForOwn,true);}function findLastKey(object,predicate){return baseFind(object,getIteratee(predicate,3),baseForOwnRight,true);}function forIn(object,iteratee){return object == null?object:baseFor(object,toFunction(iteratee),keysIn);}function forInRight(object,iteratee){return object == null?object:baseForRight(object,toFunction(iteratee),keysIn);}function forOwn(object,iteratee){return object && baseForOwn(object,toFunction(iteratee));}function forOwnRight(object,iteratee){return object && baseForOwnRight(object,toFunction(iteratee));}function functions(object){return object == null?[]:baseFunctions(object,keys(object));}function functionsIn(object){return object == null?[]:baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object == null?undefined:baseGet(object,path);return result === undefined?defaultValue:result;}function has(object,path){return hasPath(object,path,baseHas);}function hasIn(object,path){return hasPath(object,path,baseHasIn);}var invert=createInverter(function(result,value,key){result[value] = key;},constant(identity));var invertBy=createInverter(function(result,value,key){if(hasOwnProperty.call(result,value)){result[value].push(key);}else {result[value] = [key];}},getIteratee);var invoke=rest(baseInvoke);function keys(object){var isProto=isPrototype(object);if(!(isProto || isArrayLike(object))){return baseKeys(object);}var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes || [],length=result.length;for(var key in object) {if(baseHas(object,key) && !(skipIndexes && (key == "length" || isIndex(key,length))) && !(isProto && key == "constructor")){result.push(key);}}return result;}function keysIn(object){var index=-1,isProto=isPrototype(object),props=baseKeysIn(object),propsLength=props.length,indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes || [],length=result.length;while(++index < propsLength) {var key=props[index];if(!(skipIndexes && (key == "length" || isIndex(key,length))) && !(key == "constructor" && (isProto || !hasOwnProperty.call(object,key)))){result.push(key);}}return result;}function mapKeys(object,iteratee){var result={};iteratee = getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){result[iteratee(value,key,object)] = value;});return result;}function mapValues(object,iteratee){var result={};iteratee = getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){result[key] = iteratee(value,key,object);});return result;}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer);});var omit=rest(function(object,props){if(object == null){return {};}props = arrayMap(baseFlatten(props),String);return basePick(object,baseDifference(keysIn(object),props));});function omitBy(object,predicate){predicate = getIteratee(predicate,2);return basePickBy(object,function(value,key){return !predicate(value,key);});}var pick=rest(function(object,props){return object == null?{}:basePick(object,baseFlatten(props));});function pickBy(object,predicate){return object == null?{}:basePickBy(object,getIteratee(predicate,2));}function result(object,path,defaultValue){if(!isKey(path,object)){path = baseToPath(path);var result=get(object,path);object = parent(object,path);}else {result = object == null?undefined:object[path];}if(result === undefined){result = defaultValue;}return isFunction(result)?result.call(object):result;}function set(object,path,value){return object == null?object:baseSet(object,path,value);}function setWith(object,path,value,customizer){customizer = typeof customizer == "function"?customizer:undefined;return object == null?object:baseSet(object,path,value,customizer);}function toPairs(object){return baseToPairs(object,keys(object));}function toPairsIn(object){return baseToPairs(object,keysIn(object));}function transform(object,iteratee,accumulator){var isArr=isArray(object) || isTypedArray(object);iteratee = getIteratee(iteratee,4);if(accumulator == null){if(isArr || isObject(object)){var Ctor=object.constructor;if(isArr){accumulator = isArray(object)?new Ctor():[];}else {accumulator = baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}}else {accumulator = {};}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function unset(object,path){return object == null?true:baseUnset(object,path);}function values(object){return object?baseValues(object,keys(object)):[];}function valuesIn(object){return object == null?baseValues(object,keysIn(object)):[];}function clamp(number,lower,upper){if(upper === undefined){upper = lower;lower = undefined;}if(upper !== undefined){upper = toNumber(upper);upper = upper === upper?upper:0;}if(lower !== undefined){lower = toNumber(lower);lower = lower === lower?lower:0;}return baseClamp(toNumber(number),lower,upper);}function inRange(number,start,end){start = toNumber(start) || 0;if(end === undefined){end = start;start = 0;}else {end = toNumber(end) || 0;}number = toNumber(number);return baseInRange(number,start,end);}function random(lower,upper,floating){if(floating && typeof floating != "boolean" && isIterateeCall(lower,upper,floating)){upper = floating = undefined;}if(floating === undefined){if(typeof upper == "boolean"){floating = upper;upper = undefined;}else if(typeof lower == "boolean"){floating = lower;lower = undefined;}}if(lower === undefined && upper === undefined){lower = 0;upper = 1;}else {lower = toNumber(lower) || 0;if(upper === undefined){upper = lower;lower = 0;}else {upper = toNumber(upper) || 0;}}if(lower > upper){var temp=lower;lower = upper;upper = temp;}if(floating || lower % 1 || upper % 1){var rand=nativeRandom();return nativeMin(lower + rand * (upper - lower + freeParseFloat("1e-" + ((rand + "").length - 1))),upper);}return baseRandom(lower,upper);}var camelCase=createCompounder(function(result,word,index){word = word.toLowerCase();return result + (index?capitalize(word):word);});function capitalize(string){return upperFirst(toString(string).toLowerCase());}function deburr(string){string = toString(string);return string && string.replace(reLatin1,deburrLetter).replace(reComboMark,"");}function endsWith(string,target,position){string = toString(string);target = typeof target == "string"?target:target + "";var length=string.length;position = position === undefined?length:baseClamp(toInteger(position),0,length);position -= target.length;return position >= 0 && string.indexOf(target,position) == position;}function escape(string){string = toString(string);return string && reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string = toString(string);return string && reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string;}var kebabCase=createCompounder(function(result,word,index){return result + (index?"-":"") + word.toLowerCase();});var lowerCase=createCompounder(function(result,word,index){return result + (index?" ":"") + word.toLowerCase();});var lowerFirst=createCaseFirst("toLowerCase");var upperFirst=createCaseFirst("toUpperCase");function pad(string,length,chars){string = toString(string);length = toInteger(length);var strLength=stringSize(string);if(!length || strLength >= length){return string;}var mid=(length - strLength) / 2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);return createPadding("",leftLength,chars) + string + createPadding("",rightLength,chars);}function padEnd(string,length,chars){string = toString(string);return string + createPadding(string,length,chars);}function padStart(string,length,chars){string = toString(string);return createPadding(string,length,chars) + string;}function parseInt(string,radix,guard){if(guard || radix == null){radix = 0;}else if(radix){radix = +radix;}string = toString(string).replace(reTrim,"");return nativeParseInt(string,radix || (reHasHexPrefix.test(string)?16:10));}function repeat(string,n){string = toString(string);n = toInteger(n);var result="";if(!string || n < 1 || n > MAX_SAFE_INTEGER){return result;}do {if(n % 2){result += string;}n = nativeFloor(n / 2);string += string;}while(n);return result;}function replace(){var args=arguments,string=toString(args[0]);return args.length < 3?string:string.replace(args[1],args[2]);}var snakeCase=createCompounder(function(result,word,index){return result + (index?"_":"") + word.toLowerCase();});function split(string,separator,limit){return toString(string).split(separator,limit);}var startCase=createCompounder(function(result,word,index){return result + (index?" ":"") + capitalize(word);});function startsWith(string,target,position){string = toString(string);position = baseClamp(toInteger(position),0,string.length);return string.lastIndexOf(target,position) == position;}function template(string,options,guard){var settings=lodash.templateSettings;if(guard && isIterateeCall(string,options,guard)){options = undefined;}string = toString(string);options = assignInWith({},options,settings,assignInDefaults);var imports=assignInWith({},options.imports,settings.imports,assignInDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate || reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape || reNoMatch).source + "|" + interpolate.source + "|" + (interpolate === reInterpolate?reEsTemplate:reNoMatch).source + "|" + (options.evaluate || reNoMatch).source + "|$","g");var sourceURL="//# sourceURL=" + ("sourceURL" in options?options.sourceURL:"lodash.templateSources[" + ++templateCounter + "]") + "\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue || (interpolateValue = esTemplateValue);source += string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping = true;source += "' +\n__e(" + escapeValue + ") +\n'";}if(evaluateValue){isEvaluating = true;source += "';\n" + evaluateValue + ";\n__p += '";}if(interpolateValue){source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";}index = offset + match.length;return match;});source += "';\n";var variable=options.variable;if(!variable){source = "with (obj) {\n" + source + "\n}\n";}source = (isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source = "function(" + (variable || "obj") + ") {\n" + (variable?"":"obj || (obj = {});\n") + "var __t, __p = ''" + (isEscaping?", __e = _.escape":"") + (isEvaluating?", __j = Array.prototype.join;\n" + "function print() { __p += __j.call(arguments, '') }\n":";\n") + source + "return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL + "return " + source).apply(undefined,importsValues);});result.source = source;if(isError(result)){throw result;}return result;}function toLower(value){return toString(value).toLowerCase();}function toUpper(value){return toString(value).toUpperCase();}function trim(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrim,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return strSymbols.slice(charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols) + 1).join("");}function trimEnd(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrimEnd,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string);return strSymbols.slice(0,charsEndIndex(strSymbols,stringToArray(chars)) + 1).join("");}function trimStart(string,chars,guard){string = toString(string);if(!string){return string;}if(guard || chars === undefined){return string.replace(reTrimStart,"");}chars = chars + "";if(!chars){return string;}var strSymbols=stringToArray(string);return strSymbols.slice(charsStartIndex(strSymbols,stringToArray(chars))).join("");}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator" in options?options.separator:separator;length = "length" in options?toInteger(options.length):length;omission = "omission" in options?toString(options.omission):omission;}string = toString(string);var strLength=string.length;if(reHasComplexSymbol.test(string)){var strSymbols=stringToArray(string);strLength = strSymbols.length;}if(length >= strLength){return string;}var end=length - stringSize(omission);if(end < 1){return omission;}var result=strSymbols?strSymbols.slice(0,end).join(""):string.slice(0,end);if(separator === undefined){return result + omission;}if(strSymbols){end += result.length - end;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator = RegExp(separator.source,toString(reFlags.exec(separator)) + "g");}separator.lastIndex = 0;while(match = separator.exec(substring)) {var newEnd=match.index;}result = result.slice(0,newEnd === undefined?end:newEnd);}}else if(string.indexOf(separator,end) != end){var index=result.lastIndexOf(separator);if(index > -1){result = result.slice(0,index);}}return result + omission;}function unescape(string){string = toString(string);return string && reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;}var upperCase=createCompounder(function(result,word,index){return result + (index?" ":"") + word.toUpperCase();});function words(string,pattern,guard){string = toString(string);pattern = guard?undefined:pattern;if(pattern === undefined){pattern = reHasComplexWord.test(string)?reComplexWord:reBasicWord;}return string.match(pattern) || [];}var attempt=rest(function(func,args){try{return apply(func,undefined,args);}catch(e) {return isObject(e)?e:new Error(e);}});var bindAll=rest(function(object,methodNames){arrayEach(baseFlatten(methodNames),function(key){object[key] = bind(object[key],object);});return object;});function cond(pairs){var length=pairs?pairs.length:0,toIteratee=getIteratee();pairs = !length?[]:arrayMap(pairs,function(pair){if(typeof pair[1] != "function"){throw new TypeError(FUNC_ERROR_TEXT);}return [toIteratee(pair[0]),pair[1]];});return rest(function(args){var index=-1;while(++index < length) {var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args);}}});}function conforms(source){return baseConforms(baseClone(source,true));}function constant(value){return function(){return value;};}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value;}function iteratee(func){return baseIteratee(typeof func == "function"?func:baseClone(func,true));}function matches(source){return baseMatches(baseClone(source,true));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true));}var method=rest(function(path,args){return function(object){return baseInvoke(object,path,args);};});var methodOf=rest(function(object,args){return function(path){return baseInvoke(object,path,args);};});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options == null && !(isObject(source) && (methodNames.length || !props.length))){options = source;source = object;object = this;methodNames = baseFunctions(source,keys(source));}var chain=isObject(options) && "chain" in options?options.chain:true,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName] = func;if(isFunc){object.prototype[methodName] = function(){var chainAll=this.__chain__;if(chain || chainAll){var result=object(this.__wrapped__),actions=result.__actions__ = copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__ = chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}});return object;}function noConflict(){if(root._ === this){root._ = oldDash;}return this;}function noop(){}function nthArg(n){n = toInteger(n);return function(){return arguments[n];};}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path);}function propertyOf(object){return function(path){return object == null?undefined:baseGet(object,path);};}var range=createRange();var rangeRight=createRange(true);function times(n,iteratee){n = toInteger(n);if(n < 1 || n > MAX_SAFE_INTEGER){return [];}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee = toFunction(iteratee);n -= MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index < n) {iteratee(index);}return result;}function toPath(value){return isArray(value)?arrayMap(value,String):stringToPath(value);}function uniqueId(prefix){var id=++idCounter;return toString(prefix) + id;}function add(augend,addend){var result;if(augend !== undefined){result = augend;}if(addend !== undefined){result = result === undefined?addend:result + addend;}return result;}var ceil=createRound("ceil");var floor=createRound("floor");function max(array){return array && array.length?baseExtremum(array,identity,gt):undefined;}function maxBy(array,iteratee){return array && array.length?baseExtremum(array,getIteratee(iteratee),gt):undefined;}function mean(array){return sum(array) / (array?array.length:0);}function min(array){return array && array.length?baseExtremum(array,identity,lt):undefined;}function minBy(array,iteratee){return array && array.length?baseExtremum(array,getIteratee(iteratee),lt):undefined;}var round=createRound("round");function subtract(minuend,subtrahend){var result;if(minuend !== undefined){result = minuend;}if(subtrahend !== undefined){result = result === undefined?subtrahend:result - subtrahend;}return result;}function sum(array){return array && array.length?baseSum(array,identity):0;}function sumBy(array,iteratee){return array && array.length?baseSum(array,getIteratee(iteratee)):0;}lodash.prototype = baseLodash.prototype;LodashWrapper.prototype = baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor = LodashWrapper;LazyWrapper.prototype = baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor = LazyWrapper;Hash.prototype = nativeCreate?nativeCreate(null):objectProto;MapCache.prototype.clear = mapClear;MapCache.prototype["delete"] = mapDelete;MapCache.prototype.get = mapGet;MapCache.prototype.has = mapHas;MapCache.prototype.set = mapSet;SetCache.prototype.push = cachePush;Stack.prototype.clear = stackClear;Stack.prototype["delete"] = stackDelete;Stack.prototype.get = stackGet;Stack.prototype.has = stackHas;Stack.prototype.set = stackSet;memoize.Cache = MapCache;lodash.after = after;lodash.ary = ary;lodash.assign = assign;lodash.assignIn = assignIn;lodash.assignInWith = assignInWith;lodash.assignWith = assignWith;lodash.at = at;lodash.before = before;lodash.bind = bind;lodash.bindAll = bindAll;lodash.bindKey = bindKey;lodash.chain = chain;lodash.chunk = chunk;lodash.compact = compact;lodash.concat = concat;lodash.cond = cond;lodash.conforms = conforms;lodash.constant = constant;lodash.countBy = countBy;lodash.create = create;lodash.curry = curry;lodash.curryRight = curryRight;lodash.debounce = debounce;lodash.defaults = defaults;lodash.defaultsDeep = defaultsDeep;lodash.defer = defer;lodash.delay = delay;lodash.difference = difference;lodash.differenceBy = differenceBy;lodash.differenceWith = differenceWith;lodash.drop = drop;lodash.dropRight = dropRight;lodash.dropRightWhile = dropRightWhile;lodash.dropWhile = dropWhile;lodash.fill = fill;lodash.filter = filter;lodash.flatMap = flatMap;lodash.flatten = flatten;lodash.flattenDeep = flattenDeep;lodash.flip = flip;lodash.flow = flow;lodash.flowRight = flowRight;lodash.fromPairs = fromPairs;lodash.functions = functions;lodash.functionsIn = functionsIn;lodash.groupBy = groupBy;lodash.initial = initial;lodash.intersection = intersection;lodash.intersectionBy = intersectionBy;lodash.intersectionWith = intersectionWith;lodash.invert = invert;lodash.invertBy = invertBy;lodash.invokeMap = invokeMap;lodash.iteratee = iteratee;lodash.keyBy = keyBy;lodash.keys = keys;lodash.keysIn = keysIn;lodash.map = map;lodash.mapKeys = mapKeys;lodash.mapValues = mapValues;lodash.matches = matches;lodash.matchesProperty = matchesProperty;lodash.memoize = memoize;lodash.merge = merge;lodash.mergeWith = mergeWith;lodash.method = method;lodash.methodOf = methodOf;lodash.mixin = mixin;lodash.negate = negate;lodash.nthArg = nthArg;lodash.omit = omit;lodash.omitBy = omitBy;lodash.once = once;lodash.orderBy = orderBy;lodash.over = over;lodash.overArgs = overArgs;lodash.overEvery = overEvery;lodash.overSome = overSome;lodash.partial = partial;lodash.partialRight = partialRight;lodash.partition = partition;lodash.pick = pick;lodash.pickBy = pickBy;lodash.property = property;lodash.propertyOf = propertyOf;lodash.pull = pull;lodash.pullAll = pullAll;lodash.pullAllBy = pullAllBy;lodash.pullAt = pullAt;lodash.range = range;lodash.rangeRight = rangeRight;lodash.rearg = rearg;lodash.reject = reject;lodash.remove = remove;lodash.rest = rest;lodash.reverse = reverse;lodash.sampleSize = sampleSize;lodash.set = set;lodash.setWith = setWith;lodash.shuffle = shuffle;lodash.slice = slice;lodash.sortBy = sortBy;lodash.sortedUniq = sortedUniq;lodash.sortedUniqBy = sortedUniqBy;lodash.split = split;lodash.spread = spread;lodash.tail = tail;lodash.take = take;lodash.takeRight = takeRight;lodash.takeRightWhile = takeRightWhile;lodash.takeWhile = takeWhile;lodash.tap = tap;lodash.throttle = throttle;lodash.thru = thru;lodash.toArray = toArray;lodash.toPairs = toPairs;lodash.toPairsIn = toPairsIn;lodash.toPath = toPath;lodash.toPlainObject = toPlainObject;lodash.transform = transform;lodash.unary = unary;lodash.union = union;lodash.unionBy = unionBy;lodash.unionWith = unionWith;lodash.uniq = uniq;lodash.uniqBy = uniqBy;lodash.uniqWith = uniqWith;lodash.unset = unset;lodash.unzip = unzip;lodash.unzipWith = unzipWith;lodash.values = values;lodash.valuesIn = valuesIn;lodash.without = without;lodash.words = words;lodash.wrap = wrap;lodash.xor = xor;lodash.xorBy = xorBy;lodash.xorWith = xorWith;lodash.zip = zip;lodash.zipObject = zipObject;lodash.zipObjectDeep = zipObjectDeep;lodash.zipWith = zipWith;lodash.extend = assignIn;lodash.extendWith = assignInWith;mixin(lodash,lodash);lodash.add = add;lodash.attempt = attempt;lodash.camelCase = camelCase;lodash.capitalize = capitalize;lodash.ceil = ceil;lodash.clamp = clamp;lodash.clone = clone;lodash.cloneDeep = cloneDeep;lodash.cloneDeepWith = cloneDeepWith;lodash.cloneWith = cloneWith;lodash.deburr = deburr;lodash.endsWith = endsWith;lodash.eq = eq;lodash.escape = escape;lodash.escapeRegExp = escapeRegExp;lodash.every = every;lodash.find = find;lodash.findIndex = findIndex;lodash.findKey = findKey;lodash.findLast = findLast;lodash.findLastIndex = findLastIndex;lodash.findLastKey = findLastKey;lodash.floor = floor;lodash.forEach = forEach;lodash.forEachRight = forEachRight;lodash.forIn = forIn;lodash.forInRight = forInRight;lodash.forOwn = forOwn;lodash.forOwnRight = forOwnRight;lodash.get = get;lodash.gt = gt;lodash.gte = gte;lodash.has = has;lodash.hasIn = hasIn;lodash.head = head;lodash.identity = identity;lodash.includes = includes;lodash.indexOf = indexOf;lodash.inRange = inRange;lodash.invoke = invoke;lodash.isArguments = isArguments;lodash.isArray = isArray;lodash.isArrayLike = isArrayLike;lodash.isArrayLikeObject = isArrayLikeObject;lodash.isBoolean = isBoolean;lodash.isDate = isDate;lodash.isElement = isElement;lodash.isEmpty = isEmpty;lodash.isEqual = isEqual;lodash.isEqualWith = isEqualWith;lodash.isError = isError;lodash.isFinite = isFinite;lodash.isFunction = isFunction;lodash.isInteger = isInteger;lodash.isLength = isLength;lodash.isMatch = isMatch;lodash.isMatchWith = isMatchWith;lodash.isNaN = isNaN;lodash.isNative = isNative;lodash.isNil = isNil;lodash.isNull = isNull;lodash.isNumber = isNumber;lodash.isObject = isObject;lodash.isObjectLike = isObjectLike;lodash.isPlainObject = isPlainObject;lodash.isRegExp = isRegExp;lodash.isSafeInteger = isSafeInteger;lodash.isString = isString;lodash.isSymbol = isSymbol;lodash.isTypedArray = isTypedArray;lodash.isUndefined = isUndefined;lodash.join = join;lodash.kebabCase = kebabCase;lodash.last = last;lodash.lastIndexOf = lastIndexOf;lodash.lowerCase = lowerCase;lodash.lowerFirst = lowerFirst;lodash.lt = lt;lodash.lte = lte;lodash.max = max;lodash.maxBy = maxBy;lodash.mean = mean;lodash.min = min;lodash.minBy = minBy;lodash.noConflict = noConflict;lodash.noop = noop;lodash.now = now;lodash.pad = pad;lodash.padEnd = padEnd;lodash.padStart = padStart;lodash.parseInt = parseInt;lodash.random = random;lodash.reduce = reduce;lodash.reduceRight = reduceRight;lodash.repeat = repeat;lodash.replace = replace;lodash.result = result;lodash.round = round;lodash.runInContext = runInContext;lodash.sample = sample;lodash.size = size;lodash.snakeCase = snakeCase;lodash.some = some;lodash.sortedIndex = sortedIndex;lodash.sortedIndexBy = sortedIndexBy;lodash.sortedIndexOf = sortedIndexOf;lodash.sortedLastIndex = sortedLastIndex;lodash.sortedLastIndexBy = sortedLastIndexBy;lodash.sortedLastIndexOf = sortedLastIndexOf;lodash.startCase = startCase;lodash.startsWith = startsWith;lodash.subtract = subtract;lodash.sum = sum;lodash.sumBy = sumBy;lodash.template = template;lodash.times = times;lodash.toInteger = toInteger;lodash.toLength = toLength;lodash.toLower = toLower;lodash.toNumber = toNumber;lodash.toSafeInteger = toSafeInteger;lodash.toString = toString;lodash.toUpper = toUpper;lodash.trim = trim;lodash.trimEnd = trimEnd;lodash.trimStart = trimStart;lodash.truncate = truncate;lodash.unescape = unescape;lodash.uniqueId = uniqueId;lodash.upperCase = upperCase;lodash.upperFirst = upperFirst;lodash.each = forEach;lodash.eachRight = forEachRight;lodash.first = head;mixin(lodash,(function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName] = func;}});return source;})(),{chain:false});lodash.VERSION = VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder = lodash;});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName] = function(n){var filtered=this.__filtered__;if(filtered && !index){return new LazyWrapper(this);}n = n === undefined?1:nativeMax(toInteger(n),0);var result=this.clone();if(filtered){result.__takeCount__ = nativeMin(n,result.__takeCount__);}else {result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName + (result.__dir__ < 0?"Right":"")});}return result;};LazyWrapper.prototype[methodName + "Right"] = function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index + 1,isFilter=type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName] = function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__ = result.__filtered__ || isFilter;return result;};});arrayEach(["head","last"],function(methodName,index){var takeName="take" + (index?"Right":"");LazyWrapper.prototype[methodName] = function(){return this[takeName](1).value()[0];};});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop" + (index?"":"Right");LazyWrapper.prototype[methodName] = function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});LazyWrapper.prototype.compact = function(){return this.filter(identity);};LazyWrapper.prototype.find = function(predicate){return this.filter(predicate).head();};LazyWrapper.prototype.findLast = function(predicate){return this.reverse().find(predicate);};LazyWrapper.prototype.invokeMap = rest(function(path,args){if(typeof path == "function"){return new LazyWrapper(this);}return this.map(function(value){return baseInvoke(value,path,args);});});LazyWrapper.prototype.reject = function(predicate){predicate = getIteratee(predicate,3);return this.filter(function(value){return !predicate(value);});};LazyWrapper.prototype.slice = function(start,end){start = toInteger(start);var result=this;if(result.__filtered__ && (start > 0 || end < 0)){return new LazyWrapper(result);}if(start < 0){result = result.takeRight(-start);}else if(start){result = result.drop(start);}if(end !== undefined){end = toInteger(end);result = end < 0?result.dropRight(-end):result.take(end - start);}return result;};LazyWrapper.prototype.takeRightWhile = function(predicate){return this.reverse().takeWhile(predicate).reverse();};LazyWrapper.prototype.toArray = function(){return this.take(MAX_ARRAY_LENGTH);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take" + (methodName == "last"?"Right":""):methodName],retUnwrapped=isTaker || /^find/.test(methodName);if(!lodashFunc){return;}lodash.prototype[methodName] = function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy || isArray(value);var interceptor=function interceptor(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker && chainAll?result[0]:result;};if(useLazy && checkIteratee && typeof iteratee == "function" && iteratee.length != 1){isLazy = useLazy = false;}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped && !chainAll,onlyLazy=isLazy && !isHybrid;if(!retUnwrapped && useLazy){value = onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(result,chainAll);}if(isUnwrapped && onlyLazy){return func.apply(this,args);}result = this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result;};});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName] = function(){var args=arguments;if(retUnwrapped && !this.__chain__){return func.apply(this.value(),args);}return this[chainName](function(value){return func.apply(value,args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name + "",names=realNames[key] || (realNames[key] = []);names.push({name:methodName,func:lodashFunc});}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name] = [{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone = lazyClone;LazyWrapper.prototype.reverse = lazyReverse;LazyWrapper.prototype.value = lazyValue;lodash.prototype.at = wrapperAt;lodash.prototype.chain = wrapperChain;lodash.prototype.commit = wrapperCommit;lodash.prototype.flatMap = wrapperFlatMap;lodash.prototype.next = wrapperNext;lodash.prototype.plant = wrapperPlant;lodash.prototype.reverse = wrapperReverse;lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;if(iteratorSymbol){lodash.prototype[iteratorSymbol] = wrapperToIterator;}return lodash;}var _=runInContext();(freeWindow || freeSelf || {})._ = _;if(typeof define == "function" && typeof define.amd == "object" && define.amd){define(function(){return _;});}else if(freeExports && freeModule){if(moduleExports){(freeModule.exports = _)._ = _;}freeExports._ = _;}else {root._ = _;}}).call(undefined);

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"login":[function(require,module,exports){
"use strict";
cc._RFpush(module, '679e449RpxCxaiPhWcfXEIf', 'login');
// biz/login/script/login.js

var qwest = require('qwest');
var user = require('user');
var api = require('api');

var btnAction = {
    show: cc.moveTo(0.5, cc.p(540, 280)).easing(cc.easeIn(3.0)),
    hide: cc.moveTo(0.5, cc.p(540, 425)).easing(cc.easeIn(3.0))
};

var loginGroupAction = {
    show: cc.moveTo(0.5, cc.p(0, -150)).easing(cc.easeIn(3.0)),
    hide: cc.moveTo(0.5, cc.p(0, -500)).easing(cc.easeIn(3.0))
};

var registerGroupAction = {
    show: cc.moveTo(0.5, cc.p(0, 0)).easing(cc.easeIn(3.0)),
    hide: cc.moveTo(0.5, cc.p(0, -660)).easing(cc.easeIn(3.0))
};

cc.Class({
    'extends': cc.Component,

    properties: {
        username: {
            'default': null,
            type: cc.EditBox
        },

        password: {
            'default': null,
            type: cc.EditBox
        },

        loginBtn: {
            'default': null,
            type: cc.Button
        },

        registerBtnBox: {
            'default': null,
            type: cc.Node
        },

        cancelBtnBox: {
            'default': null,
            type: cc.Node
        },

        loginGroup: {
            'default': null,
            type: cc.Node
        },

        registerGroup: {
            'default': null,
            type: cc.Node
        }
    },

    onLoginBtnEnter: function onLoginBtnEnter() {
        api.login({
            username: this.username.string,
            password: this.password.string
        }).then(function (data) {
            user.init(data.data);
            cc.director.loadScene('Main');
        }, function (err) {
            alert(err.data);
        });
    },

    onCancelBtnToggle: function onCancelBtnToggle() {
        this.registerBtnBox.runAction(btnAction.show);
        this.cancelBtnBox.runAction(btnAction.hide);
        this.loginGroup.runAction(loginGroupAction.show);
        this.registerGroup.runAction(registerGroupAction.hide);
    },

    onRegisterBtnToggle: function onRegisterBtnToggle() {
        this.registerBtnBox.runAction(btnAction.hide);
        this.cancelBtnBox.runAction(btnAction.show);
        this.loginGroup.runAction(loginGroupAction.hide);
        this.registerGroup.runAction(registerGroupAction.show);
    },

    onLoad: function onLoad() {},

    update: function update(dt) {}
});

cc._RFpop();
},{"api":"api","qwest":"qwest","user":"user"}],"main":[function(require,module,exports){
"use strict";
cc._RFpush(module, '33c24QLYZpGJJQmRyl3E4jH', 'main');
// biz/main/script/main.js

var Connect = require('connect');

var cloudAction = cc.fadeOut(1.0);

var btnAction = cc.sequence(cc.scaleTo(0.25, 0.8, 1.4).easing(cc.easeInOut(3.0)), cc.scaleTo(0.25, 1, 1).easing(cc.easeInOut(3.0)));

cc.Class({
    'extends': cc.Component,

    properties: {
        toPlayBtn: {
            'default': null,
            type: cc.Node
        },

        toEquipBtn: {
            'default': null,
            type: cc.Node
        },

        cloudMask: {
            'default': null,
            type: cc.Sprite
        }
    },

    onLoad: function onLoad() {
        var self = this;
        this.cloudMask.node.runAction(cloudAction);

        // setTimeout(function() {
        //     self.toPlayBtn.runAction(btnAction);
        // }, 500);
        // setTimeout(function() {
        //     self.toEquipBtn.runAction(btnAction);
        // }, 1000);
    },

    toPlayHandler: function toPlayHandler() {
        Connect.connect();
        cc.director.loadScene('Controller');
    },

    toEquipHandler: function toEquipHandler() {
        cc.director.loadScene('Equip');
    },

    update: function update(dt) {}
});

cc._RFpop();
},{"connect":"connect"}],"qwest":[function(require,module,exports){
(function (process,global){
"use strict";
cc._RFpush(module, '8f513dtOl5DS4fIlTqIHORv', 'qwest');
// lib/qwest.js

!(function (e) {
  if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();else if ("function" == typeof define && define.amd) define([], e);else {
    var t;t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.qwest = e();
  }
})(function () {
  var define, module, exports;return (function e(t, n, o) {
    function r(i, a) {
      if (!n[i]) {
        if (!t[i]) {
          var p = "function" == typeof require && require;if (!a && p) return p(i, !0);if (s) return s(i, !0);var u = new Error("Cannot find module '" + i + "'");throw (u.code = "MODULE_NOT_FOUND", u);
        }var f = n[i] = { exports: {} };t[i][0].call(f.exports, function (e) {
          var n = t[i][1][e];return r(n ? n : e);
        }, f, f.exports, e, t, n, o);
      }return n[i].exports;
    }for (var s = "function" == typeof require && require, i = 0; i < o.length; i++) r(o[i]);return r;
  })({ 1: [function (e, t, n) {
      !(function (e) {
        "use strict";var n = function n(e) {
          var t = function t(e, _t, n) {
            n = "function" == typeof n ? n() : null === n ? "" : void 0 === n ? "" : n, e[e.length] = encodeURIComponent(_t) + "=" + encodeURIComponent(n);
          },
              n = function n(e, o, r) {
            var s, i, a;if ("[object Array]" === Object.prototype.toString.call(o)) for (s = 0, i = o.length; i > s; s++) n(e + "[" + ("object" == typeof o[s] ? s : "") + "]", o[s], r);else if (o && "[object Object]" === o.toString()) for (a in o) o.hasOwnProperty(a) && (e ? n(e + "[" + a + "]", o[a], r, t) : n(a, o[a], r, t));else if (e) t(r, e, o);else for (a in o) t(r, a, o[a]);return r;
          };return n("", e, []).join("&").replace(/%20/g, "+");
        };"object" == typeof t && "object" == typeof t.exports ? t.exports = n : "function" == typeof define && define.amd ? define([], function () {
          return n;
        }) : e.param = n;
      })(this);
    }, {}], 2: [function (e, t, n) {
      !(function (e) {
        function t(e) {
          return "function" == typeof e;
        }function n(e) {
          return "object" == typeof e;
        }function o(e) {
          "undefined" != typeof setImmediate ? setImmediate(e) : "undefined" != typeof process && process.nextTick ? process.nextTick(e) : setTimeout(e, 0);
        }var r;e[0][e[1]] = function s(e) {
          var i,
              a = [],
              p = [],
              u = function u(e, t) {
            return null == i && null != e && (i = e, a = t, p.length && o(function () {
              for (var e = 0; e < p.length; e++) p[e]();
            })), i;
          };return u.then = function (u, f) {
            var d = s(e),
                c = function c() {
              function e(o) {
                var s,
                    i = 0;try {
                  if (o && (n(o) || t(o)) && t(s = o.then)) {
                    if (o === d) throw new TypeError();s.call(o, function () {
                      i++ || e.apply(r, arguments);
                    }, function (e) {
                      i++ || d(!1, [e]);
                    });
                  } else d(!0, arguments);
                } catch (a) {
                  i++ || d(!1, [a]);
                }
              }try {
                var o = i ? u : f;t(o) ? e(o.apply(r, a || [])) : d(i, a);
              } catch (s) {
                d(!1, [s]);
              }
            };return null != i ? o(c) : p.push(c), d;
          }, e && (u = e(u)), u;
        };
      })("undefined" == typeof t ? [window, "pinkySwear"] : [t, "exports"]);
    }, {}], qwest: [function (_dereq_, module, exports) {
      module.exports = (function () {
        var global = window || this,
            pinkyswear = _dereq_("pinkyswear"),
            jparam = _dereq_("jquery-param"),
            defaultOptions = {},
            defaultXdrResponseType = "json",
            defaultDataType = "post",
            _limit = null,
            requests = 0,
            request_stack = [],
            getXHR = global.XMLHttpRequest ? function () {
          return new global.XMLHttpRequest();
        } : function () {
          return new ActiveXObject("Microsoft.XMLHTTP");
        },
            xhr2 = "" === getXHR().responseType,
            qwest = function qwest(method, url, data, options, before) {
          method = method.toUpperCase(), data = data || null, options = options || {};for (var name in defaultOptions) if (!(name in options)) if ("object" == typeof defaultOptions[name] && "object" == typeof options[name]) for (var name2 in defaultOptions[name]) options[name][name2] = defaultOptions[name][name2];else options[name] = defaultOptions[name];var nativeResponseParsing = !1,
              crossOrigin,
              xhr,
              xdr = !1,
              timeoutInterval,
              aborted = !1,
              attempts = 0,
              headers = {},
              mimeTypes = { text: "*/*", xml: "text/xml", json: "application/json", post: "application/x-www-form-urlencoded", document: "text/html" },
              accept = { text: "*/*", xml: "application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1", json: "application/json; q=1.0, text/*; q=0.8, */*; q=0.1" },
              i,
              j,
              serialized,
              response,
              sending = !1,
              delayed = !1,
              timeout_start,
              promise = pinkyswear(function (e) {
            return e.abort = function () {
              xhr && (xhr.abort(), --requests, aborted = !0);
            }, e.send = function () {
              if (!sending) {
                if (requests == _limit) return void request_stack.push(e);if (aborted) return void (request_stack.length && request_stack.shift().send());if ((++requests, sending = !0, timeout_start = new Date().getTime(), xhr = getXHR(), crossOrigin && ("withCredentials" in xhr || !global.XDomainRequest || (xhr = new XDomainRequest(), xdr = !0, "GET" != method && "POST" != method && (method = "POST"))), xdr ? xhr.open(method, url) : (xhr.open(method, url, options.async, options.user, options.password), xhr2 && options.async && (xhr.withCredentials = options.withCredentials)), !xdr)) for (var t in headers) headers[t] && xhr.setRequestHeader(t, headers[t]);if (xhr2 && "auto" != options.responseType) try {
                  xhr.responseType = options.responseType, nativeResponseParsing = xhr.responseType == options.responseType;
                } catch (n) {}xhr2 || xdr ? (xhr.onload = handleResponse, xhr.onerror = handleError) : xhr.onreadystatechange = function () {
                  4 == xhr.readyState && handleResponse();
                }, "auto" != options.responseType && "overrideMimeType" in xhr && xhr.overrideMimeType(mimeTypes[options.responseType]), before && before(xhr), xdr ? (xhr.onprogress = function () {}, xhr.ontimeout = function () {}, xhr.onerror = function () {}, setTimeout(function () {
                  xhr.send("GET" != method ? data : null);
                }, 0)) : xhr.send("GET" != method ? data : null);
              }
            }, e;
          }),
              handleResponse = function handleResponse() {
            var i, responseType;if ((--requests, sending = !1, new Date().getTime() - timeout_start >= options.timeout)) return void (options.attempts && ++attempts == options.attempts ? promise(!1, [new Error("Timeout (" + url + ")"), xhr, response]) : promise.send());request_stack.length && request_stack.shift().send();try {
              if (nativeResponseParsing && "response" in xhr && null !== xhr.response) response = xhr.response;else {
                if ((responseType = options.responseType, "auto" == responseType)) if (xdr) responseType = defaultXdrResponseType;else {
                  var ct = xhr.getResponseHeader("Content-Type") || "";responseType = ct.indexOf(mimeTypes.json) > -1 ? "json" : ct.indexOf(mimeTypes.xml) > -1 ? "xml" : "text";
                }switch (responseType) {case "json":
                    if (xhr.responseText.length) try {
                      response = "JSON" in global ? JSON.parse(xhr.responseText) : eval("(" + xhr.responseText + ")");
                    } catch (e) {
                      throw "Error while parsing JSON body : " + e;
                    }break;case "xml":
                    try {
                      global.DOMParser ? response = new DOMParser().parseFromString(xhr.responseText, "text/xml") : (response = new ActiveXObject("Microsoft.XMLDOM"), response.async = "false", response.loadXML(xhr.responseText));
                    } catch (e) {
                      response = void 0;
                    }if (!response || !response.documentElement || response.getElementsByTagName("parsererror").length) throw "Invalid XML";break;default:
                    response = xhr.responseText;}
              }if ("status" in xhr && !/^2|1223/.test(xhr.status)) throw xhr.status + " (" + xhr.statusText + ")";promise(!0, [xhr, response]);
            } catch (e) {
              promise(!1, [e, xhr, response]);
            }
          },
              handleError = function handleError(e) {
            --requests, promise(!1, [new Error("Connection aborted"), xhr, null]);
          };if ((options.async = "async" in options ? !!options.async : !0, options.cache = "cache" in options ? !!options.cache : !1, options.dataType = "dataType" in options ? options.dataType.toLowerCase() : defaultDataType, options.responseType = "responseType" in options ? options.responseType.toLowerCase() : "auto", options.user = options.user || "", options.password = options.password || "", options.withCredentials = !!options.withCredentials, options.timeout = "timeout" in options ? parseInt(options.timeout, 10) : 3e4, options.attempts = "attempts" in options ? parseInt(options.attempts, 10) : 1, i = url.match(/\/\/(.+?)\//), crossOrigin = i && (i[1] ? i[1] != location.host : !1), "ArrayBuffer" in global && data instanceof ArrayBuffer ? options.dataType = "arraybuffer" : "Blob" in global && data instanceof Blob ? options.dataType = "blob" : "Document" in global && data instanceof Document ? options.dataType = "document" : "FormData" in global && data instanceof FormData && (options.dataType = "formdata"), null !== data)) switch (options.dataType) {case "json":
              data = JSON.stringify(data);break;case "post":
              data = jparam(data);}if (options.headers) {
            var format = function format(e, t, n) {
              return t + n.toUpperCase();
            };for (i in options.headers) headers[i.replace(/(^|-)([^-])/g, format)] = options.headers[i];
          }return "Content-Type" in headers || "GET" == method || options.dataType in mimeTypes && mimeTypes[options.dataType] && (headers["Content-Type"] = mimeTypes[options.dataType]), headers.Accept || (headers.Accept = options.responseType in accept ? accept[options.responseType] : "*/*"), crossOrigin || "X-Requested-With" in headers || (headers["X-Requested-With"] = "XMLHttpRequest"), options.cache || "Cache-Control" in headers || (headers["Cache-Control"] = "no-cache"), "GET" == method && data && "string" == typeof data && (url += (/\?/.test(url) ? "&" : "?") + data), options.async && promise.send(), promise;
        },
            getNewPromise = function getNewPromise(e) {
          var t = [],
              n = 0,
              o = [];return pinkyswear(function (r) {
            var s = -1,
                i = function i(e) {
              return function (i, a, p, u) {
                var f = ++s;return ++n, t.push(qwest(e, r.base + i, a, p, u).then(function (e, t) {
                  o[f] = arguments, --n || r(!0, 1 == o.length ? o[0] : [o]);
                }, function () {
                  r(!1, arguments);
                })), r;
              };
            };r.get = i("GET"), r.post = i("POST"), r.put = i("PUT"), r["delete"] = i("DELETE"), r["catch"] = function (e) {
              return r.then(null, e);
            }, r.complete = function (e) {
              var t = function t() {
                e();
              };return r.then(t, t);
            }, r.map = function (e, t, n, o, r) {
              return i(e.toUpperCase()).call(this, t, n, o, r);
            };for (var a in e) a in r || (r[a] = e[a]);return r.send = function () {
              for (var e = 0, n = t.length; n > e; ++e) t[e].send();return r;
            }, r.abort = function () {
              for (var e = 0, n = t.length; n > e; ++e) t[e].abort();return r;
            }, r;
          });
        },
            q = { base: "", get: function get() {
            return getNewPromise(q).get.apply(this, arguments);
          }, post: function post() {
            return getNewPromise(q).post.apply(this, arguments);
          }, put: function put() {
            return getNewPromise(q).put.apply(this, arguments);
          }, "delete": function _delete() {
            return getNewPromise(q)["delete"].apply(this, arguments);
          }, map: function map() {
            return getNewPromise(q).map.apply(this, arguments);
          }, xhr2: xhr2, limit: function limit(e) {
            return _limit = e, q;
          }, setDefaultOptions: function setDefaultOptions(e) {
            return defaultOptions = e, q;
          }, setDefaultXdrResponseType: function setDefaultXdrResponseType(e) {
            return defaultXdrResponseType = e.toLowerCase(), q;
          }, setDefaultDataType: function setDefaultDataType(e) {
            return defaultDataType = e.toLowerCase(), q;
          }, getOpenRequests: function getOpenRequests() {
            return requests;
          } };return q;
      })();
    }, { "jquery-param": 1, pinkyswear: 2 }] }, {}, [1, 2])("qwest");
});

cc._RFpop();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1}],"register":[function(require,module,exports){
"use strict";
cc._RFpush(module, '52d7e1rhDZOOYDhJvdJ92n7', 'register');
// biz/login/script/register.js

var api = require('api');
var user = require('user');

cc.Class({
    'extends': cc.Component,

    properties: {
        username: {
            'default': null,
            type: cc.EditBox
        },

        password: {
            'default': null,
            type: cc.EditBox
        },

        nickname: {
            'default': null,
            type: cc.EditBox
        }
    },

    onRegisterBtnEnter: function onRegisterBtnEnter() {
        api.register({
            username: this.username.string,
            password: this.password.string,
            nickname: this.nickname.string
        }).then(function (data) {
            user.init(data.data);
            console.log(user);
            cc.director.loadScene('Main');
        }, function (err) {
            alert(err.data);
        });
    },

    onLoad: function onLoad() {}

});

cc._RFpop();
},{"api":"api","user":"user"}],"socket.io":[function(require,module,exports){
(function (global){
"use strict";
cc._RFpush(module, '342756pPltPvItiKud7zucD', 'socket.io');
// lib/socket.io.js

"use strict";

(function (f) {
  if (typeof exports === "object" && typeof module !== "undefined") {
    module.exports = f();
  } else if (typeof define === "function" && define.amd) {
    define([], f);
  } else {
    var g;if (typeof window !== "undefined") {
      g = window;
    } else if (typeof global !== "undefined") {
      g = global;
    } else if (typeof self !== "undefined") {
      g = self;
    } else {
      g = this;
    }g.io = f();
  }
})(function () {
  var define, module, exports;return (function e(t, n, r) {
    function s(o, u) {
      if (!n[o]) {
        if (!t[o]) {
          var a = typeof require == "function" && require;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error("Cannot find module '" + o + "'");throw (f.code = "MODULE_NOT_FOUND", f);
        }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {
          var n = t[o][1][e];return s(n ? n : e);
        }, l, l.exports, e, t, n, r);
      }return n[o].exports;
    }var i = typeof require == "function" && require;for (var o = 0; o < r.length; o++) s(r[o]);return s;
  })({ 1: [function (_dereq_, module, exports) {
      module.exports = _dereq_("./lib/");
    }, { "./lib/": 2 }], 2: [function (_dereq_, module, exports) {
      module.exports = _dereq_("./socket");module.exports.parser = _dereq_("engine.io-parser");
    }, { "./socket": 3, "engine.io-parser": 19 }], 3: [function (_dereq_, module, exports) {
      (function (global) {
        var transports = _dereq_("./transports");var Emitter = _dereq_("component-emitter");var debug = _dereq_("debug")("engine.io-client:socket");var index = _dereq_("indexof");var parser = _dereq_("engine.io-parser");var parseuri = _dereq_("parseuri");var parsejson = _dereq_("parsejson");var parseqs = _dereq_("parseqs");module.exports = Socket;function noop() {}function Socket(uri, opts) {
          if (!(this instanceof Socket)) return new Socket(uri, opts);opts = opts || {};if (uri && "object" == typeof uri) {
            opts = uri;uri = null;
          }if (uri) {
            uri = parseuri(uri);opts.hostname = uri.host;opts.secure = uri.protocol == "https" || uri.protocol == "wss";opts.port = uri.port;if (uri.query) opts.query = uri.query;
          } else if (opts.host) {
            opts.hostname = parseuri(opts.host).host;
          }this.secure = null != opts.secure ? opts.secure : global.location && "https:" == location.protocol;if (opts.hostname && !opts.port) {
            opts.port = this.secure ? "443" : "80";
          }this.agent = opts.agent || false;this.hostname = opts.hostname || (global.location ? location.hostname : "localhost");this.port = opts.port || (global.location && location.port ? location.port : this.secure ? 443 : 80);this.query = opts.query || {};if ("string" == typeof this.query) this.query = parseqs.decode(this.query);this.upgrade = false !== opts.upgrade;this.path = (opts.path || "/engine.io").replace(/\/$/, "") + "/";this.forceJSONP = !!opts.forceJSONP;this.jsonp = false !== opts.jsonp;this.forceBase64 = !!opts.forceBase64;this.enablesXDR = !!opts.enablesXDR;this.timestampParam = opts.timestampParam || "t";this.timestampRequests = opts.timestampRequests;this.transports = opts.transports || ["polling", "websocket"];this.readyState = "";this.writeBuffer = [];this.policyPort = opts.policyPort || 843;this.rememberUpgrade = opts.rememberUpgrade || false;this.binaryType = null;this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;this.perMessageDeflate = false !== opts.perMessageDeflate ? opts.perMessageDeflate || {} : false;if (true === this.perMessageDeflate) this.perMessageDeflate = {};if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {
            this.perMessageDeflate.threshold = 1024;
          }this.pfx = opts.pfx || null;this.key = opts.key || null;this.passphrase = opts.passphrase || null;this.cert = opts.cert || null;this.ca = opts.ca || null;this.ciphers = opts.ciphers || null;this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? null : opts.rejectUnauthorized;var freeGlobal = typeof global == "object" && global;if (freeGlobal.global === freeGlobal) {
            if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {
              this.extraHeaders = opts.extraHeaders;
            }
          }this.open();
        }Socket.priorWebsocketSuccess = false;Emitter(Socket.prototype);Socket.protocol = parser.protocol;Socket.Socket = Socket;Socket.Transport = _dereq_("./transport");Socket.transports = _dereq_("./transports");Socket.parser = _dereq_("engine.io-parser");Socket.prototype.createTransport = function (name) {
          debug('creating transport "%s"', name);var query = clone(this.query);query.EIO = parser.protocol;query.transport = name;if (this.id) query.sid = this.id;var transport = new transports[name]({ agent: this.agent, hostname: this.hostname, port: this.port, secure: this.secure, path: this.path, query: query, forceJSONP: this.forceJSONP, jsonp: this.jsonp, forceBase64: this.forceBase64, enablesXDR: this.enablesXDR, timestampRequests: this.timestampRequests, timestampParam: this.timestampParam, policyPort: this.policyPort, socket: this, pfx: this.pfx, key: this.key, passphrase: this.passphrase, cert: this.cert, ca: this.ca, ciphers: this.ciphers, rejectUnauthorized: this.rejectUnauthorized, perMessageDeflate: this.perMessageDeflate, extraHeaders: this.extraHeaders });return transport;
        };function clone(obj) {
          var o = {};for (var i in obj) {
            if (obj.hasOwnProperty(i)) {
              o[i] = obj[i];
            }
          }return o;
        }Socket.prototype.open = function () {
          var transport;if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf("websocket") != -1) {
            transport = "websocket";
          } else if (0 === this.transports.length) {
            var self = this;setTimeout(function () {
              self.emit("error", "No transports available");
            }, 0);return;
          } else {
            transport = this.transports[0];
          }this.readyState = "opening";try {
            transport = this.createTransport(transport);
          } catch (e) {
            this.transports.shift();this.open();return;
          }transport.open();this.setTransport(transport);
        };Socket.prototype.setTransport = function (transport) {
          debug("setting transport %s", transport.name);var self = this;if (this.transport) {
            debug("clearing existing transport %s", this.transport.name);this.transport.removeAllListeners();
          }this.transport = transport;transport.on("drain", function () {
            self.onDrain();
          }).on("packet", function (packet) {
            self.onPacket(packet);
          }).on("error", function (e) {
            self.onError(e);
          }).on("close", function () {
            self.onClose("transport close");
          });
        };Socket.prototype.probe = function (name) {
          debug('probing transport "%s"', name);var transport = this.createTransport(name, { probe: 1 }),
              failed = false,
              self = this;Socket.priorWebsocketSuccess = false;function onTransportOpen() {
            if (self.onlyBinaryUpgrades) {
              var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;failed = failed || upgradeLosesBinary;
            }if (failed) return;debug('probe transport "%s" opened', name);transport.send([{ type: "ping", data: "probe" }]);transport.once("packet", function (msg) {
              if (failed) return;if ("pong" == msg.type && "probe" == msg.data) {
                debug('probe transport "%s" pong', name);self.upgrading = true;self.emit("upgrading", transport);if (!transport) return;Socket.priorWebsocketSuccess = "websocket" == transport.name;debug('pausing current transport "%s"', self.transport.name);self.transport.pause(function () {
                  if (failed) return;if ("closed" == self.readyState) return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{ type: "upgrade" }]);self.emit("upgrade", transport);transport = null;self.upgrading = false;self.flush();
                });
              } else {
                debug('probe transport "%s" failed', name);var err = new Error("probe error");err.transport = transport.name;self.emit("upgradeError", err);
              }
            });
          }function freezeTransport() {
            if (failed) return;failed = true;cleanup();transport.close();transport = null;
          }function onerror(err) {
            var error = new Error("probe error: " + err);error.transport = transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s', name, err);self.emit("upgradeError", error);
          }function onTransportClose() {
            onerror("transport closed");
          }function onclose() {
            onerror("socket closed");
          }function onupgrade(to) {
            if (transport && to.name != transport.name) {
              debug('"%s" works - aborting "%s"', to.name, transport.name);freezeTransport();
            }
          }function cleanup() {
            transport.removeListener("open", onTransportOpen);transport.removeListener("error", onerror);transport.removeListener("close", onTransportClose);self.removeListener("close", onclose);self.removeListener("upgrading", onupgrade);
          }transport.once("open", onTransportOpen);transport.once("error", onerror);transport.once("close", onTransportClose);this.once("close", onclose);this.once("upgrading", onupgrade);transport.open();
        };Socket.prototype.onOpen = function () {
          debug("socket open");this.readyState = "open";Socket.priorWebsocketSuccess = "websocket" == this.transport.name;this.emit("open");this.flush();if ("open" == this.readyState && this.upgrade && this.transport.pause) {
            debug("starting upgrade probes");for (var i = 0, l = this.upgrades.length; i < l; i++) {
              this.probe(this.upgrades[i]);
            }
          }
        };Socket.prototype.onPacket = function (packet) {
          if ("opening" == this.readyState || "open" == this.readyState) {
            debug('socket receive: type "%s", data "%s"', packet.type, packet.data);this.emit("packet", packet);this.emit("heartbeat");switch (packet.type) {case "open":
                this.onHandshake(parsejson(packet.data));break;case "pong":
                this.setPing();this.emit("pong");break;case "error":
                var err = new Error("server error");err.code = packet.data;this.onError(err);break;case "message":
                this.emit("data", packet.data);this.emit("message", packet.data);break;}
          } else {
            debug('packet received with socket readyState "%s"', this.readyState);
          }
        };Socket.prototype.onHandshake = function (data) {
          this.emit("handshake", data);this.id = data.sid;this.transport.query.sid = data.sid;this.upgrades = this.filterUpgrades(data.upgrades);this.pingInterval = data.pingInterval;this.pingTimeout = data.pingTimeout;this.onOpen();if ("closed" == this.readyState) return;this.setPing();this.removeListener("heartbeat", this.onHeartbeat);this.on("heartbeat", this.onHeartbeat);
        };Socket.prototype.onHeartbeat = function (timeout) {
          clearTimeout(this.pingTimeoutTimer);var self = this;self.pingTimeoutTimer = setTimeout(function () {
            if ("closed" == self.readyState) return;self.onClose("ping timeout");
          }, timeout || self.pingInterval + self.pingTimeout);
        };Socket.prototype.setPing = function () {
          var self = this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer = setTimeout(function () {
            debug("writing ping packet - expecting pong within %sms", self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout);
          }, self.pingInterval);
        };Socket.prototype.ping = function () {
          var self = this;this.sendPacket("ping", function () {
            self.emit("ping");
          });
        };Socket.prototype.onDrain = function () {
          this.writeBuffer.splice(0, this.prevBufferLen);this.prevBufferLen = 0;if (0 === this.writeBuffer.length) {
            this.emit("drain");
          } else {
            this.flush();
          }
        };Socket.prototype.flush = function () {
          if ("closed" != this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
            debug("flushing %d packets in socket", this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen = this.writeBuffer.length;this.emit("flush");
          }
        };Socket.prototype.write = Socket.prototype.send = function (msg, options, fn) {
          this.sendPacket("message", msg, options, fn);return this;
        };Socket.prototype.sendPacket = function (type, data, options, fn) {
          if ("function" == typeof data) {
            fn = data;data = undefined;
          }if ("function" == typeof options) {
            fn = options;options = null;
          }if ("closing" == this.readyState || "closed" == this.readyState) {
            return;
          }options = options || {};options.compress = false !== options.compress;var packet = { type: type, data: data, options: options };this.emit("packetCreate", packet);this.writeBuffer.push(packet);if (fn) this.once("flush", fn);this.flush();
        };Socket.prototype.close = function () {
          if ("opening" == this.readyState || "open" == this.readyState) {
            this.readyState = "closing";var self = this;if (this.writeBuffer.length) {
              this.once("drain", function () {
                if (this.upgrading) {
                  waitForUpgrade();
                } else {
                  close();
                }
              });
            } else if (this.upgrading) {
              waitForUpgrade();
            } else {
              close();
            }
          }function close() {
            self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close();
          }function cleanupAndClose() {
            self.removeListener("upgrade", cleanupAndClose);self.removeListener("upgradeError", cleanupAndClose);close();
          }function waitForUpgrade() {
            self.once("upgrade", cleanupAndClose);self.once("upgradeError", cleanupAndClose);
          }return this;
        };Socket.prototype.onError = function (err) {
          debug("socket error %j", err);Socket.priorWebsocketSuccess = false;this.emit("error", err);this.onClose("transport error", err);
        };Socket.prototype.onClose = function (reason, desc) {
          if ("opening" == this.readyState || "open" == this.readyState || "closing" == this.readyState) {
            debug('socket close with reason: "%s"', reason);var self = this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState = "closed";this.id = null;this.emit("close", reason, desc);self.writeBuffer = [];self.prevBufferLen = 0;
          }
        };Socket.prototype.filterUpgrades = function (upgrades) {
          var filteredUpgrades = [];for (var i = 0, j = upgrades.length; i < j; i++) {
            if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);
          }return filteredUpgrades;
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./transport": 4, "./transports": 5, "component-emitter": 15, debug: 17, "engine.io-parser": 19, indexof: 23, parsejson: 26, parseqs: 27, parseuri: 28 }], 4: [function (_dereq_, module, exports) {
      var parser = _dereq_("engine.io-parser");var Emitter = _dereq_("component-emitter");module.exports = Transport;function Transport(opts) {
        this.path = opts.path;this.hostname = opts.hostname;this.port = opts.port;this.secure = opts.secure;this.query = opts.query;this.timestampParam = opts.timestampParam;this.timestampRequests = opts.timestampRequests;this.readyState = "";this.agent = opts.agent || false;this.socket = opts.socket;this.enablesXDR = opts.enablesXDR;this.pfx = opts.pfx;this.key = opts.key;this.passphrase = opts.passphrase;this.cert = opts.cert;this.ca = opts.ca;this.ciphers = opts.ciphers;this.rejectUnauthorized = opts.rejectUnauthorized;this.extraHeaders = opts.extraHeaders;
      }Emitter(Transport.prototype);Transport.prototype.onError = function (msg, desc) {
        var err = new Error(msg);err.type = "TransportError";err.description = desc;this.emit("error", err);return this;
      };Transport.prototype.open = function () {
        if ("closed" == this.readyState || "" == this.readyState) {
          this.readyState = "opening";this.doOpen();
        }return this;
      };Transport.prototype.close = function () {
        if ("opening" == this.readyState || "open" == this.readyState) {
          this.doClose();this.onClose();
        }return this;
      };Transport.prototype.send = function (packets) {
        if ("open" == this.readyState) {
          this.write(packets);
        } else {
          throw new Error("Transport not open");
        }
      };Transport.prototype.onOpen = function () {
        this.readyState = "open";this.writable = true;this.emit("open");
      };Transport.prototype.onData = function (data) {
        var packet = parser.decodePacket(data, this.socket.binaryType);this.onPacket(packet);
      };Transport.prototype.onPacket = function (packet) {
        this.emit("packet", packet);
      };Transport.prototype.onClose = function () {
        this.readyState = "closed";this.emit("close");
      };
    }, { "component-emitter": 15, "engine.io-parser": 19 }], 5: [function (_dereq_, module, exports) {
      (function (global) {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var XHR = _dereq_("./polling-xhr");var JSONP = _dereq_("./polling-jsonp");var websocket = _dereq_("./websocket");exports.polling = polling;exports.websocket = websocket;function polling(opts) {
          var xhr;var xd = false;var xs = false;var jsonp = false !== opts.jsonp;if (global.location) {
            var isSSL = "https:" == location.protocol;var port = location.port;if (!port) {
              port = isSSL ? 443 : 80;
            }xd = opts.hostname != location.hostname || port != opts.port;xs = opts.secure != isSSL;
          }opts.xdomain = xd;opts.xscheme = xs;xhr = new XMLHttpRequest(opts);if ("open" in xhr && !opts.forceJSONP) {
            return new XHR(opts);
          } else {
            if (!jsonp) throw new Error("JSONP disabled");return new JSONP(opts);
          }
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling-jsonp": 6, "./polling-xhr": 7, "./websocket": 9, "xmlhttprequest-ssl": 10 }], 6: [function (_dereq_, module, exports) {
      (function (global) {
        var Polling = _dereq_("./polling");var inherit = _dereq_("component-inherit");module.exports = JSONPPolling;var rNewline = /\n/g;var rEscapedNewline = /\\n/g;var callbacks;var index = 0;function empty() {}function JSONPPolling(opts) {
          Polling.call(this, opts);this.query = this.query || {};if (!callbacks) {
            if (!global.___eio) global.___eio = [];callbacks = global.___eio;
          }this.index = callbacks.length;var self = this;callbacks.push(function (msg) {
            self.onData(msg);
          });this.query.j = this.index;if (global.document && global.addEventListener) {
            global.addEventListener("beforeunload", function () {
              if (self.script) self.script.onerror = empty;
            }, false);
          }
        }inherit(JSONPPolling, Polling);JSONPPolling.prototype.supportsBinary = false;JSONPPolling.prototype.doClose = function () {
          if (this.script) {
            this.script.parentNode.removeChild(this.script);this.script = null;
          }if (this.form) {
            this.form.parentNode.removeChild(this.form);this.form = null;this.iframe = null;
          }Polling.prototype.doClose.call(this);
        };JSONPPolling.prototype.doPoll = function () {
          var self = this;var script = document.createElement("script");if (this.script) {
            this.script.parentNode.removeChild(this.script);this.script = null;
          }script.async = true;script.src = this.uri();script.onerror = function (e) {
            self.onError("jsonp poll error", e);
          };var insertAt = document.getElementsByTagName("script")[0];if (insertAt) {
            insertAt.parentNode.insertBefore(script, insertAt);
          } else {
            (document.head || document.body).appendChild(script);
          }this.script = script;var isUAgecko = "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent);if (isUAgecko) {
            setTimeout(function () {
              var iframe = document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe);
            }, 100);
          }
        };JSONPPolling.prototype.doWrite = function (data, fn) {
          var self = this;if (!this.form) {
            var form = document.createElement("form");var area = document.createElement("textarea");var id = this.iframeId = "eio_iframe_" + this.index;var iframe;form.className = "socketio";form.style.position = "absolute";form.style.top = "-1000px";form.style.left = "-1000px";form.target = id;form.method = "POST";form.setAttribute("accept-charset", "utf-8");area.name = "d";form.appendChild(area);document.body.appendChild(form);this.form = form;this.area = area;
          }this.form.action = this.uri();function complete() {
            initIframe();fn();
          }function initIframe() {
            if (self.iframe) {
              try {
                self.form.removeChild(self.iframe);
              } catch (e) {
                self.onError("jsonp polling iframe removal error", e);
              }
            }try {
              var html = '<iframe src="javascript:0" name="' + self.iframeId + '">';iframe = document.createElement(html);
            } catch (e) {
              iframe = document.createElement("iframe");iframe.name = self.iframeId;iframe.src = "javascript:0";
            }iframe.id = self.iframeId;self.form.appendChild(iframe);self.iframe = iframe;
          }initIframe();data = data.replace(rEscapedNewline, "\\\n");this.area.value = data.replace(rNewline, "\\n");try {
            this.form.submit();
          } catch (e) {}if (this.iframe.attachEvent) {
            this.iframe.onreadystatechange = function () {
              if (self.iframe.readyState == "complete") {
                complete();
              }
            };
          } else {
            this.iframe.onload = complete;
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling": 8, "component-inherit": 16 }], 7: [function (_dereq_, module, exports) {
      (function (global) {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var Polling = _dereq_("./polling");var Emitter = _dereq_("component-emitter");var inherit = _dereq_("component-inherit");var debug = _dereq_("debug")("engine.io-client:polling-xhr");module.exports = XHR;module.exports.Request = Request;function empty() {}function XHR(opts) {
          Polling.call(this, opts);if (global.location) {
            var isSSL = "https:" == location.protocol;var port = location.port;if (!port) {
              port = isSSL ? 443 : 80;
            }this.xd = opts.hostname != global.location.hostname || port != opts.port;this.xs = opts.secure != isSSL;
          } else {
            this.extraHeaders = opts.extraHeaders;
          }
        }inherit(XHR, Polling);XHR.prototype.supportsBinary = true;XHR.prototype.request = function (opts) {
          opts = opts || {};opts.uri = this.uri();opts.xd = this.xd;opts.xs = this.xs;opts.agent = this.agent || false;opts.supportsBinary = this.supportsBinary;opts.enablesXDR = this.enablesXDR;opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;opts.extraHeaders = this.extraHeaders;return new Request(opts);
        };XHR.prototype.doWrite = function (data, fn) {
          var isBinary = typeof data !== "string" && data !== undefined;var req = this.request({ method: "POST", data: data, isBinary: isBinary });var self = this;req.on("success", fn);req.on("error", function (err) {
            self.onError("xhr post error", err);
          });this.sendXhr = req;
        };XHR.prototype.doPoll = function () {
          debug("xhr poll");var req = this.request();var self = this;req.on("data", function (data) {
            self.onData(data);
          });req.on("error", function (err) {
            self.onError("xhr poll error", err);
          });this.pollXhr = req;
        };function Request(opts) {
          this.method = opts.method || "GET";this.uri = opts.uri;this.xd = !!opts.xd;this.xs = !!opts.xs;this.async = false !== opts.async;this.data = undefined != opts.data ? opts.data : null;this.agent = opts.agent;this.isBinary = opts.isBinary;this.supportsBinary = opts.supportsBinary;this.enablesXDR = opts.enablesXDR;this.pfx = opts.pfx;this.key = opts.key;this.passphrase = opts.passphrase;this.cert = opts.cert;this.ca = opts.ca;this.ciphers = opts.ciphers;this.rejectUnauthorized = opts.rejectUnauthorized;this.extraHeaders = opts.extraHeaders;this.create();
        }Emitter(Request.prototype);Request.prototype.create = function () {
          var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;var xhr = this.xhr = new XMLHttpRequest(opts);var self = this;try {
            debug("xhr open %s: %s", this.method, this.uri);xhr.open(this.method, this.uri, this.async);try {
              if (this.extraHeaders) {
                xhr.setDisableHeaderCheck(true);for (var i in this.extraHeaders) {
                  if (this.extraHeaders.hasOwnProperty(i)) {
                    xhr.setRequestHeader(i, this.extraHeaders[i]);
                  }
                }
              }
            } catch (e) {}if (this.supportsBinary) {
              xhr.responseType = "arraybuffer";
            }if ("POST" == this.method) {
              try {
                if (this.isBinary) {
                  xhr.setRequestHeader("Content-type", "application/octet-stream");
                } else {
                  xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
                }
              } catch (e) {}
            }if ("withCredentials" in xhr) {
              xhr.withCredentials = true;
            }if (this.hasXDR()) {
              xhr.onload = function () {
                self.onLoad();
              };xhr.onerror = function () {
                self.onError(xhr.responseText);
              };
            } else {
              xhr.onreadystatechange = function () {
                if (4 != xhr.readyState) return;if (200 == xhr.status || 1223 == xhr.status) {
                  self.onLoad();
                } else {
                  setTimeout(function () {
                    self.onError(xhr.status);
                  }, 0);
                }
              };
            }debug("xhr data %s", this.data);xhr.send(this.data);
          } catch (e) {
            setTimeout(function () {
              self.onError(e);
            }, 0);return;
          }if (global.document) {
            this.index = Request.requestsCount++;Request.requests[this.index] = this;
          }
        };Request.prototype.onSuccess = function () {
          this.emit("success");this.cleanup();
        };Request.prototype.onData = function (data) {
          this.emit("data", data);this.onSuccess();
        };Request.prototype.onError = function (err) {
          this.emit("error", err);this.cleanup(true);
        };Request.prototype.cleanup = function (fromError) {
          if ("undefined" == typeof this.xhr || null === this.xhr) {
            return;
          }if (this.hasXDR()) {
            this.xhr.onload = this.xhr.onerror = empty;
          } else {
            this.xhr.onreadystatechange = empty;
          }if (fromError) {
            try {
              this.xhr.abort();
            } catch (e) {}
          }if (global.document) {
            delete Request.requests[this.index];
          }this.xhr = null;
        };Request.prototype.onLoad = function () {
          var data;try {
            var contentType;try {
              contentType = this.xhr.getResponseHeader("Content-Type").split(";")[0];
            } catch (e) {}if (contentType === "application/octet-stream") {
              data = this.xhr.response;
            } else {
              if (!this.supportsBinary) {
                data = this.xhr.responseText;
              } else {
                try {
                  data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));
                } catch (e) {
                  var ui8Arr = new Uint8Array(this.xhr.response);var dataArray = [];for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {
                    dataArray.push(ui8Arr[idx]);
                  }data = String.fromCharCode.apply(null, dataArray);
                }
              }
            }
          } catch (e) {
            this.onError(e);
          }if (null != data) {
            this.onData(data);
          }
        };Request.prototype.hasXDR = function () {
          return "undefined" !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;
        };Request.prototype.abort = function () {
          this.cleanup();
        };if (global.document) {
          Request.requestsCount = 0;Request.requests = {};if (global.attachEvent) {
            global.attachEvent("onunload", unloadHandler);
          } else if (global.addEventListener) {
            global.addEventListener("beforeunload", unloadHandler, false);
          }
        }function unloadHandler() {
          for (var i in Request.requests) {
            if (Request.requests.hasOwnProperty(i)) {
              Request.requests[i].abort();
            }
          }
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./polling": 8, "component-emitter": 15, "component-inherit": 16, debug: 17, "xmlhttprequest-ssl": 10 }], 8: [function (_dereq_, module, exports) {
      var Transport = _dereq_("../transport");var parseqs = _dereq_("parseqs");var parser = _dereq_("engine.io-parser");var inherit = _dereq_("component-inherit");var yeast = _dereq_("yeast");var debug = _dereq_("debug")("engine.io-client:polling");module.exports = Polling;var hasXHR2 = (function () {
        var XMLHttpRequest = _dereq_("xmlhttprequest-ssl");var xhr = new XMLHttpRequest({ xdomain: false });return null != xhr.responseType;
      })();function Polling(opts) {
        var forceBase64 = opts && opts.forceBase64;if (!hasXHR2 || forceBase64) {
          this.supportsBinary = false;
        }Transport.call(this, opts);
      }inherit(Polling, Transport);Polling.prototype.name = "polling";Polling.prototype.doOpen = function () {
        this.poll();
      };Polling.prototype.pause = function (onPause) {
        var pending = 0;var self = this;this.readyState = "pausing";function pause() {
          debug("paused");self.readyState = "paused";onPause();
        }if (this.polling || !this.writable) {
          var total = 0;if (this.polling) {
            debug("we are currently polling - waiting to pause");total++;this.once("pollComplete", function () {
              debug("pre-pause polling complete");--total || pause();
            });
          }if (!this.writable) {
            debug("we are currently writing - waiting to pause");total++;this.once("drain", function () {
              debug("pre-pause writing complete");--total || pause();
            });
          }
        } else {
          pause();
        }
      };Polling.prototype.poll = function () {
        debug("polling");this.polling = true;this.doPoll();this.emit("poll");
      };Polling.prototype.onData = function (data) {
        var self = this;debug("polling got data %s", data);var callback = function callback(packet, index, total) {
          if ("opening" == self.readyState) {
            self.onOpen();
          }if ("close" == packet.type) {
            self.onClose();return false;
          }self.onPacket(packet);
        };parser.decodePayload(data, this.socket.binaryType, callback);if ("closed" != this.readyState) {
          this.polling = false;this.emit("pollComplete");if ("open" == this.readyState) {
            this.poll();
          } else {
            debug('ignoring poll - transport state "%s"', this.readyState);
          }
        }
      };Polling.prototype.doClose = function () {
        var self = this;function close() {
          debug("writing close packet");self.write([{ type: "close" }]);
        }if ("open" == this.readyState) {
          debug("transport open - closing");close();
        } else {
          debug("transport not open - deferring close");this.once("open", close);
        }
      };Polling.prototype.write = function (packets) {
        var self = this;this.writable = false;var callbackfn = function callbackfn() {
          self.writable = true;self.emit("drain");
        };var self = this;parser.encodePayload(packets, this.supportsBinary, function (data) {
          self.doWrite(data, callbackfn);
        });
      };Polling.prototype.uri = function () {
        var query = this.query || {};var schema = this.secure ? "https" : "http";var port = "";if (false !== this.timestampRequests) {
          query[this.timestampParam] = yeast();
        }if (!this.supportsBinary && !query.sid) {
          query.b64 = 1;
        }query = parseqs.encode(query);if (this.port && ("https" == schema && this.port != 443 || "http" == schema && this.port != 80)) {
          port = ":" + this.port;
        }if (query.length) {
          query = "?" + query;
        }var ipv6 = this.hostname.indexOf(":") !== -1;return schema + "://" + (ipv6 ? "[" + this.hostname + "]" : this.hostname) + port + this.path + query;
      };
    }, { "../transport": 4, "component-inherit": 16, debug: 17, "engine.io-parser": 19, parseqs: 27, "xmlhttprequest-ssl": 10, yeast: 30 }], 9: [function (_dereq_, module, exports) {
      (function (global) {
        var Transport = _dereq_("../transport");var parser = _dereq_("engine.io-parser");var parseqs = _dereq_("parseqs");var inherit = _dereq_("component-inherit");var yeast = _dereq_("yeast");var debug = _dereq_("debug")("engine.io-client:websocket");var BrowserWebSocket = global.WebSocket || global.MozWebSocket;var WebSocket = BrowserWebSocket;if (!WebSocket && typeof window === "undefined") {
          try {
            WebSocket = _dereq_("ws");
          } catch (e) {}
        }module.exports = WS;function WS(opts) {
          var forceBase64 = opts && opts.forceBase64;if (forceBase64) {
            this.supportsBinary = false;
          }this.perMessageDeflate = opts.perMessageDeflate;Transport.call(this, opts);
        }inherit(WS, Transport);WS.prototype.name = "websocket";WS.prototype.supportsBinary = true;WS.prototype.doOpen = function () {
          if (!this.check()) {
            return;
          }var self = this;var uri = this.uri();var protocols = void 0;var opts = { agent: this.agent, perMessageDeflate: this.perMessageDeflate };opts.pfx = this.pfx;opts.key = this.key;opts.passphrase = this.passphrase;opts.cert = this.cert;opts.ca = this.ca;opts.ciphers = this.ciphers;opts.rejectUnauthorized = this.rejectUnauthorized;if (this.extraHeaders) {
            opts.headers = this.extraHeaders;
          }this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);if (this.ws.binaryType === undefined) {
            this.supportsBinary = false;
          }if (this.ws.supports && this.ws.supports.binary) {
            this.supportsBinary = true;this.ws.binaryType = "buffer";
          } else {
            this.ws.binaryType = "arraybuffer";
          }this.addEventListeners();
        };WS.prototype.addEventListeners = function () {
          var self = this;this.ws.onopen = function () {
            self.onOpen();
          };this.ws.onclose = function () {
            self.onClose();
          };this.ws.onmessage = function (ev) {
            self.onData(ev.data);
          };this.ws.onerror = function (e) {
            self.onError("websocket error", e);
          };
        };if ("undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {
          WS.prototype.onData = function (data) {
            var self = this;setTimeout(function () {
              Transport.prototype.onData.call(self, data);
            }, 0);
          };
        }WS.prototype.write = function (packets) {
          var self = this;this.writable = false;var total = packets.length;for (var i = 0, l = total; i < l; i++) {
            (function (packet) {
              parser.encodePacket(packet, self.supportsBinary, function (data) {
                if (!BrowserWebSocket) {
                  var opts = {};if (packet.options) {
                    opts.compress = packet.options.compress;
                  }if (self.perMessageDeflate) {
                    var len = "string" == typeof data ? global.Buffer.byteLength(data) : data.length;if (len < self.perMessageDeflate.threshold) {
                      opts.compress = false;
                    }
                  }
                }try {
                  if (BrowserWebSocket) {
                    self.ws.send(data);
                  } else {
                    self.ws.send(data, opts);
                  }
                } catch (e) {
                  debug("websocket closed before onclose event");
                }--total || done();
              });
            })(packets[i]);
          }function done() {
            self.emit("flush");setTimeout(function () {
              self.writable = true;self.emit("drain");
            }, 0);
          }
        };WS.prototype.onClose = function () {
          Transport.prototype.onClose.call(this);
        };WS.prototype.doClose = function () {
          if (typeof this.ws !== "undefined") {
            this.ws.close();
          }
        };WS.prototype.uri = function () {
          var query = this.query || {};var schema = this.secure ? "wss" : "ws";var port = "";if (this.port && ("wss" == schema && this.port != 443 || "ws" == schema && this.port != 80)) {
            port = ":" + this.port;
          }if (this.timestampRequests) {
            query[this.timestampParam] = yeast();
          }if (!this.supportsBinary) {
            query.b64 = 1;
          }query = parseqs.encode(query);if (query.length) {
            query = "?" + query;
          }var ipv6 = this.hostname.indexOf(":") !== -1;return schema + "://" + (ipv6 ? "[" + this.hostname + "]" : this.hostname) + port + this.path + query;
        };WS.prototype.check = function () {
          return !!WebSocket && !("__initialize" in WebSocket && this.name === WS.prototype.name);
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "../transport": 4, "component-inherit": 16, debug: 17, "engine.io-parser": 19, parseqs: 27, ws: undefined, yeast: 30 }], 10: [function (_dereq_, module, exports) {
      var hasCORS = _dereq_("has-cors");module.exports = function (opts) {
        var xdomain = opts.xdomain;var xscheme = opts.xscheme;var enablesXDR = opts.enablesXDR;try {
          if ("undefined" != typeof XMLHttpRequest && (!xdomain || hasCORS)) {
            return new XMLHttpRequest();
          }
        } catch (e) {}try {
          if ("undefined" != typeof XDomainRequest && !xscheme && enablesXDR) {
            return new XDomainRequest();
          }
        } catch (e) {}if (!xdomain) {
          try {
            return new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e) {}
        }
      };
    }, { "has-cors": 22 }], 11: [function (_dereq_, module, exports) {
      module.exports = after;function after(count, callback, err_cb) {
        var bail = false;err_cb = err_cb || noop;proxy.count = count;return count === 0 ? callback() : proxy;function proxy(err, result) {
          if (proxy.count <= 0) {
            throw new Error("after called too many times");
          }--proxy.count;if (err) {
            bail = true;callback(err);callback = err_cb;
          } else if (proxy.count === 0 && !bail) {
            callback(null, result);
          }
        }
      }function noop() {}
    }, {}], 12: [function (_dereq_, module, exports) {
      module.exports = function (arraybuffer, start, end) {
        var bytes = arraybuffer.byteLength;start = start || 0;end = end || bytes;if (arraybuffer.slice) {
          return arraybuffer.slice(start, end);
        }if (start < 0) {
          start += bytes;
        }if (end < 0) {
          end += bytes;
        }if (end > bytes) {
          end = bytes;
        }if (start >= bytes || start >= end || bytes === 0) {
          return new ArrayBuffer(0);
        }var abv = new Uint8Array(arraybuffer);var result = new Uint8Array(end - start);for (var i = start, ii = 0; i < end; i++, ii++) {
          result[ii] = abv[i];
        }return result.buffer;
      };
    }, {}], 13: [function (_dereq_, module, exports) {
      (function (chars) {
        "use strict";exports.encode = function (arraybuffer) {
          var bytes = new Uint8Array(arraybuffer),
              i,
              len = bytes.length,
              base64 = "";for (i = 0; i < len; i += 3) {
            base64 += chars[bytes[i] >> 2];
            base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];base64 += chars[bytes[i + 2] & 63];
          }if (len % 3 === 2) {
            base64 = base64.substring(0, base64.length - 1) + "=";
          } else if (len % 3 === 1) {
            base64 = base64.substring(0, base64.length - 2) + "==";
          }return base64;
        };exports.decode = function (base64) {
          var bufferLength = base64.length * .75,
              len = base64.length,
              i,
              p = 0,
              encoded1,
              encoded2,
              encoded3,
              encoded4;if (base64[base64.length - 1] === "=") {
            bufferLength--;if (base64[base64.length - 2] === "=") {
              bufferLength--;
            }
          }var arraybuffer = new ArrayBuffer(bufferLength),
              bytes = new Uint8Array(arraybuffer);for (i = 0; i < len; i += 4) {
            encoded1 = chars.indexOf(base64[i]);encoded2 = chars.indexOf(base64[i + 1]);encoded3 = chars.indexOf(base64[i + 2]);encoded4 = chars.indexOf(base64[i + 3]);bytes[p++] = encoded1 << 2 | encoded2 >> 4;bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
          }return arraybuffer;
        };
      })("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");
    }, {}], 14: [function (_dereq_, module, exports) {
      (function (global) {
        var BlobBuilder = global.BlobBuilder || global.WebKitBlobBuilder || global.MSBlobBuilder || global.MozBlobBuilder;var blobSupported = (function () {
          try {
            var a = new Blob(["hi"]);return a.size === 2;
          } catch (e) {
            return false;
          }
        })();var blobSupportsArrayBufferView = blobSupported && (function () {
          try {
            var b = new Blob([new Uint8Array([1, 2])]);return b.size === 2;
          } catch (e) {
            return false;
          }
        })();var blobBuilderSupported = BlobBuilder && BlobBuilder.prototype.append && BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary) {
          for (var i = 0; i < ary.length; i++) {
            var chunk = ary[i];if (chunk.buffer instanceof ArrayBuffer) {
              var buf = chunk.buffer;if (chunk.byteLength !== buf.byteLength) {
                var copy = new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));buf = copy.buffer;
              }ary[i] = buf;
            }
          }
        }function BlobBuilderConstructor(ary, options) {
          options = options || {};var bb = new BlobBuilder();mapArrayBufferViews(ary);for (var i = 0; i < ary.length; i++) {
            bb.append(ary[i]);
          }return options.type ? bb.getBlob(options.type) : bb.getBlob();
        }function BlobConstructor(ary, options) {
          mapArrayBufferViews(ary);return new Blob(ary, options || {});
        }module.exports = (function () {
          if (blobSupported) {
            return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;
          } else if (blobBuilderSupported) {
            return BlobBuilderConstructor;
          } else {
            return undefined;
          }
        })();
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 15: [function (_dereq_, module, exports) {
      module.exports = Emitter;function Emitter(obj) {
        if (obj) return mixin(obj);
      }function mixin(obj) {
        for (var key in Emitter.prototype) {
          obj[key] = Emitter.prototype[key];
        }return obj;
      }Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};(this._callbacks[event] = this._callbacks[event] || []).push(fn);return this;
      };Emitter.prototype.once = function (event, fn) {
        var self = this;this._callbacks = this._callbacks || {};function on() {
          self.off(event, on);fn.apply(this, arguments);
        }on.fn = fn;this.on(event, on);return this;
      };Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};if (0 == arguments.length) {
          this._callbacks = {};return this;
        }var callbacks = this._callbacks[event];if (!callbacks) return this;if (1 == arguments.length) {
          delete this._callbacks[event];return this;
        }var cb;for (var i = 0; i < callbacks.length; i++) {
          cb = callbacks[i];if (cb === fn || cb.fn === fn) {
            callbacks.splice(i, 1);break;
          }
        }return this;
      };Emitter.prototype.emit = function (event) {
        this._callbacks = this._callbacks || {};var args = [].slice.call(arguments, 1),
            callbacks = this._callbacks[event];if (callbacks) {
          callbacks = callbacks.slice(0);for (var i = 0, len = callbacks.length; i < len; ++i) {
            callbacks[i].apply(this, args);
          }
        }return this;
      };Emitter.prototype.listeners = function (event) {
        this._callbacks = this._callbacks || {};return this._callbacks[event] || [];
      };Emitter.prototype.hasListeners = function (event) {
        return !!this.listeners(event).length;
      };
    }, {}], 16: [function (_dereq_, module, exports) {
      module.exports = function (a, b) {
        var fn = function fn() {};fn.prototype = b.prototype;a.prototype = new fn();a.prototype.constructor = a;
      };
    }, {}], 17: [function (_dereq_, module, exports) {
      exports = module.exports = _dereq_("./debug");exports.log = log;exports.formatArgs = formatArgs;exports.save = save;exports.load = load;exports.useColors = useColors;exports.storage = "undefined" != typeof chrome && "undefined" != typeof chrome.storage ? chrome.storage.local : localstorage();exports.colors = ["lightseagreen", "forestgreen", "goldenrod", "dodgerblue", "darkorchid", "crimson"];function useColors() {
        return "WebkitAppearance" in document.documentElement.style || window.console && (console.firebug || console.exception && console.table) || navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31;
      }exports.formatters.j = function (v) {
        return JSON.stringify(v);
      };function formatArgs() {
        var args = arguments;var useColors = this.useColors;args[0] = (useColors ? "%c" : "") + this.namespace + (useColors ? " %c" : " ") + args[0] + (useColors ? "%c " : " ") + "+" + exports.humanize(this.diff);if (!useColors) return args;var c = "color: " + this.color;args = [args[0], c, "color: inherit"].concat(Array.prototype.slice.call(args, 1));var index = 0;var lastC = 0;args[0].replace(/%[a-z%]/g, function (match) {
          if ("%%" === match) return;index++;if ("%c" === match) {
            lastC = index;
          }
        });args.splice(lastC, 0, c);return args;
      }function log() {
        return "object" === typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
      }function save(namespaces) {
        try {
          if (null == namespaces) {
            exports.storage.removeItem("debug");
          } else {
            exports.storage.debug = namespaces;
          }
        } catch (e) {}
      }function load() {
        var r;try {
          r = exports.storage.debug;
        } catch (e) {}return r;
      }exports.enable(load());function localstorage() {
        try {
          return window.localStorage;
        } catch (e) {}
      }
    }, { "./debug": 18 }], 18: [function (_dereq_, module, exports) {
      exports = module.exports = debug;exports.coerce = coerce;exports.disable = disable;exports.enable = enable;exports.enabled = enabled;exports.humanize = _dereq_("ms");exports.names = [];exports.skips = [];exports.formatters = {};var prevColor = 0;var prevTime;function selectColor() {
        return exports.colors[prevColor++ % exports.colors.length];
      }function debug(namespace) {
        function disabled() {}disabled.enabled = false;function enabled() {
          var self = enabled;var curr = +new Date();var ms = curr - (prevTime || curr);self.diff = ms;self.prev = prevTime;self.curr = curr;prevTime = curr;if (null == self.useColors) self.useColors = exports.useColors();if (null == self.color && self.useColors) self.color = selectColor();var args = Array.prototype.slice.call(arguments);args[0] = exports.coerce(args[0]);if ("string" !== typeof args[0]) {
            args = ["%o"].concat(args);
          }var index = 0;args[0] = args[0].replace(/%([a-z%])/g, function (match, format) {
            if (match === "%%") return match;index++;var formatter = exports.formatters[format];if ("function" === typeof formatter) {
              var val = args[index];match = formatter.call(self, val);args.splice(index, 1);index--;
            }return match;
          });if ("function" === typeof exports.formatArgs) {
            args = exports.formatArgs.apply(self, args);
          }var logFn = enabled.log || exports.log || console.log.bind(console);logFn.apply(self, args);
        }enabled.enabled = true;var fn = exports.enabled(namespace) ? enabled : disabled;fn.namespace = namespace;return fn;
      }function enable(namespaces) {
        exports.save(namespaces);var split = (namespaces || "").split(/[\s,]+/);var len = split.length;for (var i = 0; i < len; i++) {
          if (!split[i]) continue;namespaces = split[i].replace(/\*/g, ".*?");if (namespaces[0] === "-") {
            exports.skips.push(new RegExp("^" + namespaces.substr(1) + "$"));
          } else {
            exports.names.push(new RegExp("^" + namespaces + "$"));
          }
        }
      }function disable() {
        exports.enable("");
      }function enabled(name) {
        var i, len;for (i = 0, len = exports.skips.length; i < len; i++) {
          if (exports.skips[i].test(name)) {
            return false;
          }
        }for (i = 0, len = exports.names.length; i < len; i++) {
          if (exports.names[i].test(name)) {
            return true;
          }
        }return false;
      }function coerce(val) {
        if (val instanceof Error) return val.stack || val.message;return val;
      }
    }, { ms: 25 }], 19: [function (_dereq_, module, exports) {
      (function (global) {
        var keys = _dereq_("./keys");var hasBinary = _dereq_("has-binary");var sliceBuffer = _dereq_("arraybuffer.slice");var base64encoder = _dereq_("base64-arraybuffer");var after = _dereq_("after");var utf8 = _dereq_("utf8");var isAndroid = navigator.userAgent.match(/Android/i);var isPhantomJS = /PhantomJS/i.test(navigator.userAgent);var dontSendBlobs = isAndroid || isPhantomJS;exports.protocol = 3;var packets = exports.packets = { open: 0, close: 1, ping: 2, pong: 3, message: 4, upgrade: 5, noop: 6 };var packetslist = keys(packets);var err = { type: "error", data: "parser error" };var Blob = _dereq_("blob");exports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {
          if ("function" == typeof supportsBinary) {
            callback = supportsBinary;supportsBinary = false;
          }if ("function" == typeof utf8encode) {
            callback = utf8encode;utf8encode = null;
          }var data = packet.data === undefined ? undefined : packet.data.buffer || packet.data;if (global.ArrayBuffer && data instanceof ArrayBuffer) {
            return encodeArrayBuffer(packet, supportsBinary, callback);
          } else if (Blob && data instanceof global.Blob) {
            return encodeBlob(packet, supportsBinary, callback);
          }if (data && data.base64) {
            return encodeBase64Object(packet, callback);
          }var encoded = packets[packet.type];if (undefined !== packet.data) {
            encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);
          }return callback("" + encoded);
        };function encodeBase64Object(packet, callback) {
          var message = "b" + exports.packets[packet.type] + packet.data.data;return callback(message);
        }function encodeArrayBuffer(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }var data = packet.data;var contentArray = new Uint8Array(data);var resultBuffer = new Uint8Array(1 + data.byteLength);resultBuffer[0] = packets[packet.type];for (var i = 0; i < contentArray.length; i++) {
            resultBuffer[i + 1] = contentArray[i];
          }return callback(resultBuffer.buffer);
        }function encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }var fr = new FileReader();fr.onload = function () {
            packet.data = fr.result;exports.encodePacket(packet, supportsBinary, true, callback);
          };return fr.readAsArrayBuffer(packet.data);
        }function encodeBlob(packet, supportsBinary, callback) {
          if (!supportsBinary) {
            return exports.encodeBase64Packet(packet, callback);
          }if (dontSendBlobs) {
            return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);
          }var length = new Uint8Array(1);length[0] = packets[packet.type];var blob = new Blob([length.buffer, packet.data]);return callback(blob);
        }exports.encodeBase64Packet = function (packet, callback) {
          var message = "b" + exports.packets[packet.type];if (Blob && packet.data instanceof global.Blob) {
            var fr = new FileReader();fr.onload = function () {
              var b64 = fr.result.split(",")[1];callback(message + b64);
            };return fr.readAsDataURL(packet.data);
          }var b64data;try {
            b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));
          } catch (e) {
            var typed = new Uint8Array(packet.data);var basic = new Array(typed.length);for (var i = 0; i < typed.length; i++) {
              basic[i] = typed[i];
            }b64data = String.fromCharCode.apply(null, basic);
          }message += global.btoa(b64data);return callback(message);
        };exports.decodePacket = function (data, binaryType, utf8decode) {
          if (typeof data == "string" || data === undefined) {
            if (data.charAt(0) == "b") {
              return exports.decodeBase64Packet(data.substr(1), binaryType);
            }if (utf8decode) {
              try {
                data = utf8.decode(data);
              } catch (e) {
                return err;
              }
            }var type = data.charAt(0);if (Number(type) != type || !packetslist[type]) {
              return err;
            }if (data.length > 1) {
              return { type: packetslist[type], data: data.substring(1) };
            } else {
              return { type: packetslist[type] };
            }
          }var asArray = new Uint8Array(data);var type = asArray[0];var rest = sliceBuffer(data, 1);if (Blob && binaryType === "blob") {
            rest = new Blob([rest]);
          }return { type: packetslist[type], data: rest };
        };exports.decodeBase64Packet = function (msg, binaryType) {
          var type = packetslist[msg.charAt(0)];if (!global.ArrayBuffer) {
            return { type: type, data: { base64: true, data: msg.substr(1) } };
          }var data = base64encoder.decode(msg.substr(1));if (binaryType === "blob" && Blob) {
            data = new Blob([data]);
          }return { type: type, data: data };
        };exports.encodePayload = function (packets, supportsBinary, callback) {
          if (typeof supportsBinary == "function") {
            callback = supportsBinary;supportsBinary = null;
          }var isBinary = hasBinary(packets);if (supportsBinary && isBinary) {
            if (Blob && !dontSendBlobs) {
              return exports.encodePayloadAsBlob(packets, callback);
            }return exports.encodePayloadAsArrayBuffer(packets, callback);
          }if (!packets.length) {
            return callback("0:");
          }function setLengthHeader(message) {
            return message.length + ":" + message;
          }function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function (message) {
              doneCallback(null, setLengthHeader(message));
            });
          }map(packets, encodeOne, function (err, results) {
            return callback(results.join(""));
          });
        };function map(ary, each, done) {
          var result = new Array(ary.length);var next = after(ary.length, done);var eachWithIndex = function eachWithIndex(i, el, cb) {
            each(el, function (error, msg) {
              result[i] = msg;cb(error, result);
            });
          };for (var i = 0; i < ary.length; i++) {
            eachWithIndex(i, ary[i], next);
          }
        }exports.decodePayload = function (data, binaryType, callback) {
          if (typeof data != "string") {
            return exports.decodePayloadAsBinary(data, binaryType, callback);
          }if (typeof binaryType === "function") {
            callback = binaryType;binaryType = null;
          }var packet;if (data == "") {
            return callback(err, 0, 1);
          }var length = "",
              n,
              msg;for (var i = 0, l = data.length; i < l; i++) {
            var chr = data.charAt(i);if (":" != chr) {
              length += chr;
            } else {
              if ("" == length || length != (n = Number(length))) {
                return callback(err, 0, 1);
              }msg = data.substr(i + 1, n);if (length != msg.length) {
                return callback(err, 0, 1);
              }if (msg.length) {
                packet = exports.decodePacket(msg, binaryType, true);if (err.type == packet.type && err.data == packet.data) {
                  return callback(err, 0, 1);
                }var ret = callback(packet, i + n, l);if (false === ret) return;
              }i += n;length = "";
            }
          }if (length != "") {
            return callback(err, 0, 1);
          }
        };exports.encodePayloadAsArrayBuffer = function (packets, callback) {
          if (!packets.length) {
            return callback(new ArrayBuffer(0));
          }function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, true, true, function (data) {
              return doneCallback(null, data);
            });
          }map(packets, encodeOne, function (err, encodedPackets) {
            var totalLength = encodedPackets.reduce(function (acc, p) {
              var len;if (typeof p === "string") {
                len = p.length;
              } else {
                len = p.byteLength;
              }return acc + len.toString().length + len + 2;
            }, 0);var resultArray = new Uint8Array(totalLength);var bufferIndex = 0;encodedPackets.forEach(function (p) {
              var isString = typeof p === "string";var ab = p;if (isString) {
                var view = new Uint8Array(p.length);for (var i = 0; i < p.length; i++) {
                  view[i] = p.charCodeAt(i);
                }ab = view.buffer;
              }if (isString) {
                resultArray[bufferIndex++] = 0;
              } else {
                resultArray[bufferIndex++] = 1;
              }var lenStr = ab.byteLength.toString();for (var i = 0; i < lenStr.length; i++) {
                resultArray[bufferIndex++] = parseInt(lenStr[i]);
              }resultArray[bufferIndex++] = 255;var view = new Uint8Array(ab);for (var i = 0; i < view.length; i++) {
                resultArray[bufferIndex++] = view[i];
              }
            });return callback(resultArray.buffer);
          });
        };exports.encodePayloadAsBlob = function (packets, callback) {
          function encodeOne(packet, doneCallback) {
            exports.encodePacket(packet, true, true, function (encoded) {
              var binaryIdentifier = new Uint8Array(1);binaryIdentifier[0] = 1;if (typeof encoded === "string") {
                var view = new Uint8Array(encoded.length);for (var i = 0; i < encoded.length; i++) {
                  view[i] = encoded.charCodeAt(i);
                }encoded = view.buffer;binaryIdentifier[0] = 0;
              }var len = encoded instanceof ArrayBuffer ? encoded.byteLength : encoded.size;var lenStr = len.toString();var lengthAry = new Uint8Array(lenStr.length + 1);for (var i = 0; i < lenStr.length; i++) {
                lengthAry[i] = parseInt(lenStr[i]);
              }lengthAry[lenStr.length] = 255;if (Blob) {
                var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);doneCallback(null, blob);
              }
            });
          }map(packets, encodeOne, function (err, results) {
            return callback(new Blob(results));
          });
        };exports.decodePayloadAsBinary = function (data, binaryType, callback) {
          if (typeof binaryType === "function") {
            callback = binaryType;binaryType = null;
          }var bufferTail = data;var buffers = [];var numberTooLong = false;while (bufferTail.byteLength > 0) {
            var tailArray = new Uint8Array(bufferTail);var isString = tailArray[0] === 0;var msgLength = "";for (var i = 1;; i++) {
              if (tailArray[i] == 255) break;if (msgLength.length > 310) {
                numberTooLong = true;break;
              }msgLength += tailArray[i];
            }if (numberTooLong) return callback(err, 0, 1);bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);msgLength = parseInt(msgLength);var msg = sliceBuffer(bufferTail, 0, msgLength);if (isString) {
              try {
                msg = String.fromCharCode.apply(null, new Uint8Array(msg));
              } catch (e) {
                var typed = new Uint8Array(msg);msg = "";for (var i = 0; i < typed.length; i++) {
                  msg += String.fromCharCode(typed[i]);
                }
              }
            }buffers.push(msg);bufferTail = sliceBuffer(bufferTail, msgLength);
          }var total = buffers.length;buffers.forEach(function (buffer, i) {
            callback(exports.decodePacket(buffer, binaryType, true), i, total);
          });
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./keys": 20, after: 11, "arraybuffer.slice": 12, "base64-arraybuffer": 13, blob: 14, "has-binary": 21, utf8: 29 }], 20: [function (_dereq_, module, exports) {
      module.exports = Object.keys || function keys(obj) {
        var arr = [];var has = Object.prototype.hasOwnProperty;for (var i in obj) {
          if (has.call(obj, i)) {
            arr.push(i);
          }
        }return arr;
      };
    }, {}], 21: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");module.exports = hasBinary;function hasBinary(data) {
          function _hasBinary(obj) {
            if (!obj) return false;if (global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              return true;
            }if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                if (_hasBinary(obj[i])) {
                  return true;
                }
              }
            } else if (obj && "object" == typeof obj) {
              if (obj.toJSON) {
                obj = obj.toJSON();
              }for (var key in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {
                  return true;
                }
              }
            }return false;
          }return _hasBinary(data);
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { isarray: 24 }], 22: [function (_dereq_, module, exports) {
      try {
        module.exports = typeof XMLHttpRequest !== "undefined" && "withCredentials" in new XMLHttpRequest();
      } catch (err) {
        module.exports = false;
      }
    }, {}], 23: [function (_dereq_, module, exports) {
      var indexOf = [].indexOf;module.exports = function (arr, obj) {
        if (indexOf) return arr.indexOf(obj);for (var i = 0; i < arr.length; ++i) {
          if (arr[i] === obj) return i;
        }return -1;
      };
    }, {}], 24: [function (_dereq_, module, exports) {
      module.exports = Array.isArray || function (arr) {
        return Object.prototype.toString.call(arr) == "[object Array]";
      };
    }, {}], 25: [function (_dereq_, module, exports) {
      var s = 1e3;var m = s * 60;var h = m * 60;var d = h * 24;var y = d * 365.25;module.exports = function (val, options) {
        options = options || {};if ("string" == typeof val) return parse(val);return options.long ? long(val) : short(val);
      };function parse(str) {
        str = "" + str;if (str.length > 1e4) return;var match = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if (!match) return;var n = parseFloat(match[1]);var type = (match[2] || "ms").toLowerCase();switch (type) {case "years":case "year":case "yrs":case "yr":case "y":
            return n * y;case "days":case "day":case "d":
            return n * d;case "hours":case "hour":case "hrs":case "hr":case "h":
            return n * h;case "minutes":case "minute":case "mins":case "min":case "m":
            return n * m;case "seconds":case "second":case "secs":case "sec":case "s":
            return n * s;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":
            return n;}
      }function short(ms) {
        if (ms >= d) return Math.round(ms / d) + "d";if (ms >= h) return Math.round(ms / h) + "h";if (ms >= m) return Math.round(ms / m) + "m";if (ms >= s) return Math.round(ms / s) + "s";return ms + "ms";
      }function long(ms) {
        return plural(ms, d, "day") || plural(ms, h, "hour") || plural(ms, m, "minute") || plural(ms, s, "second") || ms + " ms";
      }function plural(ms, n, name) {
        if (ms < n) return;if (ms < n * 1.5) return Math.floor(ms / n) + " " + name;return Math.ceil(ms / n) + " " + name + "s";
      }
    }, {}], 26: [function (_dereq_, module, exports) {
      (function (global) {
        var rvalidchars = /^[\],:{}\s]*$/;var rvalidescape = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft = /^\s+/;var rtrimRight = /\s+$/;module.exports = function parsejson(data) {
          if ("string" != typeof data || !data) {
            return null;
          }data = data.replace(rtrimLeft, "").replace(rtrimRight, "");if (global.JSON && JSON.parse) {
            return JSON.parse(data);
          }if (rvalidchars.test(data.replace(rvalidescape, "@").replace(rvalidtokens, "]").replace(rvalidbraces, ""))) {
            return new Function("return " + data)();
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 27: [function (_dereq_, module, exports) {
      exports.encode = function (obj) {
        var str = "";for (var i in obj) {
          if (obj.hasOwnProperty(i)) {
            if (str.length) str += "&";str += encodeURIComponent(i) + "=" + encodeURIComponent(obj[i]);
          }
        }return str;
      };exports.decode = function (qs) {
        var qry = {};var pairs = qs.split("&");for (var i = 0, l = pairs.length; i < l; i++) {
          var pair = pairs[i].split("=");qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
        }return qry;
      };
    }, {}], 28: [function (_dereq_, module, exports) {
      var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];module.exports = function parseuri(str) {
        var src = str,
            b = str.indexOf("["),
            e = str.indexOf("]");if (b != -1 && e != -1) {
          str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ";") + str.substring(e, str.length);
        }var m = re.exec(str || ""),
            uri = {},
            i = 14;while (i--) {
          uri[parts[i]] = m[i] || "";
        }if (b != -1 && e != -1) {
          uri.source = src;uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ":");uri.authority = uri.authority.replace("[", "").replace("]", "").replace(/;/g, ":");uri.ipv6uri = true;
        }return uri;
      };
    }, {}], 29: [function (_dereq_, module, exports) {
      (function (global) {
        (function (root) {
          var freeExports = typeof exports == "object" && exports;var freeModule = typeof module == "object" && module && module.exports == freeExports && module;var freeGlobal = typeof global == "object" && global;if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {
            root = freeGlobal;
          }var stringFromCharCode = String.fromCharCode;function ucs2decode(string) {
            var output = [];var counter = 0;var length = string.length;var value;var extra;while (counter < length) {
              value = string.charCodeAt(counter++);if (value >= 55296 && value <= 56319 && counter < length) {
                extra = string.charCodeAt(counter++);if ((extra & 64512) == 56320) {
                  output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
                } else {
                  output.push(value);counter--;
                }
              } else {
                output.push(value);
              }
            }return output;
          }function ucs2encode(array) {
            var length = array.length;var index = -1;var value;var output = "";while (++index < length) {
              value = array[index];if (value > 65535) {
                value -= 65536;output += stringFromCharCode(value >>> 10 & 1023 | 55296);value = 56320 | value & 1023;
              }output += stringFromCharCode(value);
            }return output;
          }function checkScalarValue(codePoint) {
            if (codePoint >= 55296 && codePoint <= 57343) {
              throw Error("Lone surrogate U+" + codePoint.toString(16).toUpperCase() + " is not a scalar value");
            }
          }function createByte(codePoint, shift) {
            return stringFromCharCode(codePoint >> shift & 63 | 128);
          }function encodeCodePoint(codePoint) {
            if ((codePoint & 4294967168) == 0) {
              return stringFromCharCode(codePoint);
            }var symbol = "";if ((codePoint & 4294965248) == 0) {
              symbol = stringFromCharCode(codePoint >> 6 & 31 | 192);
            } else if ((codePoint & 4294901760) == 0) {
              checkScalarValue(codePoint);symbol = stringFromCharCode(codePoint >> 12 & 15 | 224);symbol += createByte(codePoint, 6);
            } else if ((codePoint & 4292870144) == 0) {
              symbol = stringFromCharCode(codePoint >> 18 & 7 | 240);symbol += createByte(codePoint, 12);symbol += createByte(codePoint, 6);
            }symbol += stringFromCharCode(codePoint & 63 | 128);return symbol;
          }function utf8encode(string) {
            var codePoints = ucs2decode(string);var length = codePoints.length;var index = -1;var codePoint;var byteString = "";while (++index < length) {
              codePoint = codePoints[index];byteString += encodeCodePoint(codePoint);
            }return byteString;
          }function readContinuationByte() {
            if (byteIndex >= byteCount) {
              throw Error("Invalid byte index");
            }var continuationByte = byteArray[byteIndex] & 255;byteIndex++;if ((continuationByte & 192) == 128) {
              return continuationByte & 63;
            }throw Error("Invalid continuation byte");
          }function decodeSymbol() {
            var byte1;var byte2;var byte3;var byte4;var codePoint;if (byteIndex > byteCount) {
              throw Error("Invalid byte index");
            }if (byteIndex == byteCount) {
              return false;
            }byte1 = byteArray[byteIndex] & 255;byteIndex++;if ((byte1 & 128) == 0) {
              return byte1;
            }if ((byte1 & 224) == 192) {
              var byte2 = readContinuationByte();codePoint = (byte1 & 31) << 6 | byte2;if (codePoint >= 128) {
                return codePoint;
              } else {
                throw Error("Invalid continuation byte");
              }
            }if ((byte1 & 240) == 224) {
              byte2 = readContinuationByte();byte3 = readContinuationByte();codePoint = (byte1 & 15) << 12 | byte2 << 6 | byte3;if (codePoint >= 2048) {
                checkScalarValue(codePoint);return codePoint;
              } else {
                throw Error("Invalid continuation byte");
              }
            }if ((byte1 & 248) == 240) {
              byte2 = readContinuationByte();byte3 = readContinuationByte();byte4 = readContinuationByte();codePoint = (byte1 & 15) << 18 | byte2 << 12 | byte3 << 6 | byte4;if (codePoint >= 65536 && codePoint <= 1114111) {
                return codePoint;
              }
            }throw Error("Invalid UTF-8 detected");
          }var byteArray;var byteCount;var byteIndex;function utf8decode(byteString) {
            byteArray = ucs2decode(byteString);byteCount = byteArray.length;byteIndex = 0;var codePoints = [];var tmp;while ((tmp = decodeSymbol()) !== false) {
              codePoints.push(tmp);
            }return ucs2encode(codePoints);
          }var utf8 = { version: "2.0.0", encode: utf8encode, decode: utf8decode };if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
            define(function () {
              return utf8;
            });
          } else if (freeExports && !freeExports.nodeType) {
            if (freeModule) {
              freeModule.exports = utf8;
            } else {
              var object = {};var hasOwnProperty = object.hasOwnProperty;for (var key in utf8) {
                hasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);
              }
            }
          } else {
            root.utf8 = utf8;
          }
        })(this);
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 30: [function (_dereq_, module, exports) {
      "use strict";var alphabet = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
          length = 64,
          map = {},
          seed = 0,
          i = 0,
          prev;function encode(num) {
        var encoded = "";do {
          encoded = alphabet[num % length] + encoded;num = Math.floor(num / length);
        } while (num > 0);return encoded;
      }function decode(str) {
        var decoded = 0;for (i = 0; i < str.length; i++) {
          decoded = decoded * length + map[str.charAt(i)];
        }return decoded;
      }function yeast() {
        var now = encode(+new Date());if (now !== prev) return seed = 0, prev = now;return now + "." + encode(seed++);
      }for (; i < length; i++) map[alphabet[i]] = i;yeast.encode = encode;yeast.decode = decode;module.exports = yeast;
    }, {}], 31: [function (_dereq_, module, exports) {
      var url = _dereq_("./url");var parser = _dereq_("socket.io-parser");var Manager = _dereq_("./manager");var debug = _dereq_("debug")("socket.io-client");module.exports = exports = lookup;var cache = exports.managers = {};function lookup(uri, opts) {
        if (typeof uri == "object") {
          opts = uri;uri = undefined;
        }opts = opts || {};var parsed = url(uri);var source = parsed.source;var id = parsed.id;var path = parsed.path;var sameNamespace = cache[id] && path in cache[id].nsps;var newConnection = opts.forceNew || opts["force new connection"] || false === opts.multiplex || sameNamespace;var io;if (newConnection) {
          debug("ignoring socket cache for %s", source);io = Manager(source, opts);
        } else {
          if (!cache[id]) {
            debug("new io instance for %s", source);cache[id] = Manager(source, opts);
          }io = cache[id];
        }return io.socket(parsed.path);
      }exports.protocol = parser.protocol;exports.connect = lookup;exports.Manager = _dereq_("./manager");exports.Socket = _dereq_("./socket");
    }, { "./manager": 32, "./socket": 34, "./url": 35, debug: 39, "socket.io-parser": 47 }], 32: [function (_dereq_, module, exports) {
      var eio = _dereq_("engine.io-client");var Socket = _dereq_("./socket");var Emitter = _dereq_("component-emitter");var parser = _dereq_("socket.io-parser");var on = _dereq_("./on");var bind = _dereq_("component-bind");var debug = _dereq_("debug")("socket.io-client:manager");var indexOf = _dereq_("indexof");var Backoff = _dereq_("backo2");var has = Object.prototype.hasOwnProperty;module.exports = Manager;function Manager(uri, opts) {
        if (!(this instanceof Manager)) return new Manager(uri, opts);if (uri && "object" == typeof uri) {
          opts = uri;uri = undefined;
        }opts = opts || {};opts.path = opts.path || "/socket.io";this.nsps = {};this.subs = [];this.opts = opts;this.reconnection(opts.reconnection !== false);this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);this.reconnectionDelay(opts.reconnectionDelay || 1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax || 5e3);this.randomizationFactor(opts.randomizationFactor || .5);this.backoff = new Backoff({ min: this.reconnectionDelay(), max: this.reconnectionDelayMax(), jitter: this.randomizationFactor() });this.timeout(null == opts.timeout ? 2e4 : opts.timeout);this.readyState = "closed";this.uri = uri;this.connecting = [];this.lastPing = null;this.encoding = false;this.packetBuffer = [];this.encoder = new parser.Encoder();this.decoder = new parser.Decoder();this.autoConnect = opts.autoConnect !== false;if (this.autoConnect) this.open();
      }Manager.prototype.emitAll = function () {
        this.emit.apply(this, arguments);for (var nsp in this.nsps) {
          if (has.call(this.nsps, nsp)) {
            this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);
          }
        }
      };Manager.prototype.updateSocketIds = function () {
        for (var nsp in this.nsps) {
          if (has.call(this.nsps, nsp)) {
            this.nsps[nsp].id = this.engine.id;
          }
        }
      };Emitter(Manager.prototype);Manager.prototype.reconnection = function (v) {
        if (!arguments.length) return this._reconnection;this._reconnection = !!v;return this;
      };Manager.prototype.reconnectionAttempts = function (v) {
        if (!arguments.length) return this._reconnectionAttempts;this._reconnectionAttempts = v;return this;
      };Manager.prototype.reconnectionDelay = function (v) {
        if (!arguments.length) return this._reconnectionDelay;this._reconnectionDelay = v;this.backoff && this.backoff.setMin(v);return this;
      };Manager.prototype.randomizationFactor = function (v) {
        if (!arguments.length) return this._randomizationFactor;this._randomizationFactor = v;this.backoff && this.backoff.setJitter(v);return this;
      };Manager.prototype.reconnectionDelayMax = function (v) {
        if (!arguments.length) return this._reconnectionDelayMax;this._reconnectionDelayMax = v;this.backoff && this.backoff.setMax(v);return this;
      };Manager.prototype.timeout = function (v) {
        if (!arguments.length) return this._timeout;this._timeout = v;return this;
      };Manager.prototype.maybeReconnectOnOpen = function () {
        if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {
          this.reconnect();
        }
      };Manager.prototype.open = Manager.prototype.connect = function (fn) {
        debug("readyState %s", this.readyState);if (~this.readyState.indexOf("open")) return this;debug("opening %s", this.uri);this.engine = eio(this.uri, this.opts);var socket = this.engine;var self = this;this.readyState = "opening";this.skipReconnect = false;var openSub = on(socket, "open", function () {
          self.onopen();fn && fn();
        });var errorSub = on(socket, "error", function (data) {
          debug("connect_error");self.cleanup();self.readyState = "closed";self.emitAll("connect_error", data);if (fn) {
            var err = new Error("Connection error");err.data = data;fn(err);
          } else {
            self.maybeReconnectOnOpen();
          }
        });if (false !== this._timeout) {
          var timeout = this._timeout;debug("connect attempt will timeout after %d", timeout);var timer = setTimeout(function () {
            debug("connect attempt timed out after %d", timeout);openSub.destroy();socket.close();socket.emit("error", "timeout");self.emitAll("connect_timeout", timeout);
          }, timeout);this.subs.push({ destroy: function destroy() {
              clearTimeout(timer);
            } });
        }this.subs.push(openSub);this.subs.push(errorSub);return this;
      };Manager.prototype.onopen = function () {
        debug("open");this.cleanup();this.readyState = "open";this.emit("open");var socket = this.engine;this.subs.push(on(socket, "data", bind(this, "ondata")));this.subs.push(on(socket, "ping", bind(this, "onping")));this.subs.push(on(socket, "pong", bind(this, "onpong")));this.subs.push(on(socket, "error", bind(this, "onerror")));this.subs.push(on(socket, "close", bind(this, "onclose")));this.subs.push(on(this.decoder, "decoded", bind(this, "ondecoded")));
      };Manager.prototype.onping = function () {
        this.lastPing = new Date();this.emitAll("ping");
      };Manager.prototype.onpong = function () {
        this.emitAll("pong", new Date() - this.lastPing);
      };Manager.prototype.ondata = function (data) {
        this.decoder.add(data);
      };Manager.prototype.ondecoded = function (packet) {
        this.emit("packet", packet);
      };Manager.prototype.onerror = function (err) {
        debug("error", err);this.emitAll("error", err);
      };Manager.prototype.socket = function (nsp) {
        var socket = this.nsps[nsp];if (!socket) {
          socket = new Socket(this, nsp);this.nsps[nsp] = socket;var self = this;socket.on("connecting", onConnecting);
          socket.on("connect", function () {
            socket.id = self.engine.id;
          });if (this.autoConnect) {
            onConnecting();
          }
        }function onConnecting() {
          if (! ~indexOf(self.connecting, socket)) {
            self.connecting.push(socket);
          }
        }return socket;
      };Manager.prototype.destroy = function (socket) {
        var index = indexOf(this.connecting, socket);if (~index) this.connecting.splice(index, 1);if (this.connecting.length) return;this.close();
      };Manager.prototype.packet = function (packet) {
        debug("writing packet %j", packet);var self = this;if (!self.encoding) {
          self.encoding = true;this.encoder.encode(packet, function (encodedPackets) {
            for (var i = 0; i < encodedPackets.length; i++) {
              self.engine.write(encodedPackets[i], packet.options);
            }self.encoding = false;self.processPacketQueue();
          });
        } else {
          self.packetBuffer.push(packet);
        }
      };Manager.prototype.processPacketQueue = function () {
        if (this.packetBuffer.length > 0 && !this.encoding) {
          var pack = this.packetBuffer.shift();this.packet(pack);
        }
      };Manager.prototype.cleanup = function () {
        debug("cleanup");var sub;while (sub = this.subs.shift()) sub.destroy();this.packetBuffer = [];this.encoding = false;this.lastPing = null;this.decoder.destroy();
      };Manager.prototype.close = Manager.prototype.disconnect = function () {
        debug("disconnect");this.skipReconnect = true;this.reconnecting = false;if ("opening" == this.readyState) {
          this.cleanup();
        }this.backoff.reset();this.readyState = "closed";if (this.engine) this.engine.close();
      };Manager.prototype.onclose = function (reason) {
        debug("onclose");this.cleanup();this.backoff.reset();this.readyState = "closed";this.emit("close", reason);if (this._reconnection && !this.skipReconnect) {
          this.reconnect();
        }
      };Manager.prototype.reconnect = function () {
        if (this.reconnecting || this.skipReconnect) return this;var self = this;if (this.backoff.attempts >= this._reconnectionAttempts) {
          debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting = false;
        } else {
          var delay = this.backoff.duration();debug("will wait %dms before reconnect attempt", delay);this.reconnecting = true;var timer = setTimeout(function () {
            if (self.skipReconnect) return;debug("attempting reconnect");self.emitAll("reconnect_attempt", self.backoff.attempts);self.emitAll("reconnecting", self.backoff.attempts);if (self.skipReconnect) return;self.open(function (err) {
              if (err) {
                debug("reconnect attempt error");self.reconnecting = false;self.reconnect();self.emitAll("reconnect_error", err.data);
              } else {
                debug("reconnect success");self.onreconnect();
              }
            });
          }, delay);this.subs.push({ destroy: function destroy() {
              clearTimeout(timer);
            } });
        }
      };Manager.prototype.onreconnect = function () {
        var attempt = this.backoff.attempts;this.reconnecting = false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect", attempt);
      };
    }, { "./on": 33, "./socket": 34, backo2: 36, "component-bind": 37, "component-emitter": 38, debug: 39, "engine.io-client": 1, indexof: 42, "socket.io-parser": 47 }], 33: [function (_dereq_, module, exports) {
      module.exports = on;function on(obj, ev, fn) {
        obj.on(ev, fn);return { destroy: function destroy() {
            obj.removeListener(ev, fn);
          } };
      }
    }, {}], 34: [function (_dereq_, module, exports) {
      var parser = _dereq_("socket.io-parser");var Emitter = _dereq_("component-emitter");var toArray = _dereq_("to-array");var on = _dereq_("./on");var bind = _dereq_("component-bind");var debug = _dereq_("debug")("socket.io-client:socket");var hasBin = _dereq_("has-binary");module.exports = exports = Socket;var events = { connect: 1, connect_error: 1, connect_timeout: 1, connecting: 1, disconnect: 1, error: 1, reconnect: 1, reconnect_attempt: 1, reconnect_failed: 1, reconnect_error: 1, reconnecting: 1, ping: 1, pong: 1 };var emit = Emitter.prototype.emit;function Socket(io, nsp) {
        this.io = io;this.nsp = nsp;this.json = this;this.ids = 0;this.acks = {};this.receiveBuffer = [];this.sendBuffer = [];this.connected = false;this.disconnected = true;if (this.io.autoConnect) this.open();
      }Emitter(Socket.prototype);Socket.prototype.subEvents = function () {
        if (this.subs) return;var io = this.io;this.subs = [on(io, "open", bind(this, "onopen")), on(io, "packet", bind(this, "onpacket")), on(io, "close", bind(this, "onclose"))];
      };Socket.prototype.open = Socket.prototype.connect = function () {
        if (this.connected) return this;this.subEvents();this.io.open();if ("open" == this.io.readyState) this.onopen();this.emit("connecting");return this;
      };Socket.prototype.send = function () {
        var args = toArray(arguments);args.unshift("message");this.emit.apply(this, args);return this;
      };Socket.prototype.emit = function (ev) {
        if (events.hasOwnProperty(ev)) {
          emit.apply(this, arguments);return this;
        }var args = toArray(arguments);var parserType = parser.EVENT;if (hasBin(args)) {
          parserType = parser.BINARY_EVENT;
        }var packet = { type: parserType, data: args };packet.options = {};packet.options.compress = !this.flags || false !== this.flags.compress;if ("function" == typeof args[args.length - 1]) {
          debug("emitting packet with ack id %d", this.ids);this.acks[this.ids] = args.pop();packet.id = this.ids++;
        }if (this.connected) {
          this.packet(packet);
        } else {
          this.sendBuffer.push(packet);
        }delete this.flags;return this;
      };Socket.prototype.packet = function (packet) {
        packet.nsp = this.nsp;this.io.packet(packet);
      };Socket.prototype.onopen = function () {
        debug("transport is open - connecting");if ("/" != this.nsp) {
          this.packet({ type: parser.CONNECT });
        }
      };Socket.prototype.onclose = function (reason) {
        debug("close (%s)", reason);this.connected = false;this.disconnected = true;delete this.id;this.emit("disconnect", reason);
      };Socket.prototype.onpacket = function (packet) {
        if (packet.nsp != this.nsp) return;switch (packet.type) {case parser.CONNECT:
            this.onconnect();break;case parser.EVENT:
            this.onevent(packet);break;case parser.BINARY_EVENT:
            this.onevent(packet);break;case parser.ACK:
            this.onack(packet);break;case parser.BINARY_ACK:
            this.onack(packet);break;case parser.DISCONNECT:
            this.ondisconnect();break;case parser.ERROR:
            this.emit("error", packet.data);break;}
      };Socket.prototype.onevent = function (packet) {
        var args = packet.data || [];debug("emitting event %j", args);if (null != packet.id) {
          debug("attaching ack callback to event");args.push(this.ack(packet.id));
        }if (this.connected) {
          emit.apply(this, args);
        } else {
          this.receiveBuffer.push(args);
        }
      };Socket.prototype.ack = function (id) {
        var self = this;var sent = false;return function () {
          if (sent) return;sent = true;var args = toArray(arguments);debug("sending ack %j", args);var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;self.packet({ type: type, id: id, data: args });
        };
      };Socket.prototype.onack = function (packet) {
        var ack = this.acks[packet.id];if ("function" == typeof ack) {
          debug("calling ack %s with %j", packet.id, packet.data);ack.apply(this, packet.data);delete this.acks[packet.id];
        } else {
          debug("bad ack %s", packet.id);
        }
      };Socket.prototype.onconnect = function () {
        this.connected = true;this.disconnected = false;this.emit("connect");this.emitBuffered();
      };Socket.prototype.emitBuffered = function () {
        var i;for (i = 0; i < this.receiveBuffer.length; i++) {
          emit.apply(this, this.receiveBuffer[i]);
        }this.receiveBuffer = [];for (i = 0; i < this.sendBuffer.length; i++) {
          this.packet(this.sendBuffer[i]);
        }this.sendBuffer = [];
      };Socket.prototype.ondisconnect = function () {
        debug("server disconnect (%s)", this.nsp);this.destroy();this.onclose("io server disconnect");
      };Socket.prototype.destroy = function () {
        if (this.subs) {
          for (var i = 0; i < this.subs.length; i++) {
            this.subs[i].destroy();
          }this.subs = null;
        }this.io.destroy(this);
      };Socket.prototype.close = Socket.prototype.disconnect = function () {
        if (this.connected) {
          debug("performing disconnect (%s)", this.nsp);this.packet({ type: parser.DISCONNECT });
        }this.destroy();if (this.connected) {
          this.onclose("io client disconnect");
        }return this;
      };Socket.prototype.compress = function (compress) {
        this.flags = this.flags || {};this.flags.compress = compress;return this;
      };
    }, { "./on": 33, "component-bind": 37, "component-emitter": 38, debug: 39, "has-binary": 41, "socket.io-parser": 47, "to-array": 51 }], 35: [function (_dereq_, module, exports) {
      (function (global) {
        var parseuri = _dereq_("parseuri");var debug = _dereq_("debug")("socket.io-client:url");module.exports = url;function url(uri, loc) {
          var obj = uri;var loc = loc || global.location;if (null == uri) uri = loc.protocol + "//" + loc.host;if ("string" == typeof uri) {
            if ("/" == uri.charAt(0)) {
              if ("/" == uri.charAt(1)) {
                uri = loc.protocol + uri;
              } else {
                uri = loc.host + uri;
              }
            }if (!/^(https?|wss?):\/\//.test(uri)) {
              debug("protocol-less url %s", uri);if ("undefined" != typeof loc) {
                uri = loc.protocol + "//" + uri;
              } else {
                uri = "https://" + uri;
              }
            }debug("parse %s", uri);obj = parseuri(uri);
          }if (!obj.port) {
            if (/^(http|ws)$/.test(obj.protocol)) {
              obj.port = "80";
            } else if (/^(http|ws)s$/.test(obj.protocol)) {
              obj.port = "443";
            }
          }obj.path = obj.path || "/";var ipv6 = obj.host.indexOf(":") !== -1;var host = ipv6 ? "[" + obj.host + "]" : obj.host;obj.id = obj.protocol + "://" + host + ":" + obj.port;obj.href = obj.protocol + "://" + host + (loc && loc.port == obj.port ? "" : ":" + obj.port);return obj;
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { debug: 39, parseuri: 45 }], 36: [function (_dereq_, module, exports) {
      module.exports = Backoff;function Backoff(opts) {
        opts = opts || {};this.ms = opts.min || 100;this.max = opts.max || 1e4;this.factor = opts.factor || 2;this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;this.attempts = 0;
      }Backoff.prototype.duration = function () {
        var ms = this.ms * Math.pow(this.factor, this.attempts++);if (this.jitter) {
          var rand = Math.random();var deviation = Math.floor(rand * this.jitter * ms);ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;
        }return Math.min(ms, this.max) | 0;
      };Backoff.prototype.reset = function () {
        this.attempts = 0;
      };Backoff.prototype.setMin = function (min) {
        this.ms = min;
      };Backoff.prototype.setMax = function (max) {
        this.max = max;
      };Backoff.prototype.setJitter = function (jitter) {
        this.jitter = jitter;
      };
    }, {}], 37: [function (_dereq_, module, exports) {
      var slice = [].slice;module.exports = function (obj, fn) {
        if ("string" == typeof fn) fn = obj[fn];if ("function" != typeof fn) throw new Error("bind() requires a function");var args = slice.call(arguments, 2);return function () {
          return fn.apply(obj, args.concat(slice.call(arguments)));
        };
      };
    }, {}], 38: [function (_dereq_, module, exports) {
      module.exports = Emitter;function Emitter(obj) {
        if (obj) return mixin(obj);
      }function mixin(obj) {
        for (var key in Emitter.prototype) {
          obj[key] = Emitter.prototype[key];
        }return obj;
      }Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};(this._callbacks["$" + event] = this._callbacks["$" + event] || []).push(fn);return this;
      };Emitter.prototype.once = function (event, fn) {
        function on() {
          this.off(event, on);fn.apply(this, arguments);
        }on.fn = fn;this.on(event, on);return this;
      };Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {
        this._callbacks = this._callbacks || {};if (0 == arguments.length) {
          this._callbacks = {};return this;
        }var callbacks = this._callbacks["$" + event];if (!callbacks) return this;if (1 == arguments.length) {
          delete this._callbacks["$" + event];return this;
        }var cb;for (var i = 0; i < callbacks.length; i++) {
          cb = callbacks[i];if (cb === fn || cb.fn === fn) {
            callbacks.splice(i, 1);break;
          }
        }return this;
      };Emitter.prototype.emit = function (event) {
        this._callbacks = this._callbacks || {};var args = [].slice.call(arguments, 1),
            callbacks = this._callbacks["$" + event];if (callbacks) {
          callbacks = callbacks.slice(0);for (var i = 0, len = callbacks.length; i < len; ++i) {
            callbacks[i].apply(this, args);
          }
        }return this;
      };Emitter.prototype.listeners = function (event) {
        this._callbacks = this._callbacks || {};return this._callbacks["$" + event] || [];
      };Emitter.prototype.hasListeners = function (event) {
        return !!this.listeners(event).length;
      };
    }, {}], 39: [function (_dereq_, module, exports) {
      arguments[4][17][0].apply(exports, arguments);
    }, { "./debug": 40, dup: 17 }], 40: [function (_dereq_, module, exports) {
      arguments[4][18][0].apply(exports, arguments);
    }, { dup: 18, ms: 44 }], 41: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");module.exports = hasBinary;function hasBinary(data) {
          function _hasBinary(obj) {
            if (!obj) return false;if (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer || global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              return true;
            }if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                if (_hasBinary(obj[i])) {
                  return true;
                }
              }
            } else if (obj && "object" == typeof obj) {
              if (obj.toJSON && "function" == typeof obj.toJSON) {
                obj = obj.toJSON();
              }for (var key in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {
                  return true;
                }
              }
            }return false;
          }return _hasBinary(data);
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { isarray: 43 }], 42: [function (_dereq_, module, exports) {
      arguments[4][23][0].apply(exports, arguments);
    }, { dup: 23 }], 43: [function (_dereq_, module, exports) {
      arguments[4][24][0].apply(exports, arguments);
    }, { dup: 24 }], 44: [function (_dereq_, module, exports) {
      arguments[4][25][0].apply(exports, arguments);
    }, { dup: 25 }], 45: [function (_dereq_, module, exports) {
      arguments[4][28][0].apply(exports, arguments);
    }, { dup: 28 }], 46: [function (_dereq_, module, exports) {
      (function (global) {
        var isArray = _dereq_("isarray");var isBuf = _dereq_("./is-buffer");exports.deconstructPacket = function (packet) {
          var buffers = [];var packetData = packet.data;function _deconstructPacket(data) {
            if (!data) return data;if (isBuf(data)) {
              var placeholder = { _placeholder: true, num: buffers.length };buffers.push(data);return placeholder;
            } else if (isArray(data)) {
              var newData = new Array(data.length);for (var i = 0; i < data.length; i++) {
                newData[i] = _deconstructPacket(data[i]);
              }return newData;
            } else if ("object" == typeof data && !(data instanceof Date)) {
              var newData = {};for (var key in data) {
                newData[key] = _deconstructPacket(data[key]);
              }return newData;
            }return data;
          }var pack = packet;pack.data = _deconstructPacket(packetData);pack.attachments = buffers.length;return { packet: pack, buffers: buffers };
        };exports.reconstructPacket = function (packet, buffers) {
          var curPlaceHolder = 0;function _reconstructPacket(data) {
            if (data && data._placeholder) {
              var buf = buffers[data.num];return buf;
            } else if (isArray(data)) {
              for (var i = 0; i < data.length; i++) {
                data[i] = _reconstructPacket(data[i]);
              }return data;
            } else if (data && "object" == typeof data) {
              for (var key in data) {
                data[key] = _reconstructPacket(data[key]);
              }return data;
            }return data;
          }packet.data = _reconstructPacket(packet.data);packet.attachments = undefined;return packet;
        };exports.removeBlobs = function (data, callback) {
          function _removeBlobs(obj, curKey, containingObject) {
            if (!obj) return obj;if (global.Blob && obj instanceof Blob || global.File && obj instanceof File) {
              pendingBlobs++;var fileReader = new FileReader();fileReader.onload = function () {
                if (containingObject) {
                  containingObject[curKey] = this.result;
                } else {
                  bloblessData = this.result;
                }if (! --pendingBlobs) {
                  callback(bloblessData);
                }
              };fileReader.readAsArrayBuffer(obj);
            } else if (isArray(obj)) {
              for (var i = 0; i < obj.length; i++) {
                _removeBlobs(obj[i], i, obj);
              }
            } else if (obj && "object" == typeof obj && !isBuf(obj)) {
              for (var key in obj) {
                _removeBlobs(obj[key], key, obj);
              }
            }
          }var pendingBlobs = 0;var bloblessData = data;_removeBlobs(bloblessData);if (!pendingBlobs) {
            callback(bloblessData);
          }
        };
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, { "./is-buffer": 48, isarray: 43 }], 47: [function (_dereq_, module, exports) {
      var debug = _dereq_("debug")("socket.io-parser");var json = _dereq_("json3");var isArray = _dereq_("isarray");var Emitter = _dereq_("component-emitter");var binary = _dereq_("./binary");var isBuf = _dereq_("./is-buffer");exports.protocol = 4;exports.types = ["CONNECT", "DISCONNECT", "EVENT", "BINARY_EVENT", "ACK", "BINARY_ACK", "ERROR"];exports.CONNECT = 0;exports.DISCONNECT = 1;exports.EVENT = 2;exports.ACK = 3;exports.ERROR = 4;exports.BINARY_EVENT = 5;exports.BINARY_ACK = 6;exports.Encoder = Encoder;exports.Decoder = Decoder;function Encoder() {}Encoder.prototype.encode = function (obj, callback) {
        debug("encoding packet %j", obj);if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {
          encodeAsBinary(obj, callback);
        } else {
          var encoding = encodeAsString(obj);callback([encoding]);
        }
      };function encodeAsString(obj) {
        var str = "";var nsp = false;str += obj.type;if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {
          str += obj.attachments;str += "-";
        }if (obj.nsp && "/" != obj.nsp) {
          nsp = true;str += obj.nsp;
        }if (null != obj.id) {
          if (nsp) {
            str += ",";nsp = false;
          }str += obj.id;
        }if (null != obj.data) {
          if (nsp) str += ",";str += json.stringify(obj.data);
        }debug("encoded %j as %s", obj, str);return str;
      }function encodeAsBinary(obj, callback) {
        function writeEncoding(bloblessData) {
          var deconstruction = binary.deconstructPacket(bloblessData);var pack = encodeAsString(deconstruction.packet);var buffers = deconstruction.buffers;buffers.unshift(pack);callback(buffers);
        }binary.removeBlobs(obj, writeEncoding);
      }function Decoder() {
        this.reconstructor = null;
      }Emitter(Decoder.prototype);Decoder.prototype.add = function (obj) {
        var packet;if ("string" == typeof obj) {
          packet = decodeString(obj);if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) {
            this.reconstructor = new BinaryReconstructor(packet);if (this.reconstructor.reconPack.attachments === 0) {
              this.emit("decoded", packet);
            }
          } else {
            this.emit("decoded", packet);
          }
        } else if (isBuf(obj) || obj.base64) {
          if (!this.reconstructor) {
            throw new Error("got binary data when not reconstructing a packet");
          } else {
            packet = this.reconstructor.takeBinaryData(obj);if (packet) {
              this.reconstructor = null;this.emit("decoded", packet);
            }
          }
        } else {
          throw new Error("Unknown type: " + obj);
        }
      };function decodeString(str) {
        var p = {};var i = 0;p.type = Number(str.charAt(0));if (null == exports.types[p.type]) return error();if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {
          var buf = "";while (str.charAt(++i) != "-") {
            buf += str.charAt(i);if (i == str.length) break;
          }if (buf != Number(buf) || str.charAt(i) != "-") {
            throw new Error("Illegal attachments");
          }p.attachments = Number(buf);
        }if ("/" == str.charAt(i + 1)) {
          p.nsp = "";while (++i) {
            var c = str.charAt(i);if ("," == c) break;p.nsp += c;if (i == str.length) break;
          }
        } else {
          p.nsp = "/";
        }var next = str.charAt(i + 1);if ("" !== next && Number(next) == next) {
          p.id = "";while (++i) {
            var c = str.charAt(i);if (null == c || Number(c) != c) {
              --i;break;
            }p.id += str.charAt(i);if (i == str.length) break;
          }p.id = Number(p.id);
        }if (str.charAt(++i)) {
          try {
            p.data = json.parse(str.substr(i));
          } catch (e) {
            return error();
          }
        }debug("decoded %s as %j", str, p);return p;
      }Decoder.prototype.destroy = function () {
        if (this.reconstructor) {
          this.reconstructor.finishedReconstruction();
        }
      };function BinaryReconstructor(packet) {
        this.reconPack = packet;this.buffers = [];
      }BinaryReconstructor.prototype.takeBinaryData = function (binData) {
        this.buffers.push(binData);if (this.buffers.length == this.reconPack.attachments) {
          var packet = binary.reconstructPacket(this.reconPack, this.buffers);this.finishedReconstruction();return packet;
        }return null;
      };BinaryReconstructor.prototype.finishedReconstruction = function () {
        this.reconPack = null;this.buffers = [];
      };function error(data) {
        return { type: exports.ERROR, data: "parser error" };
      }
    }, { "./binary": 46, "./is-buffer": 48, "component-emitter": 49, debug: 39, isarray: 43, json3: 50 }], 48: [function (_dereq_, module, exports) {
      (function (global) {
        module.exports = isBuf;function isBuf(obj) {
          return global.Buffer && global.Buffer.isBuffer(obj) || global.ArrayBuffer && obj instanceof ArrayBuffer;
        }
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 49: [function (_dereq_, module, exports) {
      arguments[4][15][0].apply(exports, arguments);
    }, { dup: 15 }], 50: [function (_dereq_, module, exports) {
      (function (global) {
        (function () {
          var isLoader = typeof define === "function" && define.amd;var objectTypes = { "function": true, object: true };var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;var root = objectTypes[typeof window] && window || this,
              freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == "object" && global;if (freeGlobal && (freeGlobal["global"] === freeGlobal || freeGlobal["window"] === freeGlobal || freeGlobal["self"] === freeGlobal)) {
            root = freeGlobal;
          }function runInContext(context, exports) {
            context || (context = root["Object"]());exports || (exports = root["Object"]());var Number = context["Number"] || root["Number"],
                String = context["String"] || root["String"],
                Object = context["Object"] || root["Object"],
                Date = context["Date"] || root["Date"],
                SyntaxError = context["SyntaxError"] || root["SyntaxError"],
                TypeError = context["TypeError"] || root["TypeError"],
                Math = context["Math"] || root["Math"],
                nativeJSON = context["JSON"] || root["JSON"];if (typeof nativeJSON == "object" && nativeJSON) {
              exports.stringify = nativeJSON.stringify;exports.parse = nativeJSON.parse;
            }var objectProto = Object.prototype,
                getClass = objectProto.toString,
                isProperty,
                forEach,
                undef;var isExtended = new Date(-0xc782b5b800cec);try {
              isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 && isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;
            } catch (exception) {}function has(name) {
              if (has[name] !== undef) {
                return has[name];
              }var isSupported;if (name == "bug-string-char-index") {
                isSupported = "a"[0] != "a";
              } else if (name == "json") {
                isSupported = has("json-stringify") && has("json-parse");
              } else {
                var value,
                    serialized = "{\"a\":[1,true,false,null,\"\\u0000\\b\\n\\f\\r\\t\"]}";if (name == "json-stringify") {
                  var stringify = exports.stringify,
                      stringifySupported = typeof stringify == "function" && isExtended;if (stringifySupported) {
                    (value = function () {
                      return 1;
                    }).toJSON = value;try {
                      stringifySupported = stringify(0) === "0" && stringify(new Number()) === "0" && stringify(new String()) == '""' && stringify(getClass) === undef && stringify(undef) === undef && stringify() === undef && stringify(value) === "1" && stringify([value]) == "[1]" && stringify([undef]) == "[null]" && stringify(null) == "null" && stringify([undef, getClass, null]) == "[null,null,null]" && stringify({ a: [value, true, false, null, "\x00\b\n\f\r	"] }) == serialized && stringify(null, value) === "1" && stringify([1, 2], null, 1) == "[\n 1,\n 2\n]" && stringify(new Date(-864e13)) == '"-271821-04-20T00:00:00.000Z"' && stringify(new Date(864e13)) == '"+275760-09-13T00:00:00.000Z"' && stringify(new Date(-621987552e5)) == '"-000001-01-01T00:00:00.000Z"' && stringify(new Date(-1)) == '"1969-12-31T23:59:59.999Z"';
                    } catch (exception) {
                      stringifySupported = false;
                    }
                  }isSupported = stringifySupported;
                }if (name == "json-parse") {
                  var parse = exports.parse;if (typeof parse == "function") {
                    try {
                      if (parse("0") === 0 && !parse(false)) {
                        value = parse(serialized);var parseSupported = value["a"].length == 5 && value["a"][0] === 1;if (parseSupported) {
                          try {
                            parseSupported = !parse('"	"');
                          } catch (exception) {}if (parseSupported) {
                            try {
                              parseSupported = parse("01") !== 1;
                            } catch (exception) {}
                          }if (parseSupported) {
                            try {
                              parseSupported = parse("1.") !== 1;
                            } catch (exception) {}
                          }
                        }
                      }
                    } catch (exception) {
                      parseSupported = false;
                    }
                  }isSupported = parseSupported;
                }
              }return has[name] = !!isSupported;
            }if (!has("json")) {
              var functionClass = "[object Function]",
                  dateClass = "[object Date]",
                  numberClass = "[object Number]",
                  stringClass = "[object String]",
                  arrayClass = "[object Array]",
                  booleanClass = "[object Boolean]";var charIndexBuggy = has("bug-string-char-index");if (!isExtended) {
                var floor = Math.floor;var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];var getDay = function getDay(year, month) {
                  return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);
                };
              }if (!(isProperty = objectProto.hasOwnProperty)) {
                isProperty = function (property) {
                  var members = {},
                      constructor;if ((members.__proto__ = null, members.__proto__ = { toString: 1 }, members).toString != getClass) {
                    isProperty = function (property) {
                      var original = this.__proto__,
                          result = (property in (this.__proto__ = null, this));this.__proto__ = original;return result;
                    };
                  } else {
                    constructor = members.constructor;isProperty = function (property) {
                      var parent = (this.constructor || constructor).prototype;return property in this && !(property in parent && this[property] === parent[property]);
                    };
                  }members = null;return isProperty.call(this, property);
                };
              }forEach = function (object, callback) {
                var size = 0,
                    Properties,
                    members,
                    property;(Properties = function () {
                  this.valueOf = 0;
                }).prototype.valueOf = 0;members = new Properties();for (property in members) {
                  if (isProperty.call(members, property)) {
                    size++;
                  }
                }Properties = members = null;if (!size) {
                  members = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];forEach = function (object, callback) {
                    var isFunction = getClass.call(object) == functionClass,
                        property,
                        length;var hasProperty = !isFunction && typeof object.constructor != "function" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;for (property in object) {
                      if (!(isFunction && property == "prototype") && hasProperty.call(object, property)) {
                        callback(property);
                      }
                    }for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));
                  };
                } else if (size == 2) {
                  forEach = function (object, callback) {
                    var members = {},
                        isFunction = getClass.call(object) == functionClass,
                        property;for (property in object) {
                      if (!(isFunction && property == "prototype") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {
                        callback(property);
                      }
                    }
                  };
                } else {
                  forEach = function (object, callback) {
                    var isFunction = getClass.call(object) == functionClass,
                        property,
                        isConstructor;for (property in object) {
                      if (!(isFunction && property == "prototype") && isProperty.call(object, property) && !(isConstructor = property === "constructor")) {
                        callback(property);
                      }
                    }if (isConstructor || isProperty.call(object, property = "constructor")) {
                      callback(property);
                    }
                  };
                }return forEach(object, callback);
              };if (!has("json-stringify")) {
                var Escapes = { 92: "\\\\", 34: '\\"', 8: "\\b", 12: "\\f", 10: "\\n", 13: "\\r", 9: "\\t" };var leadingZeroes = "000000";var toPaddedString = function toPaddedString(width, value) {
                  return (leadingZeroes + (value || 0)).slice(-width);
                };var unicodePrefix = "\\u00";var quote = function quote(value) {
                  var result = '"',
                      index = 0,
                      length = value.length,
                      useCharIndex = !charIndexBuggy || length > 10;var symbols = useCharIndex && (charIndexBuggy ? value.split("") : value);for (; index < length; index++) {
                    var charCode = value.charCodeAt(index);switch (charCode) {case 8:case 9:case 10:case 12:case 13:case 34:case 92:
                        result += Escapes[charCode];break;default:
                        if (charCode < 32) {
                          result += unicodePrefix + toPaddedString(2, charCode.toString(16));break;
                        }result += useCharIndex ? symbols[index] : value.charAt(index);}
                  }return result + '"';
                };var serialize = function serialize(property, object, callback, properties, whitespace, indentation, stack) {
                  var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;try {
                    value = object[property];
                  } catch (exception) {}if (typeof value == "object" && value) {
                    className = getClass.call(value);if (className == dateClass && !isProperty.call(value, "toJSON")) {
                      if (value > -1 / 0 && value < 1 / 0) {
                        if (getDay) {
                          date = floor(value / 864e5);for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);date = 1 + date - getDay(year, month);time = (value % 864e5 + 864e5) % 864e5;hours = floor(time / 36e5) % 24;minutes = floor(time / 6e4) % 60;seconds = floor(time / 1e3) % 60;milliseconds = time % 1e3;
                        } else {
                          year = value.getUTCFullYear();month = value.getUTCMonth();date = value.getUTCDate();hours = value.getUTCHours();minutes = value.getUTCMinutes();seconds = value.getUTCSeconds();milliseconds = value.getUTCMilliseconds();
                        }value = (year <= 0 || year >= 1e4 ? (year < 0 ? "-" : "+") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + "-" + toPaddedString(2, month + 1) + "-" + toPaddedString(2, date) + "T" + toPaddedString(2, hours) + ":" + toPaddedString(2, minutes) + ":" + toPaddedString(2, seconds) + "." + toPaddedString(3, milliseconds) + "Z";
                      } else {
                        value = null;
                      }
                    } else if (typeof value.toJSON == "function" && (className != numberClass && className != stringClass && className != arrayClass || isProperty.call(value, "toJSON"))) {
                      value = value.toJSON(property);
                    }
                  }if (callback) {
                    value = callback.call(object, property, value);
                  }if (value === null) {
                    return "null";
                  }className = getClass.call(value);if (className == booleanClass) {
                    return "" + value;
                  } else if (className == numberClass) {
                    return value > -1 / 0 && value < 1 / 0 ? "" + value : "null";
                  } else if (className == stringClass) {
                    return quote("" + value);
                  }if (typeof value == "object") {
                    for (length = stack.length; length--;) {
                      if (stack[length] === value) {
                        throw TypeError();
                      }
                    }stack.push(value);results = [];prefix = indentation;indentation += whitespace;if (className == arrayClass) {
                      for (index = 0, length = value.length; index < length; index++) {
                        element = serialize(index, value, callback, properties, whitespace, indentation, stack);results.push(element === undef ? "null" : element);
                      }result = results.length ? whitespace ? "[\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "]" : "[" + results.join(",") + "]" : "[]";
                    } else {
                      forEach(properties || value, function (property) {
                        var element = serialize(property, value, callback, properties, whitespace, indentation, stack);if (element !== undef) {
                          results.push(quote(property) + ":" + (whitespace ? " " : "") + element);
                        }
                      });result = results.length ? whitespace ? "{\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "}" : "{" + results.join(",") + "}" : "{}";
                    }stack.pop();return result;
                  }
                };exports.stringify = function (source, filter, width) {
                  var whitespace, callback, properties, className;if (objectTypes[typeof filter] && filter) {
                    if ((className = getClass.call(filter)) == functionClass) {
                      callback = filter;
                    } else if (className == arrayClass) {
                      properties = {};for (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1));
                    }
                  }if (width) {
                    if ((className = getClass.call(width)) == numberClass) {
                      if ((width -= width % 1) > 0) {
                        for (whitespace = "", width > 10 && (width = 10); whitespace.length < width; whitespace += " ");
                      }
                    } else if (className == stringClass) {
                      whitespace = width.length <= 10 ? width : width.slice(0, 10);
                    }
                  }return serialize("", (value = {}, value[""] = source, value), callback, properties, whitespace, "", []);
                };
              }if (!has("json-parse")) {
                var fromCharCode = String.fromCharCode;var Unescapes = { 92: "\\", 34: '"', 47: "/", 98: "\b", 116: "	", 110: "\n", 102: "\f", 114: "\r" };var Index, Source;var abort = function abort() {
                  Index = Source = null;throw SyntaxError();
                };var lex = function lex() {
                  var source = Source,
                      length = source.length,
                      value,
                      begin,
                      position,
                      isSigned,
                      charCode;while (Index < length) {
                    charCode = source.charCodeAt(Index);switch (charCode) {case 9:case 10:case 13:case 32:
                        Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:
                        value = charIndexBuggy ? source.charAt(Index) : source[Index];Index++;return value;case 34:
                        for (value = "@", Index++; Index < length;) {
                          charCode = source.charCodeAt(Index);if (charCode < 32) {
                            abort();
                          } else if (charCode == 92) {
                            charCode = source.charCodeAt(++Index);switch (charCode) {case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:
                                value += Unescapes[charCode];Index++;break;case 117:
                                begin = ++Index;for (position = Index + 4; Index < position; Index++) {
                                  charCode = source.charCodeAt(Index);if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {
                                    abort();
                                  }
                                }value += fromCharCode("0x" + source.slice(begin, Index));break;default:
                                abort();}
                          } else {
                            if (charCode == 34) {
                              break;
                            }charCode = source.charCodeAt(Index);begin = Index;while (charCode >= 32 && charCode != 92 && charCode != 34) {
                              charCode = source.charCodeAt(++Index);
                            }value += source.slice(begin, Index);
                          }
                        }if (source.charCodeAt(Index) == 34) {
                          Index++;return value;
                        }abort();default:
                        begin = Index;if (charCode == 45) {
                          isSigned = true;charCode = source.charCodeAt(++Index);
                        }if (charCode >= 48 && charCode <= 57) {
                          if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {
                            abort();
                          }isSigned = false;for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++);if (source.charCodeAt(Index) == 46) {
                            position = ++Index;for (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);if (position == Index) {
                              abort();
                            }Index = position;
                          }charCode = source.charCodeAt(Index);if (charCode == 101 || charCode == 69) {
                            charCode = source.charCodeAt(++Index);if (charCode == 43 || charCode == 45) {
                              Index++;
                            }for (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);if (position == Index) {
                              abort();
                            }Index = position;
                          }return +source.slice(begin, Index);
                        }if (isSigned) {
                          abort();
                        }if (source.slice(Index, Index + 4) == "true") {
                          Index += 4;return true;
                        } else if (source.slice(Index, Index + 5) == "false") {
                          Index += 5;return false;
                        } else if (source.slice(Index, Index + 4) == "null") {
                          Index += 4;return null;
                        }abort();}
                  }return "$";
                };var get = function get(value) {
                  var results, hasMembers;if (value == "$") {
                    abort();
                  }if (typeof value == "string") {
                    if ((charIndexBuggy ? value.charAt(0) : value[0]) == "@") {
                      return value.slice(1);
                    }if (value == "[") {
                      results = [];for (;; hasMembers || (hasMembers = true)) {
                        value = lex();if (value == "]") {
                          break;
                        }if (hasMembers) {
                          if (value == ",") {
                            value = lex();if (value == "]") {
                              abort();
                            }
                          } else {
                            abort();
                          }
                        }if (value == ",") {
                          abort();
                        }results.push(get(value));
                      }return results;
                    } else if (value == "{") {
                      results = {};for (;; hasMembers || (hasMembers = true)) {
                        value = lex();if (value == "}") {
                          break;
                        }if (hasMembers) {
                          if (value == ",") {
                            value = lex();if (value == "}") {
                              abort();
                            }
                          } else {
                            abort();
                          }
                        }if (value == "," || typeof value != "string" || (charIndexBuggy ? value.charAt(0) : value[0]) != "@" || lex() != ":") {
                          abort();
                        }results[value.slice(1)] = get(lex());
                      }return results;
                    }abort();
                  }return value;
                };var update = function update(source, property, callback) {
                  var element = walk(source, property, callback);if (element === undef) {
                    delete source[property];
                  } else {
                    source[property] = element;
                  }
                };var walk = function walk(source, property, callback) {
                  var value = source[property],
                      length;if (typeof value == "object" && value) {
                    if (getClass.call(value) == arrayClass) {
                      for (length = value.length; length--;) {
                        update(value, length, callback);
                      }
                    } else {
                      forEach(value, function (property) {
                        update(value, property, callback);
                      });
                    }
                  }return callback.call(source, property, value);
                };exports.parse = function (source, callback) {
                  var result, value;Index = 0;Source = "" + source;result = get(lex());if (lex() != "$") {
                    abort();
                  }Index = Source = null;return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[""] = result, value), "", callback) : result;
                };
              }
            }exports["runInContext"] = runInContext;return exports;
          }if (freeExports && !isLoader) {
            runInContext(root, freeExports);
          } else {
            var nativeJSON = root.JSON,
                previousJSON = root["JSON3"],
                isRestored = false;var JSON3 = runInContext(root, root["JSON3"] = { noConflict: function noConflict() {
                if (!isRestored) {
                  isRestored = true;root.JSON = nativeJSON;root["JSON3"] = previousJSON;nativeJSON = previousJSON = null;
                }return JSON3;
              } });root.JSON = { parse: JSON3.parse, stringify: JSON3.stringify };
          }if (isLoader) {
            define(function () {
              return JSON3;
            });
          }
        }).call(this);
      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
    }, {}], 51: [function (_dereq_, module, exports) {
      module.exports = toArray;function toArray(list, index) {
        var array = [];index = index || 0;for (var i = index || 0; i < list.length; i++) {
          array[i - index] = list[i];
        }return array;
      }
    }, {}] }, {}, [31])(31);
});

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"user":[function(require,module,exports){
"use strict";
cc._RFpush(module, '43c66988rFH6b+xxyWSsbTi', 'user');
// biz/user/script/user.js

function User(user) {
    // this.tankBody = 0;
    // this.tankHead = 0;
    // this.tankWheel = 0;
    // this.diamond = 1000;
    // this.kill = 10;
    // this.dead = 10;
}

User.prototype.init = function (user) {
    // this._id = user.Id;
    // this.username = user.Username;
    // this.nickname = user.Nickname;
    this.diamond = user.Diamond;
    this.kill = user.Kill;
    this.dead = user.Dead;
    this.tankBody = user.TankBody;
    this.tankHead = user.TankHead;
    this.tankWheel = user.TankWheel;
};

User.prototype.cost = function (type, cost) {
    this[type]++;
    this.diamond -= cost;
};

module.exports = new User();

cc._RFpop();
},{}],"utils":[function(require,module,exports){
"use strict";
cc._RFpush(module, '089aaTNnbBBA5p0EPcRxU5w', 'utils');
// lib/utils.js



cc._RFpop();
},{}]},{},["utils","equip_data","equip_item","main","socket.io","user","api","register","controller","connect","login","qwest","equip_infobox","lodash","equip","fire","direct"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9Db2Nvc0NyZWF0b3IuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9hcHAuYXNhci9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vQXBwbGljYXRpb25zL0NvY29zQ3JlYXRvci5hcHAvQ29udGVudHMvUmVzb3VyY2VzL2FwcC5hc2FyL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJhc3NldHMvbGliL2FwaS5qcyIsImFzc2V0cy9iaXovY29ubmVjdC9zY3JpcHQvY29ubmVjdC5qcyIsImFzc2V0cy9iaXovY29udHJvbGxlci9zY3JpcHQvY29udHJvbGxlci5qcyIsImFzc2V0cy9iaXovY29udHJvbGxlci9zY3JpcHQvZGlyZWN0LmpzIiwiYXNzZXRzL2Jpei9lcXVpcC9zY3JpcHQvZXF1aXBfZGF0YS5qcyIsImFzc2V0cy9iaXovZXF1aXAvc2NyaXB0L2VxdWlwX2luZm9ib3guanMiLCJhc3NldHMvYml6L2VxdWlwL3NjcmlwdC9lcXVpcF9pdGVtLmpzIiwiYXNzZXRzL2Jpei9lcXVpcC9zY3JpcHQvZXF1aXAuanMiLCJhc3NldHMvYml6L2NvbnRyb2xsZXIvc2NyaXB0L2ZpcmUuanMiLCJhc3NldHMvbGliL2xvZGFzaC5qcyIsImFzc2V0cy9iaXovbG9naW4vc2NyaXB0L2xvZ2luLmpzIiwiYXNzZXRzL2Jpei9tYWluL3NjcmlwdC9tYWluLmpzIiwiYXNzZXRzL2xpYi9xd2VzdC5qcyIsImFzc2V0cy9iaXovbG9naW4vc2NyaXB0L3JlZ2lzdGVyLmpzIiwiYXNzZXRzL2xpYi9zb2NrZXQuaW8uanMiLCJhc3NldHMvYml6L3VzZXIvc2NyaXB0L3VzZXIuanMiLCJhc3NldHMvbGliL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0aEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnNGMxNjlwbnUxVkpxSWdDMnVtRFhqODknLCAnYXBpJyk7XG4vLyBsaWIvYXBpLmpzXG5cbnZhciBxd2VzdCA9IHJlcXVpcmUoJ3F3ZXN0Jyk7XG5cbnZhciBhamF4ID0gZnVuY3Rpb24gYWpheCh0eXBlLCB1cmwsIGRhdGEpIHtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcXdlc3QubWFwKHR5cGUsIHVybCwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5vaykge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG52YXIgYXBpID0ge1xuICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihkYXRhKSB7XG4gICAgICAgIHJldHVybiBhamF4KCdQT1NUJywgJ2h0dHA6Ly8xMjcuMC4wLjE6ODEyMy9hcGkvbG9naW4vJywgZGF0YSk7XG4gICAgfSxcbiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoZGF0YSkge1xuICAgICAgICByZXR1cm4gYWpheCgnUE9TVCcsICdodHRwOi8vMTI3LjAuMC4xOjgxMjMvYXBpL3JlZ2lzdGVyLycsIGRhdGEpO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuICAgICAgICByZXR1cm4gYWpheCgnUEFUQ0gnLCAnaHR0cDovLzEyNy4wLjAuMTo4MTIzL2FwaS91c2VyLycsIGRhdGEpO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gYXBpO1xuXG5jYy5fUkZwb3AoKTsiLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnNjI4YjFTbTFqOUxSWXJiTUdwTFBsanInLCAnY29ubmVjdCcpO1xuLy8gYml6L2Nvbm5lY3Qvc2NyaXB0L2Nvbm5lY3QuanNcblxudmFyIHNpbyA9IHJlcXVpcmUoJ3NvY2tldC5pbycpO1xudmFyIFVzZXIgPSByZXF1aXJlKCd1c2VyJyk7XG5cbnZhciBDb25uZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgVVJJID0gJzEwLjEwLjEuMzg6MzAwMC90YW5rQ29udHJvbGxlcnMnO1xuXG4gICAgdmFyIHdzO1xuXG4gICAgdmFyIGNvbm5lY3QgPSBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgICB3cyA9IHNpbyhVUkkgKyAnP3VpZD0nICsgVXNlci5JZCk7XG4gICAgfTtcblxuICAgIHZhciBkaXNjb25uZWN0ID0gZnVuY3Rpb24gZGlzY29ubmVjdCgpIHtcbiAgICAgICAgd3MuZGlzY29ubmVjdCgpO1xuICAgIH07XG5cbiAgICB2YXIgb24gPSBmdW5jdGlvbiBvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHdzLm9uKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnROYW1lLCBldmVudE9iaikge1xuICAgICAgICB3cy5lbWl0KGV2ZW50TmFtZSwge1xuICAgICAgICAgICAgdWlkOiBVc2VyLklkLFxuICAgICAgICAgICAgZGF0YTogZXZlbnRPYmpcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbm5lY3Q6IGNvbm5lY3QsXG4gICAgICAgIGRpc2Nvbm5lY3Q6IGRpc2Nvbm5lY3QsXG4gICAgICAgIG9uOiBvbixcbiAgICAgICAgZW1pdDogZW1pdFxuICAgIH07XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbm5lY3Q7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICc1Njc2MTVzZWZoSTk0Zy8wdFFUS1E2bycsICdjb250cm9sbGVyJyk7XG4vLyBiaXovY29udHJvbGxlci9zY3JpcHQvY29udHJvbGxlci5qc1xuXG52YXIgQ29ubmVjdCA9IHJlcXVpcmUoJ2Nvbm5lY3QnKTtcblxuY2MuQ2xhc3Moe1xuICAgICdleHRlbmRzJzogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge30sXG5cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHt9LFxuXG4gICAgYmFja0hhbmRsZXI6IGZ1bmN0aW9uIGJhY2tIYW5kbGVyKCkge1xuICAgICAgICBDb25uZWN0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdNYWluJyk7XG4gICAgfVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICdkODRmNTgzVitOTmNhSzg3Nnk3ZnpEcCcsICdkaXJlY3QnKTtcbi8vIGJpei9jb250cm9sbGVyL3NjcmlwdC9kaXJlY3QuanNcblxudmFyIENvbm5lY3QgPSByZXF1aXJlKCdjb25uZWN0Jyk7XG5cbmNjLkNsYXNzKHtcbiAgICAnZXh0ZW5kcyc6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgZm9sbG93ZXI6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgZGlyZWN0aW9uOiA0XG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgICAgICB0aGlzLnNldFRvdWNoQ29udHJvbCgpO1xuICAgICAgICB0aGlzLm9uU2VuZERpcmVjdGlvbigpO1xuICAgIH0sXG5cbiAgICBzZXRUb3VjaENvbnRyb2w6IGZ1bmN0aW9uIHNldFRvdWNoQ29udHJvbCgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBjYy5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoe1xuICAgICAgICAgICAgZXZlbnQ6IGNjLkV2ZW50TGlzdGVuZXIuVE9VQ0hfT05FX0JZX09ORSxcbiAgICAgICAgICAgIG9uVG91Y2hCZWdhbjogc2VsZi5vblRvdWNoQmVnaW4uYmluZChzZWxmKSxcbiAgICAgICAgICAgIG9uVG91Y2hNb3ZlZDogc2VsZi5vblRvdWNoTW92ZS5iaW5kKHNlbGYpLFxuICAgICAgICAgICAgb25Ub3VjaEVuZGVkOiBzZWxmLm9uVG91Y2hFbmQuYmluZChzZWxmKVxuICAgICAgICB9LCBzZWxmLm5vZGUpO1xuICAgIH0sXG5cbiAgICBfZ2V0QW5nbGU6IGZ1bmN0aW9uIF9nZXRBbmdsZShwb3MpIHtcbiAgICAgICAgdGhpcy5hbmdsZSA9IE1hdGguYXRhbjIocG9zLnksIHBvcy54KSAvIDMuMTQxNTkyNiAqIDE4MDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGU7XG4gICAgfSxcblxuICAgIF9nZXRSYWRpYW5zOiBmdW5jdGlvbiBfZ2V0UmFkaWFucyhwb3MpIHtcbiAgICAgICAgdGhpcy5yYWRpYW5zID0gTWF0aC5hdGFuMihwb3MueSwgcG9zLngpO1xuICAgICAgICByZXR1cm4gdGhpcy5yYWRpYW5zO1xuICAgIH0sXG5cbiAgICBfZ2V0TGVuZ3RoOiBmdW5jdGlvbiBfZ2V0TGVuZ3RoKHBvcykge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHBvcy54ICogcG9zLnggKyBwb3MueSAqIHBvcy55KTtcbiAgICB9LFxuXG4gICAgb25Ub3VjaEJlZ2luOiBmdW5jdGlvbiBvblRvdWNoQmVnaW4odG91Y2gsIGV2ZW50KSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmZvbGxvd2VyO1xuICAgICAgICB2YXIgdG91Y2hMb2MgPSB0b3VjaC5nZXRMb2NhdGlvbigpO1xuICAgICAgICB2YXIgbG9jSW5Ob2RlID0gdGhpcy5ub2RlLmNvbnZlcnRUb05vZGVTcGFjZUFSKHRvdWNoTG9jKTtcbiAgICAgICAgdmFyIHRtcExlbmd0aCA9IHRoaXMuX2dldExlbmd0aChsb2NJbk5vZGUpO1xuICAgICAgICByZXR1cm4gdG1wTGVuZ3RoIDwgMTAzO1xuICAgIH0sXG5cbiAgICBvblRvdWNoTW92ZTogZnVuY3Rpb24gb25Ub3VjaE1vdmUodG91Y2gsIGV2ZW50KSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmZvbGxvd2VyO1xuICAgICAgICB2YXIgdG91Y2hMb2MgPSB0b3VjaC5nZXRMb2NhdGlvbigpO1xuICAgICAgICB2YXIgbG9jSW5Ob2RlID0gdGhpcy5ub2RlLmNvbnZlcnRUb05vZGVTcGFjZUFSKHRvdWNoTG9jKTtcblxuICAgICAgICB0aGlzLl9nZXRBbmdsZShsb2NJbk5vZGUpO1xuICAgICAgICB0aGlzLl9nZXRSYWRpYW5zKGxvY0luTm9kZSk7XG5cbiAgICAgICAgdmFyIHRtcExlbmd0aCA9IHRoaXMuX2dldExlbmd0aChsb2NJbk5vZGUpO1xuXG4gICAgICAgIGlmICh0bXBMZW5ndGggPCAxMDMpIHtcbiAgICAgICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbihsb2NJbk5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHggPSBNYXRoLmNvcyh0aGlzLnJhZGlhbnMpICogMTAzO1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbih0aGlzLnJhZGlhbnMpICogMTAzO1xuICAgICAgICAgICAgdGFyZ2V0LnNldFBvc2l0aW9uKGNjLnAoeCwgeSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVtaXREaXJlY3Rpb24odG1wTGVuZ3RoKTtcbiAgICB9LFxuXG4gICAgb25Ub3VjaEVuZDogZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZm9sbG93ZXI7XG4gICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbih7IHg6IDAsIHk6IDAgfSk7XG5cbiAgICAgICAgdGhpcy5ub2RlLmVtaXQoJ2RpcmVjdGlvbicsIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogNFxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgb25TZW5kRGlyZWN0aW9uOiBmdW5jdGlvbiBvblNlbmREaXJlY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5ub2RlLm9uKCdkaXJlY3Rpb24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmRpcmVjdGlvbiAhPT0gZXZlbnQuZGV0YWlsLmRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHNlbGYuZGlyZWN0aW9uID0gZXZlbnQuZGV0YWlsLmRpcmVjdGlvbjtcbiAgICAgICAgICAgICAgICBDb25uZWN0LmVtaXQoJ2MtZGlyZWN0aW9uJywge1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNlbGYuZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbkVtaXREaXJlY3Rpb246IGZ1bmN0aW9uIG9uRW1pdERpcmVjdGlvbihsZW5ndGgpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbjtcblxuICAgICAgICBpZiAobGVuZ3RoIDw9IDEwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmVtaXQoJ2RpcmVjdGlvbicsIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IDRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYW5nbGUgPCAwKSB0aGlzLmFuZ2xlID0gdGhpcy5hbmdsZSArIDM2MDtcblxuICAgICAgICBpZiAodGhpcy5hbmdsZSA+PSAwICYmIHRoaXMuYW5nbGUgPD0gNDUgfHwgdGhpcy5hbmdsZSA+IDMxNSAmJiB0aGlzLmFuZ2xlIDw9IDM2MCkge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gMTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFuZ2xlID4gNDUgJiYgdGhpcy5hbmdsZSA8PSAxMzUpIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hbmdsZSA+IDEzNSAmJiB0aGlzLmFuZ2xlIDw9IDIyNSkge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gMztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFuZ2xlID4gMjI1ICYmIHRoaXMuYW5nbGUgPD0gMzE1KSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZS5lbWl0KCdkaXJlY3Rpb24nLCB7XG4gICAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuY2MuX1JGcG9wKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5jYy5fUkZwdXNoKG1vZHVsZSwgJzFiMWNheWFaU1JOVTRpZU50aGtHa1RoJywgJ2VxdWlwX2RhdGEnKTtcbi8vIGJpei9lcXVpcC9zY3JpcHQvZXF1aXBfZGF0YS5qc1xuXG52YXIgaGVhZCA9IFt7XG4gICAgZGVzYzogJ+acgOWfuuehgOeahOeCruW8ue+8jOmAguWQiOaWsOaJi+iPnOm4nycsXG4gICAgY29zdDogMFxufSwge1xuICAgIGRlc2M6ICflhbblrp7lsLHmmK/mjaLkuIrkuoblvLnoja/vvIzkuI3ov4flj6/ku6XnlKjmnaXlkJPkuronLFxuICAgIGNvc3Q6IDIwMFxufSwge1xuICAgIGRlc2M6ICfnnIvkuIrljrvpnZ7luLjlqIHmrabvvIznlKjotbfmnaXosozkvLzkuZ/kuI3plJknLFxuICAgIGNvc3Q6IDQwMFxufSwge1xuICAgIGRlc2M6ICfli4fmsJTmsrjohb7mg7PopoHmlaPlj5Hlh7rmnaXvvIzkvLzkuY7lj6/ku6XljrvlvZPli4fogIXkuoYnLFxuICAgIGNvc3Q6IDgwMFxufSwge1xuICAgIGRlc2M6ICflvLrlpKfnmoTmlLvlh7vlipvvvIzlj7LkuIrmjpLlkI3nrKzkuoznmoTlnablhYvngq4nLFxuICAgIGNvc3Q6IDE2MDBcbn0sIHtcbiAgICBkZXNjOiAn5pyA5by655qE54Gr54Ku77yM5rKh5pyJ5q+U6L+Z5Liq5pu054Kr5LqGJyxcbiAgICBjb3N0OiAzMjAwXG59LCB7XG4gICAgZGVzYzogJ+W3sue7j+WNh+e6p+WIsOS6humhtue6pycsXG4gICAgY29zdDogJ+mhtue6pydcbn1dO1xuXG52YXIgYm9keSA9IFt7XG4gICAgZGVzYzogJ+aPkOS+m+acgOWfuuehgOeahOmYsuW+oeiDveWKm+iAjOW3sicsXG4gICAgY29zdDogMFxufSwge1xuICAgIGRlc2M6ICflj6rmmK/lpJrkuobkuIDkupvkv67ppbDnmoTpkqLnlLInLFxuICAgIGNvc3Q6IDIwMFxufSwge1xuICAgIGRlc2M6ICfpkqLpgKDnmoTvvIzpnZ7luLjlnZrnoazkvYbkuI3pmLLpnIcnLFxuICAgIGNvc3Q6IDQwMFxufSwge1xuICAgIGRlc2M6ICfnlKjmspnlrZDpnZ7luLjku5Tnu4bnmoTmiZPno6jov4fvvIzoh6rkv6Hmu6Hmu6HnmoTkvZzlk4EnLFxuICAgIGNvc3Q6IDgwMFxufSwge1xuICAgIGRlc2M6ICfnm7jlvZPkvJjnp4DnmoTpmLLlvqHog73lipvvvIzliqnkvaDpqbDpqovnloblnLonLFxuICAgIGNvc3Q6IDE2MDBcbn0sIHtcbiAgICBkZXNjOiAn5Y+q5pyJ5LmF57uP5rKZ5Zy654us5a2k5rGC6LSl55qE5L2g5omN5pyJ6LWE5qC85oul5pyJJyxcbiAgICBjb3N0OiAzMjAwXG59LCB7XG4gICAgZGVzYzogJ+W3sue7j+WNh+e6p+WIsOS6humhtue6pycsXG4gICAgY29zdDogJ+mhtue6pydcbn1dO1xuXG52YXIgd2hlZWwgPSBbe1xuICAgIGRlc2M6ICfmnIDmnIDmnIDmma7pgJrnmoTlsaXluKbvvIzmnInkuoblroPvvIzkvaDmiY3og73liqgnLFxuICAgIGNvc3Q6IDBcbn0sIHtcbiAgICBkZXNjOiAn56iN5b6u5pS55Y+Y5LqG5Lqb6YCg5Z6L6ICM5bey77yM6YCf5bqm5bCP5pyJ5o+Q5Y2HJyxcbiAgICBjb3N0OiAyMDBcbn0sIHtcbiAgICBkZXNjOiAn5Y+v5Lul5om/5Y+X6L6D5by655qE5Y6L5Yqb77yM6KOF5LiK5ZCO5Ly85LmO5byA55qE5LiN5oWiJyxcbiAgICBjb3N0OiA0MDBcbn0sIHtcbiAgICBkZXNjOiAn5bey57uP5LiN6ZSZ55qE6KGM6am26IO95Yqb77yM6L+Y5pyJ57un57ut5o+Q5Y2H56m66Ze0JyxcbiAgICBjb3N0OiA4MDBcbn0sIHtcbiAgICBkZXNjOiAn5LyY56eA55qE5ZCI6YeR5omT6YCg77yM5Ly85LmO54eD6LW35LqG6aOZ5Z2m5YWL55qE5qyy5pybJyxcbiAgICBjb3N0OiAxNjAwXG59LCB7XG4gICAgZGVzYzogJ+WPiOehrOWPiOi9u++8jOijheS4iuWug+WPr+S7pei3keesrOS4gOWQjScsXG4gICAgY29zdDogMzIwMFxufSwge1xuICAgIGRlc2M6ICflt7Lnu4/ljYfnuqfliLDkuobpobbnuqcnLFxuICAgIGNvc3Q6ICfpobbnuqcnXG59XTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgdGFua0hlYWQ6IGhlYWQsXG4gICAgdGFua0JvZHk6IGJvZHksXG4gICAgdGFua1doZWVsOiB3aGVlbFxufTtcblxuY2MuX1JGcG9wKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5jYy5fUkZwdXNoKG1vZHVsZSwgJzk5MmYzVk1KVXBITG96UVJhYkFaaTlwJywgJ2VxdWlwX2luZm9ib3gnKTtcbi8vIGJpei9lcXVpcC9zY3JpcHQvZXF1aXBfaW5mb2JveC5qc1xuXG5cblxuY2MuX1JGcG9wKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5jYy5fUkZwdXNoKG1vZHVsZSwgJzE4ODNhc242U0pLWFk1MHVORzd5SVp2JywgJ2VxdWlwX2l0ZW0nKTtcbi8vIGJpei9lcXVpcC9zY3JpcHQvZXF1aXBfaXRlbS5qc1xuXG52YXIgdXNlciA9IHJlcXVpcmUoJ3VzZXInKTtcbnZhciB0YW5rID0gcmVxdWlyZSgnZXF1aXBfZGF0YScpO1xuXG5jYy5DbGFzcyh7XG4gICAgJ2V4dGVuZHMnOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IFtdLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcbiAgICAgICAgfSxcbiAgICAgICAgbm93OiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlXG4gICAgICAgIH0sXG4gICAgICAgIGRlc2M6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGNvc3Q6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGJ0bjoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQnV0dG9uXG4gICAgICAgIH0sXG4gICAgICAgIGVxdWlwVHlwZTogJydcbiAgICB9LFxuXG4gICAgc2V0TGV2ZWw6IGZ1bmN0aW9uIHNldExldmVsKGxldmVsKSB7XG4gICAgICAgIHRoaXMubm93LnNwcml0ZUZyYW1lID0gdGhpcy5pdGVtc1tsZXZlbF07XG4gICAgICAgIHRoaXMubmV4dC5zcHJpdGVGcmFtZSA9IHRoaXMuaXRlbXNbbGV2ZWwgKyAxXTtcbiAgICAgICAgdGhpcy5kZXNjLnN0cmluZyA9IHRhbmtbdGhpcy5lcXVpcFR5cGVdW2xldmVsICsgMV0uZGVzYztcbiAgICAgICAgdGhpcy5jb3N0LnN0cmluZyA9IHRhbmtbdGhpcy5lcXVpcFR5cGVdW2xldmVsICsgMV0uY29zdDtcbiAgICB9LFxuXG4gICAgdXBncmFkZTogZnVuY3Rpb24gdXBncmFkZSgpIHtcbiAgICAgICAgaWYgKCt0YW5rW3RoaXMuZXF1aXBUeXBlXVt1c2VyW3RoaXMuZXF1aXBUeXBlXSArIDFdLmNvc3QgPiArdXNlci5kaWFtb25kKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmVtaXQoJ25vY29zdCcpO1xuICAgICAgICB9XG4gICAgICAgIHVzZXIuY29zdCh0aGlzLmVxdWlwVHlwZSwgK3RhbmtbdGhpcy5lcXVpcFR5cGVdW3VzZXJbdGhpcy5lcXVpcFR5cGVdICsgMV0uY29zdCk7XG4gICAgICAgIGlmICh1c2VyW3RoaXMuZXF1aXBUeXBlXSA9PT0gNSkge1xuICAgICAgICAgICAgdGhpcy5idG4uaW50ZXJhY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMZXZlbCh1c2VyW3RoaXMuZXF1aXBUeXBlXSk7XG4gICAgICAgIHRoaXMubm9kZS5lbWl0KCdjb3N0Jyk7XG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgICAgICB0aGlzLnNldExldmVsKHVzZXJbdGhpcy5lcXVpcFR5cGVdKTtcbiAgICB9XG59KTtcblxuY2MuX1JGcG9wKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5jYy5fUkZwdXNoKG1vZHVsZSwgJ2IyZTg2Yml1MDlIeTdtZk5jalV3YkdOJywgJ2VxdWlwJyk7XG4vLyBiaXovZXF1aXAvc2NyaXB0L2VxdWlwLmpzXG5cbnZhciB1c2VyID0gcmVxdWlyZSgndXNlcicpO1xudmFyIGFwaSA9IHJlcXVpcmUoJ2FwaScpO1xuXG5jYy5DbGFzcyh7XG4gICAgJ2V4dGVuZHMnOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHRvcDoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuICAgICAgICBib3R0b206IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgbmlja25hbWU6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGRpYW1vbmQ6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGtpbGw6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGRlYWQ6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWQ6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkNvbXBvbmVudFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Db21wb25lbnRcbiAgICAgICAgfSxcbiAgICAgICAgd2hlZWw6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkNvbXBvbmVudFxuICAgICAgICB9LFxuICAgICAgICBpbmZvQm94OiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdWlTaG93OiBmdW5jdGlvbiB1aVNob3coKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5ib3R0b20ucnVuQWN0aW9uKGNjLm1vdmVUbygwLjUsIDAsIDApLmVhc2luZyhjYy5lYXNlSW4oMy4wKSkpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYudG9wLnJ1bkFjdGlvbihjYy5tb3ZlVG8oMC41LCAwLCAwKS5lYXNpbmcoY2MuZWFzZUluKDMuMCkpKTtcbiAgICAgICAgfSwgMjUwKTtcbiAgICB9LFxuXG4gICAgaW5pdERhdGE6IGZ1bmN0aW9uIGluaXREYXRhKCkge1xuICAgICAgICB0aGlzLm5pY2tuYW1lLnN0cmluZyA9IHVzZXIubmlja25hbWU7XG4gICAgICAgIHRoaXMuZGlhbW9uZC5zdHJpbmcgPSB1c2VyLmRpYW1vbmQ7XG4gICAgICAgIHRoaXMua2lsbC5zdHJpbmcgPSB1c2VyLmtpbGw7XG4gICAgICAgIHRoaXMuZGVhZC5zdHJpbmcgPSB1c2VyLmRlYWQ7XG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgICAgICB0aGlzLmluaXREYXRhKCk7XG4gICAgICAgIHRoaXMudWlTaG93KCk7XG5cbiAgICAgICAgdGhpcy5oZWFkQ29tcG9uZW50ID0gdGhpcy5oZWFkLmdldENvbXBvbmVudCgnZXF1aXBfaXRlbScpO1xuICAgICAgICB0aGlzLmJvZHlDb21wb25lbnQgPSB0aGlzLmJvZHkuZ2V0Q29tcG9uZW50KCdlcXVpcF9pdGVtJyk7XG4gICAgICAgIHRoaXMud2hlZWxDb21wb25lbnQgPSB0aGlzLndoZWVsLmdldENvbXBvbmVudCgnZXF1aXBfaXRlbScpO1xuXG4gICAgICAgIHRoaXMub25Db3N0KCk7XG4gICAgfSxcblxuICAgIG9uQ29zdDogZnVuY3Rpb24gb25Db3N0KCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5oZWFkQ29tcG9uZW50Lm5vZGUub24oJ2Nvc3QnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYuaW5pdERhdGEoKTtzZWxmLnVwZGF0ZVJlbW90ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib2R5Q29tcG9uZW50Lm5vZGUub24oJ2Nvc3QnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYuaW5pdERhdGEoKTtzZWxmLnVwZGF0ZVJlbW90ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53aGVlbENvbXBvbmVudC5ub2RlLm9uKCdjb3N0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmluaXREYXRhKCk7c2VsZi51cGRhdGVSZW1vdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZVJlbW90ZTogZnVuY3Rpb24gdXBkYXRlUmVtb3RlKCkge1xuICAgICAgICBhcGkudXBkYXRlKHVzZXIpO1xuICAgIH0sXG5cbiAgICBvbk5vQ29zdDogZnVuY3Rpb24gb25Ob0Nvc3QoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLmhlYWRDb21wb25lbnQubm9kZS5vbignbm9jb3N0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmluaXREYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvZHlDb21wb25lbnQubm9kZS5vbignbm9jb3N0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmluaXREYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndoZWVsQ29tcG9uZW50Lm5vZGUub24oJ25vY29zdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgc2VsZi5pbml0RGF0YSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgb25CYWNrSGFuZGxlcjogZnVuY3Rpb24gb25CYWNrSGFuZGxlcigpIHtcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdNYWluJyk7XG4gICAgfVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICdjNmI0Y1NGMzhaSHhvckxJa2dHZWxCbycsICdmaXJlJyk7XG4vLyBiaXovY29udHJvbGxlci9zY3JpcHQvZmlyZS5qc1xuXG52YXIgQ29ubmVjdCA9IHJlcXVpcmUoJ2Nvbm5lY3QnKTtcblxuY2MuQ2xhc3Moe1xuICAgICdleHRlbmRzJzogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge30sXG5cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHt9LFxuXG4gICAgb25GaXJlOiBmdW5jdGlvbiBvbkZpcmUoKSB7XG4gICAgICAgIENvbm5lY3QuZW1pdCgnYy1maXJlJywgeyBmaXJlOiAnZmlyZScgfSk7XG4gICAgfVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICc5ZjJmMWhrU0Y5Tms2V3ZIeEFzOXVxUCcsICdsb2Rhc2gnKTtcbi8vIGxpYi9sb2Rhc2guanNcblxuXCJ1c2Ugc3RyaWN0XCI7KGZ1bmN0aW9uKCl7dmFyIHVuZGVmaW5lZDt2YXIgVkVSU0lPTj1cIjQuMi4wXCI7dmFyIEJJTkRfRkxBRz0xLEJJTkRfS0VZX0ZMQUc9MixDVVJSWV9CT1VORF9GTEFHPTQsQ1VSUllfRkxBRz04LENVUlJZX1JJR0hUX0ZMQUc9MTYsUEFSVElBTF9GTEFHPTMyLFBBUlRJQUxfUklHSFRfRkxBRz02NCxBUllfRkxBRz0xMjgsUkVBUkdfRkxBRz0yNTYsRkxJUF9GTEFHPTUxMjt2YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRz0xLFBBUlRJQUxfQ09NUEFSRV9GTEFHPTI7dmFyIERFRkFVTFRfVFJVTkNfTEVOR1RIPTMwLERFRkFVTFRfVFJVTkNfT01JU1NJT049XCIuLi5cIjt2YXIgSE9UX0NPVU5UPTE1MCxIT1RfU1BBTj0xNjt2YXIgTEFSR0VfQVJSQVlfU0laRT0yMDA7dmFyIExBWllfRklMVEVSX0ZMQUc9MSxMQVpZX01BUF9GTEFHPTIsTEFaWV9XSElMRV9GTEFHPTM7dmFyIEZVTkNfRVJST1JfVEVYVD1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjt2YXIgSEFTSF9VTkRFRklORUQ9XCJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fXCI7dmFyIElORklOSVRZPTEgLyAwLE1BWF9TQUZFX0lOVEVHRVI9OTAwNzE5OTI1NDc0MDk5MSxNQVhfSU5URUdFUj0xLjc5NzY5MzEzNDg2MjMxNTdlMzA4LE5BTj0wIC8gMDt2YXIgTUFYX0FSUkFZX0xFTkdUSD00Mjk0OTY3Mjk1LE1BWF9BUlJBWV9JTkRFWD1NQVhfQVJSQVlfTEVOR1RIIC0gMSxIQUxGX01BWF9BUlJBWV9MRU5HVEg9TUFYX0FSUkFZX0xFTkdUSCA+Pj4gMTt2YXIgUExBQ0VIT0xERVI9XCJfX2xvZGFzaF9wbGFjZWhvbGRlcl9fXCI7dmFyIGFyZ3NUYWc9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixhcnJheVRhZz1cIltvYmplY3QgQXJyYXldXCIsYm9vbFRhZz1cIltvYmplY3QgQm9vbGVhbl1cIixkYXRlVGFnPVwiW29iamVjdCBEYXRlXVwiLGVycm9yVGFnPVwiW29iamVjdCBFcnJvcl1cIixmdW5jVGFnPVwiW29iamVjdCBGdW5jdGlvbl1cIixnZW5UYWc9XCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXVwiLG1hcFRhZz1cIltvYmplY3QgTWFwXVwiLG51bWJlclRhZz1cIltvYmplY3QgTnVtYmVyXVwiLG9iamVjdFRhZz1cIltvYmplY3QgT2JqZWN0XVwiLHJlZ2V4cFRhZz1cIltvYmplY3QgUmVnRXhwXVwiLHNldFRhZz1cIltvYmplY3QgU2V0XVwiLHN0cmluZ1RhZz1cIltvYmplY3QgU3RyaW5nXVwiLHN5bWJvbFRhZz1cIltvYmplY3QgU3ltYm9sXVwiLHdlYWtNYXBUYWc9XCJbb2JqZWN0IFdlYWtNYXBdXCI7dmFyIGFycmF5QnVmZmVyVGFnPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixmbG9hdDMyVGFnPVwiW29iamVjdCBGbG9hdDMyQXJyYXldXCIsZmxvYXQ2NFRhZz1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLGludDhUYWc9XCJbb2JqZWN0IEludDhBcnJheV1cIixpbnQxNlRhZz1cIltvYmplY3QgSW50MTZBcnJheV1cIixpbnQzMlRhZz1cIltvYmplY3QgSW50MzJBcnJheV1cIix1aW50OFRhZz1cIltvYmplY3QgVWludDhBcnJheV1cIix1aW50OENsYW1wZWRUYWc9XCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XVwiLHVpbnQxNlRhZz1cIltvYmplY3QgVWludDE2QXJyYXldXCIsdWludDMyVGFnPVwiW29iamVjdCBVaW50MzJBcnJheV1cIjt2YXIgcmVFbXB0eVN0cmluZ0xlYWRpbmc9L1xcYl9fcCBcXCs9ICcnOy9nLHJlRW1wdHlTdHJpbmdNaWRkbGU9L1xcYihfX3AgXFwrPSkgJycgXFwrL2cscmVFbXB0eVN0cmluZ1RyYWlsaW5nPS8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSkgXFwrXFxuJyc7L2c7dmFyIHJlRXNjYXBlZEh0bWw9LyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8Izk2KTsvZyxyZVVuZXNjYXBlZEh0bWw9L1smPD5cIidgXS9nLHJlSGFzRXNjYXBlZEh0bWw9UmVnRXhwKHJlRXNjYXBlZEh0bWwuc291cmNlKSxyZUhhc1VuZXNjYXBlZEh0bWw9UmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO3ZhciByZUVzY2FwZT0vPCUtKFtcXHNcXFNdKz8pJT4vZyxyZUV2YWx1YXRlPS88JShbXFxzXFxTXSs/KSU+L2cscmVJbnRlcnBvbGF0ZT0vPCU9KFtcXHNcXFNdKz8pJT4vZzt2YXIgcmVJc0RlZXBQcm9wPS9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8scmVJc1BsYWluUHJvcD0vXlxcdyokLyxyZVByb3BOYW1lPS9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7dmFyIHJlUmVnRXhwQ2hhcj0vW1xcXFxeJC4qKz8oKVtcXF17fXxdL2cscmVIYXNSZWdFeHBDaGFyPVJlZ0V4cChyZVJlZ0V4cENoYXIuc291cmNlKTt2YXIgcmVUcmltPS9eXFxzK3xcXHMrJC9nLHJlVHJpbVN0YXJ0PS9eXFxzKy8scmVUcmltRW5kPS9cXHMrJC87dmFyIHJlRXNjYXBlQ2hhcj0vXFxcXChcXFxcKT8vZzt2YXIgcmVFc1RlbXBsYXRlPS9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZzt2YXIgcmVGbGFncz0vXFx3KiQvO3ZhciByZUhhc0hleFByZWZpeD0vXjB4L2k7dmFyIHJlSXNCYWRIZXg9L15bLStdMHhbMC05YS1mXSskL2k7dmFyIHJlSXNCaW5hcnk9L14wYlswMV0rJC9pO3ZhciByZUlzSG9zdEN0b3I9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLzt2YXIgcmVJc09jdGFsPS9eMG9bMC03XSskL2k7dmFyIHJlSXNVaW50PS9eKD86MHxbMS05XVxcZCopJC87dmFyIHJlTGF0aW4xPS9bXFx4YzAtXFx4ZDZcXHhkOC1cXHhkZVxceGRmLVxceGY2XFx4ZjgtXFx4ZmZdL2c7dmFyIHJlTm9NYXRjaD0vKCReKS87dmFyIHJlVW5lc2NhcGVkU3RyaW5nPS9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZzt2YXIgcnNBc3RyYWxSYW5nZT1cIlxcXFx1ZDgwMC1cXFxcdWRmZmZcIixyc0NvbWJvTWFya3NSYW5nZT1cIlxcXFx1MDMwMC1cXFxcdTAzNmZcXFxcdWZlMjAtXFxcXHVmZTIzXCIscnNDb21ib1N5bWJvbHNSYW5nZT1cIlxcXFx1MjBkMC1cXFxcdTIwZjBcIixyc0RpbmdiYXRSYW5nZT1cIlxcXFx1MjcwMC1cXFxcdTI3YmZcIixyc0xvd2VyUmFuZ2U9XCJhLXpcXFxceGRmLVxcXFx4ZjZcXFxceGY4LVxcXFx4ZmZcIixyc01hdGhPcFJhbmdlPVwiXFxcXHhhY1xcXFx4YjFcXFxceGQ3XFxcXHhmN1wiLHJzTm9uQ2hhclJhbmdlPVwiXFxcXHgwMC1cXFxceDJmXFxcXHgzYS1cXFxceDQwXFxcXHg1Yi1cXFxceDYwXFxcXHg3Yi1cXFxceGJmXCIscnNRdW90ZVJhbmdlPVwiXFxcXHUyMDE4XFxcXHUyMDE5XFxcXHUyMDFjXFxcXHUyMDFkXCIscnNTcGFjZVJhbmdlPVwiIFxcXFx0XFxcXHgwYlxcXFxmXFxcXHhhMFxcXFx1ZmVmZlxcXFxuXFxcXHJcXFxcdTIwMjhcXFxcdTIwMjlcXFxcdTE2ODBcXFxcdTE4MGVcXFxcdTIwMDBcXFxcdTIwMDFcXFxcdTIwMDJcXFxcdTIwMDNcXFxcdTIwMDRcXFxcdTIwMDVcXFxcdTIwMDZcXFxcdTIwMDdcXFxcdTIwMDhcXFxcdTIwMDlcXFxcdTIwMGFcXFxcdTIwMmZcXFxcdTIwNWZcXFxcdTMwMDBcIixyc1VwcGVyUmFuZ2U9XCJBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVcIixyc1ZhclJhbmdlPVwiXFxcXHVmZTBlXFxcXHVmZTBmXCIscnNCcmVha1JhbmdlPXJzTWF0aE9wUmFuZ2UgKyByc05vbkNoYXJSYW5nZSArIHJzUXVvdGVSYW5nZSArIHJzU3BhY2VSYW5nZTt2YXIgcnNBc3RyYWw9XCJbXCIgKyByc0FzdHJhbFJhbmdlICsgXCJdXCIscnNCcmVhaz1cIltcIiArIHJzQnJlYWtSYW5nZSArIFwiXVwiLHJzQ29tYm89XCJbXCIgKyByc0NvbWJvTWFya3NSYW5nZSArIHJzQ29tYm9TeW1ib2xzUmFuZ2UgKyBcIl1cIixyc0RpZ2l0cz1cIlxcXFxkK1wiLHJzRGluZ2JhdD1cIltcIiArIHJzRGluZ2JhdFJhbmdlICsgXCJdXCIscnNMb3dlcj1cIltcIiArIHJzTG93ZXJSYW5nZSArIFwiXVwiLHJzTWlzYz1cIlteXCIgKyByc0FzdHJhbFJhbmdlICsgcnNCcmVha1JhbmdlICsgcnNEaWdpdHMgKyByc0RpbmdiYXRSYW5nZSArIHJzTG93ZXJSYW5nZSArIHJzVXBwZXJSYW5nZSArIFwiXVwiLHJzRml0ej1cIlxcXFx1ZDgzY1tcXFxcdWRmZmItXFxcXHVkZmZmXVwiLHJzTW9kaWZpZXI9XCIoPzpcIiArIHJzQ29tYm8gKyBcInxcIiArIHJzRml0eiArIFwiKVwiLHJzTm9uQXN0cmFsPVwiW15cIiArIHJzQXN0cmFsUmFuZ2UgKyBcIl1cIixyc1JlZ2lvbmFsPVwiKD86XFxcXHVkODNjW1xcXFx1ZGRlNi1cXFxcdWRkZmZdKXsyfVwiLHJzU3VyclBhaXI9XCJbXFxcXHVkODAwLVxcXFx1ZGJmZl1bXFxcXHVkYzAwLVxcXFx1ZGZmZl1cIixyc1VwcGVyPVwiW1wiICsgcnNVcHBlclJhbmdlICsgXCJdXCIscnNaV0o9XCJcXFxcdTIwMGRcIjt2YXIgcnNMb3dlck1pc2M9XCIoPzpcIiArIHJzTG93ZXIgKyBcInxcIiArIHJzTWlzYyArIFwiKVwiLHJzVXBwZXJNaXNjPVwiKD86XCIgKyByc1VwcGVyICsgXCJ8XCIgKyByc01pc2MgKyBcIilcIixyZU9wdE1vZD1yc01vZGlmaWVyICsgXCI/XCIscnNPcHRWYXI9XCJbXCIgKyByc1ZhclJhbmdlICsgXCJdP1wiLHJzT3B0Sm9pbj1cIig/OlwiICsgcnNaV0ogKyBcIig/OlwiICsgW3JzTm9uQXN0cmFsLHJzUmVnaW9uYWwscnNTdXJyUGFpcl0uam9pbihcInxcIikgKyBcIilcIiArIHJzT3B0VmFyICsgcmVPcHRNb2QgKyBcIikqXCIscnNTZXE9cnNPcHRWYXIgKyByZU9wdE1vZCArIHJzT3B0Sm9pbixyc0Vtb2ppPVwiKD86XCIgKyBbcnNEaW5nYmF0LHJzUmVnaW9uYWwscnNTdXJyUGFpcl0uam9pbihcInxcIikgKyBcIilcIiArIHJzU2VxLHJzU3ltYm9sPVwiKD86XCIgKyBbcnNOb25Bc3RyYWwgKyByc0NvbWJvICsgXCI/XCIscnNDb21ibyxyc1JlZ2lvbmFsLHJzU3VyclBhaXIscnNBc3RyYWxdLmpvaW4oXCJ8XCIpICsgXCIpXCI7dmFyIHJlQ29tYm9NYXJrPVJlZ0V4cChyc0NvbWJvLFwiZ1wiKTt2YXIgcmVDb21wbGV4U3ltYm9sPVJlZ0V4cChyc0ZpdHogKyBcIig/PVwiICsgcnNGaXR6ICsgXCIpfFwiICsgcnNTeW1ib2wgKyByc1NlcSxcImdcIik7dmFyIHJlSGFzQ29tcGxleFN5bWJvbD1SZWdFeHAoXCJbXCIgKyByc1pXSiArIHJzQXN0cmFsUmFuZ2UgKyByc0NvbWJvTWFya3NSYW5nZSArIHJzQ29tYm9TeW1ib2xzUmFuZ2UgKyByc1ZhclJhbmdlICsgXCJdXCIpO3ZhciByZUJhc2ljV29yZD0vW2EtekEtWjAtOV0rL2c7dmFyIHJlQ29tcGxleFdvcmQ9UmVnRXhwKFtyc1VwcGVyICsgXCI/XCIgKyByc0xvd2VyICsgXCIrKD89XCIgKyBbcnNCcmVhayxyc1VwcGVyLFwiJFwiXS5qb2luKFwifFwiKSArIFwiKVwiLHJzVXBwZXJNaXNjICsgXCIrKD89XCIgKyBbcnNCcmVhayxyc1VwcGVyICsgcnNMb3dlck1pc2MsXCIkXCJdLmpvaW4oXCJ8XCIpICsgXCIpXCIscnNVcHBlciArIFwiP1wiICsgcnNMb3dlck1pc2MgKyBcIitcIixyc1VwcGVyICsgXCIrXCIscnNEaWdpdHMscnNFbW9qaV0uam9pbihcInxcIiksXCJnXCIpO3ZhciByZUhhc0NvbXBsZXhXb3JkPS9bYS16XVtBLVpdfFswLTldW2EtekEtWl18W2EtekEtWl1bMC05XXxbXmEtekEtWjAtOSBdLzt2YXIgY29udGV4dFByb3BzPVtcIkFycmF5XCIsXCJEYXRlXCIsXCJFcnJvclwiLFwiRmxvYXQzMkFycmF5XCIsXCJGbG9hdDY0QXJyYXlcIixcIkZ1bmN0aW9uXCIsXCJJbnQ4QXJyYXlcIixcIkludDE2QXJyYXlcIixcIkludDMyQXJyYXlcIixcIk1hcFwiLFwiTWF0aFwiLFwiT2JqZWN0XCIsXCJSZWZsZWN0XCIsXCJSZWdFeHBcIixcIlNldFwiLFwiU3RyaW5nXCIsXCJTeW1ib2xcIixcIlR5cGVFcnJvclwiLFwiVWludDhBcnJheVwiLFwiVWludDhDbGFtcGVkQXJyYXlcIixcIlVpbnQxNkFycmF5XCIsXCJVaW50MzJBcnJheVwiLFwiV2Vha01hcFwiLFwiX1wiLFwiY2xlYXJUaW1lb3V0XCIsXCJpc0Zpbml0ZVwiLFwicGFyc2VJbnRcIixcInNldFRpbWVvdXRcIl07dmFyIHRlbXBsYXRlQ291bnRlcj0tMTt2YXIgdHlwZWRBcnJheVRhZ3M9e307dHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTt0eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9IHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7dmFyIGNsb25lYWJsZVRhZ3M9e307Y2xvbmVhYmxlVGFnc1thcmdzVGFnXSA9IGNsb25lYWJsZVRhZ3NbYXJyYXlUYWddID0gY2xvbmVhYmxlVGFnc1thcnJheUJ1ZmZlclRhZ10gPSBjbG9uZWFibGVUYWdzW2Jvb2xUYWddID0gY2xvbmVhYmxlVGFnc1tkYXRlVGFnXSA9IGNsb25lYWJsZVRhZ3NbZmxvYXQzMlRhZ10gPSBjbG9uZWFibGVUYWdzW2Zsb2F0NjRUYWddID0gY2xvbmVhYmxlVGFnc1tpbnQ4VGFnXSA9IGNsb25lYWJsZVRhZ3NbaW50MTZUYWddID0gY2xvbmVhYmxlVGFnc1tpbnQzMlRhZ10gPSBjbG9uZWFibGVUYWdzW21hcFRhZ10gPSBjbG9uZWFibGVUYWdzW251bWJlclRhZ10gPSBjbG9uZWFibGVUYWdzW29iamVjdFRhZ10gPSBjbG9uZWFibGVUYWdzW3JlZ2V4cFRhZ10gPSBjbG9uZWFibGVUYWdzW3NldFRhZ10gPSBjbG9uZWFibGVUYWdzW3N0cmluZ1RhZ10gPSBjbG9uZWFibGVUYWdzW3N5bWJvbFRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQ4VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDE2VGFnXSA9IGNsb25lYWJsZVRhZ3NbdWludDMyVGFnXSA9IHRydWU7Y2xvbmVhYmxlVGFnc1tlcnJvclRhZ10gPSBjbG9uZWFibGVUYWdzW2Z1bmNUYWddID0gY2xvbmVhYmxlVGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO3ZhciBkZWJ1cnJlZExldHRlcnM9e1wi6ISMXCI6XCJBXCIsXCLohJVcIjpcIkFcIixcIuiEl1wiOlwiQVwiLFwi6ISZXCI6XCJBXCIsXCLohJtcIjpcIkFcIixcIuiEnFwiOlwiQVwiLFwi6IS/XCI6XCJhXCIsXCLosKlcIjpcImFcIixcIuiKklwiOlwiYVwiLFwi6IyrXCI6XCJhXCIsXCLnm7JcIjpcImFcIixcIuawk1wiOlwiYVwiLFwi6ISfXCI6XCJDXCIsXCLojr1cIjpcImNcIixcIuiEqFwiOlwiRFwiLFwi5YaSXCI6XCJkXCIsXCLohKBcIjpcIkVcIixcIuiEoVwiOlwiRVwiLFwi6ISiXCI6XCJFXCIsXCLohKNcIjpcIkVcIixcIueMq1wiOlwiZVwiLFwi6IyFXCI6XCJlXCIsXCLplJpcIjpcImVcIixcIuavm1wiOlwiZVwiLFwi6ISkXCI6XCJJXCIsXCLohKVcIjpcIklcIixcIuiEplwiOlwiSVwiLFwi6ISnXCI6XCJJXCIsXCLnn5tcIjpcImlcIixcIumThlwiOlwiaVwiLFwi5Y2vXCI6XCJpXCIsXCLojIJcIjpcImlcIixcIuiEqVwiOlwiTlwiLFwi5bi9XCI6XCJuXCIsXCLohKpcIjpcIk9cIixcIuiEq1wiOlwiT1wiLFwi6IStXCI6XCJPXCIsXCLohK5cIjpcIk9cIixcIuiEsFwiOlwiT1wiLFwi6IS0XCI6XCJPXCIsXCLosoxcIjpcIm9cIixcIui0uFwiOlwib1wiLFwi5LmIXCI6XCJvXCIsXCLnjqtcIjpcIm9cIixcIuaemlwiOlwib1wiLFwi6YW2XCI6XCJvXCIsXCLohLVcIjpcIlVcIixcIuiEt1wiOlwiVVwiLFwi6IS5XCI6XCJVXCIsXCLohLpcIjpcIlVcIixcIumciVwiOlwidVwiLFwi54WkXCI6XCJ1XCIsXCLmsqFcIjpcInVcIixcIueciVwiOlwidVwiLFwi6IS7XCI6XCJZXCIsXCLlqpJcIjpcInlcIixcIuavj1wiOlwieVwiLFwi6ISdXCI6XCJBZVwiLFwi5b+ZXCI6XCJhZVwiLFwi6IS8XCI6XCJUaFwiLFwi6ZWBXCI6XCJ0aFwiLFwi6IS9XCI6XCJzc1wifTt2YXIgaHRtbEVzY2FwZXM9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wiLFwiYFwiOlwiJiM5NjtcIn07dmFyIGh0bWxVbmVzY2FwZXM9e1wiJmFtcDtcIjpcIiZcIixcIiZsdDtcIjpcIjxcIixcIiZndDtcIjpcIj5cIixcIiZxdW90O1wiOidcIicsXCImIzM5O1wiOlwiJ1wiLFwiJiM5NjtcIjpcImBcIn07dmFyIG9iamVjdFR5cGVzPXtcImZ1bmN0aW9uXCI6dHJ1ZSxvYmplY3Q6dHJ1ZX07dmFyIHN0cmluZ0VzY2FwZXM9e1wiXFxcXFwiOlwiXFxcXFwiLFwiJ1wiOlwiJ1wiLFwiXFxuXCI6XCJuXCIsXCJcXHJcIjpcInJcIixcIlxcdTIwMjhcIjpcInUyMDI4XCIsXCJcXHUyMDI5XCI6XCJ1MjAyOVwifTt2YXIgZnJlZVBhcnNlRmxvYXQ9cGFyc2VGbG9hdCxmcmVlUGFyc2VJbnQ9cGFyc2VJbnQ7dmFyIGZyZWVFeHBvcnRzPW9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlP2V4cG9ydHM6bnVsbDt2YXIgZnJlZU1vZHVsZT1vYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZT9tb2R1bGU6bnVsbDt2YXIgZnJlZUdsb2JhbD1jaGVja0dsb2JhbChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlICYmIHR5cGVvZiBnbG9iYWwgPT0gXCJvYmplY3RcIiAmJiBnbG9iYWwpO3ZhciBmcmVlU2VsZj1jaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2Ygc2VsZl0gJiYgc2VsZik7dmFyIGZyZWVXaW5kb3c9Y2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KTt2YXIgbW9kdWxlRXhwb3J0cz1mcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM/ZnJlZUV4cG9ydHM6bnVsbDt2YXIgdGhpc0dsb2JhbD1jaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2YgdGhpc10gJiYgdGhpcyk7dmFyIHJvb3Q9ZnJlZUdsb2JhbCB8fCBmcmVlV2luZG93ICE9PSAodGhpc0dsb2JhbCAmJiB0aGlzR2xvYmFsLndpbmRvdykgJiYgZnJlZVdpbmRvdyB8fCBmcmVlU2VsZiB8fCB0aGlzR2xvYmFsIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtmdW5jdGlvbiBhZGRNYXBFbnRyeShtYXAscGFpcil7bWFwLnNldChwYWlyWzBdLHBhaXJbMV0pO3JldHVybiBtYXA7fWZ1bmN0aW9uIGFkZFNldEVudHJ5KHNldCx2YWx1ZSl7c2V0LmFkZCh2YWx1ZSk7cmV0dXJuIHNldDt9ZnVuY3Rpb24gYXBwbHkoZnVuYyx0aGlzQXJnLGFyZ3Mpe3ZhciBsZW5ndGg9YXJncy5sZW5ndGg7c3dpdGNoKGxlbmd0aCl7Y2FzZSAwOnJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7Y2FzZSAxOnJldHVybiBmdW5jLmNhbGwodGhpc0FyZyxhcmdzWzBdKTtjYXNlIDI6cmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLGFyZ3NbMF0sYXJnc1sxXSk7Y2FzZSAzOnJldHVybiBmdW5jLmNhbGwodGhpc0FyZyxhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSk7fXJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsYXJncyk7fWZ1bmN0aW9uIGFycmF5QWdncmVnYXRvcihhcnJheSxzZXR0ZXIsaXRlcmF0ZWUsYWNjdW11bGF0b3Ipe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdO3NldHRlcihhY2N1bXVsYXRvcix2YWx1ZSxpdGVyYXRlZSh2YWx1ZSksYXJyYXkpO31yZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIGFycmF5Q29uY2F0KGFycmF5LG90aGVyKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aCxvdGhJbmRleD0tMSxvdGhMZW5ndGg9b3RoZXIubGVuZ3RoLHJlc3VsdD1BcnJheShsZW5ndGggKyBvdGhMZW5ndGgpO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtyZXN1bHRbaW5kZXhdID0gYXJyYXlbaW5kZXhdO313aGlsZSgrK290aEluZGV4IDwgb3RoTGVuZ3RoKSB7cmVzdWx0W2luZGV4KytdID0gb3RoZXJbb3RoSW5kZXhdO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBhcnJheUVhY2goYXJyYXksaXRlcmF0ZWUpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtpZihpdGVyYXRlZShhcnJheVtpbmRleF0saW5kZXgsYXJyYXkpID09PSBmYWxzZSl7YnJlYWs7fX1yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGFycmF5RWFjaFJpZ2h0KGFycmF5LGl0ZXJhdGVlKXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZShsZW5ndGgtLSkge2lmKGl0ZXJhdGVlKGFycmF5W2xlbmd0aF0sbGVuZ3RoLGFycmF5KSA9PT0gZmFsc2Upe2JyZWFrO319cmV0dXJuIGFycmF5O31mdW5jdGlvbiBhcnJheUV2ZXJ5KGFycmF5LHByZWRpY2F0ZSl7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2lmKCFwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fWZ1bmN0aW9uIGFycmF5RmlsdGVyKGFycmF5LHByZWRpY2F0ZSl7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGgscmVzSW5kZXg9LTEscmVzdWx0PVtdO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdO2lmKHByZWRpY2F0ZSh2YWx1ZSxpbmRleCxhcnJheSkpe3Jlc3VsdFsrK3Jlc0luZGV4XSA9IHZhbHVlO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYXJyYXlJbmNsdWRlcyhhcnJheSx2YWx1ZSl7cmV0dXJuICEhYXJyYXkubGVuZ3RoICYmIGJhc2VJbmRleE9mKGFycmF5LHZhbHVlLDApID4gLTE7fWZ1bmN0aW9uIGFycmF5SW5jbHVkZXNXaXRoKGFycmF5LHZhbHVlLGNvbXBhcmF0b3Ipe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtpZihjb21wYXJhdG9yKHZhbHVlLGFycmF5W2luZGV4XSkpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO31mdW5jdGlvbiBhcnJheU1hcChhcnJheSxpdGVyYXRlZSl7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGgscmVzdWx0PUFycmF5KGxlbmd0aCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3Jlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0saW5kZXgsYXJyYXkpO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBhcnJheVB1c2goYXJyYXksdmFsdWVzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXZhbHVlcy5sZW5ndGgsb2Zmc2V0PWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7YXJyYXlbb2Zmc2V0ICsgaW5kZXhdID0gdmFsdWVzW2luZGV4XTt9cmV0dXJuIGFycmF5O31mdW5jdGlvbiBhcnJheVJlZHVjZShhcnJheSxpdGVyYXRlZSxhY2N1bXVsYXRvcixpbml0QWNjdW0pe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO2lmKGluaXRBY2N1bSAmJiBsZW5ndGgpe2FjY3VtdWxhdG9yID0gYXJyYXlbKytpbmRleF07fXdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHthY2N1bXVsYXRvciA9IGl0ZXJhdGVlKGFjY3VtdWxhdG9yLGFycmF5W2luZGV4XSxpbmRleCxhcnJheSk7fXJldHVybiBhY2N1bXVsYXRvcjt9ZnVuY3Rpb24gYXJyYXlSZWR1Y2VSaWdodChhcnJheSxpdGVyYXRlZSxhY2N1bXVsYXRvcixpbml0QWNjdW0pe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoO2lmKGluaXRBY2N1bSAmJiBsZW5ndGgpe2FjY3VtdWxhdG9yID0gYXJyYXlbLS1sZW5ndGhdO313aGlsZShsZW5ndGgtLSkge2FjY3VtdWxhdG9yID0gaXRlcmF0ZWUoYWNjdW11bGF0b3IsYXJyYXlbbGVuZ3RoXSxsZW5ndGgsYXJyYXkpO31yZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIGFycmF5U29tZShhcnJheSxwcmVkaWNhdGUpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtpZihwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLGluZGV4LGFycmF5KSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fWZ1bmN0aW9uIGJhc2VFeHRyZW11bShhcnJheSxpdGVyYXRlZSxjb21wYXJhdG9yKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XSxjdXJyZW50PWl0ZXJhdGVlKHZhbHVlKTtpZihjdXJyZW50ICE9IG51bGwgJiYgKGNvbXB1dGVkID09PSB1bmRlZmluZWQ/Y3VycmVudCA9PT0gY3VycmVudDpjb21wYXJhdG9yKGN1cnJlbnQsY29tcHV0ZWQpKSl7dmFyIGNvbXB1dGVkPWN1cnJlbnQscmVzdWx0PXZhbHVlO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZUZpbmQoY29sbGVjdGlvbixwcmVkaWNhdGUsZWFjaEZ1bmMscmV0S2V5KXt2YXIgcmVzdWx0O2VhY2hGdW5jKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsa2V5LGNvbGxlY3Rpb24pe2lmKHByZWRpY2F0ZSh2YWx1ZSxrZXksY29sbGVjdGlvbikpe3Jlc3VsdCA9IHJldEtleT9rZXk6dmFsdWU7cmV0dXJuIGZhbHNlO319KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LHByZWRpY2F0ZSxmcm9tUmlnaHQpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoLGluZGV4PWZyb21SaWdodD9sZW5ndGg6LTE7d2hpbGUoZnJvbVJpZ2h0P2luZGV4LS06KytpbmRleCA8IGxlbmd0aCkge2lmKHByZWRpY2F0ZShhcnJheVtpbmRleF0saW5kZXgsYXJyYXkpKXtyZXR1cm4gaW5kZXg7fX1yZXR1cm4gLTE7fWZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LHZhbHVlLGZyb21JbmRleCl7aWYodmFsdWUgIT09IHZhbHVlKXtyZXR1cm4gaW5kZXhPZk5hTihhcnJheSxmcm9tSW5kZXgpO312YXIgaW5kZXg9ZnJvbUluZGV4IC0gMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtpZihhcnJheVtpbmRleF0gPT09IHZhbHVlKXtyZXR1cm4gaW5kZXg7fX1yZXR1cm4gLTE7fWZ1bmN0aW9uIGJhc2VSZWR1Y2UoY29sbGVjdGlvbixpdGVyYXRlZSxhY2N1bXVsYXRvcixpbml0QWNjdW0sZWFjaEZ1bmMpe2VhY2hGdW5jKGNvbGxlY3Rpb24sZnVuY3Rpb24odmFsdWUsaW5kZXgsY29sbGVjdGlvbil7YWNjdW11bGF0b3IgPSBpbml0QWNjdW0/KGluaXRBY2N1bSA9IGZhbHNlLHZhbHVlKTppdGVyYXRlZShhY2N1bXVsYXRvcix2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTt9KTtyZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIGJhc2VTb3J0QnkoYXJyYXksY29tcGFyZXIpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoO2FycmF5LnNvcnQoY29tcGFyZXIpO3doaWxlKGxlbmd0aC0tKSB7YXJyYXlbbGVuZ3RoXSA9IGFycmF5W2xlbmd0aF0udmFsdWU7fXJldHVybiBhcnJheTt9ZnVuY3Rpb24gYmFzZVN1bShhcnJheSxpdGVyYXRlZSl7dmFyIHJlc3VsdCxpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgY3VycmVudD1pdGVyYXRlZShhcnJheVtpbmRleF0pO2lmKGN1cnJlbnQgIT09IHVuZGVmaW5lZCl7cmVzdWx0ID0gcmVzdWx0ID09PSB1bmRlZmluZWQ/Y3VycmVudDpyZXN1bHQgKyBjdXJyZW50O319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZVRpbWVzKG4saXRlcmF0ZWUpe3ZhciBpbmRleD0tMSxyZXN1bHQ9QXJyYXkobik7d2hpbGUoKytpbmRleCA8IG4pIHtyZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlVG9QYWlycyhvYmplY3QscHJvcHMpe3JldHVybiBhcnJheU1hcChwcm9wcyxmdW5jdGlvbihrZXkpe3JldHVybiBba2V5LG9iamVjdFtrZXldXTt9KTt9ZnVuY3Rpb24gYmFzZVVuYXJ5KGZ1bmMpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGZ1bmModmFsdWUpO307fWZ1bmN0aW9uIGJhc2VWYWx1ZXMob2JqZWN0LHByb3BzKXtyZXR1cm4gYXJyYXlNYXAocHJvcHMsZnVuY3Rpb24oa2V5KXtyZXR1cm4gb2JqZWN0W2tleV07fSk7fWZ1bmN0aW9uIGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLGNoclN5bWJvbHMpe3ZhciBpbmRleD0tMSxsZW5ndGg9c3RyU3ltYm9scy5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCAmJiBiYXNlSW5kZXhPZihjaHJTeW1ib2xzLHN0clN5bWJvbHNbaW5kZXhdLDApID4gLTEpIHt9cmV0dXJuIGluZGV4O31mdW5jdGlvbiBjaGFyc0VuZEluZGV4KHN0clN5bWJvbHMsY2hyU3ltYm9scyl7dmFyIGluZGV4PXN0clN5bWJvbHMubGVuZ3RoO3doaWxlKGluZGV4LS0gJiYgYmFzZUluZGV4T2YoY2hyU3ltYm9scyxzdHJTeW1ib2xzW2luZGV4XSwwKSA+IC0xKSB7fXJldHVybiBpbmRleDt9ZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpe3JldHVybiB2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdD92YWx1ZTpudWxsO31mdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKHZhbHVlLG90aGVyKXtpZih2YWx1ZSAhPT0gb3RoZXIpe3ZhciB2YWxJc051bGw9dmFsdWUgPT09IG51bGwsdmFsSXNVbmRlZj12YWx1ZSA9PT0gdW5kZWZpbmVkLHZhbElzUmVmbGV4aXZlPXZhbHVlID09PSB2YWx1ZTt2YXIgb3RoSXNOdWxsPW90aGVyID09PSBudWxsLG90aElzVW5kZWY9b3RoZXIgPT09IHVuZGVmaW5lZCxvdGhJc1JlZmxleGl2ZT1vdGhlciA9PT0gb3RoZXI7aWYodmFsdWUgPiBvdGhlciAmJiAhb3RoSXNOdWxsIHx8ICF2YWxJc1JlZmxleGl2ZSB8fCB2YWxJc051bGwgJiYgIW90aElzVW5kZWYgJiYgb3RoSXNSZWZsZXhpdmUgfHwgdmFsSXNVbmRlZiAmJiBvdGhJc1JlZmxleGl2ZSl7cmV0dXJuIDE7fWlmKHZhbHVlIDwgb3RoZXIgJiYgIXZhbElzTnVsbCB8fCAhb3RoSXNSZWZsZXhpdmUgfHwgb3RoSXNOdWxsICYmICF2YWxJc1VuZGVmICYmIHZhbElzUmVmbGV4aXZlIHx8IG90aElzVW5kZWYgJiYgdmFsSXNSZWZsZXhpdmUpe3JldHVybiAtMTt9fXJldHVybiAwO31mdW5jdGlvbiBjb21wYXJlTXVsdGlwbGUob2JqZWN0LG90aGVyLG9yZGVycyl7dmFyIGluZGV4PS0xLG9iakNyaXRlcmlhPW9iamVjdC5jcml0ZXJpYSxvdGhDcml0ZXJpYT1vdGhlci5jcml0ZXJpYSxsZW5ndGg9b2JqQ3JpdGVyaWEubGVuZ3RoLG9yZGVyc0xlbmd0aD1vcmRlcnMubGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgcmVzdWx0PWNvbXBhcmVBc2NlbmRpbmcob2JqQ3JpdGVyaWFbaW5kZXhdLG90aENyaXRlcmlhW2luZGV4XSk7aWYocmVzdWx0KXtpZihpbmRleCA+PSBvcmRlcnNMZW5ndGgpe3JldHVybiByZXN1bHQ7fXZhciBvcmRlcj1vcmRlcnNbaW5kZXhdO3JldHVybiByZXN1bHQgKiAob3JkZXIgPT0gXCJkZXNjXCI/LTE6MSk7fX1yZXR1cm4gb2JqZWN0LmluZGV4IC0gb3RoZXIuaW5kZXg7fWZ1bmN0aW9uIGRlYnVyckxldHRlcihsZXR0ZXIpe3JldHVybiBkZWJ1cnJlZExldHRlcnNbbGV0dGVyXTt9ZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIoY2hyKXtyZXR1cm4gaHRtbEVzY2FwZXNbY2hyXTt9ZnVuY3Rpb24gZXNjYXBlU3RyaW5nQ2hhcihjaHIpe3JldHVybiBcIlxcXFxcIiArIHN0cmluZ0VzY2FwZXNbY2hyXTt9ZnVuY3Rpb24gaW5kZXhPZk5hTihhcnJheSxmcm9tSW5kZXgsZnJvbVJpZ2h0KXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aCxpbmRleD1mcm9tSW5kZXggKyAoZnJvbVJpZ2h0PzA6LTEpO3doaWxlKGZyb21SaWdodD9pbmRleC0tOisraW5kZXggPCBsZW5ndGgpIHt2YXIgb3RoZXI9YXJyYXlbaW5kZXhdO2lmKG90aGVyICE9PSBvdGhlcil7cmV0dXJuIGluZGV4O319cmV0dXJuIC0xO31mdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpe3ZhciByZXN1bHQ9ZmFsc2U7aWYodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gXCJmdW5jdGlvblwiKXt0cnl7cmVzdWx0ID0gISEodmFsdWUgKyBcIlwiKTt9Y2F0Y2goZSkge319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSxsZW5ndGgpe3ZhbHVlID0gdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSk/K3ZhbHVlOi0xO2xlbmd0aCA9IGxlbmd0aCA9PSBudWxsP01BWF9TQUZFX0lOVEVHRVI6bGVuZ3RoO3JldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO31mdW5jdGlvbiBpdGVyYXRvclRvQXJyYXkoaXRlcmF0b3Ipe3ZhciBkYXRhLHJlc3VsdD1bXTt3aGlsZSghKGRhdGEgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtyZXN1bHQucHVzaChkYXRhLnZhbHVlKTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gbWFwVG9BcnJheShtYXApe3ZhciBpbmRleD0tMSxyZXN1bHQ9QXJyYXkobWFwLnNpemUpO21hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLGtleSl7cmVzdWx0WysraW5kZXhdID0gW2tleSx2YWx1ZV07fSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gcmVwbGFjZUhvbGRlcnMoYXJyYXkscGxhY2Vob2xkZXIpe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXkubGVuZ3RoLHJlc0luZGV4PS0xLHJlc3VsdD1bXTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7aWYoYXJyYXlbaW5kZXhdID09PSBwbGFjZWhvbGRlcil7YXJyYXlbaW5kZXhdID0gUExBQ0VIT0xERVI7cmVzdWx0WysrcmVzSW5kZXhdID0gaW5kZXg7fX1yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBzZXRUb0FycmF5KHNldCl7dmFyIGluZGV4PS0xLHJlc3VsdD1BcnJheShzZXQuc2l6ZSk7c2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpe3Jlc3VsdFsrK2luZGV4XSA9IHZhbHVlO30pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHN0cmluZ1NpemUoc3RyaW5nKXtpZighKHN0cmluZyAmJiByZUhhc0NvbXBsZXhTeW1ib2wudGVzdChzdHJpbmcpKSl7cmV0dXJuIHN0cmluZy5sZW5ndGg7fXZhciByZXN1bHQ9cmVDb21wbGV4U3ltYm9sLmxhc3RJbmRleCA9IDA7d2hpbGUocmVDb21wbGV4U3ltYm9sLnRlc3Qoc3RyaW5nKSkge3Jlc3VsdCsrO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBzdHJpbmdUb0FycmF5KHN0cmluZyl7cmV0dXJuIHN0cmluZy5tYXRjaChyZUNvbXBsZXhTeW1ib2wpO31mdW5jdGlvbiB1bmVzY2FwZUh0bWxDaGFyKGNocil7cmV0dXJuIGh0bWxVbmVzY2FwZXNbY2hyXTt9ZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQpe2NvbnRleHQgPSBjb250ZXh0P18uZGVmYXVsdHMoe30sY29udGV4dCxfLnBpY2socm9vdCxjb250ZXh0UHJvcHMpKTpyb290O3ZhciBEYXRlPWNvbnRleHQuRGF0ZSxFcnJvcj1jb250ZXh0LkVycm9yLE1hdGg9Y29udGV4dC5NYXRoLFJlZ0V4cD1jb250ZXh0LlJlZ0V4cCxUeXBlRXJyb3I9Y29udGV4dC5UeXBlRXJyb3I7dmFyIGFycmF5UHJvdG89Y29udGV4dC5BcnJheS5wcm90b3R5cGUsb2JqZWN0UHJvdG89Y29udGV4dC5PYmplY3QucHJvdG90eXBlO3ZhciBmdW5jVG9TdHJpbmc9Y29udGV4dC5GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7dmFyIGhhc093blByb3BlcnR5PW9iamVjdFByb3RvLmhhc093blByb3BlcnR5O3ZhciBpZENvdW50ZXI9MDt2YXIgb2JqZWN0Q3RvclN0cmluZz1mdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO3ZhciBvYmplY3RUb1N0cmluZz1vYmplY3RQcm90by50b1N0cmluZzt2YXIgb2xkRGFzaD1yb290Ll87dmFyIHJlSXNOYXRpdmU9UmVnRXhwKFwiXlwiICsgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLFwiXFxcXCQmXCIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csXCIkMS4qP1wiKSArIFwiJFwiKTt2YXIgUmVmbGVjdD1jb250ZXh0LlJlZmxlY3QsU3ltYm9sPWNvbnRleHQuU3ltYm9sLFVpbnQ4QXJyYXk9Y29udGV4dC5VaW50OEFycmF5LGNsZWFyVGltZW91dD1jb250ZXh0LmNsZWFyVGltZW91dCxlbnVtZXJhdGU9UmVmbGVjdD9SZWZsZWN0LmVudW1lcmF0ZTp1bmRlZmluZWQsZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LmdldFByb3RvdHlwZU9mLGdldE93blByb3BlcnR5U3ltYm9scz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLGl0ZXJhdG9yU3ltYm9sPXR5cGVvZiAoaXRlcmF0b3JTeW1ib2wgPSBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yKSA9PSBcInN5bWJvbFwiP2l0ZXJhdG9yU3ltYm9sOnVuZGVmaW5lZCxwcm9wZXJ0eUlzRW51bWVyYWJsZT1vYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxzZXRUaW1lb3V0PWNvbnRleHQuc2V0VGltZW91dCxzcGxpY2U9YXJyYXlQcm90by5zcGxpY2U7dmFyIG5hdGl2ZUNlaWw9TWF0aC5jZWlsLG5hdGl2ZUZsb29yPU1hdGguZmxvb3IsbmF0aXZlSXNGaW5pdGU9Y29udGV4dC5pc0Zpbml0ZSxuYXRpdmVKb2luPWFycmF5UHJvdG8uam9pbixuYXRpdmVLZXlzPU9iamVjdC5rZXlzLG5hdGl2ZU1heD1NYXRoLm1heCxuYXRpdmVNaW49TWF0aC5taW4sbmF0aXZlUGFyc2VJbnQ9Y29udGV4dC5wYXJzZUludCxuYXRpdmVSYW5kb209TWF0aC5yYW5kb20sbmF0aXZlUmV2ZXJzZT1hcnJheVByb3RvLnJldmVyc2U7dmFyIE1hcD1nZXROYXRpdmUoY29udGV4dCxcIk1hcFwiKSxTZXQ9Z2V0TmF0aXZlKGNvbnRleHQsXCJTZXRcIiksV2Vha01hcD1nZXROYXRpdmUoY29udGV4dCxcIldlYWtNYXBcIiksbmF0aXZlQ3JlYXRlPWdldE5hdGl2ZShPYmplY3QsXCJjcmVhdGVcIik7dmFyIG1ldGFNYXA9V2Vha01hcCAmJiBuZXcgV2Vha01hcCgpO3ZhciBtYXBDdG9yU3RyaW5nPU1hcD9mdW5jVG9TdHJpbmcuY2FsbChNYXApOlwiXCIsc2V0Q3RvclN0cmluZz1TZXQ/ZnVuY1RvU3RyaW5nLmNhbGwoU2V0KTpcIlwiO3ZhciBzeW1ib2xQcm90bz1TeW1ib2w/U3ltYm9sLnByb3RvdHlwZTp1bmRlZmluZWQsc3ltYm9sVmFsdWVPZj1TeW1ib2w/c3ltYm9sUHJvdG8udmFsdWVPZjp1bmRlZmluZWQsc3ltYm9sVG9TdHJpbmc9U3ltYm9sP3N5bWJvbFByb3RvLnRvU3RyaW5nOnVuZGVmaW5lZDt2YXIgcmVhbE5hbWVzPXt9O2Z1bmN0aW9uIGxvZGFzaCh2YWx1ZSl7aWYoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSl7aWYodmFsdWUgaW5zdGFuY2VvZiBMb2Rhc2hXcmFwcGVyKXtyZXR1cm4gdmFsdWU7fWlmKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsXCJfX3dyYXBwZWRfX1wiKSl7cmV0dXJuIHdyYXBwZXJDbG9uZSh2YWx1ZSk7fX1yZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIodmFsdWUpO31mdW5jdGlvbiBiYXNlTG9kYXNoKCl7fWZ1bmN0aW9uIExvZGFzaFdyYXBwZXIodmFsdWUsY2hhaW5BbGwpe3RoaXMuX193cmFwcGVkX18gPSB2YWx1ZTt0aGlzLl9fYWN0aW9uc19fID0gW107dGhpcy5fX2NoYWluX18gPSAhIWNoYWluQWxsO3RoaXMuX19pbmRleF9fID0gMDt0aGlzLl9fdmFsdWVzX18gPSB1bmRlZmluZWQ7fWxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzID0ge2VzY2FwZTpyZUVzY2FwZSxldmFsdWF0ZTpyZUV2YWx1YXRlLGludGVycG9sYXRlOnJlSW50ZXJwb2xhdGUsdmFyaWFibGU6XCJcIixpbXBvcnRzOntfOmxvZGFzaH19O2Z1bmN0aW9uIExhenlXcmFwcGVyKHZhbHVlKXt0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7dGhpcy5fX2FjdGlvbnNfXyA9IFtdO3RoaXMuX19kaXJfXyA9IDE7dGhpcy5fX2ZpbHRlcmVkX18gPSBmYWxzZTt0aGlzLl9faXRlcmF0ZWVzX18gPSBbXTt0aGlzLl9fdGFrZUNvdW50X18gPSBNQVhfQVJSQVlfTEVOR1RIO3RoaXMuX192aWV3c19fID0gW107fWZ1bmN0aW9uIGxhenlDbG9uZSgpe3ZhciByZXN1bHQ9bmV3IExhenlXcmFwcGVyKHRoaXMuX193cmFwcGVkX18pO3Jlc3VsdC5fX2FjdGlvbnNfXyA9IGNvcHlBcnJheSh0aGlzLl9fYWN0aW9uc19fKTtyZXN1bHQuX19kaXJfXyA9IHRoaXMuX19kaXJfXztyZXN1bHQuX19maWx0ZXJlZF9fID0gdGhpcy5fX2ZpbHRlcmVkX187cmVzdWx0Ll9faXRlcmF0ZWVzX18gPSBjb3B5QXJyYXkodGhpcy5fX2l0ZXJhdGVlc19fKTtyZXN1bHQuX190YWtlQ291bnRfXyA9IHRoaXMuX190YWtlQ291bnRfXztyZXN1bHQuX192aWV3c19fID0gY29weUFycmF5KHRoaXMuX192aWV3c19fKTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBsYXp5UmV2ZXJzZSgpe2lmKHRoaXMuX19maWx0ZXJlZF9fKXt2YXIgcmVzdWx0PW5ldyBMYXp5V3JhcHBlcih0aGlzKTtyZXN1bHQuX19kaXJfXyA9IC0xO3Jlc3VsdC5fX2ZpbHRlcmVkX18gPSB0cnVlO31lbHNlIHtyZXN1bHQgPSB0aGlzLmNsb25lKCk7cmVzdWx0Ll9fZGlyX18gKj0gLTE7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGxhenlWYWx1ZSgpe3ZhciBhcnJheT10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCksZGlyPXRoaXMuX19kaXJfXyxpc0Fycj1pc0FycmF5KGFycmF5KSxpc1JpZ2h0PWRpciA8IDAsYXJyTGVuZ3RoPWlzQXJyP2FycmF5Lmxlbmd0aDowLHZpZXc9Z2V0VmlldygwLGFyckxlbmd0aCx0aGlzLl9fdmlld3NfXyksc3RhcnQ9dmlldy5zdGFydCxlbmQ9dmlldy5lbmQsbGVuZ3RoPWVuZCAtIHN0YXJ0LGluZGV4PWlzUmlnaHQ/ZW5kOnN0YXJ0IC0gMSxpdGVyYXRlZXM9dGhpcy5fX2l0ZXJhdGVlc19fLGl0ZXJMZW5ndGg9aXRlcmF0ZWVzLmxlbmd0aCxyZXNJbmRleD0wLHRha2VDb3VudD1uYXRpdmVNaW4obGVuZ3RoLHRoaXMuX190YWtlQ291bnRfXyk7aWYoIWlzQXJyIHx8IGFyckxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgfHwgYXJyTGVuZ3RoID09IGxlbmd0aCAmJiB0YWtlQ291bnQgPT0gbGVuZ3RoKXtyZXR1cm4gYmFzZVdyYXBwZXJWYWx1ZShhcnJheSx0aGlzLl9fYWN0aW9uc19fKTt9dmFyIHJlc3VsdD1bXTtvdXRlcjogd2hpbGUobGVuZ3RoLS0gJiYgcmVzSW5kZXggPCB0YWtlQ291bnQpIHtpbmRleCArPSBkaXI7dmFyIGl0ZXJJbmRleD0tMSx2YWx1ZT1hcnJheVtpbmRleF07d2hpbGUoKytpdGVySW5kZXggPCBpdGVyTGVuZ3RoKSB7dmFyIGRhdGE9aXRlcmF0ZWVzW2l0ZXJJbmRleF0saXRlcmF0ZWU9ZGF0YS5pdGVyYXRlZSx0eXBlPWRhdGEudHlwZSxjb21wdXRlZD1pdGVyYXRlZSh2YWx1ZSk7aWYodHlwZSA9PSBMQVpZX01BUF9GTEFHKXt2YWx1ZSA9IGNvbXB1dGVkO31lbHNlIGlmKCFjb21wdXRlZCl7aWYodHlwZSA9PSBMQVpZX0ZJTFRFUl9GTEFHKXtjb250aW51ZSBvdXRlcjt9ZWxzZSB7YnJlYWsgb3V0ZXI7fX19cmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWU7fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIEhhc2goKXt9ZnVuY3Rpb24gaGFzaERlbGV0ZShoYXNoLGtleSl7cmV0dXJuIGhhc2hIYXMoaGFzaCxrZXkpICYmIGRlbGV0ZSBoYXNoW2tleV07fWZ1bmN0aW9uIGhhc2hHZXQoaGFzaCxrZXkpe2lmKG5hdGl2ZUNyZWF0ZSl7dmFyIHJlc3VsdD1oYXNoW2tleV07cmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQ/dW5kZWZpbmVkOnJlc3VsdDt9cmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaGFzaCxrZXkpP2hhc2hba2V5XTp1bmRlZmluZWQ7fWZ1bmN0aW9uIGhhc2hIYXMoaGFzaCxrZXkpe3JldHVybiBuYXRpdmVDcmVhdGU/aGFzaFtrZXldICE9PSB1bmRlZmluZWQ6aGFzT3duUHJvcGVydHkuY2FsbChoYXNoLGtleSk7fWZ1bmN0aW9uIGhhc2hTZXQoaGFzaCxrZXksdmFsdWUpe2hhc2hba2V5XSA9IG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkP0hBU0hfVU5ERUZJTkVEOnZhbHVlO31mdW5jdGlvbiBNYXBDYWNoZSh2YWx1ZXMpe3ZhciBpbmRleD0tMSxsZW5ndGg9dmFsdWVzP3ZhbHVlcy5sZW5ndGg6MDt0aGlzLmNsZWFyKCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBlbnRyeT12YWx1ZXNbaW5kZXhdO3RoaXMuc2V0KGVudHJ5WzBdLGVudHJ5WzFdKTt9fWZ1bmN0aW9uIG1hcENsZWFyKCl7dGhpcy5fX2RhdGFfXyA9IHtoYXNoOm5ldyBIYXNoKCksbWFwOk1hcD9uZXcgTWFwKCk6W10sc3RyaW5nOm5ldyBIYXNoKCl9O31mdW5jdGlvbiBtYXBEZWxldGUoa2V5KXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fO2lmKGlzS2V5YWJsZShrZXkpKXtyZXR1cm4gaGFzaERlbGV0ZSh0eXBlb2Yga2V5ID09IFwic3RyaW5nXCI/ZGF0YS5zdHJpbmc6ZGF0YS5oYXNoLGtleSk7fXJldHVybiBNYXA/ZGF0YS5tYXBbXCJkZWxldGVcIl0oa2V5KTphc3NvY0RlbGV0ZShkYXRhLm1hcCxrZXkpO31mdW5jdGlvbiBtYXBHZXQoa2V5KXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fO2lmKGlzS2V5YWJsZShrZXkpKXtyZXR1cm4gaGFzaEdldCh0eXBlb2Yga2V5ID09IFwic3RyaW5nXCI/ZGF0YS5zdHJpbmc6ZGF0YS5oYXNoLGtleSk7fXJldHVybiBNYXA/ZGF0YS5tYXAuZ2V0KGtleSk6YXNzb2NHZXQoZGF0YS5tYXAsa2V5KTt9ZnVuY3Rpb24gbWFwSGFzKGtleSl7dmFyIGRhdGE9dGhpcy5fX2RhdGFfXztpZihpc0tleWFibGUoa2V5KSl7cmV0dXJuIGhhc2hIYXModHlwZW9mIGtleSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaCxrZXkpO31yZXR1cm4gTWFwP2RhdGEubWFwLmhhcyhrZXkpOmFzc29jSGFzKGRhdGEubWFwLGtleSk7fWZ1bmN0aW9uIG1hcFNldChrZXksdmFsdWUpe3ZhciBkYXRhPXRoaXMuX19kYXRhX187aWYoaXNLZXlhYmxlKGtleSkpe2hhc2hTZXQodHlwZW9mIGtleSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaCxrZXksdmFsdWUpO31lbHNlIGlmKE1hcCl7ZGF0YS5tYXAuc2V0KGtleSx2YWx1ZSk7fWVsc2Uge2Fzc29jU2V0KGRhdGEubWFwLGtleSx2YWx1ZSk7fXJldHVybiB0aGlzO31mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpe3ZhciBpbmRleD0tMSxsZW5ndGg9dmFsdWVzP3ZhbHVlcy5sZW5ndGg6MDt0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3RoaXMucHVzaCh2YWx1ZXNbaW5kZXhdKTt9fWZ1bmN0aW9uIGNhY2hlSGFzKGNhY2hlLHZhbHVlKXt2YXIgbWFwPWNhY2hlLl9fZGF0YV9fO2lmKGlzS2V5YWJsZSh2YWx1ZSkpe3ZhciBkYXRhPW1hcC5fX2RhdGFfXyxoYXNoPXR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaDtyZXR1cm4gaGFzaFt2YWx1ZV0gPT09IEhBU0hfVU5ERUZJTkVEO31yZXR1cm4gbWFwLmhhcyh2YWx1ZSk7fWZ1bmN0aW9uIGNhY2hlUHVzaCh2YWx1ZSl7dmFyIG1hcD10aGlzLl9fZGF0YV9fO2lmKGlzS2V5YWJsZSh2YWx1ZSkpe3ZhciBkYXRhPW1hcC5fX2RhdGFfXyxoYXNoPXR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiP2RhdGEuc3RyaW5nOmRhdGEuaGFzaDtoYXNoW3ZhbHVlXSA9IEhBU0hfVU5ERUZJTkVEO31lbHNlIHttYXAuc2V0KHZhbHVlLEhBU0hfVU5ERUZJTkVEKTt9fWZ1bmN0aW9uIFN0YWNrKHZhbHVlcyl7dmFyIGluZGV4PS0xLGxlbmd0aD12YWx1ZXM/dmFsdWVzLmxlbmd0aDowO3RoaXMuY2xlYXIoKTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIGVudHJ5PXZhbHVlc1tpbmRleF07dGhpcy5zZXQoZW50cnlbMF0sZW50cnlbMV0pO319ZnVuY3Rpb24gc3RhY2tDbGVhcigpe3RoaXMuX19kYXRhX18gPSB7YXJyYXk6W10sbWFwOm51bGx9O31mdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpe3ZhciBkYXRhPXRoaXMuX19kYXRhX18sYXJyYXk9ZGF0YS5hcnJheTtyZXR1cm4gYXJyYXk/YXNzb2NEZWxldGUoYXJyYXksa2V5KTpkYXRhLm1hcFtcImRlbGV0ZVwiXShrZXkpO31mdW5jdGlvbiBzdGFja0dldChrZXkpe3ZhciBkYXRhPXRoaXMuX19kYXRhX18sYXJyYXk9ZGF0YS5hcnJheTtyZXR1cm4gYXJyYXk/YXNzb2NHZXQoYXJyYXksa2V5KTpkYXRhLm1hcC5nZXQoa2V5KTt9ZnVuY3Rpb24gc3RhY2tIYXMoa2V5KXt2YXIgZGF0YT10aGlzLl9fZGF0YV9fLGFycmF5PWRhdGEuYXJyYXk7cmV0dXJuIGFycmF5P2Fzc29jSGFzKGFycmF5LGtleSk6ZGF0YS5tYXAuaGFzKGtleSk7fWZ1bmN0aW9uIHN0YWNrU2V0KGtleSx2YWx1ZSl7dmFyIGRhdGE9dGhpcy5fX2RhdGFfXyxhcnJheT1kYXRhLmFycmF5O2lmKGFycmF5KXtpZihhcnJheS5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSl7YXNzb2NTZXQoYXJyYXksa2V5LHZhbHVlKTt9ZWxzZSB7ZGF0YS5hcnJheSA9IG51bGw7ZGF0YS5tYXAgPSBuZXcgTWFwQ2FjaGUoYXJyYXkpO319dmFyIG1hcD1kYXRhLm1hcDtpZihtYXApe21hcC5zZXQoa2V5LHZhbHVlKTt9cmV0dXJuIHRoaXM7fWZ1bmN0aW9uIGFzc29jRGVsZXRlKGFycmF5LGtleSl7dmFyIGluZGV4PWFzc29jSW5kZXhPZihhcnJheSxrZXkpO2lmKGluZGV4IDwgMCl7cmV0dXJuIGZhbHNlO312YXIgbGFzdEluZGV4PWFycmF5Lmxlbmd0aCAtIDE7aWYoaW5kZXggPT0gbGFzdEluZGV4KXthcnJheS5wb3AoKTt9ZWxzZSB7c3BsaWNlLmNhbGwoYXJyYXksaW5kZXgsMSk7fXJldHVybiB0cnVlO31mdW5jdGlvbiBhc3NvY0dldChhcnJheSxrZXkpe3ZhciBpbmRleD1hc3NvY0luZGV4T2YoYXJyYXksa2V5KTtyZXR1cm4gaW5kZXggPCAwP3VuZGVmaW5lZDphcnJheVtpbmRleF1bMV07fWZ1bmN0aW9uIGFzc29jSGFzKGFycmF5LGtleSl7cmV0dXJuIGFzc29jSW5kZXhPZihhcnJheSxrZXkpID4gLTE7fWZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSxrZXkpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoO3doaWxlKGxlbmd0aC0tKSB7aWYoZXEoYXJyYXlbbGVuZ3RoXVswXSxrZXkpKXtyZXR1cm4gbGVuZ3RoO319cmV0dXJuIC0xO31mdW5jdGlvbiBhc3NvY1NldChhcnJheSxrZXksdmFsdWUpe3ZhciBpbmRleD1hc3NvY0luZGV4T2YoYXJyYXksa2V5KTtpZihpbmRleCA8IDApe2FycmF5LnB1c2goW2tleSx2YWx1ZV0pO31lbHNlIHthcnJheVtpbmRleF1bMV0gPSB2YWx1ZTt9fWZ1bmN0aW9uIGFzc2lnbkluRGVmYXVsdHMob2JqVmFsdWUsc3JjVmFsdWUsa2V5LG9iamVjdCl7aWYob2JqVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBlcShvYmpWYWx1ZSxvYmplY3RQcm90b1trZXldKSAmJiAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3Qsa2V5KSl7cmV0dXJuIHNyY1ZhbHVlO31yZXR1cm4gb2JqVmFsdWU7fWZ1bmN0aW9uIGFzc2lnbk1lcmdlVmFsdWUob2JqZWN0LGtleSx2YWx1ZSl7aWYodmFsdWUgIT09IHVuZGVmaW5lZCAmJiAhZXEob2JqZWN0W2tleV0sdmFsdWUpIHx8IHR5cGVvZiBrZXkgPT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpe29iamVjdFtrZXldID0gdmFsdWU7fX1mdW5jdGlvbiBhc3NpZ25WYWx1ZShvYmplY3Qsa2V5LHZhbHVlKXt2YXIgb2JqVmFsdWU9b2JqZWN0W2tleV07aWYoIWVxKG9ialZhbHVlLHZhbHVlKSB8fCBlcShvYmpWYWx1ZSxvYmplY3RQcm90b1trZXldKSAmJiAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3Qsa2V5KSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpe29iamVjdFtrZXldID0gdmFsdWU7fX1mdW5jdGlvbiBiYXNlQWdncmVnYXRvcihjb2xsZWN0aW9uLHNldHRlcixpdGVyYXRlZSxhY2N1bXVsYXRvcil7YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxrZXksY29sbGVjdGlvbil7c2V0dGVyKGFjY3VtdWxhdG9yLHZhbHVlLGl0ZXJhdGVlKHZhbHVlKSxjb2xsZWN0aW9uKTt9KTtyZXR1cm4gYWNjdW11bGF0b3I7fWZ1bmN0aW9uIGJhc2VBc3NpZ24ob2JqZWN0LHNvdXJjZSl7cmV0dXJuIG9iamVjdCAmJiBjb3B5T2JqZWN0KHNvdXJjZSxrZXlzKHNvdXJjZSksb2JqZWN0KTt9ZnVuY3Rpb24gYmFzZUF0KG9iamVjdCxwYXRocyl7dmFyIGluZGV4PS0xLGlzTmlsPW9iamVjdCA9PSBudWxsLGxlbmd0aD1wYXRocy5sZW5ndGgscmVzdWx0PUFycmF5KGxlbmd0aCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3Jlc3VsdFtpbmRleF0gPSBpc05pbD91bmRlZmluZWQ6Z2V0KG9iamVjdCxwYXRoc1tpbmRleF0pO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlQ2xhbXAobnVtYmVyLGxvd2VyLHVwcGVyKXtpZihudW1iZXIgPT09IG51bWJlcil7aWYodXBwZXIgIT09IHVuZGVmaW5lZCl7bnVtYmVyID0gbnVtYmVyIDw9IHVwcGVyP251bWJlcjp1cHBlcjt9aWYobG93ZXIgIT09IHVuZGVmaW5lZCl7bnVtYmVyID0gbnVtYmVyID49IGxvd2VyP251bWJlcjpsb3dlcjt9fXJldHVybiBudW1iZXI7fWZ1bmN0aW9uIGJhc2VDbG9uZSh2YWx1ZSxpc0RlZXAsY3VzdG9taXplcixrZXksb2JqZWN0LHN0YWNrKXt2YXIgcmVzdWx0O2lmKGN1c3RvbWl6ZXIpe3Jlc3VsdCA9IG9iamVjdD9jdXN0b21pemVyKHZhbHVlLGtleSxvYmplY3Qsc3RhY2spOmN1c3RvbWl6ZXIodmFsdWUpO31pZihyZXN1bHQgIT09IHVuZGVmaW5lZCl7cmV0dXJuIHJlc3VsdDt9aWYoIWlzT2JqZWN0KHZhbHVlKSl7cmV0dXJuIHZhbHVlO312YXIgaXNBcnI9aXNBcnJheSh2YWx1ZSk7aWYoaXNBcnIpe3Jlc3VsdCA9IGluaXRDbG9uZUFycmF5KHZhbHVlKTtpZighaXNEZWVwKXtyZXR1cm4gY29weUFycmF5KHZhbHVlLHJlc3VsdCk7fX1lbHNlIHt2YXIgdGFnPWdldFRhZyh2YWx1ZSksaXNGdW5jPXRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7aWYodGFnID09IG9iamVjdFRhZyB8fCB0YWcgPT0gYXJnc1RhZyB8fCBpc0Z1bmMgJiYgIW9iamVjdCl7aWYoaXNIb3N0T2JqZWN0KHZhbHVlKSl7cmV0dXJuIG9iamVjdD92YWx1ZTp7fTt9cmVzdWx0ID0gaW5pdENsb25lT2JqZWN0KGlzRnVuYz97fTp2YWx1ZSk7aWYoIWlzRGVlcCl7cmV0dXJuIGNvcHlTeW1ib2xzKHZhbHVlLGJhc2VBc3NpZ24ocmVzdWx0LHZhbHVlKSk7fX1lbHNlIHtyZXR1cm4gY2xvbmVhYmxlVGFnc1t0YWddP2luaXRDbG9uZUJ5VGFnKHZhbHVlLHRhZyxpc0RlZXApOm9iamVjdD92YWx1ZTp7fTt9fXN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjaygpKTt2YXIgc3RhY2tlZD1zdGFjay5nZXQodmFsdWUpO2lmKHN0YWNrZWQpe3JldHVybiBzdGFja2VkO31zdGFjay5zZXQodmFsdWUscmVzdWx0KTsoaXNBcnI/YXJyYXlFYWNoOmJhc2VGb3JPd24pKHZhbHVlLGZ1bmN0aW9uKHN1YlZhbHVlLGtleSl7YXNzaWduVmFsdWUocmVzdWx0LGtleSxiYXNlQ2xvbmUoc3ViVmFsdWUsaXNEZWVwLGN1c3RvbWl6ZXIsa2V5LHZhbHVlLHN0YWNrKSk7fSk7cmV0dXJuIGlzQXJyP3Jlc3VsdDpjb3B5U3ltYm9scyh2YWx1ZSxyZXN1bHQpO31mdW5jdGlvbiBiYXNlQ29uZm9ybXMoc291cmNlKXt2YXIgcHJvcHM9a2V5cyhzb3VyY2UpLGxlbmd0aD1wcm9wcy5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKG9iamVjdCl7aWYob2JqZWN0ID09IG51bGwpe3JldHVybiAhbGVuZ3RoO312YXIgaW5kZXg9bGVuZ3RoO3doaWxlKGluZGV4LS0pIHt2YXIga2V5PXByb3BzW2luZGV4XSxwcmVkaWNhdGU9c291cmNlW2tleV0sdmFsdWU9b2JqZWN0W2tleV07aWYodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBPYmplY3Qob2JqZWN0KSkgfHwgIXByZWRpY2F0ZSh2YWx1ZSkpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO307fXZhciBiYXNlQ3JlYXRlPShmdW5jdGlvbigpe2Z1bmN0aW9uIG9iamVjdCgpe31yZXR1cm4gZnVuY3Rpb24ocHJvdG90eXBlKXtpZihpc09iamVjdChwcm90b3R5cGUpKXtvYmplY3QucHJvdG90eXBlID0gcHJvdG90eXBlO3ZhciByZXN1bHQ9bmV3IG9iamVjdCgpO29iamVjdC5wcm90b3R5cGUgPSB1bmRlZmluZWQ7fXJldHVybiByZXN1bHQgfHwge307fTt9KSgpO2Z1bmN0aW9uIGJhc2VEZWxheShmdW5jLHdhaXQsYXJncyl7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZnVuYy5hcHBseSh1bmRlZmluZWQsYXJncyk7fSx3YWl0KTt9ZnVuY3Rpb24gYmFzZURpZmZlcmVuY2UoYXJyYXksdmFsdWVzLGl0ZXJhdGVlLGNvbXBhcmF0b3Ipe3ZhciBpbmRleD0tMSxpbmNsdWRlcz1hcnJheUluY2x1ZGVzLGlzQ29tbW9uPXRydWUsbGVuZ3RoPWFycmF5Lmxlbmd0aCxyZXN1bHQ9W10sdmFsdWVzTGVuZ3RoPXZhbHVlcy5sZW5ndGg7aWYoIWxlbmd0aCl7cmV0dXJuIHJlc3VsdDt9aWYoaXRlcmF0ZWUpe3ZhbHVlcyA9IGFycmF5TWFwKHZhbHVlcyxiYXNlVW5hcnkoaXRlcmF0ZWUpKTt9aWYoY29tcGFyYXRvcil7aW5jbHVkZXMgPSBhcnJheUluY2x1ZGVzV2l0aDtpc0NvbW1vbiA9IGZhbHNlO31lbHNlIGlmKHZhbHVlcy5sZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSl7aW5jbHVkZXMgPSBjYWNoZUhhcztpc0NvbW1vbiA9IGZhbHNlO3ZhbHVlcyA9IG5ldyBTZXRDYWNoZSh2YWx1ZXMpO31vdXRlcjogd2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF0sY29tcHV0ZWQ9aXRlcmF0ZWU/aXRlcmF0ZWUodmFsdWUpOnZhbHVlO2lmKGlzQ29tbW9uICYmIGNvbXB1dGVkID09PSBjb21wdXRlZCl7dmFyIHZhbHVlc0luZGV4PXZhbHVlc0xlbmd0aDt3aGlsZSh2YWx1ZXNJbmRleC0tKSB7aWYodmFsdWVzW3ZhbHVlc0luZGV4XSA9PT0gY29tcHV0ZWQpe2NvbnRpbnVlIG91dGVyO319cmVzdWx0LnB1c2godmFsdWUpO31lbHNlIGlmKCFpbmNsdWRlcyh2YWx1ZXMsY29tcHV0ZWQsY29tcGFyYXRvcikpe3Jlc3VsdC5wdXNoKHZhbHVlKTt9fXJldHVybiByZXN1bHQ7fXZhciBiYXNlRWFjaD1jcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duKTt2YXIgYmFzZUVhY2hSaWdodD1jcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duUmlnaHQsdHJ1ZSk7ZnVuY3Rpb24gYmFzZUV2ZXJ5KGNvbGxlY3Rpb24scHJlZGljYXRlKXt2YXIgcmVzdWx0PXRydWU7YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKXtyZXN1bHQgPSAhIXByZWRpY2F0ZSh2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTtyZXR1cm4gcmVzdWx0O30pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VGaWxsKGFycmF5LHZhbHVlLHN0YXJ0LGVuZCl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGg7c3RhcnQgPSB0b0ludGVnZXIoc3RhcnQpO2lmKHN0YXJ0IDwgMCl7c3RhcnQgPSAtc3RhcnQgPiBsZW5ndGg/MDpsZW5ndGggKyBzdGFydDt9ZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gbGVuZ3RoP2xlbmd0aDp0b0ludGVnZXIoZW5kKTtpZihlbmQgPCAwKXtlbmQgKz0gbGVuZ3RoO31lbmQgPSBzdGFydCA+IGVuZD8wOnRvTGVuZ3RoKGVuZCk7d2hpbGUoc3RhcnQgPCBlbmQpIHthcnJheVtzdGFydCsrXSA9IHZhbHVlO31yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGJhc2VGaWx0ZXIoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ZhciByZXN1bHQ9W107YmFzZUVhY2goY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKXtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsY29sbGVjdGlvbikpe3Jlc3VsdC5wdXNoKHZhbHVlKTt9fSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZUZsYXR0ZW4oYXJyYXksaXNEZWVwLGlzU3RyaWN0LHJlc3VsdCl7cmVzdWx0IHx8IChyZXN1bHQgPSBbXSk7dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF07aWYoaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIChpc1N0cmljdCB8fCBpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpKXtpZihpc0RlZXApe2Jhc2VGbGF0dGVuKHZhbHVlLGlzRGVlcCxpc1N0cmljdCxyZXN1bHQpO31lbHNlIHthcnJheVB1c2gocmVzdWx0LHZhbHVlKTt9fWVsc2UgaWYoIWlzU3RyaWN0KXtyZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSB2YWx1ZTt9fXJldHVybiByZXN1bHQ7fXZhciBiYXNlRm9yPWNyZWF0ZUJhc2VGb3IoKTt2YXIgYmFzZUZvclJpZ2h0PWNyZWF0ZUJhc2VGb3IodHJ1ZSk7ZnVuY3Rpb24gYmFzZUZvckluKG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCA9PSBudWxsP29iamVjdDpiYXNlRm9yKG9iamVjdCxpdGVyYXRlZSxrZXlzSW4pO31mdW5jdGlvbiBiYXNlRm9yT3duKG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yKG9iamVjdCxpdGVyYXRlZSxrZXlzKTt9ZnVuY3Rpb24gYmFzZUZvck93blJpZ2h0KG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yUmlnaHQob2JqZWN0LGl0ZXJhdGVlLGtleXMpO31mdW5jdGlvbiBiYXNlRnVuY3Rpb25zKG9iamVjdCxwcm9wcyl7cmV0dXJuIGFycmF5RmlsdGVyKHByb3BzLGZ1bmN0aW9uKGtleSl7cmV0dXJuIGlzRnVuY3Rpb24ob2JqZWN0W2tleV0pO30pO31mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCxwYXRoKXtwYXRoID0gaXNLZXkocGF0aCxvYmplY3QpP1twYXRoICsgXCJcIl06YmFzZVRvUGF0aChwYXRoKTt2YXIgaW5kZXg9MCxsZW5ndGg9cGF0aC5sZW5ndGg7d2hpbGUob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07fXJldHVybiBpbmRleCAmJiBpbmRleCA9PSBsZW5ndGg/b2JqZWN0OnVuZGVmaW5lZDt9ZnVuY3Rpb24gYmFzZUhhcyhvYmplY3Qsa2V5KXtyZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3Qsa2V5KSB8fCB0eXBlb2Ygb2JqZWN0ID09IFwib2JqZWN0XCIgJiYga2V5IGluIG9iamVjdCAmJiBnZXRQcm90b3R5cGVPZihvYmplY3QpID09PSBudWxsO31mdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LGtleSl7cmV0dXJuIGtleSBpbiBPYmplY3Qob2JqZWN0KTt9ZnVuY3Rpb24gYmFzZUluUmFuZ2UobnVtYmVyLHN0YXJ0LGVuZCl7cmV0dXJuIG51bWJlciA+PSBuYXRpdmVNaW4oc3RhcnQsZW5kKSAmJiBudW1iZXIgPCBuYXRpdmVNYXgoc3RhcnQsZW5kKTt9ZnVuY3Rpb24gYmFzZUludGVyc2VjdGlvbihhcnJheXMsaXRlcmF0ZWUsY29tcGFyYXRvcil7dmFyIGluY2x1ZGVzPWNvbXBhcmF0b3I/YXJyYXlJbmNsdWRlc1dpdGg6YXJyYXlJbmNsdWRlcyxvdGhMZW5ndGg9YXJyYXlzLmxlbmd0aCxvdGhJbmRleD1vdGhMZW5ndGgsY2FjaGVzPUFycmF5KG90aExlbmd0aCkscmVzdWx0PVtdO3doaWxlKG90aEluZGV4LS0pIHt2YXIgYXJyYXk9YXJyYXlzW290aEluZGV4XTtpZihvdGhJbmRleCAmJiBpdGVyYXRlZSl7YXJyYXkgPSBhcnJheU1hcChhcnJheSxiYXNlVW5hcnkoaXRlcmF0ZWUpKTt9Y2FjaGVzW290aEluZGV4XSA9ICFjb21wYXJhdG9yICYmIChpdGVyYXRlZSB8fCBhcnJheS5sZW5ndGggPj0gMTIwKT9uZXcgU2V0Q2FjaGUob3RoSW5kZXggJiYgYXJyYXkpOnVuZGVmaW5lZDt9YXJyYXkgPSBhcnJheXNbMF07dmFyIGluZGV4PS0xLGxlbmd0aD1hcnJheS5sZW5ndGgsc2Vlbj1jYWNoZXNbMF07b3V0ZXI6IHdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YXIgdmFsdWU9YXJyYXlbaW5kZXhdLGNvbXB1dGVkPWl0ZXJhdGVlP2l0ZXJhdGVlKHZhbHVlKTp2YWx1ZTtpZighKHNlZW4/Y2FjaGVIYXMoc2Vlbixjb21wdXRlZCk6aW5jbHVkZXMocmVzdWx0LGNvbXB1dGVkLGNvbXBhcmF0b3IpKSl7dmFyIG90aEluZGV4PW90aExlbmd0aDt3aGlsZSgtLW90aEluZGV4KSB7dmFyIGNhY2hlPWNhY2hlc1tvdGhJbmRleF07aWYoIShjYWNoZT9jYWNoZUhhcyhjYWNoZSxjb21wdXRlZCk6aW5jbHVkZXMoYXJyYXlzW290aEluZGV4XSxjb21wdXRlZCxjb21wYXJhdG9yKSkpe2NvbnRpbnVlIG91dGVyO319aWYoc2Vlbil7c2Vlbi5wdXNoKGNvbXB1dGVkKTt9cmVzdWx0LnB1c2godmFsdWUpO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZUludmVydGVyKG9iamVjdCxzZXR0ZXIsaXRlcmF0ZWUsYWNjdW11bGF0b3Ipe2Jhc2VGb3JPd24ob2JqZWN0LGZ1bmN0aW9uKHZhbHVlLGtleSxvYmplY3Qpe3NldHRlcihhY2N1bXVsYXRvcixpdGVyYXRlZSh2YWx1ZSksa2V5LG9iamVjdCk7fSk7cmV0dXJuIGFjY3VtdWxhdG9yO31mdW5jdGlvbiBiYXNlSW52b2tlKG9iamVjdCxwYXRoLGFyZ3Mpe2lmKCFpc0tleShwYXRoLG9iamVjdCkpe3BhdGggPSBiYXNlVG9QYXRoKHBhdGgpO29iamVjdCA9IHBhcmVudChvYmplY3QscGF0aCk7cGF0aCA9IGxhc3QocGF0aCk7fXZhciBmdW5jPW9iamVjdCA9PSBudWxsP29iamVjdDpvYmplY3RbcGF0aF07cmV0dXJuIGZ1bmMgPT0gbnVsbD91bmRlZmluZWQ6YXBwbHkoZnVuYyxvYmplY3QsYXJncyk7fWZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLG90aGVyLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayl7aWYodmFsdWUgPT09IG90aGVyKXtyZXR1cm4gdHJ1ZTt9aWYodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpe3JldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO31yZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLG90aGVyLGJhc2VJc0VxdWFsLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayk7fWZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3Qsb3RoZXIsZXF1YWxGdW5jLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayl7dmFyIG9iaklzQXJyPWlzQXJyYXkob2JqZWN0KSxvdGhJc0Fycj1pc0FycmF5KG90aGVyKSxvYmpUYWc9YXJyYXlUYWcsb3RoVGFnPWFycmF5VGFnO2lmKCFvYmpJc0Fycil7b2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7aWYob2JqVGFnID09IGFyZ3NUYWcpe29ialRhZyA9IG9iamVjdFRhZzt9ZWxzZSBpZihvYmpUYWcgIT0gb2JqZWN0VGFnKXtvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO319aWYoIW90aElzQXJyKXtvdGhUYWcgPSBnZXRUYWcob3RoZXIpO2lmKG90aFRhZyA9PSBhcmdzVGFnKXtvdGhUYWcgPSBvYmplY3RUYWc7fWVsc2UgaWYob3RoVGFnICE9IG9iamVjdFRhZyl7b3RoSXNBcnIgPSBpc1R5cGVkQXJyYXkob3RoZXIpO319dmFyIG9iaklzT2JqPW9ialRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLG90aElzT2JqPW90aFRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksaXNTYW1lVGFnPW9ialRhZyA9PSBvdGhUYWc7aWYoaXNTYW1lVGFnICYmICEob2JqSXNBcnIgfHwgb2JqSXNPYmopKXtyZXR1cm4gZXF1YWxCeVRhZyhvYmplY3Qsb3RoZXIsb2JqVGFnLGVxdWFsRnVuYyxjdXN0b21pemVyLGJpdG1hc2spO312YXIgaXNQYXJ0aWFsPWJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztpZighaXNQYXJ0aWFsKXt2YXIgb2JqSXNXcmFwcGVkPW9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LFwiX193cmFwcGVkX19cIiksb3RoSXNXcmFwcGVkPW90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsXCJfX3dyYXBwZWRfX1wiKTtpZihvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKXtyZXR1cm4gZXF1YWxGdW5jKG9iaklzV3JhcHBlZD9vYmplY3QudmFsdWUoKTpvYmplY3Qsb3RoSXNXcmFwcGVkP290aGVyLnZhbHVlKCk6b3RoZXIsY3VzdG9taXplcixiaXRtYXNrLHN0YWNrKTt9fWlmKCFpc1NhbWVUYWcpe3JldHVybiBmYWxzZTt9c3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKCkpO3JldHVybiAob2JqSXNBcnI/ZXF1YWxBcnJheXM6ZXF1YWxPYmplY3RzKShvYmplY3Qsb3RoZXIsZXF1YWxGdW5jLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayk7fWZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCxzb3VyY2UsbWF0Y2hEYXRhLGN1c3RvbWl6ZXIpe3ZhciBpbmRleD1tYXRjaERhdGEubGVuZ3RoLGxlbmd0aD1pbmRleCxub0N1c3RvbWl6ZXI9IWN1c3RvbWl6ZXI7aWYob2JqZWN0ID09IG51bGwpe3JldHVybiAhbGVuZ3RoO31vYmplY3QgPSBPYmplY3Qob2JqZWN0KTt3aGlsZShpbmRleC0tKSB7dmFyIGRhdGE9bWF0Y2hEYXRhW2luZGV4XTtpZihub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXT9kYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV06IShkYXRhWzBdIGluIG9iamVjdCkpe3JldHVybiBmYWxzZTt9fXdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHtkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTt2YXIga2V5PWRhdGFbMF0sb2JqVmFsdWU9b2JqZWN0W2tleV0sc3JjVmFsdWU9ZGF0YVsxXTtpZihub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSl7aWYob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKXtyZXR1cm4gZmFsc2U7fX1lbHNlIHt2YXIgc3RhY2s9bmV3IFN0YWNrKCkscmVzdWx0PWN1c3RvbWl6ZXI/Y3VzdG9taXplcihvYmpWYWx1ZSxzcmNWYWx1ZSxrZXksb2JqZWN0LHNvdXJjZSxzdGFjayk6dW5kZWZpbmVkO2lmKCEocmVzdWx0ID09PSB1bmRlZmluZWQ/YmFzZUlzRXF1YWwoc3JjVmFsdWUsb2JqVmFsdWUsY3VzdG9taXplcixVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcsc3RhY2spOnJlc3VsdCkpe3JldHVybiBmYWxzZTt9fX1yZXR1cm4gdHJ1ZTt9ZnVuY3Rpb24gYmFzZUl0ZXJhdGVlKHZhbHVlKXt2YXIgdHlwZT10eXBlb2YgdmFsdWU7aWYodHlwZSA9PSBcImZ1bmN0aW9uXCIpe3JldHVybiB2YWx1ZTt9aWYodmFsdWUgPT0gbnVsbCl7cmV0dXJuIGlkZW50aXR5O31pZih0eXBlID09IFwib2JqZWN0XCIpe3JldHVybiBpc0FycmF5KHZhbHVlKT9iYXNlTWF0Y2hlc1Byb3BlcnR5KHZhbHVlWzBdLHZhbHVlWzFdKTpiYXNlTWF0Y2hlcyh2YWx1ZSk7fXJldHVybiBwcm9wZXJ0eSh2YWx1ZSk7fWZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCl7cmV0dXJuIG5hdGl2ZUtleXMoT2JqZWN0KG9iamVjdCkpO31mdW5jdGlvbiBiYXNlS2V5c0luKG9iamVjdCl7b2JqZWN0ID0gb2JqZWN0ID09IG51bGw/b2JqZWN0Ok9iamVjdChvYmplY3QpO3ZhciByZXN1bHQ9W107Zm9yKHZhciBrZXkgaW4gb2JqZWN0KSB7cmVzdWx0LnB1c2goa2V5KTt9cmV0dXJuIHJlc3VsdDt9aWYoZW51bWVyYXRlICYmICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHt2YWx1ZU9mOjF9LFwidmFsdWVPZlwiKSl7YmFzZUtleXNJbiA9IGZ1bmN0aW9uKG9iamVjdCl7cmV0dXJuIGl0ZXJhdG9yVG9BcnJheShlbnVtZXJhdGUob2JqZWN0KSk7fTt9ZnVuY3Rpb24gYmFzZU1hcChjb2xsZWN0aW9uLGl0ZXJhdGVlKXt2YXIgaW5kZXg9LTEscmVzdWx0PWlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pP0FycmF5KGNvbGxlY3Rpb24ubGVuZ3RoKTpbXTtiYXNlRWFjaChjb2xsZWN0aW9uLGZ1bmN0aW9uKHZhbHVlLGtleSxjb2xsZWN0aW9uKXtyZXN1bHRbKytpbmRleF0gPSBpdGVyYXRlZSh2YWx1ZSxrZXksY29sbGVjdGlvbik7fSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKXt2YXIgbWF0Y2hEYXRhPWdldE1hdGNoRGF0YShzb3VyY2UpO2lmKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pe3ZhciBrZXk9bWF0Y2hEYXRhWzBdWzBdLHZhbHVlPW1hdGNoRGF0YVswXVsxXTtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXtpZihvYmplY3QgPT0gbnVsbCl7cmV0dXJuIGZhbHNlO31yZXR1cm4gb2JqZWN0W2tleV0gPT09IHZhbHVlICYmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IGtleSBpbiBPYmplY3Qob2JqZWN0KSk7fTt9cmV0dXJuIGZ1bmN0aW9uKG9iamVjdCl7cmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCxzb3VyY2UsbWF0Y2hEYXRhKTt9O31mdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsc3JjVmFsdWUpe3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3ZhciBvYmpWYWx1ZT1nZXQob2JqZWN0LHBhdGgpO3JldHVybiBvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIG9ialZhbHVlID09PSBzcmNWYWx1ZT9oYXNJbihvYmplY3QscGF0aCk6YmFzZUlzRXF1YWwoc3JjVmFsdWUsb2JqVmFsdWUsdW5kZWZpbmVkLFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRyk7fTt9ZnVuY3Rpb24gYmFzZU1lcmdlKG9iamVjdCxzb3VyY2Usc3JjSW5kZXgsY3VzdG9taXplcixzdGFjayl7aWYob2JqZWN0ID09PSBzb3VyY2Upe3JldHVybjt9dmFyIHByb3BzPWlzQXJyYXkoc291cmNlKSB8fCBpc1R5cGVkQXJyYXkoc291cmNlKT91bmRlZmluZWQ6a2V5c0luKHNvdXJjZSk7YXJyYXlFYWNoKHByb3BzIHx8IHNvdXJjZSxmdW5jdGlvbihzcmNWYWx1ZSxrZXkpe2lmKHByb3BzKXtrZXkgPSBzcmNWYWx1ZTtzcmNWYWx1ZSA9IHNvdXJjZVtrZXldO31pZihpc09iamVjdChzcmNWYWx1ZSkpe3N0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjaygpKTtiYXNlTWVyZ2VEZWVwKG9iamVjdCxzb3VyY2Usa2V5LHNyY0luZGV4LGJhc2VNZXJnZSxjdXN0b21pemVyLHN0YWNrKTt9ZWxzZSB7dmFyIG5ld1ZhbHVlPWN1c3RvbWl6ZXI/Y3VzdG9taXplcihvYmplY3Rba2V5XSxzcmNWYWx1ZSxrZXkgKyBcIlwiLG9iamVjdCxzb3VyY2Usc3RhY2spOnVuZGVmaW5lZDtpZihuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKXtuZXdWYWx1ZSA9IHNyY1ZhbHVlO31hc3NpZ25NZXJnZVZhbHVlKG9iamVjdCxrZXksbmV3VmFsdWUpO319KTt9ZnVuY3Rpb24gYmFzZU1lcmdlRGVlcChvYmplY3Qsc291cmNlLGtleSxzcmNJbmRleCxtZXJnZUZ1bmMsY3VzdG9taXplcixzdGFjayl7dmFyIG9ialZhbHVlPW9iamVjdFtrZXldLHNyY1ZhbHVlPXNvdXJjZVtrZXldLHN0YWNrZWQ9c3RhY2suZ2V0KHNyY1ZhbHVlKTtpZihzdGFja2VkKXthc3NpZ25NZXJnZVZhbHVlKG9iamVjdCxrZXksc3RhY2tlZCk7cmV0dXJuO312YXIgbmV3VmFsdWU9Y3VzdG9taXplcj9jdXN0b21pemVyKG9ialZhbHVlLHNyY1ZhbHVlLGtleSArIFwiXCIsb2JqZWN0LHNvdXJjZSxzdGFjayk6dW5kZWZpbmVkLGlzQ29tbW9uPW5ld1ZhbHVlID09PSB1bmRlZmluZWQ7aWYoaXNDb21tb24pe25ld1ZhbHVlID0gc3JjVmFsdWU7aWYoaXNBcnJheShzcmNWYWx1ZSkgfHwgaXNUeXBlZEFycmF5KHNyY1ZhbHVlKSl7aWYoaXNBcnJheShvYmpWYWx1ZSkpe25ld1ZhbHVlID0gc3JjSW5kZXg/Y29weUFycmF5KG9ialZhbHVlKTpvYmpWYWx1ZTt9ZWxzZSBpZihpc0FycmF5TGlrZU9iamVjdChvYmpWYWx1ZSkpe25ld1ZhbHVlID0gY29weUFycmF5KG9ialZhbHVlKTt9ZWxzZSB7aXNDb21tb24gPSBmYWxzZTtuZXdWYWx1ZSA9IGJhc2VDbG9uZShzcmNWYWx1ZSk7fX1lbHNlIGlmKGlzUGxhaW5PYmplY3Qoc3JjVmFsdWUpIHx8IGlzQXJndW1lbnRzKHNyY1ZhbHVlKSl7aWYoaXNBcmd1bWVudHMob2JqVmFsdWUpKXtuZXdWYWx1ZSA9IHRvUGxhaW5PYmplY3Qob2JqVmFsdWUpO31lbHNlIGlmKCFpc09iamVjdChvYmpWYWx1ZSkgfHwgc3JjSW5kZXggJiYgaXNGdW5jdGlvbihvYmpWYWx1ZSkpe2lzQ29tbW9uID0gZmFsc2U7bmV3VmFsdWUgPSBiYXNlQ2xvbmUoc3JjVmFsdWUpO31lbHNlIHtuZXdWYWx1ZSA9IHNyY0luZGV4P2Jhc2VDbG9uZShvYmpWYWx1ZSk6b2JqVmFsdWU7fX1lbHNlIHtpc0NvbW1vbiA9IGZhbHNlO319c3RhY2suc2V0KHNyY1ZhbHVlLG5ld1ZhbHVlKTtpZihpc0NvbW1vbil7bWVyZ2VGdW5jKG5ld1ZhbHVlLHNyY1ZhbHVlLHNyY0luZGV4LGN1c3RvbWl6ZXIsc3RhY2spO31hc3NpZ25NZXJnZVZhbHVlKG9iamVjdCxrZXksbmV3VmFsdWUpO31mdW5jdGlvbiBiYXNlT3JkZXJCeShjb2xsZWN0aW9uLGl0ZXJhdGVlcyxvcmRlcnMpe3ZhciBpbmRleD0tMSx0b0l0ZXJhdGVlPWdldEl0ZXJhdGVlKCk7aXRlcmF0ZWVzID0gYXJyYXlNYXAoaXRlcmF0ZWVzLmxlbmd0aD9pdGVyYXRlZXM6QXJyYXkoMSksZnVuY3Rpb24oaXRlcmF0ZWUpe3JldHVybiB0b0l0ZXJhdGVlKGl0ZXJhdGVlKTt9KTt2YXIgcmVzdWx0PWJhc2VNYXAoY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxrZXksY29sbGVjdGlvbil7dmFyIGNyaXRlcmlhPWFycmF5TWFwKGl0ZXJhdGVlcyxmdW5jdGlvbihpdGVyYXRlZSl7cmV0dXJuIGl0ZXJhdGVlKHZhbHVlKTt9KTtyZXR1cm4ge2NyaXRlcmlhOmNyaXRlcmlhLGluZGV4OisraW5kZXgsdmFsdWU6dmFsdWV9O30pO3JldHVybiBiYXNlU29ydEJ5KHJlc3VsdCxmdW5jdGlvbihvYmplY3Qsb3RoZXIpe3JldHVybiBjb21wYXJlTXVsdGlwbGUob2JqZWN0LG90aGVyLG9yZGVycyk7fSk7fWZ1bmN0aW9uIGJhc2VQaWNrKG9iamVjdCxwcm9wcyl7b2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7cmV0dXJuIGFycmF5UmVkdWNlKHByb3BzLGZ1bmN0aW9uKHJlc3VsdCxrZXkpe2lmKGtleSBpbiBvYmplY3Qpe3Jlc3VsdFtrZXldID0gb2JqZWN0W2tleV07fXJldHVybiByZXN1bHQ7fSx7fSk7fWZ1bmN0aW9uIGJhc2VQaWNrQnkob2JqZWN0LHByZWRpY2F0ZSl7dmFyIHJlc3VsdD17fTtiYXNlRm9ySW4ob2JqZWN0LGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYocHJlZGljYXRlKHZhbHVlLGtleSkpe3Jlc3VsdFtrZXldID0gdmFsdWU7fX0pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpe3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3JldHVybiBvYmplY3QgPT0gbnVsbD91bmRlZmluZWQ6b2JqZWN0W2tleV07fTt9ZnVuY3Rpb24gYmFzZVByb3BlcnR5RGVlcChwYXRoKXtyZXR1cm4gZnVuY3Rpb24ob2JqZWN0KXtyZXR1cm4gYmFzZUdldChvYmplY3QscGF0aCk7fTt9ZnVuY3Rpb24gYmFzZVB1bGxBbGwoYXJyYXksdmFsdWVzKXtyZXR1cm4gYmFzZVB1bGxBbGxCeShhcnJheSx2YWx1ZXMpO31mdW5jdGlvbiBiYXNlUHVsbEFsbEJ5KGFycmF5LHZhbHVlcyxpdGVyYXRlZSl7dmFyIGluZGV4PS0xLGxlbmd0aD12YWx1ZXMubGVuZ3RoLHNlZW49YXJyYXk7aWYoaXRlcmF0ZWUpe3NlZW4gPSBhcnJheU1hcChhcnJheSxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGl0ZXJhdGVlKHZhbHVlKTt9KTt9d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBmcm9tSW5kZXg9MCx2YWx1ZT12YWx1ZXNbaW5kZXhdLGNvbXB1dGVkPWl0ZXJhdGVlP2l0ZXJhdGVlKHZhbHVlKTp2YWx1ZTt3aGlsZSgoZnJvbUluZGV4ID0gYmFzZUluZGV4T2Yoc2Vlbixjb21wdXRlZCxmcm9tSW5kZXgpKSA+IC0xKSB7aWYoc2VlbiAhPT0gYXJyYXkpe3NwbGljZS5jYWxsKHNlZW4sZnJvbUluZGV4LDEpO31zcGxpY2UuY2FsbChhcnJheSxmcm9tSW5kZXgsMSk7fX1yZXR1cm4gYXJyYXk7fWZ1bmN0aW9uIGJhc2VQdWxsQXQoYXJyYXksaW5kZXhlcyl7dmFyIGxlbmd0aD1hcnJheT9pbmRleGVzLmxlbmd0aDowLGxhc3RJbmRleD1sZW5ndGggLSAxO3doaWxlKGxlbmd0aC0tKSB7dmFyIGluZGV4PWluZGV4ZXNbbGVuZ3RoXTtpZihsYXN0SW5kZXggPT0gbGVuZ3RoIHx8IGluZGV4ICE9IHByZXZpb3VzKXt2YXIgcHJldmlvdXM9aW5kZXg7aWYoaXNJbmRleChpbmRleCkpe3NwbGljZS5jYWxsKGFycmF5LGluZGV4LDEpO31lbHNlIGlmKCFpc0tleShpbmRleCxhcnJheSkpe3ZhciBwYXRoPWJhc2VUb1BhdGgoaW5kZXgpLG9iamVjdD1wYXJlbnQoYXJyYXkscGF0aCk7aWYob2JqZWN0ICE9IG51bGwpe2RlbGV0ZSBvYmplY3RbbGFzdChwYXRoKV07fX1lbHNlIHtkZWxldGUgYXJyYXlbaW5kZXhdO319fXJldHVybiBhcnJheTt9ZnVuY3Rpb24gYmFzZVJhbmRvbShsb3dlcix1cHBlcil7cmV0dXJuIGxvd2VyICsgbmF0aXZlRmxvb3IobmF0aXZlUmFuZG9tKCkgKiAodXBwZXIgLSBsb3dlciArIDEpKTt9ZnVuY3Rpb24gYmFzZVJhbmdlKHN0YXJ0LGVuZCxzdGVwLGZyb21SaWdodCl7dmFyIGluZGV4PS0xLGxlbmd0aD1uYXRpdmVNYXgobmF0aXZlQ2VpbCgoZW5kIC0gc3RhcnQpIC8gKHN0ZXAgfHwgMSkpLDApLHJlc3VsdD1BcnJheShsZW5ndGgpO3doaWxlKGxlbmd0aC0tKSB7cmVzdWx0W2Zyb21SaWdodD9sZW5ndGg6KytpbmRleF0gPSBzdGFydDtzdGFydCArPSBzdGVwO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlU2V0KG9iamVjdCxwYXRoLHZhbHVlLGN1c3RvbWl6ZXIpe3BhdGggPSBpc0tleShwYXRoLG9iamVjdCk/W3BhdGggKyBcIlwiXTpiYXNlVG9QYXRoKHBhdGgpO3ZhciBpbmRleD0tMSxsZW5ndGg9cGF0aC5sZW5ndGgsbGFzdEluZGV4PWxlbmd0aCAtIDEsbmVzdGVkPW9iamVjdDt3aGlsZShuZXN0ZWQgIT0gbnVsbCAmJiArK2luZGV4IDwgbGVuZ3RoKSB7dmFyIGtleT1wYXRoW2luZGV4XTtpZihpc09iamVjdChuZXN0ZWQpKXt2YXIgbmV3VmFsdWU9dmFsdWU7aWYoaW5kZXggIT0gbGFzdEluZGV4KXt2YXIgb2JqVmFsdWU9bmVzdGVkW2tleV07bmV3VmFsdWUgPSBjdXN0b21pemVyP2N1c3RvbWl6ZXIob2JqVmFsdWUsa2V5LG5lc3RlZCk6dW5kZWZpbmVkO2lmKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpe25ld1ZhbHVlID0gb2JqVmFsdWUgPT0gbnVsbD9pc0luZGV4KHBhdGhbaW5kZXggKyAxXSk/W106e306b2JqVmFsdWU7fX1hc3NpZ25WYWx1ZShuZXN0ZWQsa2V5LG5ld1ZhbHVlKTt9bmVzdGVkID0gbmVzdGVkW2tleV07fXJldHVybiBvYmplY3Q7fXZhciBiYXNlU2V0RGF0YT0hbWV0YU1hcD9pZGVudGl0eTpmdW5jdGlvbihmdW5jLGRhdGEpe21ldGFNYXAuc2V0KGZ1bmMsZGF0YSk7cmV0dXJuIGZ1bmM7fTtmdW5jdGlvbiBiYXNlU2xpY2UoYXJyYXksc3RhcnQsZW5kKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5Lmxlbmd0aDtpZihzdGFydCA8IDApe3N0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoPzA6bGVuZ3RoICsgc3RhcnQ7fWVuZCA9IGVuZCA+IGxlbmd0aD9sZW5ndGg6ZW5kO2lmKGVuZCA8IDApe2VuZCArPSBsZW5ndGg7fWxlbmd0aCA9IHN0YXJ0ID4gZW5kPzA6ZW5kIC0gc3RhcnQgPj4+IDA7c3RhcnQgPj4+PSAwO3ZhciByZXN1bHQ9QXJyYXkobGVuZ3RoKTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7cmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4ICsgc3RhcnRdO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlU29tZShjb2xsZWN0aW9uLHByZWRpY2F0ZSl7dmFyIHJlc3VsdDtiYXNlRWFjaChjb2xsZWN0aW9uLGZ1bmN0aW9uKHZhbHVlLGluZGV4LGNvbGxlY3Rpb24pe3Jlc3VsdCA9IHByZWRpY2F0ZSh2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTtyZXR1cm4gIXJlc3VsdDt9KTtyZXR1cm4gISFyZXN1bHQ7fWZ1bmN0aW9uIGJhc2VTb3J0ZWRJbmRleChhcnJheSx2YWx1ZSxyZXRIaWdoZXN0KXt2YXIgbG93PTAsaGlnaD1hcnJheT9hcnJheS5sZW5ndGg6bG93O2lmKHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiICYmIHZhbHVlID09PSB2YWx1ZSAmJiBoaWdoIDw9IEhBTEZfTUFYX0FSUkFZX0xFTkdUSCl7d2hpbGUobG93IDwgaGlnaCkge3ZhciBtaWQ9bG93ICsgaGlnaCA+Pj4gMSxjb21wdXRlZD1hcnJheVttaWRdO2lmKChyZXRIaWdoZXN0P2NvbXB1dGVkIDw9IHZhbHVlOmNvbXB1dGVkIDwgdmFsdWUpICYmIGNvbXB1dGVkICE9PSBudWxsKXtsb3cgPSBtaWQgKyAxO31lbHNlIHtoaWdoID0gbWlkO319cmV0dXJuIGhpZ2g7fXJldHVybiBiYXNlU29ydGVkSW5kZXhCeShhcnJheSx2YWx1ZSxpZGVudGl0eSxyZXRIaWdoZXN0KTt9ZnVuY3Rpb24gYmFzZVNvcnRlZEluZGV4QnkoYXJyYXksdmFsdWUsaXRlcmF0ZWUscmV0SGlnaGVzdCl7dmFsdWUgPSBpdGVyYXRlZSh2YWx1ZSk7dmFyIGxvdz0wLGhpZ2g9YXJyYXk/YXJyYXkubGVuZ3RoOjAsdmFsSXNOYU49dmFsdWUgIT09IHZhbHVlLHZhbElzTnVsbD12YWx1ZSA9PT0gbnVsbCx2YWxJc1VuZGVmPXZhbHVlID09PSB1bmRlZmluZWQ7d2hpbGUobG93IDwgaGlnaCkge3ZhciBtaWQ9bmF0aXZlRmxvb3IoKGxvdyArIGhpZ2gpIC8gMiksY29tcHV0ZWQ9aXRlcmF0ZWUoYXJyYXlbbWlkXSksaXNEZWY9Y29tcHV0ZWQgIT09IHVuZGVmaW5lZCxpc1JlZmxleGl2ZT1jb21wdXRlZCA9PT0gY29tcHV0ZWQ7aWYodmFsSXNOYU4pe3ZhciBzZXRMb3c9aXNSZWZsZXhpdmUgfHwgcmV0SGlnaGVzdDt9ZWxzZSBpZih2YWxJc051bGwpe3NldExvdyA9IGlzUmVmbGV4aXZlICYmIGlzRGVmICYmIChyZXRIaWdoZXN0IHx8IGNvbXB1dGVkICE9IG51bGwpO31lbHNlIGlmKHZhbElzVW5kZWYpe3NldExvdyA9IGlzUmVmbGV4aXZlICYmIChyZXRIaWdoZXN0IHx8IGlzRGVmKTt9ZWxzZSBpZihjb21wdXRlZCA9PSBudWxsKXtzZXRMb3cgPSBmYWxzZTt9ZWxzZSB7c2V0TG93ID0gcmV0SGlnaGVzdD9jb21wdXRlZCA8PSB2YWx1ZTpjb21wdXRlZCA8IHZhbHVlO31pZihzZXRMb3cpe2xvdyA9IG1pZCArIDE7fWVsc2Uge2hpZ2ggPSBtaWQ7fX1yZXR1cm4gbmF0aXZlTWluKGhpZ2gsTUFYX0FSUkFZX0lOREVYKTt9ZnVuY3Rpb24gYmFzZVNvcnRlZFVuaXEoYXJyYXkpe3JldHVybiBiYXNlU29ydGVkVW5pcUJ5KGFycmF5KTt9ZnVuY3Rpb24gYmFzZVNvcnRlZFVuaXFCeShhcnJheSxpdGVyYXRlZSl7dmFyIGluZGV4PTAsbGVuZ3RoPWFycmF5Lmxlbmd0aCx2YWx1ZT1hcnJheVswXSxjb21wdXRlZD1pdGVyYXRlZT9pdGVyYXRlZSh2YWx1ZSk6dmFsdWUsc2Vlbj1jb21wdXRlZCxyZXNJbmRleD0wLHJlc3VsdD1bdmFsdWVdO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHt2YWx1ZSA9IGFycmF5W2luZGV4XSxjb21wdXRlZCA9IGl0ZXJhdGVlP2l0ZXJhdGVlKHZhbHVlKTp2YWx1ZTtpZighZXEoY29tcHV0ZWQsc2Vlbikpe3NlZW4gPSBjb21wdXRlZDtyZXN1bHRbKytyZXNJbmRleF0gPSB2YWx1ZTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGJhc2VUb1BhdGgodmFsdWUpe3JldHVybiBpc0FycmF5KHZhbHVlKT92YWx1ZTpzdHJpbmdUb1BhdGgodmFsdWUpO31mdW5jdGlvbiBiYXNlVW5pcShhcnJheSxpdGVyYXRlZSxjb21wYXJhdG9yKXt2YXIgaW5kZXg9LTEsaW5jbHVkZXM9YXJyYXlJbmNsdWRlcyxsZW5ndGg9YXJyYXkubGVuZ3RoLGlzQ29tbW9uPXRydWUscmVzdWx0PVtdLHNlZW49cmVzdWx0O2lmKGNvbXBhcmF0b3Ipe2lzQ29tbW9uID0gZmFsc2U7aW5jbHVkZXMgPSBhcnJheUluY2x1ZGVzV2l0aDt9ZWxzZSBpZihsZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSl7dmFyIHNldD1pdGVyYXRlZT9udWxsOmNyZWF0ZVNldChhcnJheSk7aWYoc2V0KXtyZXR1cm4gc2V0VG9BcnJheShzZXQpO31pc0NvbW1vbiA9IGZhbHNlO2luY2x1ZGVzID0gY2FjaGVIYXM7c2VlbiA9IG5ldyBTZXRDYWNoZSgpO31lbHNlIHtzZWVuID0gaXRlcmF0ZWU/W106cmVzdWx0O31vdXRlcjogd2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciB2YWx1ZT1hcnJheVtpbmRleF0sY29tcHV0ZWQ9aXRlcmF0ZWU/aXRlcmF0ZWUodmFsdWUpOnZhbHVlO2lmKGlzQ29tbW9uICYmIGNvbXB1dGVkID09PSBjb21wdXRlZCl7dmFyIHNlZW5JbmRleD1zZWVuLmxlbmd0aDt3aGlsZShzZWVuSW5kZXgtLSkge2lmKHNlZW5bc2VlbkluZGV4XSA9PT0gY29tcHV0ZWQpe2NvbnRpbnVlIG91dGVyO319aWYoaXRlcmF0ZWUpe3NlZW4ucHVzaChjb21wdXRlZCk7fXJlc3VsdC5wdXNoKHZhbHVlKTt9ZWxzZSBpZighaW5jbHVkZXMoc2Vlbixjb21wdXRlZCxjb21wYXJhdG9yKSl7aWYoc2VlbiAhPT0gcmVzdWx0KXtzZWVuLnB1c2goY29tcHV0ZWQpO31yZXN1bHQucHVzaCh2YWx1ZSk7fX1yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBiYXNlVW5zZXQob2JqZWN0LHBhdGgpe3BhdGggPSBpc0tleShwYXRoLG9iamVjdCk/W3BhdGggKyBcIlwiXTpiYXNlVG9QYXRoKHBhdGgpO29iamVjdCA9IHBhcmVudChvYmplY3QscGF0aCk7dmFyIGtleT1sYXN0KHBhdGgpO3JldHVybiBvYmplY3QgIT0gbnVsbCAmJiBoYXMob2JqZWN0LGtleSk/ZGVsZXRlIG9iamVjdFtrZXldOnRydWU7fWZ1bmN0aW9uIGJhc2VXaGlsZShhcnJheSxwcmVkaWNhdGUsaXNEcm9wLGZyb21SaWdodCl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGgsaW5kZXg9ZnJvbVJpZ2h0P2xlbmd0aDotMTt3aGlsZSgoZnJvbVJpZ2h0P2luZGV4LS06KytpbmRleCA8IGxlbmd0aCkgJiYgcHJlZGljYXRlKGFycmF5W2luZGV4XSxpbmRleCxhcnJheSkpIHt9cmV0dXJuIGlzRHJvcD9iYXNlU2xpY2UoYXJyYXksZnJvbVJpZ2h0PzA6aW5kZXgsZnJvbVJpZ2h0P2luZGV4ICsgMTpsZW5ndGgpOmJhc2VTbGljZShhcnJheSxmcm9tUmlnaHQ/aW5kZXggKyAxOjAsZnJvbVJpZ2h0P2xlbmd0aDppbmRleCk7fWZ1bmN0aW9uIGJhc2VXcmFwcGVyVmFsdWUodmFsdWUsYWN0aW9ucyl7dmFyIHJlc3VsdD12YWx1ZTtpZihyZXN1bHQgaW5zdGFuY2VvZiBMYXp5V3JhcHBlcil7cmVzdWx0ID0gcmVzdWx0LnZhbHVlKCk7fXJldHVybiBhcnJheVJlZHVjZShhY3Rpb25zLGZ1bmN0aW9uKHJlc3VsdCxhY3Rpb24pe3JldHVybiBhY3Rpb24uZnVuYy5hcHBseShhY3Rpb24udGhpc0FyZyxhcnJheVB1c2goW3Jlc3VsdF0sYWN0aW9uLmFyZ3MpKTt9LHJlc3VsdCk7fWZ1bmN0aW9uIGJhc2VYb3IoYXJyYXlzLGl0ZXJhdGVlLGNvbXBhcmF0b3Ipe3ZhciBpbmRleD0tMSxsZW5ndGg9YXJyYXlzLmxlbmd0aDt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHJlc3VsdD1yZXN1bHQ/YXJyYXlQdXNoKGJhc2VEaWZmZXJlbmNlKHJlc3VsdCxhcnJheXNbaW5kZXhdLGl0ZXJhdGVlLGNvbXBhcmF0b3IpLGJhc2VEaWZmZXJlbmNlKGFycmF5c1tpbmRleF0scmVzdWx0LGl0ZXJhdGVlLGNvbXBhcmF0b3IpKTphcnJheXNbaW5kZXhdO31yZXR1cm4gcmVzdWx0ICYmIHJlc3VsdC5sZW5ndGg/YmFzZVVuaXEocmVzdWx0LGl0ZXJhdGVlLGNvbXBhcmF0b3IpOltdO31mdW5jdGlvbiBiYXNlWmlwT2JqZWN0KHByb3BzLHZhbHVlcyxhc3NpZ25GdW5jKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXByb3BzLmxlbmd0aCx2YWxzTGVuZ3RoPXZhbHVlcy5sZW5ndGgscmVzdWx0PXt9O3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHthc3NpZ25GdW5jKHJlc3VsdCxwcm9wc1tpbmRleF0saW5kZXggPCB2YWxzTGVuZ3RoP3ZhbHVlc1tpbmRleF06dW5kZWZpbmVkKTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY2xvbmVCdWZmZXIoYnVmZmVyKXt2YXIgQ3Rvcj1idWZmZXIuY29uc3RydWN0b3IscmVzdWx0PW5ldyBDdG9yKGJ1ZmZlci5ieXRlTGVuZ3RoKSx2aWV3PW5ldyBVaW50OEFycmF5KHJlc3VsdCk7dmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY2xvbmVNYXAobWFwKXt2YXIgQ3Rvcj1tYXAuY29uc3RydWN0b3I7cmV0dXJuIGFycmF5UmVkdWNlKG1hcFRvQXJyYXkobWFwKSxhZGRNYXBFbnRyeSxuZXcgQ3RvcigpKTt9ZnVuY3Rpb24gY2xvbmVSZWdFeHAocmVnZXhwKXt2YXIgQ3Rvcj1yZWdleHAuY29uc3RydWN0b3IscmVzdWx0PW5ldyBDdG9yKHJlZ2V4cC5zb3VyY2UscmVGbGFncy5leGVjKHJlZ2V4cCkpO3Jlc3VsdC5sYXN0SW5kZXggPSByZWdleHAubGFzdEluZGV4O3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGNsb25lU2V0KHNldCl7dmFyIEN0b3I9c2V0LmNvbnN0cnVjdG9yO3JldHVybiBhcnJheVJlZHVjZShzZXRUb0FycmF5KHNldCksYWRkU2V0RW50cnksbmV3IEN0b3IoKSk7fWZ1bmN0aW9uIGNsb25lU3ltYm9sKHN5bWJvbCl7cmV0dXJuIFN5bWJvbD9PYmplY3Qoc3ltYm9sVmFsdWVPZi5jYWxsKHN5bWJvbCkpOnt9O31mdW5jdGlvbiBjbG9uZVR5cGVkQXJyYXkodHlwZWRBcnJheSxpc0RlZXApe3ZhciBidWZmZXI9dHlwZWRBcnJheS5idWZmZXIsQ3Rvcj10eXBlZEFycmF5LmNvbnN0cnVjdG9yO3JldHVybiBuZXcgQ3Rvcihpc0RlZXA/Y2xvbmVCdWZmZXIoYnVmZmVyKTpidWZmZXIsdHlwZWRBcnJheS5ieXRlT2Zmc2V0LHR5cGVkQXJyYXkubGVuZ3RoKTt9ZnVuY3Rpb24gY29tcG9zZUFyZ3MoYXJncyxwYXJ0aWFscyxob2xkZXJzKXt2YXIgaG9sZGVyc0xlbmd0aD1ob2xkZXJzLmxlbmd0aCxhcmdzSW5kZXg9LTEsYXJnc0xlbmd0aD1uYXRpdmVNYXgoYXJncy5sZW5ndGggLSBob2xkZXJzTGVuZ3RoLDApLGxlZnRJbmRleD0tMSxsZWZ0TGVuZ3RoPXBhcnRpYWxzLmxlbmd0aCxyZXN1bHQ9QXJyYXkobGVmdExlbmd0aCArIGFyZ3NMZW5ndGgpO3doaWxlKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge3Jlc3VsdFtsZWZ0SW5kZXhdID0gcGFydGlhbHNbbGVmdEluZGV4XTt9d2hpbGUoKythcmdzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7cmVzdWx0W2hvbGRlcnNbYXJnc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleF07fXdoaWxlKGFyZ3NMZW5ndGgtLSkge3Jlc3VsdFtsZWZ0SW5kZXgrK10gPSBhcmdzW2FyZ3NJbmRleCsrXTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY29tcG9zZUFyZ3NSaWdodChhcmdzLHBhcnRpYWxzLGhvbGRlcnMpe3ZhciBob2xkZXJzSW5kZXg9LTEsaG9sZGVyc0xlbmd0aD1ob2xkZXJzLmxlbmd0aCxhcmdzSW5kZXg9LTEsYXJnc0xlbmd0aD1uYXRpdmVNYXgoYXJncy5sZW5ndGggLSBob2xkZXJzTGVuZ3RoLDApLHJpZ2h0SW5kZXg9LTEscmlnaHRMZW5ndGg9cGFydGlhbHMubGVuZ3RoLHJlc3VsdD1BcnJheShhcmdzTGVuZ3RoICsgcmlnaHRMZW5ndGgpO3doaWxlKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge3Jlc3VsdFthcmdzSW5kZXhdID0gYXJnc1thcmdzSW5kZXhdO312YXIgb2Zmc2V0PWFyZ3NJbmRleDt3aGlsZSgrK3JpZ2h0SW5kZXggPCByaWdodExlbmd0aCkge3Jlc3VsdFtvZmZzZXQgKyByaWdodEluZGV4XSA9IHBhcnRpYWxzW3JpZ2h0SW5kZXhdO313aGlsZSgrK2hvbGRlcnNJbmRleCA8IGhvbGRlcnNMZW5ndGgpIHtyZXN1bHRbb2Zmc2V0ICsgaG9sZGVyc1tob2xkZXJzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4KytdO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBjb3B5QXJyYXkoc291cmNlLGFycmF5KXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXNvdXJjZS5sZW5ndGg7YXJyYXkgfHwgKGFycmF5ID0gQXJyYXkobGVuZ3RoKSk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2FycmF5W2luZGV4XSA9IHNvdXJjZVtpbmRleF07fXJldHVybiBhcnJheTt9ZnVuY3Rpb24gY29weU9iamVjdChzb3VyY2UscHJvcHMsb2JqZWN0KXtyZXR1cm4gY29weU9iamVjdFdpdGgoc291cmNlLHByb3BzLG9iamVjdCk7fWZ1bmN0aW9uIGNvcHlPYmplY3RXaXRoKHNvdXJjZSxwcm9wcyxvYmplY3QsY3VzdG9taXplcil7b2JqZWN0IHx8IChvYmplY3QgPSB7fSk7dmFyIGluZGV4PS0xLGxlbmd0aD1wcm9wcy5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBrZXk9cHJvcHNbaW5kZXhdLG5ld1ZhbHVlPWN1c3RvbWl6ZXI/Y3VzdG9taXplcihvYmplY3Rba2V5XSxzb3VyY2Vba2V5XSxrZXksb2JqZWN0LHNvdXJjZSk6c291cmNlW2tleV07YXNzaWduVmFsdWUob2JqZWN0LGtleSxuZXdWYWx1ZSk7fXJldHVybiBvYmplY3Q7fWZ1bmN0aW9uIGNvcHlTeW1ib2xzKHNvdXJjZSxvYmplY3Qpe3JldHVybiBjb3B5T2JqZWN0KHNvdXJjZSxnZXRTeW1ib2xzKHNvdXJjZSksb2JqZWN0KTt9ZnVuY3Rpb24gY3JlYXRlQWdncmVnYXRvcihzZXR0ZXIsaW5pdGlhbGl6ZXIpe3JldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLGl0ZXJhdGVlKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5QWdncmVnYXRvcjpiYXNlQWdncmVnYXRvcixhY2N1bXVsYXRvcj1pbml0aWFsaXplcj9pbml0aWFsaXplcigpOnt9O3JldHVybiBmdW5jKGNvbGxlY3Rpb24sc2V0dGVyLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSxhY2N1bXVsYXRvcik7fTt9ZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpe3JldHVybiByZXN0KGZ1bmN0aW9uKG9iamVjdCxzb3VyY2VzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXNvdXJjZXMubGVuZ3RoLGN1c3RvbWl6ZXI9bGVuZ3RoID4gMT9zb3VyY2VzW2xlbmd0aCAtIDFdOnVuZGVmaW5lZCxndWFyZD1sZW5ndGggPiAyP3NvdXJjZXNbMl06dW5kZWZpbmVkO2N1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSBcImZ1bmN0aW9uXCI/KGxlbmd0aC0tLGN1c3RvbWl6ZXIpOnVuZGVmaW5lZDtpZihndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzb3VyY2VzWzBdLHNvdXJjZXNbMV0sZ3VhcmQpKXtjdXN0b21pemVyID0gbGVuZ3RoIDwgMz91bmRlZmluZWQ6Y3VzdG9taXplcjtsZW5ndGggPSAxO31vYmplY3QgPSBPYmplY3Qob2JqZWN0KTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHNvdXJjZT1zb3VyY2VzW2luZGV4XTtpZihzb3VyY2Upe2Fzc2lnbmVyKG9iamVjdCxzb3VyY2UsaW5kZXgsY3VzdG9taXplcik7fX1yZXR1cm4gb2JqZWN0O30pO31mdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYyxmcm9tUmlnaHQpe3JldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLGl0ZXJhdGVlKXtpZihjb2xsZWN0aW9uID09IG51bGwpe3JldHVybiBjb2xsZWN0aW9uO31pZighaXNBcnJheUxpa2UoY29sbGVjdGlvbikpe3JldHVybiBlYWNoRnVuYyhjb2xsZWN0aW9uLGl0ZXJhdGVlKTt9dmFyIGxlbmd0aD1jb2xsZWN0aW9uLmxlbmd0aCxpbmRleD1mcm9tUmlnaHQ/bGVuZ3RoOi0xLGl0ZXJhYmxlPU9iamVjdChjb2xsZWN0aW9uKTt3aGlsZShmcm9tUmlnaHQ/aW5kZXgtLTorK2luZGV4IDwgbGVuZ3RoKSB7aWYoaXRlcmF0ZWUoaXRlcmFibGVbaW5kZXhdLGluZGV4LGl0ZXJhYmxlKSA9PT0gZmFsc2Upe2JyZWFrO319cmV0dXJuIGNvbGxlY3Rpb247fTt9ZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpe3JldHVybiBmdW5jdGlvbihvYmplY3QsaXRlcmF0ZWUsa2V5c0Z1bmMpe3ZhciBpbmRleD0tMSxpdGVyYWJsZT1PYmplY3Qob2JqZWN0KSxwcm9wcz1rZXlzRnVuYyhvYmplY3QpLGxlbmd0aD1wcm9wcy5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pIHt2YXIga2V5PXByb3BzW2Zyb21SaWdodD9sZW5ndGg6KytpbmRleF07aWYoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSxrZXksaXRlcmFibGUpID09PSBmYWxzZSl7YnJlYWs7fX1yZXR1cm4gb2JqZWN0O307fWZ1bmN0aW9uIGNyZWF0ZUJhc2VXcmFwcGVyKGZ1bmMsYml0bWFzayx0aGlzQXJnKXt2YXIgaXNCaW5kPWJpdG1hc2sgJiBCSU5EX0ZMQUcsQ3Rvcj1jcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtmdW5jdGlvbiB3cmFwcGVyKCl7dmFyIGZuPXRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcj9DdG9yOmZ1bmM7cmV0dXJuIGZuLmFwcGx5KGlzQmluZD90aGlzQXJnOnRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHdyYXBwZXI7fWZ1bmN0aW9uIGNyZWF0ZUNhc2VGaXJzdChtZXRob2ROYW1lKXtyZXR1cm4gZnVuY3Rpb24oc3RyaW5nKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3ZhciBzdHJTeW1ib2xzPXJlSGFzQ29tcGxleFN5bWJvbC50ZXN0KHN0cmluZyk/c3RyaW5nVG9BcnJheShzdHJpbmcpOnVuZGVmaW5lZCxjaHI9c3RyU3ltYm9scz9zdHJTeW1ib2xzWzBdOnN0cmluZy5jaGFyQXQoMCksdHJhaWxpbmc9c3RyU3ltYm9scz9zdHJTeW1ib2xzLnNsaWNlKDEpLmpvaW4oXCJcIik6c3RyaW5nLnNsaWNlKDEpO3JldHVybiBjaHJbbWV0aG9kTmFtZV0oKSArIHRyYWlsaW5nO307fWZ1bmN0aW9uIGNyZWF0ZUNvbXBvdW5kZXIoY2FsbGJhY2spe3JldHVybiBmdW5jdGlvbihzdHJpbmcpe3JldHVybiBhcnJheVJlZHVjZSh3b3JkcyhkZWJ1cnIoc3RyaW5nKSksY2FsbGJhY2ssXCJcIik7fTt9ZnVuY3Rpb24gY3JlYXRlQ3RvcldyYXBwZXIoQ3Rvcil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9YXJndW1lbnRzO3N3aXRjaChhcmdzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgQ3RvcigpO2Nhc2UgMTpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSk7Y2FzZSAyOnJldHVybiBuZXcgQ3RvcihhcmdzWzBdLGFyZ3NbMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSk7Y2FzZSA1OnJldHVybiBuZXcgQ3RvcihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdLGFyZ3NbNF0pO2Nhc2UgNjpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSxhcmdzWzRdLGFyZ3NbNV0pO2Nhc2UgNzpyZXR1cm4gbmV3IEN0b3IoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSxhcmdzWzRdLGFyZ3NbNV0sYXJnc1s2XSk7fXZhciB0aGlzQmluZGluZz1iYXNlQ3JlYXRlKEN0b3IucHJvdG90eXBlKSxyZXN1bHQ9Q3Rvci5hcHBseSh0aGlzQmluZGluZyxhcmdzKTtyZXR1cm4gaXNPYmplY3QocmVzdWx0KT9yZXN1bHQ6dGhpc0JpbmRpbmc7fTt9ZnVuY3Rpb24gY3JlYXRlQ3VycnlXcmFwcGVyKGZ1bmMsYml0bWFzayxhcml0eSl7dmFyIEN0b3I9Y3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7ZnVuY3Rpb24gd3JhcHBlcigpe3ZhciBsZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxpbmRleD1sZW5ndGgsYXJncz1BcnJheShsZW5ndGgpLGZuPXRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcj9DdG9yOmZ1bmMscGxhY2Vob2xkZXI9d3JhcHBlci5wbGFjZWhvbGRlcjt3aGlsZShpbmRleC0tKSB7YXJnc1tpbmRleF0gPSBhcmd1bWVudHNbaW5kZXhdO312YXIgaG9sZGVycz1sZW5ndGggPCAzICYmIGFyZ3NbMF0gIT09IHBsYWNlaG9sZGVyICYmIGFyZ3NbbGVuZ3RoIC0gMV0gIT09IHBsYWNlaG9sZGVyP1tdOnJlcGxhY2VIb2xkZXJzKGFyZ3MscGxhY2Vob2xkZXIpO2xlbmd0aCAtPSBob2xkZXJzLmxlbmd0aDtyZXR1cm4gbGVuZ3RoIDwgYXJpdHk/Y3JlYXRlUmVjdXJyeVdyYXBwZXIoZnVuYyxiaXRtYXNrLGNyZWF0ZUh5YnJpZFdyYXBwZXIscGxhY2Vob2xkZXIsdW5kZWZpbmVkLGFyZ3MsaG9sZGVycyx1bmRlZmluZWQsdW5kZWZpbmVkLGFyaXR5IC0gbGVuZ3RoKTphcHBseShmbix0aGlzLGFyZ3MpO31yZXR1cm4gd3JhcHBlcjt9ZnVuY3Rpb24gY3JlYXRlRmxvdyhmcm9tUmlnaHQpe3JldHVybiByZXN0KGZ1bmN0aW9uKGZ1bmNzKXtmdW5jcyA9IGJhc2VGbGF0dGVuKGZ1bmNzKTt2YXIgbGVuZ3RoPWZ1bmNzLmxlbmd0aCxpbmRleD1sZW5ndGgscHJlcmVxPUxvZGFzaFdyYXBwZXIucHJvdG90eXBlLnRocnU7aWYoZnJvbVJpZ2h0KXtmdW5jcy5yZXZlcnNlKCk7fXdoaWxlKGluZGV4LS0pIHt2YXIgZnVuYz1mdW5jc1tpbmRleF07aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fWlmKHByZXJlcSAmJiAhd3JhcHBlciAmJiBnZXRGdW5jTmFtZShmdW5jKSA9PSBcIndyYXBwZXJcIil7dmFyIHdyYXBwZXI9bmV3IExvZGFzaFdyYXBwZXIoW10sdHJ1ZSk7fX1pbmRleCA9IHdyYXBwZXI/aW5kZXg6bGVuZ3RoO3doaWxlKCsraW5kZXggPCBsZW5ndGgpIHtmdW5jID0gZnVuY3NbaW5kZXhdO3ZhciBmdW5jTmFtZT1nZXRGdW5jTmFtZShmdW5jKSxkYXRhPWZ1bmNOYW1lID09IFwid3JhcHBlclwiP2dldERhdGEoZnVuYyk6dW5kZWZpbmVkO2lmKGRhdGEgJiYgaXNMYXppYWJsZShkYXRhWzBdKSAmJiBkYXRhWzFdID09IChBUllfRkxBRyB8IENVUlJZX0ZMQUcgfCBQQVJUSUFMX0ZMQUcgfCBSRUFSR19GTEFHKSAmJiAhZGF0YVs0XS5sZW5ndGggJiYgZGF0YVs5XSA9PSAxKXt3cmFwcGVyID0gd3JhcHBlcltnZXRGdW5jTmFtZShkYXRhWzBdKV0uYXBwbHkod3JhcHBlcixkYXRhWzNdKTt9ZWxzZSB7d3JhcHBlciA9IGZ1bmMubGVuZ3RoID09IDEgJiYgaXNMYXppYWJsZShmdW5jKT93cmFwcGVyW2Z1bmNOYW1lXSgpOndyYXBwZXIudGhydShmdW5jKTt9fXJldHVybiBmdW5jdGlvbigpe3ZhciBhcmdzPWFyZ3VtZW50cyx2YWx1ZT1hcmdzWzBdO2lmKHdyYXBwZXIgJiYgYXJncy5sZW5ndGggPT0gMSAmJiBpc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPj0gTEFSR0VfQVJSQVlfU0laRSl7cmV0dXJuIHdyYXBwZXIucGxhbnQodmFsdWUpLnZhbHVlKCk7fXZhciBpbmRleD0wLHJlc3VsdD1sZW5ndGg/ZnVuY3NbaW5kZXhdLmFwcGx5KHRoaXMsYXJncyk6dmFsdWU7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3Jlc3VsdCA9IGZ1bmNzW2luZGV4XS5jYWxsKHRoaXMscmVzdWx0KTt9cmV0dXJuIHJlc3VsdDt9O30pO31mdW5jdGlvbiBjcmVhdGVIeWJyaWRXcmFwcGVyKGZ1bmMsYml0bWFzayx0aGlzQXJnLHBhcnRpYWxzLGhvbGRlcnMscGFydGlhbHNSaWdodCxob2xkZXJzUmlnaHQsYXJnUG9zLGFyeSxhcml0eSl7dmFyIGlzQXJ5PWJpdG1hc2sgJiBBUllfRkxBRyxpc0JpbmQ9Yml0bWFzayAmIEJJTkRfRkxBRyxpc0JpbmRLZXk9Yml0bWFzayAmIEJJTkRfS0VZX0ZMQUcsaXNDdXJyeT1iaXRtYXNrICYgQ1VSUllfRkxBRyxpc0N1cnJ5UmlnaHQ9Yml0bWFzayAmIENVUlJZX1JJR0hUX0ZMQUcsaXNGbGlwPWJpdG1hc2sgJiBGTElQX0ZMQUcsQ3Rvcj1pc0JpbmRLZXk/dW5kZWZpbmVkOmNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO2Z1bmN0aW9uIHdyYXBwZXIoKXt2YXIgbGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGgsaW5kZXg9bGVuZ3RoLGFyZ3M9QXJyYXkobGVuZ3RoKTt3aGlsZShpbmRleC0tKSB7YXJnc1tpbmRleF0gPSBhcmd1bWVudHNbaW5kZXhdO31pZihwYXJ0aWFscyl7YXJncyA9IGNvbXBvc2VBcmdzKGFyZ3MscGFydGlhbHMsaG9sZGVycyk7fWlmKHBhcnRpYWxzUmlnaHQpe2FyZ3MgPSBjb21wb3NlQXJnc1JpZ2h0KGFyZ3MscGFydGlhbHNSaWdodCxob2xkZXJzUmlnaHQpO31pZihpc0N1cnJ5IHx8IGlzQ3VycnlSaWdodCl7dmFyIHBsYWNlaG9sZGVyPXdyYXBwZXIucGxhY2Vob2xkZXIsYXJnc0hvbGRlcnM9cmVwbGFjZUhvbGRlcnMoYXJncyxwbGFjZWhvbGRlcik7bGVuZ3RoIC09IGFyZ3NIb2xkZXJzLmxlbmd0aDtpZihsZW5ndGggPCBhcml0eSl7cmV0dXJuIGNyZWF0ZVJlY3VycnlXcmFwcGVyKGZ1bmMsYml0bWFzayxjcmVhdGVIeWJyaWRXcmFwcGVyLHBsYWNlaG9sZGVyLHRoaXNBcmcsYXJncyxhcmdzSG9sZGVycyxhcmdQb3MsYXJ5LGFyaXR5IC0gbGVuZ3RoKTt9fXZhciB0aGlzQmluZGluZz1pc0JpbmQ/dGhpc0FyZzp0aGlzLGZuPWlzQmluZEtleT90aGlzQmluZGluZ1tmdW5jXTpmdW5jO2lmKGFyZ1Bvcyl7YXJncyA9IHJlb3JkZXIoYXJncyxhcmdQb3MpO31lbHNlIGlmKGlzRmxpcCAmJiBhcmdzLmxlbmd0aCA+IDEpe2FyZ3MucmV2ZXJzZSgpO31pZihpc0FyeSAmJiBhcnkgPCBhcmdzLmxlbmd0aCl7YXJncy5sZW5ndGggPSBhcnk7fWlmKHRoaXMgJiYgdGhpcyAhPT0gcm9vdCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcil7Zm4gPSBDdG9yIHx8IGNyZWF0ZUN0b3JXcmFwcGVyKGZuKTt9cmV0dXJuIGZuLmFwcGx5KHRoaXNCaW5kaW5nLGFyZ3MpO31yZXR1cm4gd3JhcHBlcjt9ZnVuY3Rpb24gY3JlYXRlSW52ZXJ0ZXIoc2V0dGVyLHRvSXRlcmF0ZWUpe3JldHVybiBmdW5jdGlvbihvYmplY3QsaXRlcmF0ZWUpe3JldHVybiBiYXNlSW52ZXJ0ZXIob2JqZWN0LHNldHRlcix0b0l0ZXJhdGVlKGl0ZXJhdGVlKSx7fSk7fTt9ZnVuY3Rpb24gY3JlYXRlT3ZlcihhcnJheUZ1bmMpe3JldHVybiByZXN0KGZ1bmN0aW9uKGl0ZXJhdGVlcyl7aXRlcmF0ZWVzID0gYXJyYXlNYXAoYmFzZUZsYXR0ZW4oaXRlcmF0ZWVzKSxnZXRJdGVyYXRlZSgpKTtyZXR1cm4gcmVzdChmdW5jdGlvbihhcmdzKXt2YXIgdGhpc0FyZz10aGlzO3JldHVybiBhcnJheUZ1bmMoaXRlcmF0ZWVzLGZ1bmN0aW9uKGl0ZXJhdGVlKXtyZXR1cm4gYXBwbHkoaXRlcmF0ZWUsdGhpc0FyZyxhcmdzKTt9KTt9KTt9KTt9ZnVuY3Rpb24gY3JlYXRlUGFkZGluZyhzdHJpbmcsbGVuZ3RoLGNoYXJzKXtsZW5ndGggPSB0b0ludGVnZXIobGVuZ3RoKTt2YXIgc3RyTGVuZ3RoPXN0cmluZ1NpemUoc3RyaW5nKTtpZighbGVuZ3RoIHx8IHN0ckxlbmd0aCA+PSBsZW5ndGgpe3JldHVybiBcIlwiO312YXIgcGFkTGVuZ3RoPWxlbmd0aCAtIHN0ckxlbmd0aDtjaGFycyA9IGNoYXJzID09PSB1bmRlZmluZWQ/XCIgXCI6Y2hhcnMgKyBcIlwiO3ZhciByZXN1bHQ9cmVwZWF0KGNoYXJzLG5hdGl2ZUNlaWwocGFkTGVuZ3RoIC8gc3RyaW5nU2l6ZShjaGFycykpKTtyZXR1cm4gcmVIYXNDb21wbGV4U3ltYm9sLnRlc3QoY2hhcnMpP3N0cmluZ1RvQXJyYXkocmVzdWx0KS5zbGljZSgwLHBhZExlbmd0aCkuam9pbihcIlwiKTpyZXN1bHQuc2xpY2UoMCxwYWRMZW5ndGgpO31mdW5jdGlvbiBjcmVhdGVQYXJ0aWFsV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyl7dmFyIGlzQmluZD1iaXRtYXNrICYgQklORF9GTEFHLEN0b3I9Y3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7ZnVuY3Rpb24gd3JhcHBlcigpe3ZhciBhcmdzSW5kZXg9LTEsYXJnc0xlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGxlZnRJbmRleD0tMSxsZWZ0TGVuZ3RoPXBhcnRpYWxzLmxlbmd0aCxhcmdzPUFycmF5KGxlZnRMZW5ndGggKyBhcmdzTGVuZ3RoKSxmbj10aGlzICYmIHRoaXMgIT09IHJvb3QgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXI/Q3RvcjpmdW5jO3doaWxlKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge2FyZ3NbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07fXdoaWxlKGFyZ3NMZW5ndGgtLSkge2FyZ3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzWysrYXJnc0luZGV4XTt9cmV0dXJuIGFwcGx5KGZuLGlzQmluZD90aGlzQXJnOnRoaXMsYXJncyk7fXJldHVybiB3cmFwcGVyO31mdW5jdGlvbiBjcmVhdGVSYW5nZShmcm9tUmlnaHQpe3JldHVybiBmdW5jdGlvbihzdGFydCxlbmQsc3RlcCl7aWYoc3RlcCAmJiB0eXBlb2Ygc3RlcCAhPSBcIm51bWJlclwiICYmIGlzSXRlcmF0ZWVDYWxsKHN0YXJ0LGVuZCxzdGVwKSl7ZW5kID0gc3RlcCA9IHVuZGVmaW5lZDt9c3RhcnQgPSB0b051bWJlcihzdGFydCk7c3RhcnQgPSBzdGFydCA9PT0gc3RhcnQ/c3RhcnQ6MDtpZihlbmQgPT09IHVuZGVmaW5lZCl7ZW5kID0gc3RhcnQ7c3RhcnQgPSAwO31lbHNlIHtlbmQgPSB0b051bWJlcihlbmQpIHx8IDA7fXN0ZXAgPSBzdGVwID09PSB1bmRlZmluZWQ/c3RhcnQgPCBlbmQ/MTotMTp0b051bWJlcihzdGVwKSB8fCAwO3JldHVybiBiYXNlUmFuZ2Uoc3RhcnQsZW5kLHN0ZXAsZnJvbVJpZ2h0KTt9O31mdW5jdGlvbiBjcmVhdGVSZWN1cnJ5V3JhcHBlcihmdW5jLGJpdG1hc2ssd3JhcEZ1bmMscGxhY2Vob2xkZXIsdGhpc0FyZyxwYXJ0aWFscyxob2xkZXJzLGFyZ1BvcyxhcnksYXJpdHkpe3ZhciBpc0N1cnJ5PWJpdG1hc2sgJiBDVVJSWV9GTEFHLG5ld0FyZ1Bvcz1hcmdQb3M/Y29weUFycmF5KGFyZ1Bvcyk6dW5kZWZpbmVkLG5ld3NIb2xkZXJzPWlzQ3Vycnk/aG9sZGVyczp1bmRlZmluZWQsbmV3SG9sZGVyc1JpZ2h0PWlzQ3Vycnk/dW5kZWZpbmVkOmhvbGRlcnMsbmV3UGFydGlhbHM9aXNDdXJyeT9wYXJ0aWFsczp1bmRlZmluZWQsbmV3UGFydGlhbHNSaWdodD1pc0N1cnJ5P3VuZGVmaW5lZDpwYXJ0aWFscztiaXRtYXNrIHw9IGlzQ3Vycnk/UEFSVElBTF9GTEFHOlBBUlRJQUxfUklHSFRfRkxBRztiaXRtYXNrICY9IH4oaXNDdXJyeT9QQVJUSUFMX1JJR0hUX0ZMQUc6UEFSVElBTF9GTEFHKTtpZighKGJpdG1hc2sgJiBDVVJSWV9CT1VORF9GTEFHKSl7Yml0bWFzayAmPSB+KEJJTkRfRkxBRyB8IEJJTkRfS0VZX0ZMQUcpO312YXIgbmV3RGF0YT1bZnVuYyxiaXRtYXNrLHRoaXNBcmcsbmV3UGFydGlhbHMsbmV3c0hvbGRlcnMsbmV3UGFydGlhbHNSaWdodCxuZXdIb2xkZXJzUmlnaHQsbmV3QXJnUG9zLGFyeSxhcml0eV0scmVzdWx0PXdyYXBGdW5jLmFwcGx5KHVuZGVmaW5lZCxuZXdEYXRhKTtpZihpc0xhemlhYmxlKGZ1bmMpKXtzZXREYXRhKHJlc3VsdCxuZXdEYXRhKTt9cmVzdWx0LnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY3JlYXRlUm91bmQobWV0aG9kTmFtZSl7dmFyIGZ1bmM9TWF0aFttZXRob2ROYW1lXTtyZXR1cm4gZnVuY3Rpb24obnVtYmVyLHByZWNpc2lvbil7bnVtYmVyID0gdG9OdW1iZXIobnVtYmVyKTtwcmVjaXNpb24gPSB0b0ludGVnZXIocHJlY2lzaW9uKTtpZihwcmVjaXNpb24pe3ZhciBwYWlyPSh0b1N0cmluZyhudW1iZXIpICsgXCJlXCIpLnNwbGl0KFwiZVwiKSx2YWx1ZT1mdW5jKHBhaXJbMF0gKyBcImVcIiArICgrcGFpclsxXSArIHByZWNpc2lvbikpO3BhaXIgPSAodG9TdHJpbmcodmFsdWUpICsgXCJlXCIpLnNwbGl0KFwiZVwiKTtyZXR1cm4gKyhwYWlyWzBdICsgXCJlXCIgKyAoK3BhaXJbMV0gLSBwcmVjaXNpb24pKTt9cmV0dXJuIGZ1bmMobnVtYmVyKTt9O312YXIgY3JlYXRlU2V0PSEoU2V0ICYmIG5ldyBTZXQoWzEsMl0pLnNpemUgPT09IDIpP25vb3A6ZnVuY3Rpb24odmFsdWVzKXtyZXR1cm4gbmV3IFNldCh2YWx1ZXMpO307ZnVuY3Rpb24gY3JlYXRlV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyxob2xkZXJzLGFyZ1BvcyxhcnksYXJpdHkpe3ZhciBpc0JpbmRLZXk9Yml0bWFzayAmIEJJTkRfS0VZX0ZMQUc7aWYoIWlzQmluZEtleSAmJiB0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9dmFyIGxlbmd0aD1wYXJ0aWFscz9wYXJ0aWFscy5sZW5ndGg6MDtpZighbGVuZ3RoKXtiaXRtYXNrICY9IH4oUEFSVElBTF9GTEFHIHwgUEFSVElBTF9SSUdIVF9GTEFHKTtwYXJ0aWFscyA9IGhvbGRlcnMgPSB1bmRlZmluZWQ7fWFyeSA9IGFyeSA9PT0gdW5kZWZpbmVkP2FyeTpuYXRpdmVNYXgodG9JbnRlZ2VyKGFyeSksMCk7YXJpdHkgPSBhcml0eSA9PT0gdW5kZWZpbmVkP2FyaXR5OnRvSW50ZWdlcihhcml0eSk7bGVuZ3RoIC09IGhvbGRlcnM/aG9sZGVycy5sZW5ndGg6MDtpZihiaXRtYXNrICYgUEFSVElBTF9SSUdIVF9GTEFHKXt2YXIgcGFydGlhbHNSaWdodD1wYXJ0aWFscyxob2xkZXJzUmlnaHQ9aG9sZGVycztwYXJ0aWFscyA9IGhvbGRlcnMgPSB1bmRlZmluZWQ7fXZhciBkYXRhPWlzQmluZEtleT91bmRlZmluZWQ6Z2V0RGF0YShmdW5jKSxuZXdEYXRhPVtmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyxob2xkZXJzLHBhcnRpYWxzUmlnaHQsaG9sZGVyc1JpZ2h0LGFyZ1BvcyxhcnksYXJpdHldO2lmKGRhdGEpe21lcmdlRGF0YShuZXdEYXRhLGRhdGEpO31mdW5jID0gbmV3RGF0YVswXTtiaXRtYXNrID0gbmV3RGF0YVsxXTt0aGlzQXJnID0gbmV3RGF0YVsyXTtwYXJ0aWFscyA9IG5ld0RhdGFbM107aG9sZGVycyA9IG5ld0RhdGFbNF07YXJpdHkgPSBuZXdEYXRhWzldID0gbmV3RGF0YVs5XSA9PSBudWxsP2lzQmluZEtleT8wOmZ1bmMubGVuZ3RoOm5hdGl2ZU1heChuZXdEYXRhWzldIC0gbGVuZ3RoLDApO2lmKCFhcml0eSAmJiBiaXRtYXNrICYgKENVUlJZX0ZMQUcgfCBDVVJSWV9SSUdIVF9GTEFHKSl7Yml0bWFzayAmPSB+KENVUlJZX0ZMQUcgfCBDVVJSWV9SSUdIVF9GTEFHKTt9aWYoIWJpdG1hc2sgfHwgYml0bWFzayA9PSBCSU5EX0ZMQUcpe3ZhciByZXN1bHQ9Y3JlYXRlQmFzZVdyYXBwZXIoZnVuYyxiaXRtYXNrLHRoaXNBcmcpO31lbHNlIGlmKGJpdG1hc2sgPT0gQ1VSUllfRkxBRyB8fCBiaXRtYXNrID09IENVUlJZX1JJR0hUX0ZMQUcpe3Jlc3VsdCA9IGNyZWF0ZUN1cnJ5V3JhcHBlcihmdW5jLGJpdG1hc2ssYXJpdHkpO31lbHNlIGlmKChiaXRtYXNrID09IFBBUlRJQUxfRkxBRyB8fCBiaXRtYXNrID09IChCSU5EX0ZMQUcgfCBQQVJUSUFMX0ZMQUcpKSAmJiAhaG9sZGVycy5sZW5ndGgpe3Jlc3VsdCA9IGNyZWF0ZVBhcnRpYWxXcmFwcGVyKGZ1bmMsYml0bWFzayx0aGlzQXJnLHBhcnRpYWxzKTt9ZWxzZSB7cmVzdWx0ID0gY3JlYXRlSHlicmlkV3JhcHBlci5hcHBseSh1bmRlZmluZWQsbmV3RGF0YSk7fXZhciBzZXR0ZXI9ZGF0YT9iYXNlU2V0RGF0YTpzZXREYXRhO3JldHVybiBzZXR0ZXIocmVzdWx0LG5ld0RhdGEpO31mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSxvdGhlcixlcXVhbEZ1bmMsY3VzdG9taXplcixiaXRtYXNrLHN0YWNrKXt2YXIgaW5kZXg9LTEsaXNQYXJ0aWFsPWJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxpc1Vub3JkZXJlZD1iaXRtYXNrICYgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyxhcnJMZW5ndGg9YXJyYXkubGVuZ3RoLG90aExlbmd0aD1vdGhlci5sZW5ndGg7aWYoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKXtyZXR1cm4gZmFsc2U7fXZhciBzdGFja2VkPXN0YWNrLmdldChhcnJheSk7aWYoc3RhY2tlZCl7cmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7fXZhciByZXN1bHQ9dHJ1ZTtzdGFjay5zZXQoYXJyYXksb3RoZXIpO3doaWxlKCsraW5kZXggPCBhcnJMZW5ndGgpIHt2YXIgYXJyVmFsdWU9YXJyYXlbaW5kZXhdLG90aFZhbHVlPW90aGVyW2luZGV4XTtpZihjdXN0b21pemVyKXt2YXIgY29tcGFyZWQ9aXNQYXJ0aWFsP2N1c3RvbWl6ZXIob3RoVmFsdWUsYXJyVmFsdWUsaW5kZXgsb3RoZXIsYXJyYXksc3RhY2spOmN1c3RvbWl6ZXIoYXJyVmFsdWUsb3RoVmFsdWUsaW5kZXgsYXJyYXksb3RoZXIsc3RhY2spO31pZihjb21wYXJlZCAhPT0gdW5kZWZpbmVkKXtpZihjb21wYXJlZCl7Y29udGludWU7fXJlc3VsdCA9IGZhbHNlO2JyZWFrO31pZihpc1Vub3JkZXJlZCl7aWYoIWFycmF5U29tZShvdGhlcixmdW5jdGlvbihvdGhWYWx1ZSl7cmV0dXJuIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsb3RoVmFsdWUsY3VzdG9taXplcixiaXRtYXNrLHN0YWNrKTt9KSl7cmVzdWx0ID0gZmFsc2U7YnJlYWs7fX1lbHNlIGlmKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSxvdGhWYWx1ZSxjdXN0b21pemVyLGJpdG1hc2ssc3RhY2spKSl7cmVzdWx0ID0gZmFsc2U7YnJlYWs7fX1zdGFja1tcImRlbGV0ZVwiXShhcnJheSk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3Qsb3RoZXIsdGFnLGVxdWFsRnVuYyxjdXN0b21pemVyLGJpdG1hc2spe3N3aXRjaCh0YWcpe2Nhc2UgYXJyYXlCdWZmZXJUYWc6aWYob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCB8fCAhZXF1YWxGdW5jKG5ldyBVaW50OEFycmF5KG9iamVjdCksbmV3IFVpbnQ4QXJyYXkob3RoZXIpKSl7cmV0dXJuIGZhbHNlO31yZXR1cm4gdHJ1ZTtjYXNlIGJvb2xUYWc6Y2FzZSBkYXRlVGFnOnJldHVybiArb2JqZWN0ID09ICtvdGhlcjtjYXNlIGVycm9yVGFnOnJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7Y2FzZSBudW1iZXJUYWc6cmV0dXJuIG9iamVjdCAhPSArb2JqZWN0P290aGVyICE9ICtvdGhlcjpvYmplY3QgPT0gK290aGVyO2Nhc2UgcmVnZXhwVGFnOmNhc2Ugc3RyaW5nVGFnOnJldHVybiBvYmplY3QgPT0gb3RoZXIgKyBcIlwiO2Nhc2UgbWFwVGFnOnZhciBjb252ZXJ0PW1hcFRvQXJyYXk7Y2FzZSBzZXRUYWc6dmFyIGlzUGFydGlhbD1iaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUc7Y29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO3JldHVybiAoaXNQYXJ0aWFsIHx8IG9iamVjdC5zaXplID09IG90aGVyLnNpemUpICYmIGVxdWFsRnVuYyhjb252ZXJ0KG9iamVjdCksY29udmVydChvdGhlciksY3VzdG9taXplcixiaXRtYXNrIHwgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyk7Y2FzZSBzeW1ib2xUYWc6cmV0dXJuICEhU3ltYm9sICYmIHN5bWJvbFZhbHVlT2YuY2FsbChvYmplY3QpID09IHN5bWJvbFZhbHVlT2YuY2FsbChvdGhlcik7fXJldHVybiBmYWxzZTt9ZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCxvdGhlcixlcXVhbEZ1bmMsY3VzdG9taXplcixiaXRtYXNrLHN0YWNrKXt2YXIgaXNQYXJ0aWFsPWJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxvYmpQcm9wcz1rZXlzKG9iamVjdCksb2JqTGVuZ3RoPW9ialByb3BzLmxlbmd0aCxvdGhQcm9wcz1rZXlzKG90aGVyKSxvdGhMZW5ndGg9b3RoUHJvcHMubGVuZ3RoO2lmKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCl7cmV0dXJuIGZhbHNlO312YXIgaW5kZXg9b2JqTGVuZ3RoO3doaWxlKGluZGV4LS0pIHt2YXIga2V5PW9ialByb3BzW2luZGV4XTtpZighKGlzUGFydGlhbD9rZXkgaW4gb3RoZXI6YmFzZUhhcyhvdGhlcixrZXkpKSl7cmV0dXJuIGZhbHNlO319dmFyIHN0YWNrZWQ9c3RhY2suZ2V0KG9iamVjdCk7aWYoc3RhY2tlZCl7cmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7fXZhciByZXN1bHQ9dHJ1ZTtzdGFjay5zZXQob2JqZWN0LG90aGVyKTt2YXIgc2tpcEN0b3I9aXNQYXJ0aWFsO3doaWxlKCsraW5kZXggPCBvYmpMZW5ndGgpIHtrZXkgPSBvYmpQcm9wc1tpbmRleF07dmFyIG9ialZhbHVlPW9iamVjdFtrZXldLG90aFZhbHVlPW90aGVyW2tleV07aWYoY3VzdG9taXplcil7dmFyIGNvbXBhcmVkPWlzUGFydGlhbD9jdXN0b21pemVyKG90aFZhbHVlLG9ialZhbHVlLGtleSxvdGhlcixvYmplY3Qsc3RhY2spOmN1c3RvbWl6ZXIob2JqVmFsdWUsb3RoVmFsdWUsa2V5LG9iamVjdCxvdGhlcixzdGFjayk7fWlmKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZD9vYmpWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKG9ialZhbHVlLG90aFZhbHVlLGN1c3RvbWl6ZXIsYml0bWFzayxzdGFjayk6Y29tcGFyZWQpKXtyZXN1bHQgPSBmYWxzZTticmVhazt9c2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09IFwiY29uc3RydWN0b3JcIik7fWlmKHJlc3VsdCAmJiAhc2tpcEN0b3Ipe3ZhciBvYmpDdG9yPW9iamVjdC5jb25zdHJ1Y3RvcixvdGhDdG9yPW90aGVyLmNvbnN0cnVjdG9yO2lmKG9iakN0b3IgIT0gb3RoQ3RvciAmJiBcImNvbnN0cnVjdG9yXCIgaW4gb2JqZWN0ICYmIFwiY29uc3RydWN0b3JcIiBpbiBvdGhlciAmJiAhKHR5cGVvZiBvYmpDdG9yID09IFwiZnVuY3Rpb25cIiAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJiB0eXBlb2Ygb3RoQ3RvciA9PSBcImZ1bmN0aW9uXCIgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKXtyZXN1bHQgPSBmYWxzZTt9fXN0YWNrW1wiZGVsZXRlXCJdKG9iamVjdCk7cmV0dXJuIHJlc3VsdDt9dmFyIGdldERhdGE9IW1ldGFNYXA/bm9vcDpmdW5jdGlvbihmdW5jKXtyZXR1cm4gbWV0YU1hcC5nZXQoZnVuYyk7fTtmdW5jdGlvbiBnZXRGdW5jTmFtZShmdW5jKXt2YXIgcmVzdWx0PWZ1bmMubmFtZSArIFwiXCIsYXJyYXk9cmVhbE5hbWVzW3Jlc3VsdF0sbGVuZ3RoPWhhc093blByb3BlcnR5LmNhbGwocmVhbE5hbWVzLHJlc3VsdCk/YXJyYXkubGVuZ3RoOjA7d2hpbGUobGVuZ3RoLS0pIHt2YXIgZGF0YT1hcnJheVtsZW5ndGhdLG90aGVyRnVuYz1kYXRhLmZ1bmM7aWYob3RoZXJGdW5jID09IG51bGwgfHwgb3RoZXJGdW5jID09IGZ1bmMpe3JldHVybiBkYXRhLm5hbWU7fX1yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBnZXRJdGVyYXRlZSgpe3ZhciByZXN1bHQ9bG9kYXNoLml0ZXJhdGVlIHx8IGl0ZXJhdGVlO3Jlc3VsdCA9IHJlc3VsdCA9PT0gaXRlcmF0ZWU/YmFzZUl0ZXJhdGVlOnJlc3VsdDtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9yZXN1bHQoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk6cmVzdWx0O312YXIgZ2V0TGVuZ3RoPWJhc2VQcm9wZXJ0eShcImxlbmd0aFwiKTtmdW5jdGlvbiBnZXRNYXRjaERhdGEob2JqZWN0KXt2YXIgcmVzdWx0PXRvUGFpcnMob2JqZWN0KSxsZW5ndGg9cmVzdWx0Lmxlbmd0aDt3aGlsZShsZW5ndGgtLSkge3Jlc3VsdFtsZW5ndGhdWzJdID0gaXNTdHJpY3RDb21wYXJhYmxlKHJlc3VsdFtsZW5ndGhdWzFdKTt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCxrZXkpe3ZhciB2YWx1ZT1vYmplY3QgPT0gbnVsbD91bmRlZmluZWQ6b2JqZWN0W2tleV07cmV0dXJuIGlzTmF0aXZlKHZhbHVlKT92YWx1ZTp1bmRlZmluZWQ7fXZhciBnZXRTeW1ib2xzPWdldE93blByb3BlcnR5U3ltYm9scyB8fCBmdW5jdGlvbigpe3JldHVybiBbXTt9O2Z1bmN0aW9uIGdldFRhZyh2YWx1ZSl7cmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO31pZihNYXAgJiYgZ2V0VGFnKG5ldyBNYXAoKSkgIT0gbWFwVGFnIHx8IFNldCAmJiBnZXRUYWcobmV3IFNldCgpKSAhPSBzZXRUYWcpe2dldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKXt2YXIgcmVzdWx0PW9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpLEN0b3I9cmVzdWx0ID09IG9iamVjdFRhZz92YWx1ZS5jb25zdHJ1Y3RvcjpudWxsLGN0b3JTdHJpbmc9dHlwZW9mIEN0b3IgPT0gXCJmdW5jdGlvblwiP2Z1bmNUb1N0cmluZy5jYWxsKEN0b3IpOlwiXCI7aWYoY3RvclN0cmluZyl7aWYoY3RvclN0cmluZyA9PSBtYXBDdG9yU3RyaW5nKXtyZXR1cm4gbWFwVGFnO31pZihjdG9yU3RyaW5nID09IHNldEN0b3JTdHJpbmcpe3JldHVybiBzZXRUYWc7fX1yZXR1cm4gcmVzdWx0O307fWZ1bmN0aW9uIGdldFZpZXcoc3RhcnQsZW5kLHRyYW5zZm9ybXMpe3ZhciBpbmRleD0tMSxsZW5ndGg9dHJhbnNmb3Jtcy5sZW5ndGg7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBkYXRhPXRyYW5zZm9ybXNbaW5kZXhdLHNpemU9ZGF0YS5zaXplO3N3aXRjaChkYXRhLnR5cGUpe2Nhc2UgXCJkcm9wXCI6c3RhcnQgKz0gc2l6ZTticmVhaztjYXNlIFwiZHJvcFJpZ2h0XCI6ZW5kIC09IHNpemU7YnJlYWs7Y2FzZSBcInRha2VcIjplbmQgPSBuYXRpdmVNaW4oZW5kLHN0YXJ0ICsgc2l6ZSk7YnJlYWs7Y2FzZSBcInRha2VSaWdodFwiOnN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0LGVuZCAtIHNpemUpO2JyZWFrO319cmV0dXJuIHtzdGFydDpzdGFydCxlbmQ6ZW5kfTt9ZnVuY3Rpb24gaGFzUGF0aChvYmplY3QscGF0aCxoYXNGdW5jKXtpZihvYmplY3QgPT0gbnVsbCl7cmV0dXJuIGZhbHNlO312YXIgcmVzdWx0PWhhc0Z1bmMob2JqZWN0LHBhdGgpO2lmKCFyZXN1bHQgJiYgIWlzS2V5KHBhdGgpKXtwYXRoID0gYmFzZVRvUGF0aChwYXRoKTtvYmplY3QgPSBwYXJlbnQob2JqZWN0LHBhdGgpO2lmKG9iamVjdCAhPSBudWxsKXtwYXRoID0gbGFzdChwYXRoKTtyZXN1bHQgPSBoYXNGdW5jKG9iamVjdCxwYXRoKTt9fXZhciBsZW5ndGg9b2JqZWN0P29iamVjdC5sZW5ndGg6dW5kZWZpbmVkO3JldHVybiByZXN1bHQgfHwgISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KHBhdGgsbGVuZ3RoKSAmJiAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7fWZ1bmN0aW9uIGluaXRDbG9uZUFycmF5KGFycmF5KXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aCxyZXN1bHQ9YXJyYXkuY29uc3RydWN0b3IobGVuZ3RoKTtpZihsZW5ndGggJiYgdHlwZW9mIGFycmF5WzBdID09IFwic3RyaW5nXCIgJiYgaGFzT3duUHJvcGVydHkuY2FsbChhcnJheSxcImluZGV4XCIpKXtyZXN1bHQuaW5kZXggPSBhcnJheS5pbmRleDtyZXN1bHQuaW5wdXQgPSBhcnJheS5pbnB1dDt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gaW5pdENsb25lT2JqZWN0KG9iamVjdCl7aWYoaXNQcm90b3R5cGUob2JqZWN0KSl7cmV0dXJuIHt9O312YXIgQ3Rvcj1vYmplY3QuY29uc3RydWN0b3I7cmV0dXJuIGJhc2VDcmVhdGUoaXNGdW5jdGlvbihDdG9yKT9DdG9yLnByb3RvdHlwZTp1bmRlZmluZWQpO31mdW5jdGlvbiBpbml0Q2xvbmVCeVRhZyhvYmplY3QsdGFnLGlzRGVlcCl7dmFyIEN0b3I9b2JqZWN0LmNvbnN0cnVjdG9yO3N3aXRjaCh0YWcpe2Nhc2UgYXJyYXlCdWZmZXJUYWc6cmV0dXJuIGNsb25lQnVmZmVyKG9iamVjdCk7Y2FzZSBib29sVGFnOmNhc2UgZGF0ZVRhZzpyZXR1cm4gbmV3IEN0b3IoK29iamVjdCk7Y2FzZSBmbG9hdDMyVGFnOmNhc2UgZmxvYXQ2NFRhZzpjYXNlIGludDhUYWc6Y2FzZSBpbnQxNlRhZzpjYXNlIGludDMyVGFnOmNhc2UgdWludDhUYWc6Y2FzZSB1aW50OENsYW1wZWRUYWc6Y2FzZSB1aW50MTZUYWc6Y2FzZSB1aW50MzJUYWc6cmV0dXJuIGNsb25lVHlwZWRBcnJheShvYmplY3QsaXNEZWVwKTtjYXNlIG1hcFRhZzpyZXR1cm4gY2xvbmVNYXAob2JqZWN0KTtjYXNlIG51bWJlclRhZzpjYXNlIHN0cmluZ1RhZzpyZXR1cm4gbmV3IEN0b3Iob2JqZWN0KTtjYXNlIHJlZ2V4cFRhZzpyZXR1cm4gY2xvbmVSZWdFeHAob2JqZWN0KTtjYXNlIHNldFRhZzpyZXR1cm4gY2xvbmVTZXQob2JqZWN0KTtjYXNlIHN5bWJvbFRhZzpyZXR1cm4gY2xvbmVTeW1ib2wob2JqZWN0KTt9fWZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3Qpe3ZhciBsZW5ndGg9b2JqZWN0P29iamVjdC5sZW5ndGg6dW5kZWZpbmVkO2lmKGlzTGVuZ3RoKGxlbmd0aCkgJiYgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpKXtyZXR1cm4gYmFzZVRpbWVzKGxlbmd0aCxTdHJpbmcpO31yZXR1cm4gbnVsbDt9ZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsaW5kZXgsb2JqZWN0KXtpZighaXNPYmplY3Qob2JqZWN0KSl7cmV0dXJuIGZhbHNlO312YXIgdHlwZT10eXBlb2YgaW5kZXg7aWYodHlwZSA9PSBcIm51bWJlclwiP2lzQXJyYXlMaWtlKG9iamVjdCkgJiYgaXNJbmRleChpbmRleCxvYmplY3QubGVuZ3RoKTp0eXBlID09IFwic3RyaW5nXCIgJiYgaW5kZXggaW4gb2JqZWN0KXtyZXR1cm4gZXEob2JqZWN0W2luZGV4XSx2YWx1ZSk7fXJldHVybiBmYWxzZTt9ZnVuY3Rpb24gaXNLZXkodmFsdWUsb2JqZWN0KXtpZih0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIil7cmV0dXJuIHRydWU7fXJldHVybiAhaXNBcnJheSh2YWx1ZSkgJiYgKHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkgfHwgIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKSB8fCBvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7fWZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSl7dmFyIHR5cGU9dHlwZW9mIHZhbHVlO3JldHVybiB0eXBlID09IFwibnVtYmVyXCIgfHwgdHlwZSA9PSBcImJvb2xlYW5cIiB8fCB0eXBlID09IFwic3RyaW5nXCIgJiYgdmFsdWUgIT09IFwiX19wcm90b19fXCIgfHwgdmFsdWUgPT0gbnVsbDt9ZnVuY3Rpb24gaXNMYXppYWJsZShmdW5jKXt2YXIgZnVuY05hbWU9Z2V0RnVuY05hbWUoZnVuYyksb3RoZXI9bG9kYXNoW2Z1bmNOYW1lXTtpZih0eXBlb2Ygb3RoZXIgIT0gXCJmdW5jdGlvblwiIHx8ICEoZnVuY05hbWUgaW4gTGF6eVdyYXBwZXIucHJvdG90eXBlKSl7cmV0dXJuIGZhbHNlO31pZihmdW5jID09PSBvdGhlcil7cmV0dXJuIHRydWU7fXZhciBkYXRhPWdldERhdGEob3RoZXIpO3JldHVybiAhIWRhdGEgJiYgZnVuYyA9PT0gZGF0YVswXTt9ZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpe3ZhciBDdG9yPXZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLHByb3RvPXR5cGVvZiBDdG9yID09IFwiZnVuY3Rpb25cIiAmJiBDdG9yLnByb3RvdHlwZSB8fCBvYmplY3RQcm90bztyZXR1cm4gdmFsdWUgPT09IHByb3RvO31mdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpe3JldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTt9ZnVuY3Rpb24gbWVyZ2VEYXRhKGRhdGEsc291cmNlKXt2YXIgYml0bWFzaz1kYXRhWzFdLHNyY0JpdG1hc2s9c291cmNlWzFdLG5ld0JpdG1hc2s9Yml0bWFzayB8IHNyY0JpdG1hc2ssaXNDb21tb249bmV3Qml0bWFzayA8IChCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHIHwgQVJZX0ZMQUcpO3ZhciBpc0NvbWJvPXNyY0JpdG1hc2sgPT0gQVJZX0ZMQUcgJiYgYml0bWFzayA9PSBDVVJSWV9GTEFHIHx8IHNyY0JpdG1hc2sgPT0gQVJZX0ZMQUcgJiYgYml0bWFzayA9PSBSRUFSR19GTEFHICYmIGRhdGFbN10ubGVuZ3RoIDw9IHNvdXJjZVs4XSB8fCBzcmNCaXRtYXNrID09IChBUllfRkxBRyB8IFJFQVJHX0ZMQUcpICYmIHNvdXJjZVs3XS5sZW5ndGggPD0gc291cmNlWzhdICYmIGJpdG1hc2sgPT0gQ1VSUllfRkxBRztpZighKGlzQ29tbW9uIHx8IGlzQ29tYm8pKXtyZXR1cm4gZGF0YTt9aWYoc3JjQml0bWFzayAmIEJJTkRfRkxBRyl7ZGF0YVsyXSA9IHNvdXJjZVsyXTtuZXdCaXRtYXNrIHw9IGJpdG1hc2sgJiBCSU5EX0ZMQUc/MDpDVVJSWV9CT1VORF9GTEFHO312YXIgdmFsdWU9c291cmNlWzNdO2lmKHZhbHVlKXt2YXIgcGFydGlhbHM9ZGF0YVszXTtkYXRhWzNdID0gcGFydGlhbHM/Y29tcG9zZUFyZ3MocGFydGlhbHMsdmFsdWUsc291cmNlWzRdKTpjb3B5QXJyYXkodmFsdWUpO2RhdGFbNF0gPSBwYXJ0aWFscz9yZXBsYWNlSG9sZGVycyhkYXRhWzNdLFBMQUNFSE9MREVSKTpjb3B5QXJyYXkoc291cmNlWzRdKTt9dmFsdWUgPSBzb3VyY2VbNV07aWYodmFsdWUpe3BhcnRpYWxzID0gZGF0YVs1XTtkYXRhWzVdID0gcGFydGlhbHM/Y29tcG9zZUFyZ3NSaWdodChwYXJ0aWFscyx2YWx1ZSxzb3VyY2VbNl0pOmNvcHlBcnJheSh2YWx1ZSk7ZGF0YVs2XSA9IHBhcnRpYWxzP3JlcGxhY2VIb2xkZXJzKGRhdGFbNV0sUExBQ0VIT0xERVIpOmNvcHlBcnJheShzb3VyY2VbNl0pO312YWx1ZSA9IHNvdXJjZVs3XTtpZih2YWx1ZSl7ZGF0YVs3XSA9IGNvcHlBcnJheSh2YWx1ZSk7fWlmKHNyY0JpdG1hc2sgJiBBUllfRkxBRyl7ZGF0YVs4XSA9IGRhdGFbOF0gPT0gbnVsbD9zb3VyY2VbOF06bmF0aXZlTWluKGRhdGFbOF0sc291cmNlWzhdKTt9aWYoZGF0YVs5XSA9PSBudWxsKXtkYXRhWzldID0gc291cmNlWzldO31kYXRhWzBdID0gc291cmNlWzBdO2RhdGFbMV0gPSBuZXdCaXRtYXNrO3JldHVybiBkYXRhO31mdW5jdGlvbiBtZXJnZURlZmF1bHRzKG9ialZhbHVlLHNyY1ZhbHVlLGtleSxvYmplY3Qsc291cmNlLHN0YWNrKXtpZihpc09iamVjdChvYmpWYWx1ZSkgJiYgaXNPYmplY3Qoc3JjVmFsdWUpKXtzdGFjay5zZXQoc3JjVmFsdWUsb2JqVmFsdWUpO2Jhc2VNZXJnZShvYmpWYWx1ZSxzcmNWYWx1ZSx1bmRlZmluZWQsbWVyZ2VEZWZhdWx0cyxzdGFjayk7fXJldHVybiBvYmpWYWx1ZTt9ZnVuY3Rpb24gcGFyZW50KG9iamVjdCxwYXRoKXtyZXR1cm4gcGF0aC5sZW5ndGggPT0gMT9vYmplY3Q6Z2V0KG9iamVjdCxiYXNlU2xpY2UocGF0aCwwLC0xKSk7fWZ1bmN0aW9uIHJlb3JkZXIoYXJyYXksaW5kZXhlcyl7dmFyIGFyckxlbmd0aD1hcnJheS5sZW5ndGgsbGVuZ3RoPW5hdGl2ZU1pbihpbmRleGVzLmxlbmd0aCxhcnJMZW5ndGgpLG9sZEFycmF5PWNvcHlBcnJheShhcnJheSk7d2hpbGUobGVuZ3RoLS0pIHt2YXIgaW5kZXg9aW5kZXhlc1tsZW5ndGhdO2FycmF5W2xlbmd0aF0gPSBpc0luZGV4KGluZGV4LGFyckxlbmd0aCk/b2xkQXJyYXlbaW5kZXhdOnVuZGVmaW5lZDt9cmV0dXJuIGFycmF5O312YXIgc2V0RGF0YT0oZnVuY3Rpb24oKXt2YXIgY291bnQ9MCxsYXN0Q2FsbGVkPTA7cmV0dXJuIGZ1bmN0aW9uKGtleSx2YWx1ZSl7dmFyIHN0YW1wPW5vdygpLHJlbWFpbmluZz1IT1RfU1BBTiAtIChzdGFtcCAtIGxhc3RDYWxsZWQpO2xhc3RDYWxsZWQgPSBzdGFtcDtpZihyZW1haW5pbmcgPiAwKXtpZigrK2NvdW50ID49IEhPVF9DT1VOVCl7cmV0dXJuIGtleTt9fWVsc2Uge2NvdW50ID0gMDt9cmV0dXJuIGJhc2VTZXREYXRhKGtleSx2YWx1ZSk7fTt9KSgpO2Z1bmN0aW9uIHN0cmluZ1RvUGF0aChzdHJpbmcpe3ZhciByZXN1bHQ9W107dG9TdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlUHJvcE5hbWUsZnVuY3Rpb24obWF0Y2gsbnVtYmVyLHF1b3RlLHN0cmluZyl7cmVzdWx0LnB1c2gocXVvdGU/c3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLFwiJDFcIik6bnVtYmVyIHx8IG1hdGNoKTt9KTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiB0b0FycmF5TGlrZU9iamVjdCh2YWx1ZSl7cmV0dXJuIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKT92YWx1ZTpbXTt9ZnVuY3Rpb24gdG9GdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcImZ1bmN0aW9uXCI/dmFsdWU6aWRlbnRpdHk7fWZ1bmN0aW9uIHdyYXBwZXJDbG9uZSh3cmFwcGVyKXtpZih3cmFwcGVyIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpe3JldHVybiB3cmFwcGVyLmNsb25lKCk7fXZhciByZXN1bHQ9bmV3IExvZGFzaFdyYXBwZXIod3JhcHBlci5fX3dyYXBwZWRfXyx3cmFwcGVyLl9fY2hhaW5fXyk7cmVzdWx0Ll9fYWN0aW9uc19fID0gY29weUFycmF5KHdyYXBwZXIuX19hY3Rpb25zX18pO3Jlc3VsdC5fX2luZGV4X18gPSB3cmFwcGVyLl9faW5kZXhfXztyZXN1bHQuX192YWx1ZXNfXyA9IHdyYXBwZXIuX192YWx1ZXNfXztyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBjaHVuayhhcnJheSxzaXplKXtzaXplID0gbmF0aXZlTWF4KHRvSW50ZWdlcihzaXplKSwwKTt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGggfHwgc2l6ZSA8IDEpe3JldHVybiBbXTt9dmFyIGluZGV4PTAscmVzSW5kZXg9LTEscmVzdWx0PUFycmF5KG5hdGl2ZUNlaWwobGVuZ3RoIC8gc2l6ZSkpO3doaWxlKGluZGV4IDwgbGVuZ3RoKSB7cmVzdWx0WysrcmVzSW5kZXhdID0gYmFzZVNsaWNlKGFycmF5LGluZGV4LGluZGV4ICs9IHNpemUpO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBjb21wYWN0KGFycmF5KXt2YXIgaW5kZXg9LTEsbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowLHJlc0luZGV4PS0xLHJlc3VsdD1bXTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XTtpZih2YWx1ZSl7cmVzdWx0WysrcmVzSW5kZXhdID0gdmFsdWU7fX1yZXR1cm4gcmVzdWx0O312YXIgY29uY2F0PXJlc3QoZnVuY3Rpb24oYXJyYXksdmFsdWVzKXtpZighaXNBcnJheShhcnJheSkpe2FycmF5ID0gYXJyYXkgPT0gbnVsbD9bXTpbT2JqZWN0KGFycmF5KV07fXZhbHVlcyA9IGJhc2VGbGF0dGVuKHZhbHVlcyk7cmV0dXJuIGFycmF5Q29uY2F0KGFycmF5LHZhbHVlcyk7fSk7dmFyIGRpZmZlcmVuY2U9cmVzdChmdW5jdGlvbihhcnJheSx2YWx1ZXMpe3JldHVybiBpc0FycmF5TGlrZU9iamVjdChhcnJheSk/YmFzZURpZmZlcmVuY2UoYXJyYXksYmFzZUZsYXR0ZW4odmFsdWVzLGZhbHNlLHRydWUpKTpbXTt9KTt2YXIgZGlmZmVyZW5jZUJ5PXJlc3QoZnVuY3Rpb24oYXJyYXksdmFsdWVzKXt2YXIgaXRlcmF0ZWU9bGFzdCh2YWx1ZXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGl0ZXJhdGVlKSl7aXRlcmF0ZWUgPSB1bmRlZmluZWQ7fXJldHVybiBpc0FycmF5TGlrZU9iamVjdChhcnJheSk/YmFzZURpZmZlcmVuY2UoYXJyYXksYmFzZUZsYXR0ZW4odmFsdWVzLGZhbHNlLHRydWUpLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk6W107fSk7dmFyIGRpZmZlcmVuY2VXaXRoPXJlc3QoZnVuY3Rpb24oYXJyYXksdmFsdWVzKXt2YXIgY29tcGFyYXRvcj1sYXN0KHZhbHVlcyk7aWYoaXNBcnJheUxpa2VPYmplY3QoY29tcGFyYXRvcikpe2NvbXBhcmF0b3IgPSB1bmRlZmluZWQ7fXJldHVybiBpc0FycmF5TGlrZU9iamVjdChhcnJheSk/YmFzZURpZmZlcmVuY2UoYXJyYXksYmFzZUZsYXR0ZW4odmFsdWVzLGZhbHNlLHRydWUpLHVuZGVmaW5lZCxjb21wYXJhdG9yKTpbXTt9KTtmdW5jdGlvbiBkcm9wKGFycmF5LG4sZ3VhcmQpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYoIWxlbmd0aCl7cmV0dXJuIFtdO31uID0gZ3VhcmQgfHwgbiA9PT0gdW5kZWZpbmVkPzE6dG9JbnRlZ2VyKG4pO3JldHVybiBiYXNlU2xpY2UoYXJyYXksbiA8IDA/MDpuLGxlbmd0aCk7fWZ1bmN0aW9uIGRyb3BSaWdodChhcnJheSxuLGd1YXJkKXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGgpe3JldHVybiBbXTt9biA9IGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZD8xOnRvSW50ZWdlcihuKTtuID0gbGVuZ3RoIC0gbjtyZXR1cm4gYmFzZVNsaWNlKGFycmF5LDAsbiA8IDA/MDpuKTt9ZnVuY3Rpb24gZHJvcFJpZ2h0V2hpbGUoYXJyYXkscHJlZGljYXRlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VXaGlsZShhcnJheSxnZXRJdGVyYXRlZShwcmVkaWNhdGUsMyksdHJ1ZSx0cnVlKTpbXTt9ZnVuY3Rpb24gZHJvcFdoaWxlKGFycmF5LHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlV2hpbGUoYXJyYXksZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpLHRydWUpOltdO31mdW5jdGlvbiBmaWxsKGFycmF5LHZhbHVlLHN0YXJ0LGVuZCl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoKXtyZXR1cm4gW107fWlmKHN0YXJ0ICYmIHR5cGVvZiBzdGFydCAhPSBcIm51bWJlclwiICYmIGlzSXRlcmF0ZWVDYWxsKGFycmF5LHZhbHVlLHN0YXJ0KSl7c3RhcnQgPSAwO2VuZCA9IGxlbmd0aDt9cmV0dXJuIGJhc2VGaWxsKGFycmF5LHZhbHVlLHN0YXJ0LGVuZCk7fWZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSxwcmVkaWNhdGUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZUZpbmRJbmRleChhcnJheSxnZXRJdGVyYXRlZShwcmVkaWNhdGUsMykpOi0xO31mdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlRmluZEluZGV4KGFycmF5LGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSx0cnVlKTotMTt9ZnVuY3Rpb24gZmxhdHRlbihhcnJheSl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtyZXR1cm4gbGVuZ3RoP2Jhc2VGbGF0dGVuKGFycmF5KTpbXTt9ZnVuY3Rpb24gZmxhdHRlbkRlZXAoYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7cmV0dXJuIGxlbmd0aD9iYXNlRmxhdHRlbihhcnJheSx0cnVlKTpbXTt9ZnVuY3Rpb24gZnJvbVBhaXJzKHBhaXJzKXt2YXIgaW5kZXg9LTEsbGVuZ3RoPXBhaXJzP3BhaXJzLmxlbmd0aDowLHJlc3VsdD17fTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHBhaXI9cGFpcnNbaW5kZXhdO3Jlc3VsdFtwYWlyWzBdXSA9IHBhaXJbMV07fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIGhlYWQoYXJyYXkpe3JldHVybiBhcnJheT9hcnJheVswXTp1bmRlZmluZWQ7fWZ1bmN0aW9uIGluZGV4T2YoYXJyYXksdmFsdWUsZnJvbUluZGV4KXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGgpe3JldHVybiAtMTt9ZnJvbUluZGV4ID0gdG9JbnRlZ2VyKGZyb21JbmRleCk7aWYoZnJvbUluZGV4IDwgMCl7ZnJvbUluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwwKTt9cmV0dXJuIGJhc2VJbmRleE9mKGFycmF5LHZhbHVlLGZyb21JbmRleCk7fWZ1bmN0aW9uIGluaXRpYWwoYXJyYXkpe3JldHVybiBkcm9wUmlnaHQoYXJyYXksMSk7fXZhciBpbnRlcnNlY3Rpb249cmVzdChmdW5jdGlvbihhcnJheXMpe3ZhciBtYXBwZWQ9YXJyYXlNYXAoYXJyYXlzLHRvQXJyYXlMaWtlT2JqZWN0KTtyZXR1cm4gbWFwcGVkLmxlbmd0aCAmJiBtYXBwZWRbMF0gPT09IGFycmF5c1swXT9iYXNlSW50ZXJzZWN0aW9uKG1hcHBlZCk6W107fSk7dmFyIGludGVyc2VjdGlvbkJ5PXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgaXRlcmF0ZWU9bGFzdChhcnJheXMpLG1hcHBlZD1hcnJheU1hcChhcnJheXMsdG9BcnJheUxpa2VPYmplY3QpO2lmKGl0ZXJhdGVlID09PSBsYXN0KG1hcHBlZCkpe2l0ZXJhdGVlID0gdW5kZWZpbmVkO31lbHNlIHttYXBwZWQucG9wKCk7fXJldHVybiBtYXBwZWQubGVuZ3RoICYmIG1hcHBlZFswXSA9PT0gYXJyYXlzWzBdP2Jhc2VJbnRlcnNlY3Rpb24obWFwcGVkLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSk6W107fSk7dmFyIGludGVyc2VjdGlvbldpdGg9cmVzdChmdW5jdGlvbihhcnJheXMpe3ZhciBjb21wYXJhdG9yPWxhc3QoYXJyYXlzKSxtYXBwZWQ9YXJyYXlNYXAoYXJyYXlzLHRvQXJyYXlMaWtlT2JqZWN0KTtpZihjb21wYXJhdG9yID09PSBsYXN0KG1hcHBlZCkpe2NvbXBhcmF0b3IgPSB1bmRlZmluZWQ7fWVsc2Uge21hcHBlZC5wb3AoKTt9cmV0dXJuIG1hcHBlZC5sZW5ndGggJiYgbWFwcGVkWzBdID09PSBhcnJheXNbMF0/YmFzZUludGVyc2VjdGlvbihtYXBwZWQsdW5kZWZpbmVkLGNvbXBhcmF0b3IpOltdO30pO2Z1bmN0aW9uIGpvaW4oYXJyYXksc2VwYXJhdG9yKXtyZXR1cm4gYXJyYXk/bmF0aXZlSm9pbi5jYWxsKGFycmF5LHNlcGFyYXRvcik6XCJcIjt9ZnVuY3Rpb24gbGFzdChhcnJheSl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtyZXR1cm4gbGVuZ3RoP2FycmF5W2xlbmd0aCAtIDFdOnVuZGVmaW5lZDt9ZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyYXksdmFsdWUsZnJvbUluZGV4KXt2YXIgbGVuZ3RoPWFycmF5P2FycmF5Lmxlbmd0aDowO2lmKCFsZW5ndGgpe3JldHVybiAtMTt9dmFyIGluZGV4PWxlbmd0aDtpZihmcm9tSW5kZXggIT09IHVuZGVmaW5lZCl7aW5kZXggPSB0b0ludGVnZXIoZnJvbUluZGV4KTtpbmRleCA9IChpbmRleCA8IDA/bmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LDApOm5hdGl2ZU1pbihpbmRleCxsZW5ndGggLSAxKSkgKyAxO31pZih2YWx1ZSAhPT0gdmFsdWUpe3JldHVybiBpbmRleE9mTmFOKGFycmF5LGluZGV4LHRydWUpO313aGlsZShpbmRleC0tKSB7aWYoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSl7cmV0dXJuIGluZGV4O319cmV0dXJuIC0xO312YXIgcHVsbD1yZXN0KHB1bGxBbGwpO2Z1bmN0aW9uIHB1bGxBbGwoYXJyYXksdmFsdWVzKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoICYmIHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoP2Jhc2VQdWxsQWxsKGFycmF5LHZhbHVlcyk6YXJyYXk7fWZ1bmN0aW9uIHB1bGxBbGxCeShhcnJheSx2YWx1ZXMsaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGggJiYgdmFsdWVzICYmIHZhbHVlcy5sZW5ndGg/YmFzZVB1bGxBbGxCeShhcnJheSx2YWx1ZXMsZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTphcnJheTt9dmFyIHB1bGxBdD1yZXN0KGZ1bmN0aW9uKGFycmF5LGluZGV4ZXMpe2luZGV4ZXMgPSBhcnJheU1hcChiYXNlRmxhdHRlbihpbmRleGVzKSxTdHJpbmcpO3ZhciByZXN1bHQ9YmFzZUF0KGFycmF5LGluZGV4ZXMpO2Jhc2VQdWxsQXQoYXJyYXksaW5kZXhlcy5zb3J0KGNvbXBhcmVBc2NlbmRpbmcpKTtyZXR1cm4gcmVzdWx0O30pO2Z1bmN0aW9uIHJlbW92ZShhcnJheSxwcmVkaWNhdGUpe3ZhciByZXN1bHQ9W107aWYoIShhcnJheSAmJiBhcnJheS5sZW5ndGgpKXtyZXR1cm4gcmVzdWx0O312YXIgaW5kZXg9LTEsaW5kZXhlcz1bXSxsZW5ndGg9YXJyYXkubGVuZ3RoO3ByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFyIHZhbHVlPWFycmF5W2luZGV4XTtpZihwcmVkaWNhdGUodmFsdWUsaW5kZXgsYXJyYXkpKXtyZXN1bHQucHVzaCh2YWx1ZSk7aW5kZXhlcy5wdXNoKGluZGV4KTt9fWJhc2VQdWxsQXQoYXJyYXksaW5kZXhlcyk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gcmV2ZXJzZShhcnJheSl7cmV0dXJuIGFycmF5P25hdGl2ZVJldmVyc2UuY2FsbChhcnJheSk6YXJyYXk7fWZ1bmN0aW9uIHNsaWNlKGFycmF5LHN0YXJ0LGVuZCl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZighbGVuZ3RoKXtyZXR1cm4gW107fWlmKGVuZCAmJiB0eXBlb2YgZW5kICE9IFwibnVtYmVyXCIgJiYgaXNJdGVyYXRlZUNhbGwoYXJyYXksc3RhcnQsZW5kKSl7c3RhcnQgPSAwO2VuZCA9IGxlbmd0aDt9ZWxzZSB7c3RhcnQgPSBzdGFydCA9PSBudWxsPzA6dG9JbnRlZ2VyKHN0YXJ0KTtlbmQgPSBlbmQgPT09IHVuZGVmaW5lZD9sZW5ndGg6dG9JbnRlZ2VyKGVuZCk7fXJldHVybiBiYXNlU2xpY2UoYXJyYXksc3RhcnQsZW5kKTt9ZnVuY3Rpb24gc29ydGVkSW5kZXgoYXJyYXksdmFsdWUpe3JldHVybiBiYXNlU29ydGVkSW5kZXgoYXJyYXksdmFsdWUpO31mdW5jdGlvbiBzb3J0ZWRJbmRleEJ5KGFycmF5LHZhbHVlLGl0ZXJhdGVlKXtyZXR1cm4gYmFzZVNvcnRlZEluZGV4QnkoYXJyYXksdmFsdWUsZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTt9ZnVuY3Rpb24gc29ydGVkSW5kZXhPZihhcnJheSx2YWx1ZSl7dmFyIGxlbmd0aD1hcnJheT9hcnJheS5sZW5ndGg6MDtpZihsZW5ndGgpe3ZhciBpbmRleD1iYXNlU29ydGVkSW5kZXgoYXJyYXksdmFsdWUpO2lmKGluZGV4IDwgbGVuZ3RoICYmIGVxKGFycmF5W2luZGV4XSx2YWx1ZSkpe3JldHVybiBpbmRleDt9fXJldHVybiAtMTt9ZnVuY3Rpb24gc29ydGVkTGFzdEluZGV4KGFycmF5LHZhbHVlKXtyZXR1cm4gYmFzZVNvcnRlZEluZGV4KGFycmF5LHZhbHVlLHRydWUpO31mdW5jdGlvbiBzb3J0ZWRMYXN0SW5kZXhCeShhcnJheSx2YWx1ZSxpdGVyYXRlZSl7cmV0dXJuIGJhc2VTb3J0ZWRJbmRleEJ5KGFycmF5LHZhbHVlLGdldEl0ZXJhdGVlKGl0ZXJhdGVlKSx0cnVlKTt9ZnVuY3Rpb24gc29ydGVkTGFzdEluZGV4T2YoYXJyYXksdmFsdWUpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYobGVuZ3RoKXt2YXIgaW5kZXg9YmFzZVNvcnRlZEluZGV4KGFycmF5LHZhbHVlLHRydWUpIC0gMTtpZihlcShhcnJheVtpbmRleF0sdmFsdWUpKXtyZXR1cm4gaW5kZXg7fX1yZXR1cm4gLTE7fWZ1bmN0aW9uIHNvcnRlZFVuaXEoYXJyYXkpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVNvcnRlZFVuaXEoYXJyYXkpOltdO31mdW5jdGlvbiBzb3J0ZWRVbmlxQnkoYXJyYXksaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVNvcnRlZFVuaXFCeShhcnJheSxnZXRJdGVyYXRlZShpdGVyYXRlZSkpOltdO31mdW5jdGlvbiB0YWlsKGFycmF5KXtyZXR1cm4gZHJvcChhcnJheSwxKTt9ZnVuY3Rpb24gdGFrZShhcnJheSxuLGd1YXJkKXtpZighKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpe3JldHVybiBbXTt9biA9IGd1YXJkIHx8IG4gPT09IHVuZGVmaW5lZD8xOnRvSW50ZWdlcihuKTtyZXR1cm4gYmFzZVNsaWNlKGFycmF5LDAsbiA8IDA/MDpuKTt9ZnVuY3Rpb24gdGFrZVJpZ2h0KGFycmF5LG4sZ3VhcmQpe3ZhciBsZW5ndGg9YXJyYXk/YXJyYXkubGVuZ3RoOjA7aWYoIWxlbmd0aCl7cmV0dXJuIFtdO31uID0gZ3VhcmQgfHwgbiA9PT0gdW5kZWZpbmVkPzE6dG9JbnRlZ2VyKG4pO24gPSBsZW5ndGggLSBuO3JldHVybiBiYXNlU2xpY2UoYXJyYXksbiA8IDA/MDpuLGxlbmd0aCk7fWZ1bmN0aW9uIHRha2VSaWdodFdoaWxlKGFycmF5LHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlV2hpbGUoYXJyYXksZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpLGZhbHNlLHRydWUpOltdO31mdW5jdGlvbiB0YWtlV2hpbGUoYXJyYXkscHJlZGljYXRlKXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VXaGlsZShhcnJheSxnZXRJdGVyYXRlZShwcmVkaWNhdGUsMykpOltdO312YXIgdW5pb249cmVzdChmdW5jdGlvbihhcnJheXMpe3JldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcnJheXMsZmFsc2UsdHJ1ZSkpO30pO3ZhciB1bmlvbkJ5PXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgaXRlcmF0ZWU9bGFzdChhcnJheXMpO2lmKGlzQXJyYXlMaWtlT2JqZWN0KGl0ZXJhdGVlKSl7aXRlcmF0ZWUgPSB1bmRlZmluZWQ7fXJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcnJheXMsZmFsc2UsdHJ1ZSksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTt9KTt2YXIgdW5pb25XaXRoPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgY29tcGFyYXRvcj1sYXN0KGFycmF5cyk7aWYoaXNBcnJheUxpa2VPYmplY3QoY29tcGFyYXRvcikpe2NvbXBhcmF0b3IgPSB1bmRlZmluZWQ7fXJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcnJheXMsZmFsc2UsdHJ1ZSksdW5kZWZpbmVkLGNvbXBhcmF0b3IpO30pO2Z1bmN0aW9uIHVuaXEoYXJyYXkpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVVuaXEoYXJyYXkpOltdO31mdW5jdGlvbiB1bmlxQnkoYXJyYXksaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVVuaXEoYXJyYXksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpKTpbXTt9ZnVuY3Rpb24gdW5pcVdpdGgoYXJyYXksY29tcGFyYXRvcil7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlVW5pcShhcnJheSx1bmRlZmluZWQsY29tcGFyYXRvcik6W107fWZ1bmN0aW9uIHVuemlwKGFycmF5KXtpZighKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkpe3JldHVybiBbXTt9dmFyIGxlbmd0aD0wO2FycmF5ID0gYXJyYXlGaWx0ZXIoYXJyYXksZnVuY3Rpb24oZ3JvdXApe2lmKGlzQXJyYXlMaWtlT2JqZWN0KGdyb3VwKSl7bGVuZ3RoID0gbmF0aXZlTWF4KGdyb3VwLmxlbmd0aCxsZW5ndGgpO3JldHVybiB0cnVlO319KTtyZXR1cm4gYmFzZVRpbWVzKGxlbmd0aCxmdW5jdGlvbihpbmRleCl7cmV0dXJuIGFycmF5TWFwKGFycmF5LGJhc2VQcm9wZXJ0eShpbmRleCkpO30pO31mdW5jdGlvbiB1bnppcFdpdGgoYXJyYXksaXRlcmF0ZWUpe2lmKCEoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKSl7cmV0dXJuIFtdO312YXIgcmVzdWx0PXVuemlwKGFycmF5KTtpZihpdGVyYXRlZSA9PSBudWxsKXtyZXR1cm4gcmVzdWx0O31yZXR1cm4gYXJyYXlNYXAocmVzdWx0LGZ1bmN0aW9uKGdyb3VwKXtyZXR1cm4gYXBwbHkoaXRlcmF0ZWUsdW5kZWZpbmVkLGdyb3VwKTt9KTt9dmFyIHdpdGhvdXQ9cmVzdChmdW5jdGlvbihhcnJheSx2YWx1ZXMpe3JldHVybiBpc0FycmF5TGlrZU9iamVjdChhcnJheSk/YmFzZURpZmZlcmVuY2UoYXJyYXksdmFsdWVzKTpbXTt9KTt2YXIgeG9yPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXtyZXR1cm4gYmFzZVhvcihhcnJheUZpbHRlcihhcnJheXMsaXNBcnJheUxpa2VPYmplY3QpKTt9KTt2YXIgeG9yQnk9cmVzdChmdW5jdGlvbihhcnJheXMpe3ZhciBpdGVyYXRlZT1sYXN0KGFycmF5cyk7aWYoaXNBcnJheUxpa2VPYmplY3QoaXRlcmF0ZWUpKXtpdGVyYXRlZSA9IHVuZGVmaW5lZDt9cmV0dXJuIGJhc2VYb3IoYXJyYXlGaWx0ZXIoYXJyYXlzLGlzQXJyYXlMaWtlT2JqZWN0KSxnZXRJdGVyYXRlZShpdGVyYXRlZSkpO30pO3ZhciB4b3JXaXRoPXJlc3QoZnVuY3Rpb24oYXJyYXlzKXt2YXIgY29tcGFyYXRvcj1sYXN0KGFycmF5cyk7aWYoaXNBcnJheUxpa2VPYmplY3QoY29tcGFyYXRvcikpe2NvbXBhcmF0b3IgPSB1bmRlZmluZWQ7fXJldHVybiBiYXNlWG9yKGFycmF5RmlsdGVyKGFycmF5cyxpc0FycmF5TGlrZU9iamVjdCksdW5kZWZpbmVkLGNvbXBhcmF0b3IpO30pO3ZhciB6aXA9cmVzdCh1bnppcCk7ZnVuY3Rpb24gemlwT2JqZWN0KHByb3BzLHZhbHVlcyl7cmV0dXJuIGJhc2VaaXBPYmplY3QocHJvcHMgfHwgW10sdmFsdWVzIHx8IFtdLGFzc2lnblZhbHVlKTt9ZnVuY3Rpb24gemlwT2JqZWN0RGVlcChwcm9wcyx2YWx1ZXMpe3JldHVybiBiYXNlWmlwT2JqZWN0KHByb3BzIHx8IFtdLHZhbHVlcyB8fCBbXSxiYXNlU2V0KTt9dmFyIHppcFdpdGg9cmVzdChmdW5jdGlvbihhcnJheXMpe3ZhciBsZW5ndGg9YXJyYXlzLmxlbmd0aCxpdGVyYXRlZT1sZW5ndGggPiAxP2FycmF5c1tsZW5ndGggLSAxXTp1bmRlZmluZWQ7aXRlcmF0ZWUgPSB0eXBlb2YgaXRlcmF0ZWUgPT0gXCJmdW5jdGlvblwiPyhhcnJheXMucG9wKCksaXRlcmF0ZWUpOnVuZGVmaW5lZDtyZXR1cm4gdW56aXBXaXRoKGFycmF5cyxpdGVyYXRlZSk7fSk7ZnVuY3Rpb24gY2hhaW4odmFsdWUpe3ZhciByZXN1bHQ9bG9kYXNoKHZhbHVlKTtyZXN1bHQuX19jaGFpbl9fID0gdHJ1ZTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiB0YXAodmFsdWUsaW50ZXJjZXB0b3Ipe2ludGVyY2VwdG9yKHZhbHVlKTtyZXR1cm4gdmFsdWU7fWZ1bmN0aW9uIHRocnUodmFsdWUsaW50ZXJjZXB0b3Ipe3JldHVybiBpbnRlcmNlcHRvcih2YWx1ZSk7fXZhciB3cmFwcGVyQXQ9cmVzdChmdW5jdGlvbihwYXRocyl7cGF0aHMgPSBiYXNlRmxhdHRlbihwYXRocyk7dmFyIGxlbmd0aD1wYXRocy5sZW5ndGgsc3RhcnQ9bGVuZ3RoP3BhdGhzWzBdOjAsdmFsdWU9dGhpcy5fX3dyYXBwZWRfXyxpbnRlcmNlcHRvcj1mdW5jdGlvbiBpbnRlcmNlcHRvcihvYmplY3Qpe3JldHVybiBiYXNlQXQob2JqZWN0LHBhdGhzKTt9O2lmKGxlbmd0aCA+IDEgfHwgdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGggfHwgISh2YWx1ZSBpbnN0YW5jZW9mIExhenlXcmFwcGVyKSB8fCAhaXNJbmRleChzdGFydCkpe3JldHVybiB0aGlzLnRocnUoaW50ZXJjZXB0b3IpO312YWx1ZSA9IHZhbHVlLnNsaWNlKHN0YXJ0LCtzdGFydCArIChsZW5ndGg/MTowKSk7dmFsdWUuX19hY3Rpb25zX18ucHVzaCh7ZnVuYzp0aHJ1LGFyZ3M6W2ludGVyY2VwdG9yXSx0aGlzQXJnOnVuZGVmaW5lZH0pO3JldHVybiBuZXcgTG9kYXNoV3JhcHBlcih2YWx1ZSx0aGlzLl9fY2hhaW5fXykudGhydShmdW5jdGlvbihhcnJheSl7aWYobGVuZ3RoICYmICFhcnJheS5sZW5ndGgpe2FycmF5LnB1c2godW5kZWZpbmVkKTt9cmV0dXJuIGFycmF5O30pO30pO2Z1bmN0aW9uIHdyYXBwZXJDaGFpbigpe3JldHVybiBjaGFpbih0aGlzKTt9ZnVuY3Rpb24gd3JhcHBlckNvbW1pdCgpe3JldHVybiBuZXcgTG9kYXNoV3JhcHBlcih0aGlzLnZhbHVlKCksdGhpcy5fX2NoYWluX18pO31mdW5jdGlvbiB3cmFwcGVyRmxhdE1hcChpdGVyYXRlZSl7cmV0dXJuIHRoaXMubWFwKGl0ZXJhdGVlKS5mbGF0dGVuKCk7fWZ1bmN0aW9uIHdyYXBwZXJOZXh0KCl7aWYodGhpcy5fX3ZhbHVlc19fID09PSB1bmRlZmluZWQpe3RoaXMuX192YWx1ZXNfXyA9IHRvQXJyYXkodGhpcy52YWx1ZSgpKTt9dmFyIGRvbmU9dGhpcy5fX2luZGV4X18gPj0gdGhpcy5fX3ZhbHVlc19fLmxlbmd0aCx2YWx1ZT1kb25lP3VuZGVmaW5lZDp0aGlzLl9fdmFsdWVzX19bdGhpcy5fX2luZGV4X18rK107cmV0dXJuIHtkb25lOmRvbmUsdmFsdWU6dmFsdWV9O31mdW5jdGlvbiB3cmFwcGVyVG9JdGVyYXRvcigpe3JldHVybiB0aGlzO31mdW5jdGlvbiB3cmFwcGVyUGxhbnQodmFsdWUpe3ZhciByZXN1bHQscGFyZW50PXRoaXM7d2hpbGUocGFyZW50IGluc3RhbmNlb2YgYmFzZUxvZGFzaCkge3ZhciBjbG9uZT13cmFwcGVyQ2xvbmUocGFyZW50KTtjbG9uZS5fX2luZGV4X18gPSAwO2Nsb25lLl9fdmFsdWVzX18gPSB1bmRlZmluZWQ7aWYocmVzdWx0KXtwcmV2aW91cy5fX3dyYXBwZWRfXyA9IGNsb25lO31lbHNlIHtyZXN1bHQgPSBjbG9uZTt9dmFyIHByZXZpb3VzPWNsb25lO3BhcmVudCA9IHBhcmVudC5fX3dyYXBwZWRfXzt9cHJldmlvdXMuX193cmFwcGVkX18gPSB2YWx1ZTtyZXR1cm4gcmVzdWx0O31mdW5jdGlvbiB3cmFwcGVyUmV2ZXJzZSgpe3ZhciB2YWx1ZT10aGlzLl9fd3JhcHBlZF9fO2lmKHZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIpe3ZhciB3cmFwcGVkPXZhbHVlO2lmKHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoKXt3cmFwcGVkID0gbmV3IExhenlXcmFwcGVyKHRoaXMpO313cmFwcGVkID0gd3JhcHBlZC5yZXZlcnNlKCk7d3JhcHBlZC5fX2FjdGlvbnNfXy5wdXNoKHtmdW5jOnRocnUsYXJnczpbcmV2ZXJzZV0sdGhpc0FyZzp1bmRlZmluZWR9KTtyZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIod3JhcHBlZCx0aGlzLl9fY2hhaW5fXyk7fXJldHVybiB0aGlzLnRocnUocmV2ZXJzZSk7fWZ1bmN0aW9uIHdyYXBwZXJWYWx1ZSgpe3JldHVybiBiYXNlV3JhcHBlclZhbHVlKHRoaXMuX193cmFwcGVkX18sdGhpcy5fX2FjdGlvbnNfXyk7fXZhciBjb3VudEJ5PWNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LHZhbHVlLGtleSl7aGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsa2V5KT8rK3Jlc3VsdFtrZXldOnJlc3VsdFtrZXldID0gMTt9KTtmdW5jdGlvbiBldmVyeShjb2xsZWN0aW9uLHByZWRpY2F0ZSxndWFyZCl7dmFyIGZ1bmM9aXNBcnJheShjb2xsZWN0aW9uKT9hcnJheUV2ZXJ5OmJhc2VFdmVyeTtpZihndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLHByZWRpY2F0ZSxndWFyZCkpe3ByZWRpY2F0ZSA9IHVuZGVmaW5lZDt9cmV0dXJuIGZ1bmMoY29sbGVjdGlvbixnZXRJdGVyYXRlZShwcmVkaWNhdGUsMykpO31mdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlGaWx0ZXI6YmFzZUZpbHRlcjtyZXR1cm4gZnVuYyhjb2xsZWN0aW9uLGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSk7fWZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ByZWRpY2F0ZSA9IGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKTtpZihpc0FycmF5KGNvbGxlY3Rpb24pKXt2YXIgaW5kZXg9YmFzZUZpbmRJbmRleChjb2xsZWN0aW9uLHByZWRpY2F0ZSk7cmV0dXJuIGluZGV4ID4gLTE/Y29sbGVjdGlvbltpbmRleF06dW5kZWZpbmVkO31yZXR1cm4gYmFzZUZpbmQoY29sbGVjdGlvbixwcmVkaWNhdGUsYmFzZUVhY2gpO31mdW5jdGlvbiBmaW5kTGFzdChjb2xsZWN0aW9uLHByZWRpY2F0ZSl7cHJlZGljYXRlID0gZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpO2lmKGlzQXJyYXkoY29sbGVjdGlvbikpe3ZhciBpbmRleD1iYXNlRmluZEluZGV4KGNvbGxlY3Rpb24scHJlZGljYXRlLHRydWUpO3JldHVybiBpbmRleCA+IC0xP2NvbGxlY3Rpb25baW5kZXhdOnVuZGVmaW5lZDt9cmV0dXJuIGJhc2VGaW5kKGNvbGxlY3Rpb24scHJlZGljYXRlLGJhc2VFYWNoUmlnaHQpO31mdW5jdGlvbiBmbGF0TWFwKGNvbGxlY3Rpb24saXRlcmF0ZWUpe3JldHVybiBiYXNlRmxhdHRlbihtYXAoY29sbGVjdGlvbixpdGVyYXRlZSkpO31mdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24saXRlcmF0ZWUpe3JldHVybiB0eXBlb2YgaXRlcmF0ZWUgPT0gXCJmdW5jdGlvblwiICYmIGlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlFYWNoKGNvbGxlY3Rpb24saXRlcmF0ZWUpOmJhc2VFYWNoKGNvbGxlY3Rpb24sdG9GdW5jdGlvbihpdGVyYXRlZSkpO31mdW5jdGlvbiBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbixpdGVyYXRlZSl7cmV0dXJuIHR5cGVvZiBpdGVyYXRlZSA9PSBcImZ1bmN0aW9uXCIgJiYgaXNBcnJheShjb2xsZWN0aW9uKT9hcnJheUVhY2hSaWdodChjb2xsZWN0aW9uLGl0ZXJhdGVlKTpiYXNlRWFjaFJpZ2h0KGNvbGxlY3Rpb24sdG9GdW5jdGlvbihpdGVyYXRlZSkpO312YXIgZ3JvdXBCeT1jcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe2lmKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LGtleSkpe3Jlc3VsdFtrZXldLnB1c2godmFsdWUpO31lbHNlIHtyZXN1bHRba2V5XSA9IFt2YWx1ZV07fX0pO2Z1bmN0aW9uIGluY2x1ZGVzKGNvbGxlY3Rpb24sdmFsdWUsZnJvbUluZGV4LGd1YXJkKXtjb2xsZWN0aW9uID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbik/Y29sbGVjdGlvbjp2YWx1ZXMoY29sbGVjdGlvbik7ZnJvbUluZGV4ID0gZnJvbUluZGV4ICYmICFndWFyZD90b0ludGVnZXIoZnJvbUluZGV4KTowO3ZhciBsZW5ndGg9Y29sbGVjdGlvbi5sZW5ndGg7aWYoZnJvbUluZGV4IDwgMCl7ZnJvbUluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwwKTt9cmV0dXJuIGlzU3RyaW5nKGNvbGxlY3Rpb24pP2Zyb21JbmRleCA8PSBsZW5ndGggJiYgY29sbGVjdGlvbi5pbmRleE9mKHZhbHVlLGZyb21JbmRleCkgPiAtMTohIWxlbmd0aCAmJiBiYXNlSW5kZXhPZihjb2xsZWN0aW9uLHZhbHVlLGZyb21JbmRleCkgPiAtMTt9dmFyIGludm9rZU1hcD1yZXN0KGZ1bmN0aW9uKGNvbGxlY3Rpb24scGF0aCxhcmdzKXt2YXIgaW5kZXg9LTEsaXNGdW5jPXR5cGVvZiBwYXRoID09IFwiZnVuY3Rpb25cIixpc1Byb3A9aXNLZXkocGF0aCkscmVzdWx0PWlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pP0FycmF5KGNvbGxlY3Rpb24ubGVuZ3RoKTpbXTtiYXNlRWFjaChjb2xsZWN0aW9uLGZ1bmN0aW9uKHZhbHVlKXt2YXIgZnVuYz1pc0Z1bmM/cGF0aDppc1Byb3AgJiYgdmFsdWUgIT0gbnVsbD92YWx1ZVtwYXRoXTp1bmRlZmluZWQ7cmVzdWx0WysraW5kZXhdID0gZnVuYz9hcHBseShmdW5jLHZhbHVlLGFyZ3MpOmJhc2VJbnZva2UodmFsdWUscGF0aCxhcmdzKTt9KTtyZXR1cm4gcmVzdWx0O30pO3ZhciBrZXlCeT1jcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe3Jlc3VsdFtrZXldID0gdmFsdWU7fSk7ZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24saXRlcmF0ZWUpe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlNYXA6YmFzZU1hcDtyZXR1cm4gZnVuYyhjb2xsZWN0aW9uLGdldEl0ZXJhdGVlKGl0ZXJhdGVlLDMpKTt9ZnVuY3Rpb24gb3JkZXJCeShjb2xsZWN0aW9uLGl0ZXJhdGVlcyxvcmRlcnMsZ3VhcmQpe2lmKGNvbGxlY3Rpb24gPT0gbnVsbCl7cmV0dXJuIFtdO31pZighaXNBcnJheShpdGVyYXRlZXMpKXtpdGVyYXRlZXMgPSBpdGVyYXRlZXMgPT0gbnVsbD9bXTpbaXRlcmF0ZWVzXTt9b3JkZXJzID0gZ3VhcmQ/dW5kZWZpbmVkOm9yZGVycztpZighaXNBcnJheShvcmRlcnMpKXtvcmRlcnMgPSBvcmRlcnMgPT0gbnVsbD9bXTpbb3JkZXJzXTt9cmV0dXJuIGJhc2VPcmRlckJ5KGNvbGxlY3Rpb24saXRlcmF0ZWVzLG9yZGVycyk7fXZhciBwYXJ0aXRpb249Y3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtyZXN1bHRba2V5PzA6MV0ucHVzaCh2YWx1ZSk7fSxmdW5jdGlvbigpe3JldHVybiBbW10sW11dO30pO2Z1bmN0aW9uIHJlZHVjZShjb2xsZWN0aW9uLGl0ZXJhdGVlLGFjY3VtdWxhdG9yKXt2YXIgZnVuYz1pc0FycmF5KGNvbGxlY3Rpb24pP2FycmF5UmVkdWNlOmJhc2VSZWR1Y2UsaW5pdEFjY3VtPWFyZ3VtZW50cy5sZW5ndGggPCAzO3JldHVybiBmdW5jKGNvbGxlY3Rpb24sZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsNCksYWNjdW11bGF0b3IsaW5pdEFjY3VtLGJhc2VFYWNoKTt9ZnVuY3Rpb24gcmVkdWNlUmlnaHQoY29sbGVjdGlvbixpdGVyYXRlZSxhY2N1bXVsYXRvcil7dmFyIGZ1bmM9aXNBcnJheShjb2xsZWN0aW9uKT9hcnJheVJlZHVjZVJpZ2h0OmJhc2VSZWR1Y2UsaW5pdEFjY3VtPWFyZ3VtZW50cy5sZW5ndGggPCAzO3JldHVybiBmdW5jKGNvbGxlY3Rpb24sZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsNCksYWNjdW11bGF0b3IsaW5pdEFjY3VtLGJhc2VFYWNoUmlnaHQpO31mdW5jdGlvbiByZWplY3QoY29sbGVjdGlvbixwcmVkaWNhdGUpe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlGaWx0ZXI6YmFzZUZpbHRlcjtwcmVkaWNhdGUgPSBnZXRJdGVyYXRlZShwcmVkaWNhdGUsMyk7cmV0dXJuIGZ1bmMoY29sbGVjdGlvbixmdW5jdGlvbih2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKXtyZXR1cm4gIXByZWRpY2F0ZSh2YWx1ZSxpbmRleCxjb2xsZWN0aW9uKTt9KTt9ZnVuY3Rpb24gc2FtcGxlKGNvbGxlY3Rpb24pe3ZhciBhcnJheT1pc0FycmF5TGlrZShjb2xsZWN0aW9uKT9jb2xsZWN0aW9uOnZhbHVlcyhjb2xsZWN0aW9uKSxsZW5ndGg9YXJyYXkubGVuZ3RoO3JldHVybiBsZW5ndGggPiAwP2FycmF5W2Jhc2VSYW5kb20oMCxsZW5ndGggLSAxKV06dW5kZWZpbmVkO31mdW5jdGlvbiBzYW1wbGVTaXplKGNvbGxlY3Rpb24sbil7dmFyIGluZGV4PS0xLHJlc3VsdD10b0FycmF5KGNvbGxlY3Rpb24pLGxlbmd0aD1yZXN1bHQubGVuZ3RoLGxhc3RJbmRleD1sZW5ndGggLSAxO24gPSBiYXNlQ2xhbXAodG9JbnRlZ2VyKG4pLDAsbGVuZ3RoKTt3aGlsZSgrK2luZGV4IDwgbikge3ZhciByYW5kPWJhc2VSYW5kb20oaW5kZXgsbGFzdEluZGV4KSx2YWx1ZT1yZXN1bHRbcmFuZF07cmVzdWx0W3JhbmRdID0gcmVzdWx0W2luZGV4XTtyZXN1bHRbaW5kZXhdID0gdmFsdWU7fXJlc3VsdC5sZW5ndGggPSBuO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIHNodWZmbGUoY29sbGVjdGlvbil7cmV0dXJuIHNhbXBsZVNpemUoY29sbGVjdGlvbixNQVhfQVJSQVlfTEVOR1RIKTt9ZnVuY3Rpb24gc2l6ZShjb2xsZWN0aW9uKXtpZihjb2xsZWN0aW9uID09IG51bGwpe3JldHVybiAwO31pZihpc0FycmF5TGlrZShjb2xsZWN0aW9uKSl7dmFyIHJlc3VsdD1jb2xsZWN0aW9uLmxlbmd0aDtyZXR1cm4gcmVzdWx0ICYmIGlzU3RyaW5nKGNvbGxlY3Rpb24pP3N0cmluZ1NpemUoY29sbGVjdGlvbik6cmVzdWx0O31yZXR1cm4ga2V5cyhjb2xsZWN0aW9uKS5sZW5ndGg7fWZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbixwcmVkaWNhdGUsZ3VhcmQpe3ZhciBmdW5jPWlzQXJyYXkoY29sbGVjdGlvbik/YXJyYXlTb21lOmJhc2VTb21lO2lmKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24scHJlZGljYXRlLGd1YXJkKSl7cHJlZGljYXRlID0gdW5kZWZpbmVkO31yZXR1cm4gZnVuYyhjb2xsZWN0aW9uLGdldEl0ZXJhdGVlKHByZWRpY2F0ZSwzKSk7fXZhciBzb3J0Qnk9cmVzdChmdW5jdGlvbihjb2xsZWN0aW9uLGl0ZXJhdGVlcyl7aWYoY29sbGVjdGlvbiA9PSBudWxsKXtyZXR1cm4gW107fXZhciBsZW5ndGg9aXRlcmF0ZWVzLmxlbmd0aDtpZihsZW5ndGggPiAxICYmIGlzSXRlcmF0ZWVDYWxsKGNvbGxlY3Rpb24saXRlcmF0ZWVzWzBdLGl0ZXJhdGVlc1sxXSkpe2l0ZXJhdGVlcyA9IFtdO31lbHNlIGlmKGxlbmd0aCA+IDIgJiYgaXNJdGVyYXRlZUNhbGwoaXRlcmF0ZWVzWzBdLGl0ZXJhdGVlc1sxXSxpdGVyYXRlZXNbMl0pKXtpdGVyYXRlZXMubGVuZ3RoID0gMTt9cmV0dXJuIGJhc2VPcmRlckJ5KGNvbGxlY3Rpb24sYmFzZUZsYXR0ZW4oaXRlcmF0ZWVzKSxbXSk7fSk7dmFyIG5vdz1EYXRlLm5vdztmdW5jdGlvbiBhZnRlcihuLGZ1bmMpe2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31uID0gdG9JbnRlZ2VyKG4pO3JldHVybiBmdW5jdGlvbigpe2lmKC0tbiA8IDEpe3JldHVybiBmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fTt9ZnVuY3Rpb24gYXJ5KGZ1bmMsbixndWFyZCl7biA9IGd1YXJkP3VuZGVmaW5lZDpuO24gPSBmdW5jICYmIG4gPT0gbnVsbD9mdW5jLmxlbmd0aDpuO3JldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsQVJZX0ZMQUcsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLG4pO31mdW5jdGlvbiBiZWZvcmUobixmdW5jKXt2YXIgcmVzdWx0O2lmKHR5cGVvZiBmdW5jICE9IFwiZnVuY3Rpb25cIil7dGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO31uID0gdG9JbnRlZ2VyKG4pO3JldHVybiBmdW5jdGlvbigpe2lmKC0tbiA+IDApe3Jlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO31pZihuIDw9IDEpe2Z1bmMgPSB1bmRlZmluZWQ7fXJldHVybiByZXN1bHQ7fTt9dmFyIGJpbmQ9cmVzdChmdW5jdGlvbihmdW5jLHRoaXNBcmcscGFydGlhbHMpe3ZhciBiaXRtYXNrPUJJTkRfRkxBRztpZihwYXJ0aWFscy5sZW5ndGgpe3ZhciBob2xkZXJzPXJlcGxhY2VIb2xkZXJzKHBhcnRpYWxzLGJpbmQucGxhY2Vob2xkZXIpO2JpdG1hc2sgfD0gUEFSVElBTF9GTEFHO31yZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLGJpdG1hc2ssdGhpc0FyZyxwYXJ0aWFscyxob2xkZXJzKTt9KTt2YXIgYmluZEtleT1yZXN0KGZ1bmN0aW9uKG9iamVjdCxrZXkscGFydGlhbHMpe3ZhciBiaXRtYXNrPUJJTkRfRkxBRyB8IEJJTkRfS0VZX0ZMQUc7aWYocGFydGlhbHMubGVuZ3RoKXt2YXIgaG9sZGVycz1yZXBsYWNlSG9sZGVycyhwYXJ0aWFscyxiaW5kS2V5LnBsYWNlaG9sZGVyKTtiaXRtYXNrIHw9IFBBUlRJQUxfRkxBRzt9cmV0dXJuIGNyZWF0ZVdyYXBwZXIoa2V5LGJpdG1hc2ssb2JqZWN0LHBhcnRpYWxzLGhvbGRlcnMpO30pO2Z1bmN0aW9uIGN1cnJ5KGZ1bmMsYXJpdHksZ3VhcmQpe2FyaXR5ID0gZ3VhcmQ/dW5kZWZpbmVkOmFyaXR5O3ZhciByZXN1bHQ9Y3JlYXRlV3JhcHBlcihmdW5jLENVUlJZX0ZMQUcsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCxhcml0eSk7cmVzdWx0LnBsYWNlaG9sZGVyID0gY3VycnkucGxhY2Vob2xkZXI7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gY3VycnlSaWdodChmdW5jLGFyaXR5LGd1YXJkKXthcml0eSA9IGd1YXJkP3VuZGVmaW5lZDphcml0eTt2YXIgcmVzdWx0PWNyZWF0ZVdyYXBwZXIoZnVuYyxDVVJSWV9SSUdIVF9GTEFHLHVuZGVmaW5lZCx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx1bmRlZmluZWQsYXJpdHkpO3Jlc3VsdC5wbGFjZWhvbGRlciA9IGN1cnJ5UmlnaHQucGxhY2Vob2xkZXI7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gZGVib3VuY2UoZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciBhcmdzLG1heFRpbWVvdXRJZCxyZXN1bHQsc3RhbXAsdGhpc0FyZyx0aW1lb3V0SWQsdHJhaWxpbmdDYWxsLGxhc3RDYWxsZWQ9MCxsZWFkaW5nPWZhbHNlLG1heFdhaXQ9ZmFsc2UsdHJhaWxpbmc9dHJ1ZTtpZih0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9d2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7aWYoaXNPYmplY3Qob3B0aW9ucykpe2xlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZzttYXhXYWl0ID0gXCJtYXhXYWl0XCIgaW4gb3B0aW9ucyAmJiBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLHdhaXQpO3RyYWlsaW5nID0gXCJ0cmFpbGluZ1wiIGluIG9wdGlvbnM/ISFvcHRpb25zLnRyYWlsaW5nOnRyYWlsaW5nO31mdW5jdGlvbiBjYW5jZWwoKXtpZih0aW1lb3V0SWQpe2NsZWFyVGltZW91dCh0aW1lb3V0SWQpO31pZihtYXhUaW1lb3V0SWQpe2NsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO31sYXN0Q2FsbGVkID0gMDthcmdzID0gbWF4VGltZW91dElkID0gdGhpc0FyZyA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDt9ZnVuY3Rpb24gY29tcGxldGUoaXNDYWxsZWQsaWQpe2lmKGlkKXtjbGVhclRpbWVvdXQoaWQpO31tYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7aWYoaXNDYWxsZWQpe2xhc3RDYWxsZWQgPSBub3coKTtyZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsYXJncyk7aWYoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKXthcmdzID0gdGhpc0FyZyA9IHVuZGVmaW5lZDt9fX1mdW5jdGlvbiBkZWxheWVkKCl7dmFyIHJlbWFpbmluZz13YWl0IC0gKG5vdygpIC0gc3RhbXApO2lmKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpe2NvbXBsZXRlKHRyYWlsaW5nQ2FsbCxtYXhUaW1lb3V0SWQpO31lbHNlIHt0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQscmVtYWluaW5nKTt9fWZ1bmN0aW9uIGZsdXNoKCl7aWYodGltZW91dElkICYmIHRyYWlsaW5nQ2FsbCB8fCBtYXhUaW1lb3V0SWQgJiYgdHJhaWxpbmcpe3Jlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZyxhcmdzKTt9Y2FuY2VsKCk7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gbWF4RGVsYXllZCgpe2NvbXBsZXRlKHRyYWlsaW5nLHRpbWVvdXRJZCk7fWZ1bmN0aW9uIGRlYm91bmNlZCgpe2FyZ3MgPSBhcmd1bWVudHM7c3RhbXAgPSBub3coKTt0aGlzQXJnID0gdGhpczt0cmFpbGluZ0NhbGwgPSB0cmFpbGluZyAmJiAodGltZW91dElkIHx8ICFsZWFkaW5nKTtpZihtYXhXYWl0ID09PSBmYWxzZSl7dmFyIGxlYWRpbmdDYWxsPWxlYWRpbmcgJiYgIXRpbWVvdXRJZDt9ZWxzZSB7aWYoIW1heFRpbWVvdXRJZCAmJiAhbGVhZGluZyl7bGFzdENhbGxlZCA9IHN0YW1wO312YXIgcmVtYWluaW5nPW1heFdhaXQgLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKSxpc0NhbGxlZD1yZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiBtYXhXYWl0O2lmKGlzQ2FsbGVkKXtpZihtYXhUaW1lb3V0SWQpe21heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO31sYXN0Q2FsbGVkID0gc3RhbXA7cmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLGFyZ3MpO31lbHNlIGlmKCFtYXhUaW1lb3V0SWQpe21heFRpbWVvdXRJZCA9IHNldFRpbWVvdXQobWF4RGVsYXllZCxyZW1haW5pbmcpO319aWYoaXNDYWxsZWQgJiYgdGltZW91dElkKXt0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTt9ZWxzZSBpZighdGltZW91dElkICYmIHdhaXQgIT09IG1heFdhaXQpe3RpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCx3YWl0KTt9aWYobGVhZGluZ0NhbGwpe2lzQ2FsbGVkID0gdHJ1ZTtyZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsYXJncyk7fWlmKGlzQ2FsbGVkICYmICF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCl7YXJncyA9IHRoaXNBcmcgPSB1bmRlZmluZWQ7fXJldHVybiByZXN1bHQ7fWRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7ZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7cmV0dXJuIGRlYm91bmNlZDt9dmFyIGRlZmVyPXJlc3QoZnVuY3Rpb24oZnVuYyxhcmdzKXtyZXR1cm4gYmFzZURlbGF5KGZ1bmMsMSxhcmdzKTt9KTt2YXIgZGVsYXk9cmVzdChmdW5jdGlvbihmdW5jLHdhaXQsYXJncyl7cmV0dXJuIGJhc2VEZWxheShmdW5jLHRvTnVtYmVyKHdhaXQpIHx8IDAsYXJncyk7fSk7ZnVuY3Rpb24gZmxpcChmdW5jKXtyZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLEZMSVBfRkxBRyk7fWZ1bmN0aW9uIG1lbW9pemUoZnVuYyxyZXNvbHZlcil7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiIHx8IHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9dmFyIG1lbW9pemVkPWZ1bmN0aW9uIG1lbW9pemVkKCl7dmFyIGFyZ3M9YXJndW1lbnRzLGtleT1yZXNvbHZlcj9yZXNvbHZlci5hcHBseSh0aGlzLGFyZ3MpOmFyZ3NbMF0sY2FjaGU9bWVtb2l6ZWQuY2FjaGU7aWYoY2FjaGUuaGFzKGtleSkpe3JldHVybiBjYWNoZS5nZXQoa2V5KTt9dmFyIHJlc3VsdD1mdW5jLmFwcGx5KHRoaXMsYXJncyk7bWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LHJlc3VsdCk7cmV0dXJuIHJlc3VsdDt9O21lbW9pemVkLmNhY2hlID0gbmV3IG1lbW9pemUuQ2FjaGUoKTtyZXR1cm4gbWVtb2l6ZWQ7fWZ1bmN0aW9uIG5lZ2F0ZShwcmVkaWNhdGUpe2lmKHR5cGVvZiBwcmVkaWNhdGUgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O31mdW5jdGlvbiBvbmNlKGZ1bmMpe3JldHVybiBiZWZvcmUoMixmdW5jKTt9dmFyIG92ZXJBcmdzPXJlc3QoZnVuY3Rpb24oZnVuYyx0cmFuc2Zvcm1zKXt0cmFuc2Zvcm1zID0gYXJyYXlNYXAoYmFzZUZsYXR0ZW4odHJhbnNmb3JtcyksZ2V0SXRlcmF0ZWUoKSk7dmFyIGZ1bmNzTGVuZ3RoPXRyYW5zZm9ybXMubGVuZ3RoO3JldHVybiByZXN0KGZ1bmN0aW9uKGFyZ3Mpe3ZhciBpbmRleD0tMSxsZW5ndGg9bmF0aXZlTWluKGFyZ3MubGVuZ3RoLGZ1bmNzTGVuZ3RoKTt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7YXJnc1tpbmRleF0gPSB0cmFuc2Zvcm1zW2luZGV4XS5jYWxsKHRoaXMsYXJnc1tpbmRleF0pO31yZXR1cm4gYXBwbHkoZnVuYyx0aGlzLGFyZ3MpO30pO30pO3ZhciBwYXJ0aWFsPXJlc3QoZnVuY3Rpb24oZnVuYyxwYXJ0aWFscyl7dmFyIGhvbGRlcnM9cmVwbGFjZUhvbGRlcnMocGFydGlhbHMscGFydGlhbC5wbGFjZWhvbGRlcik7cmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYyxQQVJUSUFMX0ZMQUcsdW5kZWZpbmVkLHBhcnRpYWxzLGhvbGRlcnMpO30pO3ZhciBwYXJ0aWFsUmlnaHQ9cmVzdChmdW5jdGlvbihmdW5jLHBhcnRpYWxzKXt2YXIgaG9sZGVycz1yZXBsYWNlSG9sZGVycyhwYXJ0aWFscyxwYXJ0aWFsUmlnaHQucGxhY2Vob2xkZXIpO3JldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsUEFSVElBTF9SSUdIVF9GTEFHLHVuZGVmaW5lZCxwYXJ0aWFscyxob2xkZXJzKTt9KTt2YXIgcmVhcmc9cmVzdChmdW5jdGlvbihmdW5jLGluZGV4ZXMpe3JldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsUkVBUkdfRkxBRyx1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCxiYXNlRmxhdHRlbihpbmRleGVzKSk7fSk7ZnVuY3Rpb24gcmVzdChmdW5jLHN0YXJ0KXtpZih0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9c3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZD9mdW5jLmxlbmd0aCAtIDE6dG9JbnRlZ2VyKHN0YXJ0KSwwKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYXJncz1hcmd1bWVudHMsaW5kZXg9LTEsbGVuZ3RoPW5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LDApLGFycmF5PUFycmF5KGxlbmd0aCk7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge2FycmF5W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07fXN3aXRjaChzdGFydCl7Y2FzZSAwOnJldHVybiBmdW5jLmNhbGwodGhpcyxhcnJheSk7Y2FzZSAxOnJldHVybiBmdW5jLmNhbGwodGhpcyxhcmdzWzBdLGFycmF5KTtjYXNlIDI6cmV0dXJuIGZ1bmMuY2FsbCh0aGlzLGFyZ3NbMF0sYXJnc1sxXSxhcnJheSk7fXZhciBvdGhlckFyZ3M9QXJyYXkoc3RhcnQgKyAxKTtpbmRleCA9IC0xO3doaWxlKCsraW5kZXggPCBzdGFydCkge290aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTt9b3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O3JldHVybiBhcHBseShmdW5jLHRoaXMsb3RoZXJBcmdzKTt9O31mdW5jdGlvbiBzcHJlYWQoZnVuYyxzdGFydCl7aWYodHlwZW9mIGZ1bmMgIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXN0YXJ0ID0gc3RhcnQgPT09IHVuZGVmaW5lZD8wOm5hdGl2ZU1heCh0b0ludGVnZXIoc3RhcnQpLDApO3JldHVybiByZXN0KGZ1bmN0aW9uKGFyZ3Mpe3ZhciBhcnJheT1hcmdzW3N0YXJ0XSxvdGhlckFyZ3M9YXJncy5zbGljZSgwLHN0YXJ0KTtpZihhcnJheSl7YXJyYXlQdXNoKG90aGVyQXJncyxhcnJheSk7fXJldHVybiBhcHBseShmdW5jLHRoaXMsb3RoZXJBcmdzKTt9KTt9ZnVuY3Rpb24gdGhyb3R0bGUoZnVuYyx3YWl0LG9wdGlvbnMpe3ZhciBsZWFkaW5nPXRydWUsdHJhaWxpbmc9dHJ1ZTtpZih0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTt9aWYoaXNPYmplY3Qob3B0aW9ucykpe2xlYWRpbmcgPSBcImxlYWRpbmdcIiBpbiBvcHRpb25zPyEhb3B0aW9ucy5sZWFkaW5nOmxlYWRpbmc7dHJhaWxpbmcgPSBcInRyYWlsaW5nXCIgaW4gb3B0aW9ucz8hIW9wdGlvbnMudHJhaWxpbmc6dHJhaWxpbmc7fXJldHVybiBkZWJvdW5jZShmdW5jLHdhaXQse2xlYWRpbmc6bGVhZGluZyxtYXhXYWl0OndhaXQsdHJhaWxpbmc6dHJhaWxpbmd9KTt9ZnVuY3Rpb24gdW5hcnkoZnVuYyl7cmV0dXJuIGFyeShmdW5jLDEpO31mdW5jdGlvbiB3cmFwKHZhbHVlLHdyYXBwZXIpe3dyYXBwZXIgPSB3cmFwcGVyID09IG51bGw/aWRlbnRpdHk6d3JhcHBlcjtyZXR1cm4gcGFydGlhbCh3cmFwcGVyLHZhbHVlKTt9ZnVuY3Rpb24gY2xvbmUodmFsdWUpe3JldHVybiBiYXNlQ2xvbmUodmFsdWUpO31mdW5jdGlvbiBjbG9uZVdpdGgodmFsdWUsY3VzdG9taXplcil7cmV0dXJuIGJhc2VDbG9uZSh2YWx1ZSxmYWxzZSxjdXN0b21pemVyKTt9ZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlKXtyZXR1cm4gYmFzZUNsb25lKHZhbHVlLHRydWUpO31mdW5jdGlvbiBjbG9uZURlZXBXaXRoKHZhbHVlLGN1c3RvbWl6ZXIpe3JldHVybiBiYXNlQ2xvbmUodmFsdWUsdHJ1ZSxjdXN0b21pemVyKTt9ZnVuY3Rpb24gZXEodmFsdWUsb3RoZXIpe3JldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjt9ZnVuY3Rpb24gZ3QodmFsdWUsb3RoZXIpe3JldHVybiB2YWx1ZSA+IG90aGVyO31mdW5jdGlvbiBndGUodmFsdWUsb3RoZXIpe3JldHVybiB2YWx1ZSA+PSBvdGhlcjt9ZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpe3JldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSxcImNhbGxlZVwiKSAmJiAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsXCJjYWxsZWVcIikgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7fXZhciBpc0FycmF5PUFycmF5LmlzQXJyYXk7ZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpe3JldHVybiB2YWx1ZSAhPSBudWxsICYmICEodHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIiAmJiBpc0Z1bmN0aW9uKHZhbHVlKSkgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7fWZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKXtyZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7fWZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSl7cmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGJvb2xUYWc7fWZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZGF0ZVRhZzt9ZnVuY3Rpb24gaXNFbGVtZW50KHZhbHVlKXtyZXR1cm4gISF2YWx1ZSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmICFpc1BsYWluT2JqZWN0KHZhbHVlKTt9ZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSl7aWYoaXNBcnJheUxpa2UodmFsdWUpICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1N0cmluZyh2YWx1ZSkgfHwgaXNGdW5jdGlvbih2YWx1ZS5zcGxpY2UpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpe3JldHVybiAhdmFsdWUubGVuZ3RoO31mb3IodmFyIGtleSBpbiB2YWx1ZSkge2lmKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsa2V5KSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fWZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsb3RoZXIpe3JldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSxvdGhlcik7fWZ1bmN0aW9uIGlzRXF1YWxXaXRoKHZhbHVlLG90aGVyLGN1c3RvbWl6ZXIpe2N1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSBcImZ1bmN0aW9uXCI/Y3VzdG9taXplcjp1bmRlZmluZWQ7dmFyIHJlc3VsdD1jdXN0b21pemVyP2N1c3RvbWl6ZXIodmFsdWUsb3RoZXIpOnVuZGVmaW5lZDtyZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQ/YmFzZUlzRXF1YWwodmFsdWUsb3RoZXIsY3VzdG9taXplcik6ISFyZXN1bHQ7fWZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpe3JldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS5tZXNzYWdlID09IFwic3RyaW5nXCIgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZXJyb3JUYWc7fWZ1bmN0aW9uIGlzRmluaXRlKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgJiYgbmF0aXZlSXNGaW5pdGUodmFsdWUpO31mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKXt2YXIgdGFnPWlzT2JqZWN0KHZhbHVlKT9vYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTpcIlwiO3JldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO31mdW5jdGlvbiBpc0ludGVnZXIodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiAmJiB2YWx1ZSA9PSB0b0ludGVnZXIodmFsdWUpO31mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjt9ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZTtyZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSBcIm9iamVjdFwiIHx8IHR5cGUgPT0gXCJmdW5jdGlvblwiKTt9ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKXtyZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIjt9ZnVuY3Rpb24gaXNNYXRjaChvYmplY3Qsc291cmNlKXtyZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgYmFzZUlzTWF0Y2gob2JqZWN0LHNvdXJjZSxnZXRNYXRjaERhdGEoc291cmNlKSk7fWZ1bmN0aW9uIGlzTWF0Y2hXaXRoKG9iamVjdCxzb3VyY2UsY3VzdG9taXplcil7Y3VzdG9taXplciA9IHR5cGVvZiBjdXN0b21pemVyID09IFwiZnVuY3Rpb25cIj9jdXN0b21pemVyOnVuZGVmaW5lZDtyZXR1cm4gYmFzZUlzTWF0Y2gob2JqZWN0LHNvdXJjZSxnZXRNYXRjaERhdGEoc291cmNlKSxjdXN0b21pemVyKTt9ZnVuY3Rpb24gaXNOYU4odmFsdWUpe3JldHVybiBpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gK3ZhbHVlO31mdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSl7aWYodmFsdWUgPT0gbnVsbCl7cmV0dXJuIGZhbHNlO31pZihpc0Z1bmN0aW9uKHZhbHVlKSl7cmV0dXJuIHJlSXNOYXRpdmUudGVzdChmdW5jVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO31yZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiAoaXNIb3N0T2JqZWN0KHZhbHVlKT9yZUlzTmF0aXZlOnJlSXNIb3N0Q3RvcikudGVzdCh2YWx1ZSk7fWZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSl7cmV0dXJuIHZhbHVlID09PSBudWxsO31mdW5jdGlvbiBpc05pbCh2YWx1ZSl7cmV0dXJuIHZhbHVlID09IG51bGw7fWZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBudW1iZXJUYWc7fWZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpe2lmKCFpc09iamVjdExpa2UodmFsdWUpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpICE9IG9iamVjdFRhZyB8fCBpc0hvc3RPYmplY3QodmFsdWUpKXtyZXR1cm4gZmFsc2U7fXZhciBwcm90bz1vYmplY3RQcm90bztpZih0eXBlb2YgdmFsdWUuY29uc3RydWN0b3IgPT0gXCJmdW5jdGlvblwiKXtwcm90byA9IGdldFByb3RvdHlwZU9mKHZhbHVlKTt9aWYocHJvdG8gPT09IG51bGwpe3JldHVybiB0cnVlO312YXIgQ3Rvcj1wcm90by5jb25zdHJ1Y3RvcjtyZXR1cm4gdHlwZW9mIEN0b3IgPT0gXCJmdW5jdGlvblwiICYmIEN0b3IgaW5zdGFuY2VvZiBDdG9yICYmIGZ1bmNUb1N0cmluZy5jYWxsKEN0b3IpID09IG9iamVjdEN0b3JTdHJpbmc7fWZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKXtyZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHJlZ2V4cFRhZzt9ZnVuY3Rpb24gaXNTYWZlSW50ZWdlcih2YWx1ZSl7cmV0dXJuIGlzSW50ZWdlcih2YWx1ZSkgJiYgdmFsdWUgPj0gLU1BWF9TQUZFX0lOVEVHRVIgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjt9ZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIiB8fCAhaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWc7fWZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlID09IFwic3ltYm9sXCIgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7fWZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpXTt9ZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpe3JldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO31mdW5jdGlvbiBsdCh2YWx1ZSxvdGhlcil7cmV0dXJuIHZhbHVlIDwgb3RoZXI7fWZ1bmN0aW9uIGx0ZSh2YWx1ZSxvdGhlcil7cmV0dXJuIHZhbHVlIDw9IG90aGVyO31mdW5jdGlvbiB0b0FycmF5KHZhbHVlKXtpZighdmFsdWUpe3JldHVybiBbXTt9aWYoaXNBcnJheUxpa2UodmFsdWUpKXtyZXR1cm4gaXNTdHJpbmcodmFsdWUpP3N0cmluZ1RvQXJyYXkodmFsdWUpOmNvcHlBcnJheSh2YWx1ZSk7fWlmKGl0ZXJhdG9yU3ltYm9sICYmIHZhbHVlW2l0ZXJhdG9yU3ltYm9sXSl7cmV0dXJuIGl0ZXJhdG9yVG9BcnJheSh2YWx1ZVtpdGVyYXRvclN5bWJvbF0oKSk7fXZhciB0YWc9Z2V0VGFnKHZhbHVlKSxmdW5jPXRhZyA9PSBtYXBUYWc/bWFwVG9BcnJheTp0YWcgPT0gc2V0VGFnP3NldFRvQXJyYXk6dmFsdWVzO3JldHVybiBmdW5jKHZhbHVlKTt9ZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKXtpZighdmFsdWUpe3JldHVybiB2YWx1ZSA9PT0gMD92YWx1ZTowO312YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtpZih2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSl7dmFyIHNpZ249dmFsdWUgPCAwPy0xOjE7cmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjt9dmFyIHJlbWFpbmRlcj12YWx1ZSAlIDE7cmV0dXJuIHZhbHVlID09PSB2YWx1ZT9yZW1haW5kZXI/dmFsdWUgLSByZW1haW5kZXI6dmFsdWU6MDt9ZnVuY3Rpb24gdG9MZW5ndGgodmFsdWUpe3JldHVybiB2YWx1ZT9iYXNlQ2xhbXAodG9JbnRlZ2VyKHZhbHVlKSwwLE1BWF9BUlJBWV9MRU5HVEgpOjA7fWZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKXtpZihpc09iamVjdCh2YWx1ZSkpe3ZhciBvdGhlcj1pc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpP3ZhbHVlLnZhbHVlT2YoKTp2YWx1ZTt2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKT9vdGhlciArIFwiXCI6b3RoZXI7fWlmKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKXtyZXR1cm4gdmFsdWUgPT09IDA/dmFsdWU6K3ZhbHVlO312YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLFwiXCIpO3ZhciBpc0JpbmFyeT1yZUlzQmluYXJ5LnRlc3QodmFsdWUpO3JldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSk/ZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLGlzQmluYXJ5PzI6OCk6cmVJc0JhZEhleC50ZXN0KHZhbHVlKT9OQU46K3ZhbHVlO31mdW5jdGlvbiB0b1BsYWluT2JqZWN0KHZhbHVlKXtyZXR1cm4gY29weU9iamVjdCh2YWx1ZSxrZXlzSW4odmFsdWUpKTt9ZnVuY3Rpb24gdG9TYWZlSW50ZWdlcih2YWx1ZSl7cmV0dXJuIGJhc2VDbGFtcCh0b0ludGVnZXIodmFsdWUpLC1NQVhfU0FGRV9JTlRFR0VSLE1BWF9TQUZFX0lOVEVHRVIpO31mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSl7aWYodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpe3JldHVybiB2YWx1ZTt9aWYodmFsdWUgPT0gbnVsbCl7cmV0dXJuIFwiXCI7fWlmKGlzU3ltYm9sKHZhbHVlKSl7cmV0dXJuIFN5bWJvbD9zeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKTpcIlwiO312YXIgcmVzdWx0PXZhbHVlICsgXCJcIjtyZXR1cm4gcmVzdWx0ID09IFwiMFwiICYmIDEgLyB2YWx1ZSA9PSAtSU5GSU5JVFk/XCItMFwiOnJlc3VsdDt9dmFyIGFzc2lnbj1jcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3Qsc291cmNlKXtjb3B5T2JqZWN0KHNvdXJjZSxrZXlzKHNvdXJjZSksb2JqZWN0KTt9KTt2YXIgYXNzaWduSW49Y3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LHNvdXJjZSl7Y29weU9iamVjdChzb3VyY2Usa2V5c0luKHNvdXJjZSksb2JqZWN0KTt9KTt2YXIgYXNzaWduSW5XaXRoPWNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCxzb3VyY2Usc3JjSW5kZXgsY3VzdG9taXplcil7Y29weU9iamVjdFdpdGgoc291cmNlLGtleXNJbihzb3VyY2UpLG9iamVjdCxjdXN0b21pemVyKTt9KTt2YXIgYXNzaWduV2l0aD1jcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3Qsc291cmNlLHNyY0luZGV4LGN1c3RvbWl6ZXIpe2NvcHlPYmplY3RXaXRoKHNvdXJjZSxrZXlzKHNvdXJjZSksb2JqZWN0LGN1c3RvbWl6ZXIpO30pO3ZhciBhdD1yZXN0KGZ1bmN0aW9uKG9iamVjdCxwYXRocyl7cmV0dXJuIGJhc2VBdChvYmplY3QsYmFzZUZsYXR0ZW4ocGF0aHMpKTt9KTtmdW5jdGlvbiBjcmVhdGUocHJvdG90eXBlLHByb3BlcnRpZXMpe3ZhciByZXN1bHQ9YmFzZUNyZWF0ZShwcm90b3R5cGUpO3JldHVybiBwcm9wZXJ0aWVzP2Jhc2VBc3NpZ24ocmVzdWx0LHByb3BlcnRpZXMpOnJlc3VsdDt9dmFyIGRlZmF1bHRzPXJlc3QoZnVuY3Rpb24oYXJncyl7YXJncy5wdXNoKHVuZGVmaW5lZCxhc3NpZ25JbkRlZmF1bHRzKTtyZXR1cm4gYXBwbHkoYXNzaWduSW5XaXRoLHVuZGVmaW5lZCxhcmdzKTt9KTt2YXIgZGVmYXVsdHNEZWVwPXJlc3QoZnVuY3Rpb24oYXJncyl7YXJncy5wdXNoKHVuZGVmaW5lZCxtZXJnZURlZmF1bHRzKTtyZXR1cm4gYXBwbHkobWVyZ2VXaXRoLHVuZGVmaW5lZCxhcmdzKTt9KTtmdW5jdGlvbiBmaW5kS2V5KG9iamVjdCxwcmVkaWNhdGUpe3JldHVybiBiYXNlRmluZChvYmplY3QsZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpLGJhc2VGb3JPd24sdHJ1ZSk7fWZ1bmN0aW9uIGZpbmRMYXN0S2V5KG9iamVjdCxwcmVkaWNhdGUpe3JldHVybiBiYXNlRmluZChvYmplY3QsZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpLGJhc2VGb3JPd25SaWdodCx0cnVlKTt9ZnVuY3Rpb24gZm9ySW4ob2JqZWN0LGl0ZXJhdGVlKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/b2JqZWN0OmJhc2VGb3Iob2JqZWN0LHRvRnVuY3Rpb24oaXRlcmF0ZWUpLGtleXNJbik7fWZ1bmN0aW9uIGZvckluUmlnaHQob2JqZWN0LGl0ZXJhdGVlKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/b2JqZWN0OmJhc2VGb3JSaWdodChvYmplY3QsdG9GdW5jdGlvbihpdGVyYXRlZSksa2V5c0luKTt9ZnVuY3Rpb24gZm9yT3duKG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yT3duKG9iamVjdCx0b0Z1bmN0aW9uKGl0ZXJhdGVlKSk7fWZ1bmN0aW9uIGZvck93blJpZ2h0KG9iamVjdCxpdGVyYXRlZSl7cmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yT3duUmlnaHQob2JqZWN0LHRvRnVuY3Rpb24oaXRlcmF0ZWUpKTt9ZnVuY3Rpb24gZnVuY3Rpb25zKG9iamVjdCl7cmV0dXJuIG9iamVjdCA9PSBudWxsP1tdOmJhc2VGdW5jdGlvbnMob2JqZWN0LGtleXMob2JqZWN0KSk7fWZ1bmN0aW9uIGZ1bmN0aW9uc0luKG9iamVjdCl7cmV0dXJuIG9iamVjdCA9PSBudWxsP1tdOmJhc2VGdW5jdGlvbnMob2JqZWN0LGtleXNJbihvYmplY3QpKTt9ZnVuY3Rpb24gZ2V0KG9iamVjdCxwYXRoLGRlZmF1bHRWYWx1ZSl7dmFyIHJlc3VsdD1vYmplY3QgPT0gbnVsbD91bmRlZmluZWQ6YmFzZUdldChvYmplY3QscGF0aCk7cmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkP2RlZmF1bHRWYWx1ZTpyZXN1bHQ7fWZ1bmN0aW9uIGhhcyhvYmplY3QscGF0aCl7cmV0dXJuIGhhc1BhdGgob2JqZWN0LHBhdGgsYmFzZUhhcyk7fWZ1bmN0aW9uIGhhc0luKG9iamVjdCxwYXRoKXtyZXR1cm4gaGFzUGF0aChvYmplY3QscGF0aCxiYXNlSGFzSW4pO312YXIgaW52ZXJ0PWNyZWF0ZUludmVydGVyKGZ1bmN0aW9uKHJlc3VsdCx2YWx1ZSxrZXkpe3Jlc3VsdFt2YWx1ZV0gPSBrZXk7fSxjb25zdGFudChpZGVudGl0eSkpO3ZhciBpbnZlcnRCeT1jcmVhdGVJbnZlcnRlcihmdW5jdGlvbihyZXN1bHQsdmFsdWUsa2V5KXtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCx2YWx1ZSkpe3Jlc3VsdFt2YWx1ZV0ucHVzaChrZXkpO31lbHNlIHtyZXN1bHRbdmFsdWVdID0gW2tleV07fX0sZ2V0SXRlcmF0ZWUpO3ZhciBpbnZva2U9cmVzdChiYXNlSW52b2tlKTtmdW5jdGlvbiBrZXlzKG9iamVjdCl7dmFyIGlzUHJvdG89aXNQcm90b3R5cGUob2JqZWN0KTtpZighKGlzUHJvdG8gfHwgaXNBcnJheUxpa2Uob2JqZWN0KSkpe3JldHVybiBiYXNlS2V5cyhvYmplY3QpO312YXIgaW5kZXhlcz1pbmRleEtleXMob2JqZWN0KSxza2lwSW5kZXhlcz0hIWluZGV4ZXMscmVzdWx0PWluZGV4ZXMgfHwgW10sbGVuZ3RoPXJlc3VsdC5sZW5ndGg7Zm9yKHZhciBrZXkgaW4gb2JqZWN0KSB7aWYoYmFzZUhhcyhvYmplY3Qsa2V5KSAmJiAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gXCJsZW5ndGhcIiB8fCBpc0luZGV4KGtleSxsZW5ndGgpKSkgJiYgIShpc1Byb3RvICYmIGtleSA9PSBcImNvbnN0cnVjdG9yXCIpKXtyZXN1bHQucHVzaChrZXkpO319cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24ga2V5c0luKG9iamVjdCl7dmFyIGluZGV4PS0xLGlzUHJvdG89aXNQcm90b3R5cGUob2JqZWN0KSxwcm9wcz1iYXNlS2V5c0luKG9iamVjdCkscHJvcHNMZW5ndGg9cHJvcHMubGVuZ3RoLGluZGV4ZXM9aW5kZXhLZXlzKG9iamVjdCksc2tpcEluZGV4ZXM9ISFpbmRleGVzLHJlc3VsdD1pbmRleGVzIHx8IFtdLGxlbmd0aD1yZXN1bHQubGVuZ3RoO3doaWxlKCsraW5kZXggPCBwcm9wc0xlbmd0aCkge3ZhciBrZXk9cHJvcHNbaW5kZXhdO2lmKCEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSBcImxlbmd0aFwiIHx8IGlzSW5kZXgoa2V5LGxlbmd0aCkpKSAmJiAhKGtleSA9PSBcImNvbnN0cnVjdG9yXCIgJiYgKGlzUHJvdG8gfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LGtleSkpKSl7cmVzdWx0LnB1c2goa2V5KTt9fXJldHVybiByZXN1bHQ7fWZ1bmN0aW9uIG1hcEtleXMob2JqZWN0LGl0ZXJhdGVlKXt2YXIgcmVzdWx0PXt9O2l0ZXJhdGVlID0gZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUsMyk7YmFzZUZvck93bihvYmplY3QsZnVuY3Rpb24odmFsdWUsa2V5LG9iamVjdCl7cmVzdWx0W2l0ZXJhdGVlKHZhbHVlLGtleSxvYmplY3QpXSA9IHZhbHVlO30pO3JldHVybiByZXN1bHQ7fWZ1bmN0aW9uIG1hcFZhbHVlcyhvYmplY3QsaXRlcmF0ZWUpe3ZhciByZXN1bHQ9e307aXRlcmF0ZWUgPSBnZXRJdGVyYXRlZShpdGVyYXRlZSwzKTtiYXNlRm9yT3duKG9iamVjdCxmdW5jdGlvbih2YWx1ZSxrZXksb2JqZWN0KXtyZXN1bHRba2V5XSA9IGl0ZXJhdGVlKHZhbHVlLGtleSxvYmplY3QpO30pO3JldHVybiByZXN1bHQ7fXZhciBtZXJnZT1jcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3Qsc291cmNlLHNyY0luZGV4KXtiYXNlTWVyZ2Uob2JqZWN0LHNvdXJjZSxzcmNJbmRleCk7fSk7dmFyIG1lcmdlV2l0aD1jcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3Qsc291cmNlLHNyY0luZGV4LGN1c3RvbWl6ZXIpe2Jhc2VNZXJnZShvYmplY3Qsc291cmNlLHNyY0luZGV4LGN1c3RvbWl6ZXIpO30pO3ZhciBvbWl0PXJlc3QoZnVuY3Rpb24ob2JqZWN0LHByb3BzKXtpZihvYmplY3QgPT0gbnVsbCl7cmV0dXJuIHt9O31wcm9wcyA9IGFycmF5TWFwKGJhc2VGbGF0dGVuKHByb3BzKSxTdHJpbmcpO3JldHVybiBiYXNlUGljayhvYmplY3QsYmFzZURpZmZlcmVuY2Uoa2V5c0luKG9iamVjdCkscHJvcHMpKTt9KTtmdW5jdGlvbiBvbWl0Qnkob2JqZWN0LHByZWRpY2F0ZSl7cHJlZGljYXRlID0gZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDIpO3JldHVybiBiYXNlUGlja0J5KG9iamVjdCxmdW5jdGlvbih2YWx1ZSxrZXkpe3JldHVybiAhcHJlZGljYXRlKHZhbHVlLGtleSk7fSk7fXZhciBwaWNrPXJlc3QoZnVuY3Rpb24ob2JqZWN0LHByb3BzKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/e306YmFzZVBpY2sob2JqZWN0LGJhc2VGbGF0dGVuKHByb3BzKSk7fSk7ZnVuY3Rpb24gcGlja0J5KG9iamVjdCxwcmVkaWNhdGUpe3JldHVybiBvYmplY3QgPT0gbnVsbD97fTpiYXNlUGlja0J5KG9iamVjdCxnZXRJdGVyYXRlZShwcmVkaWNhdGUsMikpO31mdW5jdGlvbiByZXN1bHQob2JqZWN0LHBhdGgsZGVmYXVsdFZhbHVlKXtpZighaXNLZXkocGF0aCxvYmplY3QpKXtwYXRoID0gYmFzZVRvUGF0aChwYXRoKTt2YXIgcmVzdWx0PWdldChvYmplY3QscGF0aCk7b2JqZWN0ID0gcGFyZW50KG9iamVjdCxwYXRoKTt9ZWxzZSB7cmVzdWx0ID0gb2JqZWN0ID09IG51bGw/dW5kZWZpbmVkOm9iamVjdFtwYXRoXTt9aWYocmVzdWx0ID09PSB1bmRlZmluZWQpe3Jlc3VsdCA9IGRlZmF1bHRWYWx1ZTt9cmV0dXJuIGlzRnVuY3Rpb24ocmVzdWx0KT9yZXN1bHQuY2FsbChvYmplY3QpOnJlc3VsdDt9ZnVuY3Rpb24gc2V0KG9iamVjdCxwYXRoLHZhbHVlKXtyZXR1cm4gb2JqZWN0ID09IG51bGw/b2JqZWN0OmJhc2VTZXQob2JqZWN0LHBhdGgsdmFsdWUpO31mdW5jdGlvbiBzZXRXaXRoKG9iamVjdCxwYXRoLHZhbHVlLGN1c3RvbWl6ZXIpe2N1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSBcImZ1bmN0aW9uXCI/Y3VzdG9taXplcjp1bmRlZmluZWQ7cmV0dXJuIG9iamVjdCA9PSBudWxsP29iamVjdDpiYXNlU2V0KG9iamVjdCxwYXRoLHZhbHVlLGN1c3RvbWl6ZXIpO31mdW5jdGlvbiB0b1BhaXJzKG9iamVjdCl7cmV0dXJuIGJhc2VUb1BhaXJzKG9iamVjdCxrZXlzKG9iamVjdCkpO31mdW5jdGlvbiB0b1BhaXJzSW4ob2JqZWN0KXtyZXR1cm4gYmFzZVRvUGFpcnMob2JqZWN0LGtleXNJbihvYmplY3QpKTt9ZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCxpdGVyYXRlZSxhY2N1bXVsYXRvcil7dmFyIGlzQXJyPWlzQXJyYXkob2JqZWN0KSB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KTtpdGVyYXRlZSA9IGdldEl0ZXJhdGVlKGl0ZXJhdGVlLDQpO2lmKGFjY3VtdWxhdG9yID09IG51bGwpe2lmKGlzQXJyIHx8IGlzT2JqZWN0KG9iamVjdCkpe3ZhciBDdG9yPW9iamVjdC5jb25zdHJ1Y3RvcjtpZihpc0Fycil7YWNjdW11bGF0b3IgPSBpc0FycmF5KG9iamVjdCk/bmV3IEN0b3IoKTpbXTt9ZWxzZSB7YWNjdW11bGF0b3IgPSBiYXNlQ3JlYXRlKGlzRnVuY3Rpb24oQ3Rvcik/Q3Rvci5wcm90b3R5cGU6dW5kZWZpbmVkKTt9fWVsc2Uge2FjY3VtdWxhdG9yID0ge307fX0oaXNBcnI/YXJyYXlFYWNoOmJhc2VGb3JPd24pKG9iamVjdCxmdW5jdGlvbih2YWx1ZSxpbmRleCxvYmplY3Qpe3JldHVybiBpdGVyYXRlZShhY2N1bXVsYXRvcix2YWx1ZSxpbmRleCxvYmplY3QpO30pO3JldHVybiBhY2N1bXVsYXRvcjt9ZnVuY3Rpb24gdW5zZXQob2JqZWN0LHBhdGgpe3JldHVybiBvYmplY3QgPT0gbnVsbD90cnVlOmJhc2VVbnNldChvYmplY3QscGF0aCk7fWZ1bmN0aW9uIHZhbHVlcyhvYmplY3Qpe3JldHVybiBvYmplY3Q/YmFzZVZhbHVlcyhvYmplY3Qsa2V5cyhvYmplY3QpKTpbXTt9ZnVuY3Rpb24gdmFsdWVzSW4ob2JqZWN0KXtyZXR1cm4gb2JqZWN0ID09IG51bGw/YmFzZVZhbHVlcyhvYmplY3Qsa2V5c0luKG9iamVjdCkpOltdO31mdW5jdGlvbiBjbGFtcChudW1iZXIsbG93ZXIsdXBwZXIpe2lmKHVwcGVyID09PSB1bmRlZmluZWQpe3VwcGVyID0gbG93ZXI7bG93ZXIgPSB1bmRlZmluZWQ7fWlmKHVwcGVyICE9PSB1bmRlZmluZWQpe3VwcGVyID0gdG9OdW1iZXIodXBwZXIpO3VwcGVyID0gdXBwZXIgPT09IHVwcGVyP3VwcGVyOjA7fWlmKGxvd2VyICE9PSB1bmRlZmluZWQpe2xvd2VyID0gdG9OdW1iZXIobG93ZXIpO2xvd2VyID0gbG93ZXIgPT09IGxvd2VyP2xvd2VyOjA7fXJldHVybiBiYXNlQ2xhbXAodG9OdW1iZXIobnVtYmVyKSxsb3dlcix1cHBlcik7fWZ1bmN0aW9uIGluUmFuZ2UobnVtYmVyLHN0YXJ0LGVuZCl7c3RhcnQgPSB0b051bWJlcihzdGFydCkgfHwgMDtpZihlbmQgPT09IHVuZGVmaW5lZCl7ZW5kID0gc3RhcnQ7c3RhcnQgPSAwO31lbHNlIHtlbmQgPSB0b051bWJlcihlbmQpIHx8IDA7fW51bWJlciA9IHRvTnVtYmVyKG51bWJlcik7cmV0dXJuIGJhc2VJblJhbmdlKG51bWJlcixzdGFydCxlbmQpO31mdW5jdGlvbiByYW5kb20obG93ZXIsdXBwZXIsZmxvYXRpbmcpe2lmKGZsb2F0aW5nICYmIHR5cGVvZiBmbG9hdGluZyAhPSBcImJvb2xlYW5cIiAmJiBpc0l0ZXJhdGVlQ2FsbChsb3dlcix1cHBlcixmbG9hdGluZykpe3VwcGVyID0gZmxvYXRpbmcgPSB1bmRlZmluZWQ7fWlmKGZsb2F0aW5nID09PSB1bmRlZmluZWQpe2lmKHR5cGVvZiB1cHBlciA9PSBcImJvb2xlYW5cIil7ZmxvYXRpbmcgPSB1cHBlcjt1cHBlciA9IHVuZGVmaW5lZDt9ZWxzZSBpZih0eXBlb2YgbG93ZXIgPT0gXCJib29sZWFuXCIpe2Zsb2F0aW5nID0gbG93ZXI7bG93ZXIgPSB1bmRlZmluZWQ7fX1pZihsb3dlciA9PT0gdW5kZWZpbmVkICYmIHVwcGVyID09PSB1bmRlZmluZWQpe2xvd2VyID0gMDt1cHBlciA9IDE7fWVsc2Uge2xvd2VyID0gdG9OdW1iZXIobG93ZXIpIHx8IDA7aWYodXBwZXIgPT09IHVuZGVmaW5lZCl7dXBwZXIgPSBsb3dlcjtsb3dlciA9IDA7fWVsc2Uge3VwcGVyID0gdG9OdW1iZXIodXBwZXIpIHx8IDA7fX1pZihsb3dlciA+IHVwcGVyKXt2YXIgdGVtcD1sb3dlcjtsb3dlciA9IHVwcGVyO3VwcGVyID0gdGVtcDt9aWYoZmxvYXRpbmcgfHwgbG93ZXIgJSAxIHx8IHVwcGVyICUgMSl7dmFyIHJhbmQ9bmF0aXZlUmFuZG9tKCk7cmV0dXJuIG5hdGl2ZU1pbihsb3dlciArIHJhbmQgKiAodXBwZXIgLSBsb3dlciArIGZyZWVQYXJzZUZsb2F0KFwiMWUtXCIgKyAoKHJhbmQgKyBcIlwiKS5sZW5ndGggLSAxKSkpLHVwcGVyKTt9cmV0dXJuIGJhc2VSYW5kb20obG93ZXIsdXBwZXIpO312YXIgY2FtZWxDYXNlPWNyZWF0ZUNvbXBvdW5kZXIoZnVuY3Rpb24ocmVzdWx0LHdvcmQsaW5kZXgpe3dvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHJlc3VsdCArIChpbmRleD9jYXBpdGFsaXplKHdvcmQpOndvcmQpO30pO2Z1bmN0aW9uIGNhcGl0YWxpemUoc3RyaW5nKXtyZXR1cm4gdXBwZXJGaXJzdCh0b1N0cmluZyhzdHJpbmcpLnRvTG93ZXJDYXNlKCkpO31mdW5jdGlvbiBkZWJ1cnIoc3RyaW5nKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3JldHVybiBzdHJpbmcgJiYgc3RyaW5nLnJlcGxhY2UocmVMYXRpbjEsZGVidXJyTGV0dGVyKS5yZXBsYWNlKHJlQ29tYm9NYXJrLFwiXCIpO31mdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsdGFyZ2V0LHBvc2l0aW9uKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3RhcmdldCA9IHR5cGVvZiB0YXJnZXQgPT0gXCJzdHJpbmdcIj90YXJnZXQ6dGFyZ2V0ICsgXCJcIjt2YXIgbGVuZ3RoPXN0cmluZy5sZW5ndGg7cG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gdW5kZWZpbmVkP2xlbmd0aDpiYXNlQ2xhbXAodG9JbnRlZ2VyKHBvc2l0aW9uKSwwLGxlbmd0aCk7cG9zaXRpb24gLT0gdGFyZ2V0Lmxlbmd0aDtyZXR1cm4gcG9zaXRpb24gPj0gMCAmJiBzdHJpbmcuaW5kZXhPZih0YXJnZXQscG9zaXRpb24pID09IHBvc2l0aW9uO31mdW5jdGlvbiBlc2NhcGUoc3RyaW5nKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3JldHVybiBzdHJpbmcgJiYgcmVIYXNVbmVzY2FwZWRIdG1sLnRlc3Qoc3RyaW5nKT9zdHJpbmcucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsZXNjYXBlSHRtbENoYXIpOnN0cmluZzt9ZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtyZXR1cm4gc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhci50ZXN0KHN0cmluZyk/c3RyaW5nLnJlcGxhY2UocmVSZWdFeHBDaGFyLFwiXFxcXCQmXCIpOnN0cmluZzt9dmFyIGtlYmFiQ2FzZT1jcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCx3b3JkLGluZGV4KXtyZXR1cm4gcmVzdWx0ICsgKGluZGV4P1wiLVwiOlwiXCIpICsgd29yZC50b0xvd2VyQ2FzZSgpO30pO3ZhciBsb3dlckNhc2U9Y3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsd29yZCxpbmRleCl7cmV0dXJuIHJlc3VsdCArIChpbmRleD9cIiBcIjpcIlwiKSArIHdvcmQudG9Mb3dlckNhc2UoKTt9KTt2YXIgbG93ZXJGaXJzdD1jcmVhdGVDYXNlRmlyc3QoXCJ0b0xvd2VyQ2FzZVwiKTt2YXIgdXBwZXJGaXJzdD1jcmVhdGVDYXNlRmlyc3QoXCJ0b1VwcGVyQ2FzZVwiKTtmdW5jdGlvbiBwYWQoc3RyaW5nLGxlbmd0aCxjaGFycyl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtsZW5ndGggPSB0b0ludGVnZXIobGVuZ3RoKTt2YXIgc3RyTGVuZ3RoPXN0cmluZ1NpemUoc3RyaW5nKTtpZighbGVuZ3RoIHx8IHN0ckxlbmd0aCA+PSBsZW5ndGgpe3JldHVybiBzdHJpbmc7fXZhciBtaWQ9KGxlbmd0aCAtIHN0ckxlbmd0aCkgLyAyLGxlZnRMZW5ndGg9bmF0aXZlRmxvb3IobWlkKSxyaWdodExlbmd0aD1uYXRpdmVDZWlsKG1pZCk7cmV0dXJuIGNyZWF0ZVBhZGRpbmcoXCJcIixsZWZ0TGVuZ3RoLGNoYXJzKSArIHN0cmluZyArIGNyZWF0ZVBhZGRpbmcoXCJcIixyaWdodExlbmd0aCxjaGFycyk7fWZ1bmN0aW9uIHBhZEVuZChzdHJpbmcsbGVuZ3RoLGNoYXJzKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3JldHVybiBzdHJpbmcgKyBjcmVhdGVQYWRkaW5nKHN0cmluZyxsZW5ndGgsY2hhcnMpO31mdW5jdGlvbiBwYWRTdGFydChzdHJpbmcsbGVuZ3RoLGNoYXJzKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3JldHVybiBjcmVhdGVQYWRkaW5nKHN0cmluZyxsZW5ndGgsY2hhcnMpICsgc3RyaW5nO31mdW5jdGlvbiBwYXJzZUludChzdHJpbmcscmFkaXgsZ3VhcmQpe2lmKGd1YXJkIHx8IHJhZGl4ID09IG51bGwpe3JhZGl4ID0gMDt9ZWxzZSBpZihyYWRpeCl7cmFkaXggPSArcmFkaXg7fXN0cmluZyA9IHRvU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVRyaW0sXCJcIik7cmV0dXJuIG5hdGl2ZVBhcnNlSW50KHN0cmluZyxyYWRpeCB8fCAocmVIYXNIZXhQcmVmaXgudGVzdChzdHJpbmcpPzE2OjEwKSk7fWZ1bmN0aW9uIHJlcGVhdChzdHJpbmcsbil7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtuID0gdG9JbnRlZ2VyKG4pO3ZhciByZXN1bHQ9XCJcIjtpZighc3RyaW5nIHx8IG4gPCAxIHx8IG4gPiBNQVhfU0FGRV9JTlRFR0VSKXtyZXR1cm4gcmVzdWx0O31kbyB7aWYobiAlIDIpe3Jlc3VsdCArPSBzdHJpbmc7fW4gPSBuYXRpdmVGbG9vcihuIC8gMik7c3RyaW5nICs9IHN0cmluZzt9d2hpbGUobik7cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gcmVwbGFjZSgpe3ZhciBhcmdzPWFyZ3VtZW50cyxzdHJpbmc9dG9TdHJpbmcoYXJnc1swXSk7cmV0dXJuIGFyZ3MubGVuZ3RoIDwgMz9zdHJpbmc6c3RyaW5nLnJlcGxhY2UoYXJnc1sxXSxhcmdzWzJdKTt9dmFyIHNuYWtlQ2FzZT1jcmVhdGVDb21wb3VuZGVyKGZ1bmN0aW9uKHJlc3VsdCx3b3JkLGluZGV4KXtyZXR1cm4gcmVzdWx0ICsgKGluZGV4P1wiX1wiOlwiXCIpICsgd29yZC50b0xvd2VyQ2FzZSgpO30pO2Z1bmN0aW9uIHNwbGl0KHN0cmluZyxzZXBhcmF0b3IsbGltaXQpe3JldHVybiB0b1N0cmluZyhzdHJpbmcpLnNwbGl0KHNlcGFyYXRvcixsaW1pdCk7fXZhciBzdGFydENhc2U9Y3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsd29yZCxpbmRleCl7cmV0dXJuIHJlc3VsdCArIChpbmRleD9cIiBcIjpcIlwiKSArIGNhcGl0YWxpemUod29yZCk7fSk7ZnVuY3Rpb24gc3RhcnRzV2l0aChzdHJpbmcsdGFyZ2V0LHBvc2l0aW9uKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3Bvc2l0aW9uID0gYmFzZUNsYW1wKHRvSW50ZWdlcihwb3NpdGlvbiksMCxzdHJpbmcubGVuZ3RoKTtyZXR1cm4gc3RyaW5nLmxhc3RJbmRleE9mKHRhcmdldCxwb3NpdGlvbikgPT0gcG9zaXRpb247fWZ1bmN0aW9uIHRlbXBsYXRlKHN0cmluZyxvcHRpb25zLGd1YXJkKXt2YXIgc2V0dGluZ3M9bG9kYXNoLnRlbXBsYXRlU2V0dGluZ3M7aWYoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLG9wdGlvbnMsZ3VhcmQpKXtvcHRpb25zID0gdW5kZWZpbmVkO31zdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO29wdGlvbnMgPSBhc3NpZ25JbldpdGgoe30sb3B0aW9ucyxzZXR0aW5ncyxhc3NpZ25JbkRlZmF1bHRzKTt2YXIgaW1wb3J0cz1hc3NpZ25JbldpdGgoe30sb3B0aW9ucy5pbXBvcnRzLHNldHRpbmdzLmltcG9ydHMsYXNzaWduSW5EZWZhdWx0cyksaW1wb3J0c0tleXM9a2V5cyhpbXBvcnRzKSxpbXBvcnRzVmFsdWVzPWJhc2VWYWx1ZXMoaW1wb3J0cyxpbXBvcnRzS2V5cyk7dmFyIGlzRXNjYXBpbmcsaXNFdmFsdWF0aW5nLGluZGV4PTAsaW50ZXJwb2xhdGU9b3B0aW9ucy5pbnRlcnBvbGF0ZSB8fCByZU5vTWF0Y2gsc291cmNlPVwiX19wICs9ICdcIjt2YXIgcmVEZWxpbWl0ZXJzPVJlZ0V4cCgob3B0aW9ucy5lc2NhcGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyBcInxcIiArIGludGVycG9sYXRlLnNvdXJjZSArIFwifFwiICsgKGludGVycG9sYXRlID09PSByZUludGVycG9sYXRlP3JlRXNUZW1wbGF0ZTpyZU5vTWF0Y2gpLnNvdXJjZSArIFwifFwiICsgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyBcInwkXCIsXCJnXCIpO3ZhciBzb3VyY2VVUkw9XCIvLyMgc291cmNlVVJMPVwiICsgKFwic291cmNlVVJMXCIgaW4gb3B0aW9ucz9vcHRpb25zLnNvdXJjZVVSTDpcImxvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbXCIgKyArK3RlbXBsYXRlQ291bnRlciArIFwiXVwiKSArIFwiXFxuXCI7c3RyaW5nLnJlcGxhY2UocmVEZWxpbWl0ZXJzLGZ1bmN0aW9uKG1hdGNoLGVzY2FwZVZhbHVlLGludGVycG9sYXRlVmFsdWUsZXNUZW1wbGF0ZVZhbHVlLGV2YWx1YXRlVmFsdWUsb2Zmc2V0KXtpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtzb3VyY2UgKz0gc3RyaW5nLnNsaWNlKGluZGV4LG9mZnNldCkucmVwbGFjZShyZVVuZXNjYXBlZFN0cmluZyxlc2NhcGVTdHJpbmdDaGFyKTtpZihlc2NhcGVWYWx1ZSl7aXNFc2NhcGluZyA9IHRydWU7c291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjt9aWYoZXZhbHVhdGVWYWx1ZSl7aXNFdmFsdWF0aW5nID0gdHJ1ZTtzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7fWlmKGludGVycG9sYXRlVmFsdWUpe3NvdXJjZSArPSBcIicgK1xcbigoX190ID0gKFwiICsgaW50ZXJwb2xhdGVWYWx1ZSArIFwiKSkgPT0gbnVsbCA/ICcnIDogX190KSArXFxuJ1wiO31pbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtyZXR1cm4gbWF0Y2g7fSk7c291cmNlICs9IFwiJztcXG5cIjt2YXIgdmFyaWFibGU9b3B0aW9ucy52YXJpYWJsZTtpZighdmFyaWFibGUpe3NvdXJjZSA9IFwid2l0aCAob2JqKSB7XFxuXCIgKyBzb3VyY2UgKyBcIlxcbn1cXG5cIjt9c291cmNlID0gKGlzRXZhbHVhdGluZz9zb3VyY2UucmVwbGFjZShyZUVtcHR5U3RyaW5nTGVhZGluZyxcIlwiKTpzb3VyY2UpLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSxcIiQxXCIpLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLFwiJDE7XCIpO3NvdXJjZSA9IFwiZnVuY3Rpb24oXCIgKyAodmFyaWFibGUgfHwgXCJvYmpcIikgKyBcIikge1xcblwiICsgKHZhcmlhYmxlP1wiXCI6XCJvYmogfHwgKG9iaiA9IHt9KTtcXG5cIikgKyBcInZhciBfX3QsIF9fcCA9ICcnXCIgKyAoaXNFc2NhcGluZz9cIiwgX19lID0gXy5lc2NhcGVcIjpcIlwiKSArIChpc0V2YWx1YXRpbmc/XCIsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xcblwiICsgXCJmdW5jdGlvbiBwcmludCgpIHsgX19wICs9IF9fai5jYWxsKGFyZ3VtZW50cywgJycpIH1cXG5cIjpcIjtcXG5cIikgKyBzb3VyY2UgKyBcInJldHVybiBfX3BcXG59XCI7dmFyIHJlc3VsdD1hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIEZ1bmN0aW9uKGltcG9ydHNLZXlzLHNvdXJjZVVSTCArIFwicmV0dXJuIFwiICsgc291cmNlKS5hcHBseSh1bmRlZmluZWQsaW1wb3J0c1ZhbHVlcyk7fSk7cmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtpZihpc0Vycm9yKHJlc3VsdCkpe3Rocm93IHJlc3VsdDt9cmV0dXJuIHJlc3VsdDt9ZnVuY3Rpb24gdG9Mb3dlcih2YWx1ZSl7cmV0dXJuIHRvU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpO31mdW5jdGlvbiB0b1VwcGVyKHZhbHVlKXtyZXR1cm4gdG9TdHJpbmcodmFsdWUpLnRvVXBwZXJDYXNlKCk7fWZ1bmN0aW9uIHRyaW0oc3RyaW5nLGNoYXJzLGd1YXJkKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO2lmKCFzdHJpbmcpe3JldHVybiBzdHJpbmc7fWlmKGd1YXJkIHx8IGNoYXJzID09PSB1bmRlZmluZWQpe3JldHVybiBzdHJpbmcucmVwbGFjZShyZVRyaW0sXCJcIik7fWNoYXJzID0gY2hhcnMgKyBcIlwiO2lmKCFjaGFycyl7cmV0dXJuIHN0cmluZzt9dmFyIHN0clN5bWJvbHM9c3RyaW5nVG9BcnJheShzdHJpbmcpLGNoclN5bWJvbHM9c3RyaW5nVG9BcnJheShjaGFycyk7cmV0dXJuIHN0clN5bWJvbHMuc2xpY2UoY2hhcnNTdGFydEluZGV4KHN0clN5bWJvbHMsY2hyU3ltYm9scyksY2hhcnNFbmRJbmRleChzdHJTeW1ib2xzLGNoclN5bWJvbHMpICsgMSkuam9pbihcIlwiKTt9ZnVuY3Rpb24gdHJpbUVuZChzdHJpbmcsY2hhcnMsZ3VhcmQpe3N0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7aWYoIXN0cmluZyl7cmV0dXJuIHN0cmluZzt9aWYoZ3VhcmQgfHwgY2hhcnMgPT09IHVuZGVmaW5lZCl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKHJlVHJpbUVuZCxcIlwiKTt9Y2hhcnMgPSBjaGFycyArIFwiXCI7aWYoIWNoYXJzKXtyZXR1cm4gc3RyaW5nO312YXIgc3RyU3ltYm9scz1zdHJpbmdUb0FycmF5KHN0cmluZyk7cmV0dXJuIHN0clN5bWJvbHMuc2xpY2UoMCxjaGFyc0VuZEluZGV4KHN0clN5bWJvbHMsc3RyaW5nVG9BcnJheShjaGFycykpICsgMSkuam9pbihcIlwiKTt9ZnVuY3Rpb24gdHJpbVN0YXJ0KHN0cmluZyxjaGFycyxndWFyZCl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtpZighc3RyaW5nKXtyZXR1cm4gc3RyaW5nO31pZihndWFyZCB8fCBjaGFycyA9PT0gdW5kZWZpbmVkKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UocmVUcmltU3RhcnQsXCJcIik7fWNoYXJzID0gY2hhcnMgKyBcIlwiO2lmKCFjaGFycyl7cmV0dXJuIHN0cmluZzt9dmFyIHN0clN5bWJvbHM9c3RyaW5nVG9BcnJheShzdHJpbmcpO3JldHVybiBzdHJTeW1ib2xzLnNsaWNlKGNoYXJzU3RhcnRJbmRleChzdHJTeW1ib2xzLHN0cmluZ1RvQXJyYXkoY2hhcnMpKSkuam9pbihcIlwiKTt9ZnVuY3Rpb24gdHJ1bmNhdGUoc3RyaW5nLG9wdGlvbnMpe3ZhciBsZW5ndGg9REVGQVVMVF9UUlVOQ19MRU5HVEgsb21pc3Npb249REVGQVVMVF9UUlVOQ19PTUlTU0lPTjtpZihpc09iamVjdChvcHRpb25zKSl7dmFyIHNlcGFyYXRvcj1cInNlcGFyYXRvclwiIGluIG9wdGlvbnM/b3B0aW9ucy5zZXBhcmF0b3I6c2VwYXJhdG9yO2xlbmd0aCA9IFwibGVuZ3RoXCIgaW4gb3B0aW9ucz90b0ludGVnZXIob3B0aW9ucy5sZW5ndGgpOmxlbmd0aDtvbWlzc2lvbiA9IFwib21pc3Npb25cIiBpbiBvcHRpb25zP3RvU3RyaW5nKG9wdGlvbnMub21pc3Npb24pOm9taXNzaW9uO31zdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3ZhciBzdHJMZW5ndGg9c3RyaW5nLmxlbmd0aDtpZihyZUhhc0NvbXBsZXhTeW1ib2wudGVzdChzdHJpbmcpKXt2YXIgc3RyU3ltYm9scz1zdHJpbmdUb0FycmF5KHN0cmluZyk7c3RyTGVuZ3RoID0gc3RyU3ltYm9scy5sZW5ndGg7fWlmKGxlbmd0aCA+PSBzdHJMZW5ndGgpe3JldHVybiBzdHJpbmc7fXZhciBlbmQ9bGVuZ3RoIC0gc3RyaW5nU2l6ZShvbWlzc2lvbik7aWYoZW5kIDwgMSl7cmV0dXJuIG9taXNzaW9uO312YXIgcmVzdWx0PXN0clN5bWJvbHM/c3RyU3ltYm9scy5zbGljZSgwLGVuZCkuam9pbihcIlwiKTpzdHJpbmcuc2xpY2UoMCxlbmQpO2lmKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKXtyZXR1cm4gcmVzdWx0ICsgb21pc3Npb247fWlmKHN0clN5bWJvbHMpe2VuZCArPSByZXN1bHQubGVuZ3RoIC0gZW5kO31pZihpc1JlZ0V4cChzZXBhcmF0b3IpKXtpZihzdHJpbmcuc2xpY2UoZW5kKS5zZWFyY2goc2VwYXJhdG9yKSl7dmFyIG1hdGNoLHN1YnN0cmluZz1yZXN1bHQ7aWYoIXNlcGFyYXRvci5nbG9iYWwpe3NlcGFyYXRvciA9IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLHRvU3RyaW5nKHJlRmxhZ3MuZXhlYyhzZXBhcmF0b3IpKSArIFwiZ1wiKTt9c2VwYXJhdG9yLmxhc3RJbmRleCA9IDA7d2hpbGUobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdWJzdHJpbmcpKSB7dmFyIG5ld0VuZD1tYXRjaC5pbmRleDt9cmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsbmV3RW5kID09PSB1bmRlZmluZWQ/ZW5kOm5ld0VuZCk7fX1lbHNlIGlmKHN0cmluZy5pbmRleE9mKHNlcGFyYXRvcixlbmQpICE9IGVuZCl7dmFyIGluZGV4PXJlc3VsdC5sYXN0SW5kZXhPZihzZXBhcmF0b3IpO2lmKGluZGV4ID4gLTEpe3Jlc3VsdCA9IHJlc3VsdC5zbGljZSgwLGluZGV4KTt9fXJldHVybiByZXN1bHQgKyBvbWlzc2lvbjt9ZnVuY3Rpb24gdW5lc2NhcGUoc3RyaW5nKXtzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO3JldHVybiBzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZyk/c3RyaW5nLnJlcGxhY2UocmVFc2NhcGVkSHRtbCx1bmVzY2FwZUh0bWxDaGFyKTpzdHJpbmc7fXZhciB1cHBlckNhc2U9Y3JlYXRlQ29tcG91bmRlcihmdW5jdGlvbihyZXN1bHQsd29yZCxpbmRleCl7cmV0dXJuIHJlc3VsdCArIChpbmRleD9cIiBcIjpcIlwiKSArIHdvcmQudG9VcHBlckNhc2UoKTt9KTtmdW5jdGlvbiB3b3JkcyhzdHJpbmcscGF0dGVybixndWFyZCl7c3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtwYXR0ZXJuID0gZ3VhcmQ/dW5kZWZpbmVkOnBhdHRlcm47aWYocGF0dGVybiA9PT0gdW5kZWZpbmVkKXtwYXR0ZXJuID0gcmVIYXNDb21wbGV4V29yZC50ZXN0KHN0cmluZyk/cmVDb21wbGV4V29yZDpyZUJhc2ljV29yZDt9cmV0dXJuIHN0cmluZy5tYXRjaChwYXR0ZXJuKSB8fCBbXTt9dmFyIGF0dGVtcHQ9cmVzdChmdW5jdGlvbihmdW5jLGFyZ3Mpe3RyeXtyZXR1cm4gYXBwbHkoZnVuYyx1bmRlZmluZWQsYXJncyk7fWNhdGNoKGUpIHtyZXR1cm4gaXNPYmplY3QoZSk/ZTpuZXcgRXJyb3IoZSk7fX0pO3ZhciBiaW5kQWxsPXJlc3QoZnVuY3Rpb24ob2JqZWN0LG1ldGhvZE5hbWVzKXthcnJheUVhY2goYmFzZUZsYXR0ZW4obWV0aG9kTmFtZXMpLGZ1bmN0aW9uKGtleSl7b2JqZWN0W2tleV0gPSBiaW5kKG9iamVjdFtrZXldLG9iamVjdCk7fSk7cmV0dXJuIG9iamVjdDt9KTtmdW5jdGlvbiBjb25kKHBhaXJzKXt2YXIgbGVuZ3RoPXBhaXJzP3BhaXJzLmxlbmd0aDowLHRvSXRlcmF0ZWU9Z2V0SXRlcmF0ZWUoKTtwYWlycyA9ICFsZW5ndGg/W106YXJyYXlNYXAocGFpcnMsZnVuY3Rpb24ocGFpcil7aWYodHlwZW9mIHBhaXJbMV0gIT0gXCJmdW5jdGlvblwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7fXJldHVybiBbdG9JdGVyYXRlZShwYWlyWzBdKSxwYWlyWzFdXTt9KTtyZXR1cm4gcmVzdChmdW5jdGlvbihhcmdzKXt2YXIgaW5kZXg9LTE7d2hpbGUoKytpbmRleCA8IGxlbmd0aCkge3ZhciBwYWlyPXBhaXJzW2luZGV4XTtpZihhcHBseShwYWlyWzBdLHRoaXMsYXJncykpe3JldHVybiBhcHBseShwYWlyWzFdLHRoaXMsYXJncyk7fX19KTt9ZnVuY3Rpb24gY29uZm9ybXMoc291cmNlKXtyZXR1cm4gYmFzZUNvbmZvcm1zKGJhc2VDbG9uZShzb3VyY2UsdHJ1ZSkpO31mdW5jdGlvbiBjb25zdGFudCh2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fXZhciBmbG93PWNyZWF0ZUZsb3coKTt2YXIgZmxvd1JpZ2h0PWNyZWF0ZUZsb3codHJ1ZSk7ZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpe3JldHVybiB2YWx1ZTt9ZnVuY3Rpb24gaXRlcmF0ZWUoZnVuYyl7cmV0dXJuIGJhc2VJdGVyYXRlZSh0eXBlb2YgZnVuYyA9PSBcImZ1bmN0aW9uXCI/ZnVuYzpiYXNlQ2xvbmUoZnVuYyx0cnVlKSk7fWZ1bmN0aW9uIG1hdGNoZXMoc291cmNlKXtyZXR1cm4gYmFzZU1hdGNoZXMoYmFzZUNsb25lKHNvdXJjZSx0cnVlKSk7fWZ1bmN0aW9uIG1hdGNoZXNQcm9wZXJ0eShwYXRoLHNyY1ZhbHVlKXtyZXR1cm4gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLGJhc2VDbG9uZShzcmNWYWx1ZSx0cnVlKSk7fXZhciBtZXRob2Q9cmVzdChmdW5jdGlvbihwYXRoLGFyZ3Mpe3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3JldHVybiBiYXNlSW52b2tlKG9iamVjdCxwYXRoLGFyZ3MpO307fSk7dmFyIG1ldGhvZE9mPXJlc3QoZnVuY3Rpb24ob2JqZWN0LGFyZ3Mpe3JldHVybiBmdW5jdGlvbihwYXRoKXtyZXR1cm4gYmFzZUludm9rZShvYmplY3QscGF0aCxhcmdzKTt9O30pO2Z1bmN0aW9uIG1peGluKG9iamVjdCxzb3VyY2Usb3B0aW9ucyl7dmFyIHByb3BzPWtleXMoc291cmNlKSxtZXRob2ROYW1lcz1iYXNlRnVuY3Rpb25zKHNvdXJjZSxwcm9wcyk7aWYob3B0aW9ucyA9PSBudWxsICYmICEoaXNPYmplY3Qoc291cmNlKSAmJiAobWV0aG9kTmFtZXMubGVuZ3RoIHx8ICFwcm9wcy5sZW5ndGgpKSl7b3B0aW9ucyA9IHNvdXJjZTtzb3VyY2UgPSBvYmplY3Q7b2JqZWN0ID0gdGhpczttZXRob2ROYW1lcyA9IGJhc2VGdW5jdGlvbnMoc291cmNlLGtleXMoc291cmNlKSk7fXZhciBjaGFpbj1pc09iamVjdChvcHRpb25zKSAmJiBcImNoYWluXCIgaW4gb3B0aW9ucz9vcHRpb25zLmNoYWluOnRydWUsaXNGdW5jPWlzRnVuY3Rpb24ob2JqZWN0KTthcnJheUVhY2gobWV0aG9kTmFtZXMsZnVuY3Rpb24obWV0aG9kTmFtZSl7dmFyIGZ1bmM9c291cmNlW21ldGhvZE5hbWVdO29iamVjdFttZXRob2ROYW1lXSA9IGZ1bmM7aWYoaXNGdW5jKXtvYmplY3QucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKXt2YXIgY2hhaW5BbGw9dGhpcy5fX2NoYWluX187aWYoY2hhaW4gfHwgY2hhaW5BbGwpe3ZhciByZXN1bHQ9b2JqZWN0KHRoaXMuX193cmFwcGVkX18pLGFjdGlvbnM9cmVzdWx0Ll9fYWN0aW9uc19fID0gY29weUFycmF5KHRoaXMuX19hY3Rpb25zX18pO2FjdGlvbnMucHVzaCh7ZnVuYzpmdW5jLGFyZ3M6YXJndW1lbnRzLHRoaXNBcmc6b2JqZWN0fSk7cmVzdWx0Ll9fY2hhaW5fXyA9IGNoYWluQWxsO3JldHVybiByZXN1bHQ7fXJldHVybiBmdW5jLmFwcGx5KG9iamVjdCxhcnJheVB1c2goW3RoaXMudmFsdWUoKV0sYXJndW1lbnRzKSk7fTt9fSk7cmV0dXJuIG9iamVjdDt9ZnVuY3Rpb24gbm9Db25mbGljdCgpe2lmKHJvb3QuXyA9PT0gdGhpcyl7cm9vdC5fID0gb2xkRGFzaDt9cmV0dXJuIHRoaXM7fWZ1bmN0aW9uIG5vb3AoKXt9ZnVuY3Rpb24gbnRoQXJnKG4pe24gPSB0b0ludGVnZXIobik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1tuXTt9O312YXIgb3Zlcj1jcmVhdGVPdmVyKGFycmF5TWFwKTt2YXIgb3ZlckV2ZXJ5PWNyZWF0ZU92ZXIoYXJyYXlFdmVyeSk7dmFyIG92ZXJTb21lPWNyZWF0ZU92ZXIoYXJyYXlTb21lKTtmdW5jdGlvbiBwcm9wZXJ0eShwYXRoKXtyZXR1cm4gaXNLZXkocGF0aCk/YmFzZVByb3BlcnR5KHBhdGgpOmJhc2VQcm9wZXJ0eURlZXAocGF0aCk7fWZ1bmN0aW9uIHByb3BlcnR5T2Yob2JqZWN0KXtyZXR1cm4gZnVuY3Rpb24ocGF0aCl7cmV0dXJuIG9iamVjdCA9PSBudWxsP3VuZGVmaW5lZDpiYXNlR2V0KG9iamVjdCxwYXRoKTt9O312YXIgcmFuZ2U9Y3JlYXRlUmFuZ2UoKTt2YXIgcmFuZ2VSaWdodD1jcmVhdGVSYW5nZSh0cnVlKTtmdW5jdGlvbiB0aW1lcyhuLGl0ZXJhdGVlKXtuID0gdG9JbnRlZ2VyKG4pO2lmKG4gPCAxIHx8IG4gPiBNQVhfU0FGRV9JTlRFR0VSKXtyZXR1cm4gW107fXZhciBpbmRleD1NQVhfQVJSQVlfTEVOR1RILGxlbmd0aD1uYXRpdmVNaW4obixNQVhfQVJSQVlfTEVOR1RIKTtpdGVyYXRlZSA9IHRvRnVuY3Rpb24oaXRlcmF0ZWUpO24gLT0gTUFYX0FSUkFZX0xFTkdUSDt2YXIgcmVzdWx0PWJhc2VUaW1lcyhsZW5ndGgsaXRlcmF0ZWUpO3doaWxlKCsraW5kZXggPCBuKSB7aXRlcmF0ZWUoaW5kZXgpO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiB0b1BhdGgodmFsdWUpe3JldHVybiBpc0FycmF5KHZhbHVlKT9hcnJheU1hcCh2YWx1ZSxTdHJpbmcpOnN0cmluZ1RvUGF0aCh2YWx1ZSk7fWZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCl7dmFyIGlkPSsraWRDb3VudGVyO3JldHVybiB0b1N0cmluZyhwcmVmaXgpICsgaWQ7fWZ1bmN0aW9uIGFkZChhdWdlbmQsYWRkZW5kKXt2YXIgcmVzdWx0O2lmKGF1Z2VuZCAhPT0gdW5kZWZpbmVkKXtyZXN1bHQgPSBhdWdlbmQ7fWlmKGFkZGVuZCAhPT0gdW5kZWZpbmVkKXtyZXN1bHQgPSByZXN1bHQgPT09IHVuZGVmaW5lZD9hZGRlbmQ6cmVzdWx0ICsgYWRkZW5kO31yZXR1cm4gcmVzdWx0O312YXIgY2VpbD1jcmVhdGVSb3VuZChcImNlaWxcIik7dmFyIGZsb29yPWNyZWF0ZVJvdW5kKFwiZmxvb3JcIik7ZnVuY3Rpb24gbWF4KGFycmF5KXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VFeHRyZW11bShhcnJheSxpZGVudGl0eSxndCk6dW5kZWZpbmVkO31mdW5jdGlvbiBtYXhCeShhcnJheSxpdGVyYXRlZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlRXh0cmVtdW0oYXJyYXksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpLGd0KTp1bmRlZmluZWQ7fWZ1bmN0aW9uIG1lYW4oYXJyYXkpe3JldHVybiBzdW0oYXJyYXkpIC8gKGFycmF5P2FycmF5Lmxlbmd0aDowKTt9ZnVuY3Rpb24gbWluKGFycmF5KXtyZXR1cm4gYXJyYXkgJiYgYXJyYXkubGVuZ3RoP2Jhc2VFeHRyZW11bShhcnJheSxpZGVudGl0eSxsdCk6dW5kZWZpbmVkO31mdW5jdGlvbiBtaW5CeShhcnJheSxpdGVyYXRlZSl7cmV0dXJuIGFycmF5ICYmIGFycmF5Lmxlbmd0aD9iYXNlRXh0cmVtdW0oYXJyYXksZ2V0SXRlcmF0ZWUoaXRlcmF0ZWUpLGx0KTp1bmRlZmluZWQ7fXZhciByb3VuZD1jcmVhdGVSb3VuZChcInJvdW5kXCIpO2Z1bmN0aW9uIHN1YnRyYWN0KG1pbnVlbmQsc3VidHJhaGVuZCl7dmFyIHJlc3VsdDtpZihtaW51ZW5kICE9PSB1bmRlZmluZWQpe3Jlc3VsdCA9IG1pbnVlbmQ7fWlmKHN1YnRyYWhlbmQgIT09IHVuZGVmaW5lZCl7cmVzdWx0ID0gcmVzdWx0ID09PSB1bmRlZmluZWQ/c3VidHJhaGVuZDpyZXN1bHQgLSBzdWJ0cmFoZW5kO31yZXR1cm4gcmVzdWx0O31mdW5jdGlvbiBzdW0oYXJyYXkpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVN1bShhcnJheSxpZGVudGl0eSk6MDt9ZnVuY3Rpb24gc3VtQnkoYXJyYXksaXRlcmF0ZWUpe3JldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGg/YmFzZVN1bShhcnJheSxnZXRJdGVyYXRlZShpdGVyYXRlZSkpOjA7fWxvZGFzaC5wcm90b3R5cGUgPSBiYXNlTG9kYXNoLnByb3RvdHlwZTtMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGJhc2VDcmVhdGUoYmFzZUxvZGFzaC5wcm90b3R5cGUpO0xvZGFzaFdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9kYXNoV3JhcHBlcjtMYXp5V3JhcHBlci5wcm90b3R5cGUgPSBiYXNlQ3JlYXRlKGJhc2VMb2Rhc2gucHJvdG90eXBlKTtMYXp5V3JhcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMYXp5V3JhcHBlcjtIYXNoLnByb3RvdHlwZSA9IG5hdGl2ZUNyZWF0ZT9uYXRpdmVDcmVhdGUobnVsbCk6b2JqZWN0UHJvdG87TWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2xlYXI7TWFwQ2FjaGUucHJvdG90eXBlW1wiZGVsZXRlXCJdID0gbWFwRGVsZXRlO01hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBHZXQ7TWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcEhhcztNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwU2V0O1NldENhY2hlLnByb3RvdHlwZS5wdXNoID0gY2FjaGVQdXNoO1N0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7U3RhY2sucHJvdG90eXBlW1wiZGVsZXRlXCJdID0gc3RhY2tEZWxldGU7U3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1N0YWNrLnByb3RvdHlwZS5oYXMgPSBzdGFja0hhcztTdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7bWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO2xvZGFzaC5hZnRlciA9IGFmdGVyO2xvZGFzaC5hcnkgPSBhcnk7bG9kYXNoLmFzc2lnbiA9IGFzc2lnbjtsb2Rhc2guYXNzaWduSW4gPSBhc3NpZ25Jbjtsb2Rhc2guYXNzaWduSW5XaXRoID0gYXNzaWduSW5XaXRoO2xvZGFzaC5hc3NpZ25XaXRoID0gYXNzaWduV2l0aDtsb2Rhc2guYXQgPSBhdDtsb2Rhc2guYmVmb3JlID0gYmVmb3JlO2xvZGFzaC5iaW5kID0gYmluZDtsb2Rhc2guYmluZEFsbCA9IGJpbmRBbGw7bG9kYXNoLmJpbmRLZXkgPSBiaW5kS2V5O2xvZGFzaC5jaGFpbiA9IGNoYWluO2xvZGFzaC5jaHVuayA9IGNodW5rO2xvZGFzaC5jb21wYWN0ID0gY29tcGFjdDtsb2Rhc2guY29uY2F0ID0gY29uY2F0O2xvZGFzaC5jb25kID0gY29uZDtsb2Rhc2guY29uZm9ybXMgPSBjb25mb3Jtcztsb2Rhc2guY29uc3RhbnQgPSBjb25zdGFudDtsb2Rhc2guY291bnRCeSA9IGNvdW50Qnk7bG9kYXNoLmNyZWF0ZSA9IGNyZWF0ZTtsb2Rhc2guY3VycnkgPSBjdXJyeTtsb2Rhc2guY3VycnlSaWdodCA9IGN1cnJ5UmlnaHQ7bG9kYXNoLmRlYm91bmNlID0gZGVib3VuY2U7bG9kYXNoLmRlZmF1bHRzID0gZGVmYXVsdHM7bG9kYXNoLmRlZmF1bHRzRGVlcCA9IGRlZmF1bHRzRGVlcDtsb2Rhc2guZGVmZXIgPSBkZWZlcjtsb2Rhc2guZGVsYXkgPSBkZWxheTtsb2Rhc2guZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7bG9kYXNoLmRpZmZlcmVuY2VCeSA9IGRpZmZlcmVuY2VCeTtsb2Rhc2guZGlmZmVyZW5jZVdpdGggPSBkaWZmZXJlbmNlV2l0aDtsb2Rhc2guZHJvcCA9IGRyb3A7bG9kYXNoLmRyb3BSaWdodCA9IGRyb3BSaWdodDtsb2Rhc2guZHJvcFJpZ2h0V2hpbGUgPSBkcm9wUmlnaHRXaGlsZTtsb2Rhc2guZHJvcFdoaWxlID0gZHJvcFdoaWxlO2xvZGFzaC5maWxsID0gZmlsbDtsb2Rhc2guZmlsdGVyID0gZmlsdGVyO2xvZGFzaC5mbGF0TWFwID0gZmxhdE1hcDtsb2Rhc2guZmxhdHRlbiA9IGZsYXR0ZW47bG9kYXNoLmZsYXR0ZW5EZWVwID0gZmxhdHRlbkRlZXA7bG9kYXNoLmZsaXAgPSBmbGlwO2xvZGFzaC5mbG93ID0gZmxvdztsb2Rhc2guZmxvd1JpZ2h0ID0gZmxvd1JpZ2h0O2xvZGFzaC5mcm9tUGFpcnMgPSBmcm9tUGFpcnM7bG9kYXNoLmZ1bmN0aW9ucyA9IGZ1bmN0aW9ucztsb2Rhc2guZnVuY3Rpb25zSW4gPSBmdW5jdGlvbnNJbjtsb2Rhc2guZ3JvdXBCeSA9IGdyb3VwQnk7bG9kYXNoLmluaXRpYWwgPSBpbml0aWFsO2xvZGFzaC5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247bG9kYXNoLmludGVyc2VjdGlvbkJ5ID0gaW50ZXJzZWN0aW9uQnk7bG9kYXNoLmludGVyc2VjdGlvbldpdGggPSBpbnRlcnNlY3Rpb25XaXRoO2xvZGFzaC5pbnZlcnQgPSBpbnZlcnQ7bG9kYXNoLmludmVydEJ5ID0gaW52ZXJ0Qnk7bG9kYXNoLmludm9rZU1hcCA9IGludm9rZU1hcDtsb2Rhc2guaXRlcmF0ZWUgPSBpdGVyYXRlZTtsb2Rhc2gua2V5QnkgPSBrZXlCeTtsb2Rhc2gua2V5cyA9IGtleXM7bG9kYXNoLmtleXNJbiA9IGtleXNJbjtsb2Rhc2gubWFwID0gbWFwO2xvZGFzaC5tYXBLZXlzID0gbWFwS2V5cztsb2Rhc2gubWFwVmFsdWVzID0gbWFwVmFsdWVzO2xvZGFzaC5tYXRjaGVzID0gbWF0Y2hlcztsb2Rhc2gubWF0Y2hlc1Byb3BlcnR5ID0gbWF0Y2hlc1Byb3BlcnR5O2xvZGFzaC5tZW1vaXplID0gbWVtb2l6ZTtsb2Rhc2gubWVyZ2UgPSBtZXJnZTtsb2Rhc2gubWVyZ2VXaXRoID0gbWVyZ2VXaXRoO2xvZGFzaC5tZXRob2QgPSBtZXRob2Q7bG9kYXNoLm1ldGhvZE9mID0gbWV0aG9kT2Y7bG9kYXNoLm1peGluID0gbWl4aW47bG9kYXNoLm5lZ2F0ZSA9IG5lZ2F0ZTtsb2Rhc2gubnRoQXJnID0gbnRoQXJnO2xvZGFzaC5vbWl0ID0gb21pdDtsb2Rhc2gub21pdEJ5ID0gb21pdEJ5O2xvZGFzaC5vbmNlID0gb25jZTtsb2Rhc2gub3JkZXJCeSA9IG9yZGVyQnk7bG9kYXNoLm92ZXIgPSBvdmVyO2xvZGFzaC5vdmVyQXJncyA9IG92ZXJBcmdzO2xvZGFzaC5vdmVyRXZlcnkgPSBvdmVyRXZlcnk7bG9kYXNoLm92ZXJTb21lID0gb3ZlclNvbWU7bG9kYXNoLnBhcnRpYWwgPSBwYXJ0aWFsO2xvZGFzaC5wYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHQ7bG9kYXNoLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtsb2Rhc2gucGljayA9IHBpY2s7bG9kYXNoLnBpY2tCeSA9IHBpY2tCeTtsb2Rhc2gucHJvcGVydHkgPSBwcm9wZXJ0eTtsb2Rhc2gucHJvcGVydHlPZiA9IHByb3BlcnR5T2Y7bG9kYXNoLnB1bGwgPSBwdWxsO2xvZGFzaC5wdWxsQWxsID0gcHVsbEFsbDtsb2Rhc2gucHVsbEFsbEJ5ID0gcHVsbEFsbEJ5O2xvZGFzaC5wdWxsQXQgPSBwdWxsQXQ7bG9kYXNoLnJhbmdlID0gcmFuZ2U7bG9kYXNoLnJhbmdlUmlnaHQgPSByYW5nZVJpZ2h0O2xvZGFzaC5yZWFyZyA9IHJlYXJnO2xvZGFzaC5yZWplY3QgPSByZWplY3Q7bG9kYXNoLnJlbW92ZSA9IHJlbW92ZTtsb2Rhc2gucmVzdCA9IHJlc3Q7bG9kYXNoLnJldmVyc2UgPSByZXZlcnNlO2xvZGFzaC5zYW1wbGVTaXplID0gc2FtcGxlU2l6ZTtsb2Rhc2guc2V0ID0gc2V0O2xvZGFzaC5zZXRXaXRoID0gc2V0V2l0aDtsb2Rhc2guc2h1ZmZsZSA9IHNodWZmbGU7bG9kYXNoLnNsaWNlID0gc2xpY2U7bG9kYXNoLnNvcnRCeSA9IHNvcnRCeTtsb2Rhc2guc29ydGVkVW5pcSA9IHNvcnRlZFVuaXE7bG9kYXNoLnNvcnRlZFVuaXFCeSA9IHNvcnRlZFVuaXFCeTtsb2Rhc2guc3BsaXQgPSBzcGxpdDtsb2Rhc2guc3ByZWFkID0gc3ByZWFkO2xvZGFzaC50YWlsID0gdGFpbDtsb2Rhc2gudGFrZSA9IHRha2U7bG9kYXNoLnRha2VSaWdodCA9IHRha2VSaWdodDtsb2Rhc2gudGFrZVJpZ2h0V2hpbGUgPSB0YWtlUmlnaHRXaGlsZTtsb2Rhc2gudGFrZVdoaWxlID0gdGFrZVdoaWxlO2xvZGFzaC50YXAgPSB0YXA7bG9kYXNoLnRocm90dGxlID0gdGhyb3R0bGU7bG9kYXNoLnRocnUgPSB0aHJ1O2xvZGFzaC50b0FycmF5ID0gdG9BcnJheTtsb2Rhc2gudG9QYWlycyA9IHRvUGFpcnM7bG9kYXNoLnRvUGFpcnNJbiA9IHRvUGFpcnNJbjtsb2Rhc2gudG9QYXRoID0gdG9QYXRoO2xvZGFzaC50b1BsYWluT2JqZWN0ID0gdG9QbGFpbk9iamVjdDtsb2Rhc2gudHJhbnNmb3JtID0gdHJhbnNmb3JtO2xvZGFzaC51bmFyeSA9IHVuYXJ5O2xvZGFzaC51bmlvbiA9IHVuaW9uO2xvZGFzaC51bmlvbkJ5ID0gdW5pb25CeTtsb2Rhc2gudW5pb25XaXRoID0gdW5pb25XaXRoO2xvZGFzaC51bmlxID0gdW5pcTtsb2Rhc2gudW5pcUJ5ID0gdW5pcUJ5O2xvZGFzaC51bmlxV2l0aCA9IHVuaXFXaXRoO2xvZGFzaC51bnNldCA9IHVuc2V0O2xvZGFzaC51bnppcCA9IHVuemlwO2xvZGFzaC51bnppcFdpdGggPSB1bnppcFdpdGg7bG9kYXNoLnZhbHVlcyA9IHZhbHVlcztsb2Rhc2gudmFsdWVzSW4gPSB2YWx1ZXNJbjtsb2Rhc2gud2l0aG91dCA9IHdpdGhvdXQ7bG9kYXNoLndvcmRzID0gd29yZHM7bG9kYXNoLndyYXAgPSB3cmFwO2xvZGFzaC54b3IgPSB4b3I7bG9kYXNoLnhvckJ5ID0geG9yQnk7bG9kYXNoLnhvcldpdGggPSB4b3JXaXRoO2xvZGFzaC56aXAgPSB6aXA7bG9kYXNoLnppcE9iamVjdCA9IHppcE9iamVjdDtsb2Rhc2guemlwT2JqZWN0RGVlcCA9IHppcE9iamVjdERlZXA7bG9kYXNoLnppcFdpdGggPSB6aXBXaXRoO2xvZGFzaC5leHRlbmQgPSBhc3NpZ25Jbjtsb2Rhc2guZXh0ZW5kV2l0aCA9IGFzc2lnbkluV2l0aDttaXhpbihsb2Rhc2gsbG9kYXNoKTtsb2Rhc2guYWRkID0gYWRkO2xvZGFzaC5hdHRlbXB0ID0gYXR0ZW1wdDtsb2Rhc2guY2FtZWxDYXNlID0gY2FtZWxDYXNlO2xvZGFzaC5jYXBpdGFsaXplID0gY2FwaXRhbGl6ZTtsb2Rhc2guY2VpbCA9IGNlaWw7bG9kYXNoLmNsYW1wID0gY2xhbXA7bG9kYXNoLmNsb25lID0gY2xvbmU7bG9kYXNoLmNsb25lRGVlcCA9IGNsb25lRGVlcDtsb2Rhc2guY2xvbmVEZWVwV2l0aCA9IGNsb25lRGVlcFdpdGg7bG9kYXNoLmNsb25lV2l0aCA9IGNsb25lV2l0aDtsb2Rhc2guZGVidXJyID0gZGVidXJyO2xvZGFzaC5lbmRzV2l0aCA9IGVuZHNXaXRoO2xvZGFzaC5lcSA9IGVxO2xvZGFzaC5lc2NhcGUgPSBlc2NhcGU7bG9kYXNoLmVzY2FwZVJlZ0V4cCA9IGVzY2FwZVJlZ0V4cDtsb2Rhc2guZXZlcnkgPSBldmVyeTtsb2Rhc2guZmluZCA9IGZpbmQ7bG9kYXNoLmZpbmRJbmRleCA9IGZpbmRJbmRleDtsb2Rhc2guZmluZEtleSA9IGZpbmRLZXk7bG9kYXNoLmZpbmRMYXN0ID0gZmluZExhc3Q7bG9kYXNoLmZpbmRMYXN0SW5kZXggPSBmaW5kTGFzdEluZGV4O2xvZGFzaC5maW5kTGFzdEtleSA9IGZpbmRMYXN0S2V5O2xvZGFzaC5mbG9vciA9IGZsb29yO2xvZGFzaC5mb3JFYWNoID0gZm9yRWFjaDtsb2Rhc2guZm9yRWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O2xvZGFzaC5mb3JJbiA9IGZvckluO2xvZGFzaC5mb3JJblJpZ2h0ID0gZm9ySW5SaWdodDtsb2Rhc2guZm9yT3duID0gZm9yT3duO2xvZGFzaC5mb3JPd25SaWdodCA9IGZvck93blJpZ2h0O2xvZGFzaC5nZXQgPSBnZXQ7bG9kYXNoLmd0ID0gZ3Q7bG9kYXNoLmd0ZSA9IGd0ZTtsb2Rhc2guaGFzID0gaGFzO2xvZGFzaC5oYXNJbiA9IGhhc0luO2xvZGFzaC5oZWFkID0gaGVhZDtsb2Rhc2guaWRlbnRpdHkgPSBpZGVudGl0eTtsb2Rhc2guaW5jbHVkZXMgPSBpbmNsdWRlcztsb2Rhc2guaW5kZXhPZiA9IGluZGV4T2Y7bG9kYXNoLmluUmFuZ2UgPSBpblJhbmdlO2xvZGFzaC5pbnZva2UgPSBpbnZva2U7bG9kYXNoLmlzQXJndW1lbnRzID0gaXNBcmd1bWVudHM7bG9kYXNoLmlzQXJyYXkgPSBpc0FycmF5O2xvZGFzaC5pc0FycmF5TGlrZSA9IGlzQXJyYXlMaWtlO2xvZGFzaC5pc0FycmF5TGlrZU9iamVjdCA9IGlzQXJyYXlMaWtlT2JqZWN0O2xvZGFzaC5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47bG9kYXNoLmlzRGF0ZSA9IGlzRGF0ZTtsb2Rhc2guaXNFbGVtZW50ID0gaXNFbGVtZW50O2xvZGFzaC5pc0VtcHR5ID0gaXNFbXB0eTtsb2Rhc2guaXNFcXVhbCA9IGlzRXF1YWw7bG9kYXNoLmlzRXF1YWxXaXRoID0gaXNFcXVhbFdpdGg7bG9kYXNoLmlzRXJyb3IgPSBpc0Vycm9yO2xvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO2xvZGFzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtsb2Rhc2guaXNJbnRlZ2VyID0gaXNJbnRlZ2VyO2xvZGFzaC5pc0xlbmd0aCA9IGlzTGVuZ3RoO2xvZGFzaC5pc01hdGNoID0gaXNNYXRjaDtsb2Rhc2guaXNNYXRjaFdpdGggPSBpc01hdGNoV2l0aDtsb2Rhc2guaXNOYU4gPSBpc05hTjtsb2Rhc2guaXNOYXRpdmUgPSBpc05hdGl2ZTtsb2Rhc2guaXNOaWwgPSBpc05pbDtsb2Rhc2guaXNOdWxsID0gaXNOdWxsO2xvZGFzaC5pc051bWJlciA9IGlzTnVtYmVyO2xvZGFzaC5pc09iamVjdCA9IGlzT2JqZWN0O2xvZGFzaC5pc09iamVjdExpa2UgPSBpc09iamVjdExpa2U7bG9kYXNoLmlzUGxhaW5PYmplY3QgPSBpc1BsYWluT2JqZWN0O2xvZGFzaC5pc1JlZ0V4cCA9IGlzUmVnRXhwO2xvZGFzaC5pc1NhZmVJbnRlZ2VyID0gaXNTYWZlSW50ZWdlcjtsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztsb2Rhc2guaXNTeW1ib2wgPSBpc1N5bWJvbDtsb2Rhc2guaXNUeXBlZEFycmF5ID0gaXNUeXBlZEFycmF5O2xvZGFzaC5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO2xvZGFzaC5qb2luID0gam9pbjtsb2Rhc2gua2ViYWJDYXNlID0ga2ViYWJDYXNlO2xvZGFzaC5sYXN0ID0gbGFzdDtsb2Rhc2gubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjtsb2Rhc2gubG93ZXJDYXNlID0gbG93ZXJDYXNlO2xvZGFzaC5sb3dlckZpcnN0ID0gbG93ZXJGaXJzdDtsb2Rhc2gubHQgPSBsdDtsb2Rhc2gubHRlID0gbHRlO2xvZGFzaC5tYXggPSBtYXg7bG9kYXNoLm1heEJ5ID0gbWF4Qnk7bG9kYXNoLm1lYW4gPSBtZWFuO2xvZGFzaC5taW4gPSBtaW47bG9kYXNoLm1pbkJ5ID0gbWluQnk7bG9kYXNoLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O2xvZGFzaC5ub29wID0gbm9vcDtsb2Rhc2gubm93ID0gbm93O2xvZGFzaC5wYWQgPSBwYWQ7bG9kYXNoLnBhZEVuZCA9IHBhZEVuZDtsb2Rhc2gucGFkU3RhcnQgPSBwYWRTdGFydDtsb2Rhc2gucGFyc2VJbnQgPSBwYXJzZUludDtsb2Rhc2gucmFuZG9tID0gcmFuZG9tO2xvZGFzaC5yZWR1Y2UgPSByZWR1Y2U7bG9kYXNoLnJlZHVjZVJpZ2h0ID0gcmVkdWNlUmlnaHQ7bG9kYXNoLnJlcGVhdCA9IHJlcGVhdDtsb2Rhc2gucmVwbGFjZSA9IHJlcGxhY2U7bG9kYXNoLnJlc3VsdCA9IHJlc3VsdDtsb2Rhc2gucm91bmQgPSByb3VuZDtsb2Rhc2gucnVuSW5Db250ZXh0ID0gcnVuSW5Db250ZXh0O2xvZGFzaC5zYW1wbGUgPSBzYW1wbGU7bG9kYXNoLnNpemUgPSBzaXplO2xvZGFzaC5zbmFrZUNhc2UgPSBzbmFrZUNhc2U7bG9kYXNoLnNvbWUgPSBzb21lO2xvZGFzaC5zb3J0ZWRJbmRleCA9IHNvcnRlZEluZGV4O2xvZGFzaC5zb3J0ZWRJbmRleEJ5ID0gc29ydGVkSW5kZXhCeTtsb2Rhc2guc29ydGVkSW5kZXhPZiA9IHNvcnRlZEluZGV4T2Y7bG9kYXNoLnNvcnRlZExhc3RJbmRleCA9IHNvcnRlZExhc3RJbmRleDtsb2Rhc2guc29ydGVkTGFzdEluZGV4QnkgPSBzb3J0ZWRMYXN0SW5kZXhCeTtsb2Rhc2guc29ydGVkTGFzdEluZGV4T2YgPSBzb3J0ZWRMYXN0SW5kZXhPZjtsb2Rhc2guc3RhcnRDYXNlID0gc3RhcnRDYXNlO2xvZGFzaC5zdGFydHNXaXRoID0gc3RhcnRzV2l0aDtsb2Rhc2guc3VidHJhY3QgPSBzdWJ0cmFjdDtsb2Rhc2guc3VtID0gc3VtO2xvZGFzaC5zdW1CeSA9IHN1bUJ5O2xvZGFzaC50ZW1wbGF0ZSA9IHRlbXBsYXRlO2xvZGFzaC50aW1lcyA9IHRpbWVzO2xvZGFzaC50b0ludGVnZXIgPSB0b0ludGVnZXI7bG9kYXNoLnRvTGVuZ3RoID0gdG9MZW5ndGg7bG9kYXNoLnRvTG93ZXIgPSB0b0xvd2VyO2xvZGFzaC50b051bWJlciA9IHRvTnVtYmVyO2xvZGFzaC50b1NhZmVJbnRlZ2VyID0gdG9TYWZlSW50ZWdlcjtsb2Rhc2gudG9TdHJpbmcgPSB0b1N0cmluZztsb2Rhc2gudG9VcHBlciA9IHRvVXBwZXI7bG9kYXNoLnRyaW0gPSB0cmltO2xvZGFzaC50cmltRW5kID0gdHJpbUVuZDtsb2Rhc2gudHJpbVN0YXJ0ID0gdHJpbVN0YXJ0O2xvZGFzaC50cnVuY2F0ZSA9IHRydW5jYXRlO2xvZGFzaC51bmVzY2FwZSA9IHVuZXNjYXBlO2xvZGFzaC51bmlxdWVJZCA9IHVuaXF1ZUlkO2xvZGFzaC51cHBlckNhc2UgPSB1cHBlckNhc2U7bG9kYXNoLnVwcGVyRmlyc3QgPSB1cHBlckZpcnN0O2xvZGFzaC5lYWNoID0gZm9yRWFjaDtsb2Rhc2guZWFjaFJpZ2h0ID0gZm9yRWFjaFJpZ2h0O2xvZGFzaC5maXJzdCA9IGhlYWQ7bWl4aW4obG9kYXNoLChmdW5jdGlvbigpe3ZhciBzb3VyY2U9e307YmFzZUZvck93bihsb2Rhc2gsZnVuY3Rpb24oZnVuYyxtZXRob2ROYW1lKXtpZighaGFzT3duUHJvcGVydHkuY2FsbChsb2Rhc2gucHJvdG90eXBlLG1ldGhvZE5hbWUpKXtzb3VyY2VbbWV0aG9kTmFtZV0gPSBmdW5jO319KTtyZXR1cm4gc291cmNlO30pKCkse2NoYWluOmZhbHNlfSk7bG9kYXNoLlZFUlNJT04gPSBWRVJTSU9OO2FycmF5RWFjaChbXCJiaW5kXCIsXCJiaW5kS2V5XCIsXCJjdXJyeVwiLFwiY3VycnlSaWdodFwiLFwicGFydGlhbFwiLFwicGFydGlhbFJpZ2h0XCJdLGZ1bmN0aW9uKG1ldGhvZE5hbWUpe2xvZGFzaFttZXRob2ROYW1lXS5wbGFjZWhvbGRlciA9IGxvZGFzaDt9KTthcnJheUVhY2goW1wiZHJvcFwiLFwidGFrZVwiXSxmdW5jdGlvbihtZXRob2ROYW1lLGluZGV4KXtMYXp5V3JhcHBlci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbihuKXt2YXIgZmlsdGVyZWQ9dGhpcy5fX2ZpbHRlcmVkX187aWYoZmlsdGVyZWQgJiYgIWluZGV4KXtyZXR1cm4gbmV3IExhenlXcmFwcGVyKHRoaXMpO31uID0gbiA9PT0gdW5kZWZpbmVkPzE6bmF0aXZlTWF4KHRvSW50ZWdlcihuKSwwKTt2YXIgcmVzdWx0PXRoaXMuY2xvbmUoKTtpZihmaWx0ZXJlZCl7cmVzdWx0Ll9fdGFrZUNvdW50X18gPSBuYXRpdmVNaW4obixyZXN1bHQuX190YWtlQ291bnRfXyk7fWVsc2Uge3Jlc3VsdC5fX3ZpZXdzX18ucHVzaCh7c2l6ZTpuYXRpdmVNaW4obixNQVhfQVJSQVlfTEVOR1RIKSx0eXBlOm1ldGhvZE5hbWUgKyAocmVzdWx0Ll9fZGlyX18gPCAwP1wiUmlnaHRcIjpcIlwiKX0pO31yZXR1cm4gcmVzdWx0O307TGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWUgKyBcIlJpZ2h0XCJdID0gZnVuY3Rpb24obil7cmV0dXJuIHRoaXMucmV2ZXJzZSgpW21ldGhvZE5hbWVdKG4pLnJldmVyc2UoKTt9O30pO2FycmF5RWFjaChbXCJmaWx0ZXJcIixcIm1hcFwiLFwidGFrZVdoaWxlXCJdLGZ1bmN0aW9uKG1ldGhvZE5hbWUsaW5kZXgpe3ZhciB0eXBlPWluZGV4ICsgMSxpc0ZpbHRlcj10eXBlID09IExBWllfRklMVEVSX0ZMQUcgfHwgdHlwZSA9PSBMQVpZX1dISUxFX0ZMQUc7TGF6eVdyYXBwZXIucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oaXRlcmF0ZWUpe3ZhciByZXN1bHQ9dGhpcy5jbG9uZSgpO3Jlc3VsdC5fX2l0ZXJhdGVlc19fLnB1c2goe2l0ZXJhdGVlOmdldEl0ZXJhdGVlKGl0ZXJhdGVlLDMpLHR5cGU6dHlwZX0pO3Jlc3VsdC5fX2ZpbHRlcmVkX18gPSByZXN1bHQuX19maWx0ZXJlZF9fIHx8IGlzRmlsdGVyO3JldHVybiByZXN1bHQ7fTt9KTthcnJheUVhY2goW1wiaGVhZFwiLFwibGFzdFwiXSxmdW5jdGlvbihtZXRob2ROYW1lLGluZGV4KXt2YXIgdGFrZU5hbWU9XCJ0YWtlXCIgKyAoaW5kZXg/XCJSaWdodFwiOlwiXCIpO0xhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbdGFrZU5hbWVdKDEpLnZhbHVlKClbMF07fTt9KTthcnJheUVhY2goW1wiaW5pdGlhbFwiLFwidGFpbFwiXSxmdW5jdGlvbihtZXRob2ROYW1lLGluZGV4KXt2YXIgZHJvcE5hbWU9XCJkcm9wXCIgKyAoaW5kZXg/XCJcIjpcIlJpZ2h0XCIpO0xhenlXcmFwcGVyLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWx0ZXJlZF9fP25ldyBMYXp5V3JhcHBlcih0aGlzKTp0aGlzW2Ryb3BOYW1lXSgxKTt9O30pO0xhenlXcmFwcGVyLnByb3RvdHlwZS5jb21wYWN0ID0gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoaWRlbnRpdHkpO307TGF6eVdyYXBwZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihwcmVkaWNhdGUpe3JldHVybiB0aGlzLmZpbHRlcihwcmVkaWNhdGUpLmhlYWQoKTt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS5maW5kTGFzdCA9IGZ1bmN0aW9uKHByZWRpY2F0ZSl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpLmZpbmQocHJlZGljYXRlKTt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS5pbnZva2VNYXAgPSByZXN0KGZ1bmN0aW9uKHBhdGgsYXJncyl7aWYodHlwZW9mIHBhdGggPT0gXCJmdW5jdGlvblwiKXtyZXR1cm4gbmV3IExhenlXcmFwcGVyKHRoaXMpO31yZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24odmFsdWUpe3JldHVybiBiYXNlSW52b2tlKHZhbHVlLHBhdGgsYXJncyk7fSk7fSk7TGF6eVdyYXBwZXIucHJvdG90eXBlLnJlamVjdCA9IGZ1bmN0aW9uKHByZWRpY2F0ZSl7cHJlZGljYXRlID0gZ2V0SXRlcmF0ZWUocHJlZGljYXRlLDMpO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbih2YWx1ZSl7cmV0dXJuICFwcmVkaWNhdGUodmFsdWUpO30pO307TGF6eVdyYXBwZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24oc3RhcnQsZW5kKXtzdGFydCA9IHRvSW50ZWdlcihzdGFydCk7dmFyIHJlc3VsdD10aGlzO2lmKHJlc3VsdC5fX2ZpbHRlcmVkX18gJiYgKHN0YXJ0ID4gMCB8fCBlbmQgPCAwKSl7cmV0dXJuIG5ldyBMYXp5V3JhcHBlcihyZXN1bHQpO31pZihzdGFydCA8IDApe3Jlc3VsdCA9IHJlc3VsdC50YWtlUmlnaHQoLXN0YXJ0KTt9ZWxzZSBpZihzdGFydCl7cmVzdWx0ID0gcmVzdWx0LmRyb3Aoc3RhcnQpO31pZihlbmQgIT09IHVuZGVmaW5lZCl7ZW5kID0gdG9JbnRlZ2VyKGVuZCk7cmVzdWx0ID0gZW5kIDwgMD9yZXN1bHQuZHJvcFJpZ2h0KC1lbmQpOnJlc3VsdC50YWtlKGVuZCAtIHN0YXJ0KTt9cmV0dXJuIHJlc3VsdDt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS50YWtlUmlnaHRXaGlsZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpLnRha2VXaGlsZShwcmVkaWNhdGUpLnJldmVyc2UoKTt9O0xhenlXcmFwcGVyLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWtlKE1BWF9BUlJBWV9MRU5HVEgpO307YmFzZUZvck93bihMYXp5V3JhcHBlci5wcm90b3R5cGUsZnVuY3Rpb24oZnVuYyxtZXRob2ROYW1lKXt2YXIgY2hlY2tJdGVyYXRlZT0vXig/OmZpbHRlcnxmaW5kfG1hcHxyZWplY3QpfFdoaWxlJC8udGVzdChtZXRob2ROYW1lKSxpc1Rha2VyPS9eKD86aGVhZHxsYXN0KSQvLnRlc3QobWV0aG9kTmFtZSksbG9kYXNoRnVuYz1sb2Rhc2hbaXNUYWtlcj9cInRha2VcIiArIChtZXRob2ROYW1lID09IFwibGFzdFwiP1wiUmlnaHRcIjpcIlwiKTptZXRob2ROYW1lXSxyZXRVbndyYXBwZWQ9aXNUYWtlciB8fCAvXmZpbmQvLnRlc3QobWV0aG9kTmFtZSk7aWYoIWxvZGFzaEZ1bmMpe3JldHVybjt9bG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCl7dmFyIHZhbHVlPXRoaXMuX193cmFwcGVkX18sYXJncz1pc1Rha2VyP1sxXTphcmd1bWVudHMsaXNMYXp5PXZhbHVlIGluc3RhbmNlb2YgTGF6eVdyYXBwZXIsaXRlcmF0ZWU9YXJnc1swXSx1c2VMYXp5PWlzTGF6eSB8fCBpc0FycmF5KHZhbHVlKTt2YXIgaW50ZXJjZXB0b3I9ZnVuY3Rpb24gaW50ZXJjZXB0b3IodmFsdWUpe3ZhciByZXN1bHQ9bG9kYXNoRnVuYy5hcHBseShsb2Rhc2gsYXJyYXlQdXNoKFt2YWx1ZV0sYXJncykpO3JldHVybiBpc1Rha2VyICYmIGNoYWluQWxsP3Jlc3VsdFswXTpyZXN1bHQ7fTtpZih1c2VMYXp5ICYmIGNoZWNrSXRlcmF0ZWUgJiYgdHlwZW9mIGl0ZXJhdGVlID09IFwiZnVuY3Rpb25cIiAmJiBpdGVyYXRlZS5sZW5ndGggIT0gMSl7aXNMYXp5ID0gdXNlTGF6eSA9IGZhbHNlO312YXIgY2hhaW5BbGw9dGhpcy5fX2NoYWluX18saXNIeWJyaWQ9ISF0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCxpc1Vud3JhcHBlZD1yZXRVbndyYXBwZWQgJiYgIWNoYWluQWxsLG9ubHlMYXp5PWlzTGF6eSAmJiAhaXNIeWJyaWQ7aWYoIXJldFVud3JhcHBlZCAmJiB1c2VMYXp5KXt2YWx1ZSA9IG9ubHlMYXp5P3ZhbHVlOm5ldyBMYXp5V3JhcHBlcih0aGlzKTt2YXIgcmVzdWx0PWZ1bmMuYXBwbHkodmFsdWUsYXJncyk7cmVzdWx0Ll9fYWN0aW9uc19fLnB1c2goe2Z1bmM6dGhydSxhcmdzOltpbnRlcmNlcHRvcl0sdGhpc0FyZzp1bmRlZmluZWR9KTtyZXR1cm4gbmV3IExvZGFzaFdyYXBwZXIocmVzdWx0LGNoYWluQWxsKTt9aWYoaXNVbndyYXBwZWQgJiYgb25seUxhenkpe3JldHVybiBmdW5jLmFwcGx5KHRoaXMsYXJncyk7fXJlc3VsdCA9IHRoaXMudGhydShpbnRlcmNlcHRvcik7cmV0dXJuIGlzVW53cmFwcGVkP2lzVGFrZXI/cmVzdWx0LnZhbHVlKClbMF06cmVzdWx0LnZhbHVlKCk6cmVzdWx0O307fSk7YXJyYXlFYWNoKFtcInBvcFwiLFwicHVzaFwiLFwic2hpZnRcIixcInNvcnRcIixcInNwbGljZVwiLFwidW5zaGlmdFwiXSxmdW5jdGlvbihtZXRob2ROYW1lKXt2YXIgZnVuYz1hcnJheVByb3RvW21ldGhvZE5hbWVdLGNoYWluTmFtZT0vXig/OnB1c2h8c29ydHx1bnNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSk/XCJ0YXBcIjpcInRocnVcIixyZXRVbndyYXBwZWQ9L14oPzpwb3B8c2hpZnQpJC8udGVzdChtZXRob2ROYW1lKTtsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKXt2YXIgYXJncz1hcmd1bWVudHM7aWYocmV0VW53cmFwcGVkICYmICF0aGlzLl9fY2hhaW5fXyl7cmV0dXJuIGZ1bmMuYXBwbHkodGhpcy52YWx1ZSgpLGFyZ3MpO31yZXR1cm4gdGhpc1tjaGFpbk5hbWVdKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gZnVuYy5hcHBseSh2YWx1ZSxhcmdzKTt9KTt9O30pO2Jhc2VGb3JPd24oTGF6eVdyYXBwZXIucHJvdG90eXBlLGZ1bmN0aW9uKGZ1bmMsbWV0aG9kTmFtZSl7dmFyIGxvZGFzaEZ1bmM9bG9kYXNoW21ldGhvZE5hbWVdO2lmKGxvZGFzaEZ1bmMpe3ZhciBrZXk9bG9kYXNoRnVuYy5uYW1lICsgXCJcIixuYW1lcz1yZWFsTmFtZXNba2V5XSB8fCAocmVhbE5hbWVzW2tleV0gPSBbXSk7bmFtZXMucHVzaCh7bmFtZTptZXRob2ROYW1lLGZ1bmM6bG9kYXNoRnVuY30pO319KTtyZWFsTmFtZXNbY3JlYXRlSHlicmlkV3JhcHBlcih1bmRlZmluZWQsQklORF9LRVlfRkxBRykubmFtZV0gPSBbe25hbWU6XCJ3cmFwcGVyXCIsZnVuYzp1bmRlZmluZWR9XTtMYXp5V3JhcHBlci5wcm90b3R5cGUuY2xvbmUgPSBsYXp5Q2xvbmU7TGF6eVdyYXBwZXIucHJvdG90eXBlLnJldmVyc2UgPSBsYXp5UmV2ZXJzZTtMYXp5V3JhcHBlci5wcm90b3R5cGUudmFsdWUgPSBsYXp5VmFsdWU7bG9kYXNoLnByb3RvdHlwZS5hdCA9IHdyYXBwZXJBdDtsb2Rhc2gucHJvdG90eXBlLmNoYWluID0gd3JhcHBlckNoYWluO2xvZGFzaC5wcm90b3R5cGUuY29tbWl0ID0gd3JhcHBlckNvbW1pdDtsb2Rhc2gucHJvdG90eXBlLmZsYXRNYXAgPSB3cmFwcGVyRmxhdE1hcDtsb2Rhc2gucHJvdG90eXBlLm5leHQgPSB3cmFwcGVyTmV4dDtsb2Rhc2gucHJvdG90eXBlLnBsYW50ID0gd3JhcHBlclBsYW50O2xvZGFzaC5wcm90b3R5cGUucmV2ZXJzZSA9IHdyYXBwZXJSZXZlcnNlO2xvZGFzaC5wcm90b3R5cGUudG9KU09OID0gbG9kYXNoLnByb3RvdHlwZS52YWx1ZU9mID0gbG9kYXNoLnByb3RvdHlwZS52YWx1ZSA9IHdyYXBwZXJWYWx1ZTtpZihpdGVyYXRvclN5bWJvbCl7bG9kYXNoLnByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSB3cmFwcGVyVG9JdGVyYXRvcjt9cmV0dXJuIGxvZGFzaDt9dmFyIF89cnVuSW5Db250ZXh0KCk7KGZyZWVXaW5kb3cgfHwgZnJlZVNlbGYgfHwge30pLl8gPSBfO2lmKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBkZWZpbmUuYW1kID09IFwib2JqZWN0XCIgJiYgZGVmaW5lLmFtZCl7ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIF87fSk7fWVsc2UgaWYoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSl7aWYobW9kdWxlRXhwb3J0cyl7KGZyZWVNb2R1bGUuZXhwb3J0cyA9IF8pLl8gPSBfO31mcmVlRXhwb3J0cy5fID0gXzt9ZWxzZSB7cm9vdC5fID0gXzt9fSkuY2FsbCh1bmRlZmluZWQpO1xuXG5jYy5fUkZwb3AoKTsiLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnNjc5ZTQ0OVJweEN4YWlQaFdjZlhFSWYnLCAnbG9naW4nKTtcbi8vIGJpei9sb2dpbi9zY3JpcHQvbG9naW4uanNcblxudmFyIHF3ZXN0ID0gcmVxdWlyZSgncXdlc3QnKTtcbnZhciB1c2VyID0gcmVxdWlyZSgndXNlcicpO1xudmFyIGFwaSA9IHJlcXVpcmUoJ2FwaScpO1xuXG52YXIgYnRuQWN0aW9uID0ge1xuICAgIHNob3c6IGNjLm1vdmVUbygwLjUsIGNjLnAoNTQwLCAyODApKS5lYXNpbmcoY2MuZWFzZUluKDMuMCkpLFxuICAgIGhpZGU6IGNjLm1vdmVUbygwLjUsIGNjLnAoNTQwLCA0MjUpKS5lYXNpbmcoY2MuZWFzZUluKDMuMCkpXG59O1xuXG52YXIgbG9naW5Hcm91cEFjdGlvbiA9IHtcbiAgICBzaG93OiBjYy5tb3ZlVG8oMC41LCBjYy5wKDAsIC0xNTApKS5lYXNpbmcoY2MuZWFzZUluKDMuMCkpLFxuICAgIGhpZGU6IGNjLm1vdmVUbygwLjUsIGNjLnAoMCwgLTUwMCkpLmVhc2luZyhjYy5lYXNlSW4oMy4wKSlcbn07XG5cbnZhciByZWdpc3Rlckdyb3VwQWN0aW9uID0ge1xuICAgIHNob3c6IGNjLm1vdmVUbygwLjUsIGNjLnAoMCwgMCkpLmVhc2luZyhjYy5lYXNlSW4oMy4wKSksXG4gICAgaGlkZTogY2MubW92ZVRvKDAuNSwgY2MucCgwLCAtNjYwKSkuZWFzaW5nKGNjLmVhc2VJbigzLjApKVxufTtcblxuY2MuQ2xhc3Moe1xuICAgICdleHRlbmRzJzogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICB1c2VybmFtZToge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveFxuICAgICAgICB9LFxuXG4gICAgICAgIHBhc3N3b3JkOiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9naW5CdG46IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkJ1dHRvblxuICAgICAgICB9LFxuXG4gICAgICAgIHJlZ2lzdGVyQnRuQm94OiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG5cbiAgICAgICAgY2FuY2VsQnRuQm94OiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9naW5Hcm91cDoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlZ2lzdGVyR3JvdXA6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBvbkxvZ2luQnRuRW50ZXI6IGZ1bmN0aW9uIG9uTG9naW5CdG5FbnRlcigpIHtcbiAgICAgICAgYXBpLmxvZ2luKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLnN0cmluZyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLnN0cmluZ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB1c2VyLmluaXQoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnTWFpbicpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBhbGVydChlcnIuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbkNhbmNlbEJ0blRvZ2dsZTogZnVuY3Rpb24gb25DYW5jZWxCdG5Ub2dnbGUoKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdG5Cb3gucnVuQWN0aW9uKGJ0bkFjdGlvbi5zaG93KTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdG5Cb3gucnVuQWN0aW9uKGJ0bkFjdGlvbi5oaWRlKTtcbiAgICAgICAgdGhpcy5sb2dpbkdyb3VwLnJ1bkFjdGlvbihsb2dpbkdyb3VwQWN0aW9uLnNob3cpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyR3JvdXAucnVuQWN0aW9uKHJlZ2lzdGVyR3JvdXBBY3Rpb24uaGlkZSk7XG4gICAgfSxcblxuICAgIG9uUmVnaXN0ZXJCdG5Ub2dnbGU6IGZ1bmN0aW9uIG9uUmVnaXN0ZXJCdG5Ub2dnbGUoKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdG5Cb3gucnVuQWN0aW9uKGJ0bkFjdGlvbi5oaWRlKTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdG5Cb3gucnVuQWN0aW9uKGJ0bkFjdGlvbi5zaG93KTtcbiAgICAgICAgdGhpcy5sb2dpbkdyb3VwLnJ1bkFjdGlvbihsb2dpbkdyb3VwQWN0aW9uLmhpZGUpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyR3JvdXAucnVuQWN0aW9uKHJlZ2lzdGVyR3JvdXBBY3Rpb24uc2hvdyk7XG4gICAgfSxcblxuICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge30sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkdCkge31cbn0pO1xuXG5jYy5fUkZwb3AoKTsiLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnMzNjMjRRTFlacEdKSlFtUnlsM0U0akgnLCAnbWFpbicpO1xuLy8gYml6L21haW4vc2NyaXB0L21haW4uanNcblxudmFyIENvbm5lY3QgPSByZXF1aXJlKCdjb25uZWN0Jyk7XG5cbnZhciBjbG91ZEFjdGlvbiA9IGNjLmZhZGVPdXQoMS4wKTtcblxudmFyIGJ0bkFjdGlvbiA9IGNjLnNlcXVlbmNlKGNjLnNjYWxlVG8oMC4yNSwgMC44LCAxLjQpLmVhc2luZyhjYy5lYXNlSW5PdXQoMy4wKSksIGNjLnNjYWxlVG8oMC4yNSwgMSwgMSkuZWFzaW5nKGNjLmVhc2VJbk91dCgzLjApKSk7XG5cbmNjLkNsYXNzKHtcbiAgICAnZXh0ZW5kcyc6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdG9QbGF5QnRuOiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9FcXVpcEJ0bjoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsb3VkTWFzazoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5jbG91ZE1hc2subm9kZS5ydW5BY3Rpb24oY2xvdWRBY3Rpb24pO1xuXG4gICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBzZWxmLnRvUGxheUJ0bi5ydW5BY3Rpb24oYnRuQWN0aW9uKTtcbiAgICAgICAgLy8gfSwgNTAwKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgIHNlbGYudG9FcXVpcEJ0bi5ydW5BY3Rpb24oYnRuQWN0aW9uKTtcbiAgICAgICAgLy8gfSwgMTAwMCk7XG4gICAgfSxcblxuICAgIHRvUGxheUhhbmRsZXI6IGZ1bmN0aW9uIHRvUGxheUhhbmRsZXIoKSB7XG4gICAgICAgIENvbm5lY3QuY29ubmVjdCgpO1xuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0NvbnRyb2xsZXInKTtcbiAgICB9LFxuXG4gICAgdG9FcXVpcEhhbmRsZXI6IGZ1bmN0aW9uIHRvRXF1aXBIYW5kbGVyKCkge1xuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0VxdWlwJyk7XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGR0KSB7fVxufSk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICc4ZjUxM2R0T2w1RFM0ZklsVHFJSE9SdicsICdxd2VzdCcpO1xuLy8gbGliL3F3ZXN0LmpzXG5cbiEoZnVuY3Rpb24gKGUpIHtcbiAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IGUoKTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKSBkZWZpbmUoW10sIGUpO2Vsc2Uge1xuICAgIHZhciB0O3QgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBnbG9iYWwgPyBnbG9iYWwgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmID8gc2VsZiA6IHRoaXMsIHQucXdlc3QgPSBlKCk7XG4gIH1cbn0pKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LCBuLCBvKSB7XG4gICAgZnVuY3Rpb24gcihpLCBhKSB7XG4gICAgICBpZiAoIW5baV0pIHtcbiAgICAgICAgaWYgKCF0W2ldKSB7XG4gICAgICAgICAgdmFyIHAgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHJlcXVpcmUgJiYgcmVxdWlyZTtpZiAoIWEgJiYgcCkgcmV0dXJuIHAoaSwgITApO2lmIChzKSByZXR1cm4gcyhpLCAhMCk7dmFyIHUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgaSArIFwiJ1wiKTt0aHJvdyAodS5jb2RlID0gXCJNT0RVTEVfTk9UX0ZPVU5EXCIsIHUpO1xuICAgICAgICB9dmFyIGYgPSBuW2ldID0geyBleHBvcnRzOiB7fSB9O3RbaV1bMF0uY2FsbChmLmV4cG9ydHMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIG4gPSB0W2ldWzFdW2VdO3JldHVybiByKG4gPyBuIDogZSk7XG4gICAgICAgIH0sIGYsIGYuZXhwb3J0cywgZSwgdCwgbiwgbyk7XG4gICAgICB9cmV0dXJuIG5baV0uZXhwb3J0cztcbiAgICB9Zm9yICh2YXIgcyA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgcmVxdWlyZSAmJiByZXF1aXJlLCBpID0gMDsgaSA8IG8ubGVuZ3RoOyBpKyspIHIob1tpXSk7cmV0dXJuIHI7XG4gIH0pKHsgMTogW2Z1bmN0aW9uIChlLCB0LCBuKSB7XG4gICAgICAhKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO3ZhciBuID0gZnVuY3Rpb24gbihlKSB7XG4gICAgICAgICAgdmFyIHQgPSBmdW5jdGlvbiB0KGUsIF90LCBuKSB7XG4gICAgICAgICAgICBuID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBuID8gbigpIDogbnVsbCA9PT0gbiA/IFwiXCIgOiB2b2lkIDAgPT09IG4gPyBcIlwiIDogbiwgZVtlLmxlbmd0aF0gPSBlbmNvZGVVUklDb21wb25lbnQoX3QpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQobik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbiA9IGZ1bmN0aW9uIG4oZSwgbywgcikge1xuICAgICAgICAgICAgdmFyIHMsIGksIGE7aWYgKFwiW29iamVjdCBBcnJheV1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKSBmb3IgKHMgPSAwLCBpID0gby5sZW5ndGg7IGkgPiBzOyBzKyspIG4oZSArIFwiW1wiICsgKFwib2JqZWN0XCIgPT0gdHlwZW9mIG9bc10gPyBzIDogXCJcIikgKyBcIl1cIiwgb1tzXSwgcik7ZWxzZSBpZiAobyAmJiBcIltvYmplY3QgT2JqZWN0XVwiID09PSBvLnRvU3RyaW5nKCkpIGZvciAoYSBpbiBvKSBvLmhhc093blByb3BlcnR5KGEpICYmIChlID8gbihlICsgXCJbXCIgKyBhICsgXCJdXCIsIG9bYV0sIHIsIHQpIDogbihhLCBvW2FdLCByLCB0KSk7ZWxzZSBpZiAoZSkgdChyLCBlLCBvKTtlbHNlIGZvciAoYSBpbiBvKSB0KHIsIGEsIG9bYV0pO3JldHVybiByO1xuICAgICAgICAgIH07cmV0dXJuIG4oXCJcIiwgZSwgW10pLmpvaW4oXCImXCIpLnJlcGxhY2UoLyUyMC9nLCBcIitcIik7XG4gICAgICAgIH07XCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB0LmV4cG9ydHMgPyB0LmV4cG9ydHMgPSBuIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSA6IGUucGFyYW0gPSBuO1xuICAgICAgfSkodGhpcyk7XG4gICAgfSwge31dLCAyOiBbZnVuY3Rpb24gKGUsIHQsIG4pIHtcbiAgICAgICEoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZTtcbiAgICAgICAgfWZ1bmN0aW9uIG4oZSkge1xuICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlO1xuICAgICAgICB9ZnVuY3Rpb24gbyhlKSB7XG4gICAgICAgICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID8gc2V0SW1tZWRpYXRlKGUpIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBwcm9jZXNzLm5leHRUaWNrID8gcHJvY2Vzcy5uZXh0VGljayhlKSA6IHNldFRpbWVvdXQoZSwgMCk7XG4gICAgICAgIH12YXIgcjtlWzBdW2VbMV1dID0gZnVuY3Rpb24gcyhlKSB7XG4gICAgICAgICAgdmFyIGksXG4gICAgICAgICAgICAgIGEgPSBbXSxcbiAgICAgICAgICAgICAgcCA9IFtdLFxuICAgICAgICAgICAgICB1ID0gZnVuY3Rpb24gdShlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBpICYmIG51bGwgIT0gZSAmJiAoaSA9IGUsIGEgPSB0LCBwLmxlbmd0aCAmJiBvKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBwLmxlbmd0aDsgZSsrKSBwW2VdKCk7XG4gICAgICAgICAgICB9KSksIGk7XG4gICAgICAgICAgfTtyZXR1cm4gdS50aGVuID0gZnVuY3Rpb24gKHUsIGYpIHtcbiAgICAgICAgICAgIHZhciBkID0gcyhlKSxcbiAgICAgICAgICAgICAgICBjID0gZnVuY3Rpb24gYygpIHtcbiAgICAgICAgICAgICAgZnVuY3Rpb24gZShvKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMsXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwO3RyeSB7XG4gICAgICAgICAgICAgICAgICBpZiAobyAmJiAobihvKSB8fCB0KG8pKSAmJiB0KHMgPSBvLnRoZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvID09PSBkKSB0aHJvdyBuZXcgVHlwZUVycm9yKCk7cy5jYWxsKG8sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpKysgfHwgZS5hcHBseShyLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGkrKyB8fCBkKCExLCBbZV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBkKCEwLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgICAgICAgICAgICAgIGkrKyB8fCBkKCExLCBbYV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfXRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSBpID8gdSA6IGY7dChvKSA/IGUoby5hcHBseShyLCBhIHx8IFtdKSkgOiBkKGksIGEpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgICAgICAgZCghMSwgW3NdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtyZXR1cm4gbnVsbCAhPSBpID8gbyhjKSA6IHAucHVzaChjKSwgZDtcbiAgICAgICAgICB9LCBlICYmICh1ID0gZSh1KSksIHU7XG4gICAgICAgIH07XG4gICAgICB9KShcInVuZGVmaW5lZFwiID09IHR5cGVvZiB0ID8gW3dpbmRvdywgXCJwaW5reVN3ZWFyXCJdIDogW3QsIFwiZXhwb3J0c1wiXSk7XG4gICAgfSwge31dLCBxd2VzdDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsb2JhbCA9IHdpbmRvdyB8fCB0aGlzLFxuICAgICAgICAgICAgcGlua3lzd2VhciA9IF9kZXJlcV8oXCJwaW5reXN3ZWFyXCIpLFxuICAgICAgICAgICAganBhcmFtID0gX2RlcmVxXyhcImpxdWVyeS1wYXJhbVwiKSxcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25zID0ge30sXG4gICAgICAgICAgICBkZWZhdWx0WGRyUmVzcG9uc2VUeXBlID0gXCJqc29uXCIsXG4gICAgICAgICAgICBkZWZhdWx0RGF0YVR5cGUgPSBcInBvc3RcIixcbiAgICAgICAgICAgIF9saW1pdCA9IG51bGwsXG4gICAgICAgICAgICByZXF1ZXN0cyA9IDAsXG4gICAgICAgICAgICByZXF1ZXN0X3N0YWNrID0gW10sXG4gICAgICAgICAgICBnZXRYSFIgPSBnbG9iYWwuWE1MSHR0cFJlcXVlc3QgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIHhocjIgPSBcIlwiID09PSBnZXRYSFIoKS5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICBxd2VzdCA9IGZ1bmN0aW9uIHF3ZXN0KG1ldGhvZCwgdXJsLCBkYXRhLCBvcHRpb25zLCBiZWZvcmUpIHtcbiAgICAgICAgICBtZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKSwgZGF0YSA9IGRhdGEgfHwgbnVsbCwgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307Zm9yICh2YXIgbmFtZSBpbiBkZWZhdWx0T3B0aW9ucykgaWYgKCEobmFtZSBpbiBvcHRpb25zKSkgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGRlZmF1bHRPcHRpb25zW25hbWVdICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIG9wdGlvbnNbbmFtZV0pIGZvciAodmFyIG5hbWUyIGluIGRlZmF1bHRPcHRpb25zW25hbWVdKSBvcHRpb25zW25hbWVdW25hbWUyXSA9IGRlZmF1bHRPcHRpb25zW25hbWVdW25hbWUyXTtlbHNlIG9wdGlvbnNbbmFtZV0gPSBkZWZhdWx0T3B0aW9uc1tuYW1lXTt2YXIgbmF0aXZlUmVzcG9uc2VQYXJzaW5nID0gITEsXG4gICAgICAgICAgICAgIGNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgICB4aHIsXG4gICAgICAgICAgICAgIHhkciA9ICExLFxuICAgICAgICAgICAgICB0aW1lb3V0SW50ZXJ2YWwsXG4gICAgICAgICAgICAgIGFib3J0ZWQgPSAhMSxcbiAgICAgICAgICAgICAgYXR0ZW1wdHMgPSAwLFxuICAgICAgICAgICAgICBoZWFkZXJzID0ge30sXG4gICAgICAgICAgICAgIG1pbWVUeXBlcyA9IHsgdGV4dDogXCIqLypcIiwgeG1sOiBcInRleHQveG1sXCIsIGpzb246IFwiYXBwbGljYXRpb24vanNvblwiLCBwb3N0OiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBkb2N1bWVudDogXCJ0ZXh0L2h0bWxcIiB9LFxuICAgICAgICAgICAgICBhY2NlcHQgPSB7IHRleHQ6IFwiKi8qXCIsIHhtbDogXCJhcHBsaWNhdGlvbi94bWw7IHE9MS4wLCB0ZXh0L3htbDsgcT0wLjgsICovKjsgcT0wLjFcIiwganNvbjogXCJhcHBsaWNhdGlvbi9qc29uOyBxPTEuMCwgdGV4dC8qOyBxPTAuOCwgKi8qOyBxPTAuMVwiIH0sXG4gICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgIGosXG4gICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgICBzZW5kaW5nID0gITEsXG4gICAgICAgICAgICAgIGRlbGF5ZWQgPSAhMSxcbiAgICAgICAgICAgICAgdGltZW91dF9zdGFydCxcbiAgICAgICAgICAgICAgcHJvbWlzZSA9IHBpbmt5c3dlYXIoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB4aHIgJiYgKHhoci5hYm9ydCgpLCAtLXJlcXVlc3RzLCBhYm9ydGVkID0gITApO1xuICAgICAgICAgICAgfSwgZS5zZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoIXNlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdHMgPT0gX2xpbWl0KSByZXR1cm4gdm9pZCByZXF1ZXN0X3N0YWNrLnB1c2goZSk7aWYgKGFib3J0ZWQpIHJldHVybiB2b2lkIChyZXF1ZXN0X3N0YWNrLmxlbmd0aCAmJiByZXF1ZXN0X3N0YWNrLnNoaWZ0KCkuc2VuZCgpKTtpZiAoKCsrcmVxdWVzdHMsIHNlbmRpbmcgPSAhMCwgdGltZW91dF9zdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCB4aHIgPSBnZXRYSFIoKSwgY3Jvc3NPcmlnaW4gJiYgKFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyIHx8ICFnbG9iYWwuWERvbWFpblJlcXVlc3QgfHwgKHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpLCB4ZHIgPSAhMCwgXCJHRVRcIiAhPSBtZXRob2QgJiYgXCJQT1NUXCIgIT0gbWV0aG9kICYmIChtZXRob2QgPSBcIlBPU1RcIikpKSwgeGRyID8geGhyLm9wZW4obWV0aG9kLCB1cmwpIDogKHhoci5vcGVuKG1ldGhvZCwgdXJsLCBvcHRpb25zLmFzeW5jLCBvcHRpb25zLnVzZXIsIG9wdGlvbnMucGFzc3dvcmQpLCB4aHIyICYmIG9wdGlvbnMuYXN5bmMgJiYgKHhoci53aXRoQ3JlZGVudGlhbHMgPSBvcHRpb25zLndpdGhDcmVkZW50aWFscykpLCAheGRyKSkgZm9yICh2YXIgdCBpbiBoZWFkZXJzKSBoZWFkZXJzW3RdICYmIHhoci5zZXRSZXF1ZXN0SGVhZGVyKHQsIGhlYWRlcnNbdF0pO2lmICh4aHIyICYmIFwiYXV0b1wiICE9IG9wdGlvbnMucmVzcG9uc2VUeXBlKSB0cnkge1xuICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlLCBuYXRpdmVSZXNwb25zZVBhcnNpbmcgPSB4aHIucmVzcG9uc2VUeXBlID09IG9wdGlvbnMucmVzcG9uc2VUeXBlO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKG4pIHt9eGhyMiB8fCB4ZHIgPyAoeGhyLm9ubG9hZCA9IGhhbmRsZVJlc3BvbnNlLCB4aHIub25lcnJvciA9IGhhbmRsZUVycm9yKSA6IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICA0ID09IHhoci5yZWFkeVN0YXRlICYmIGhhbmRsZVJlc3BvbnNlKCk7XG4gICAgICAgICAgICAgICAgfSwgXCJhdXRvXCIgIT0gb3B0aW9ucy5yZXNwb25zZVR5cGUgJiYgXCJvdmVycmlkZU1pbWVUeXBlXCIgaW4geGhyICYmIHhoci5vdmVycmlkZU1pbWVUeXBlKG1pbWVUeXBlc1tvcHRpb25zLnJlc3BvbnNlVHlwZV0pLCBiZWZvcmUgJiYgYmVmb3JlKHhociksIHhkciA/ICh4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHt9LCB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24gKCkge30sIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge30sIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoXCJHRVRcIiAhPSBtZXRob2QgPyBkYXRhIDogbnVsbCk7XG4gICAgICAgICAgICAgICAgfSwgMCkpIDogeGhyLnNlbmQoXCJHRVRcIiAhPSBtZXRob2QgPyBkYXRhIDogbnVsbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGU7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgICAgIGhhbmRsZVJlc3BvbnNlID0gZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoKSB7XG4gICAgICAgICAgICB2YXIgaSwgcmVzcG9uc2VUeXBlO2lmICgoLS1yZXF1ZXN0cywgc2VuZGluZyA9ICExLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRpbWVvdXRfc3RhcnQgPj0gb3B0aW9ucy50aW1lb3V0KSkgcmV0dXJuIHZvaWQgKG9wdGlvbnMuYXR0ZW1wdHMgJiYgKythdHRlbXB0cyA9PSBvcHRpb25zLmF0dGVtcHRzID8gcHJvbWlzZSghMSwgW25ldyBFcnJvcihcIlRpbWVvdXQgKFwiICsgdXJsICsgXCIpXCIpLCB4aHIsIHJlc3BvbnNlXSkgOiBwcm9taXNlLnNlbmQoKSk7cmVxdWVzdF9zdGFjay5sZW5ndGggJiYgcmVxdWVzdF9zdGFjay5zaGlmdCgpLnNlbmQoKTt0cnkge1xuICAgICAgICAgICAgICBpZiAobmF0aXZlUmVzcG9uc2VQYXJzaW5nICYmIFwicmVzcG9uc2VcIiBpbiB4aHIgJiYgbnVsbCAhPT0geGhyLnJlc3BvbnNlKSByZXNwb25zZSA9IHhoci5yZXNwb25zZTtlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoKHJlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlLCBcImF1dG9cIiA9PSByZXNwb25zZVR5cGUpKSBpZiAoeGRyKSByZXNwb25zZVR5cGUgPSBkZWZhdWx0WGRyUmVzcG9uc2VUeXBlO2Vsc2Uge1xuICAgICAgICAgICAgICAgICAgdmFyIGN0ID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpIHx8IFwiXCI7cmVzcG9uc2VUeXBlID0gY3QuaW5kZXhPZihtaW1lVHlwZXMuanNvbikgPiAtMSA/IFwianNvblwiIDogY3QuaW5kZXhPZihtaW1lVHlwZXMueG1sKSA+IC0xID8gXCJ4bWxcIiA6IFwidGV4dFwiO1xuICAgICAgICAgICAgICAgIH1zd2l0Y2ggKHJlc3BvbnNlVHlwZSkge2Nhc2UgXCJqc29uXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0Lmxlbmd0aCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IFwiSlNPTlwiIGluIGdsb2JhbCA/IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkgOiBldmFsKFwiKFwiICsgeGhyLnJlc3BvbnNlVGV4dCArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiRXJyb3Igd2hpbGUgcGFyc2luZyBKU09OIGJvZHkgOiBcIiArIGU7XG4gICAgICAgICAgICAgICAgICAgIH1icmVhaztjYXNlIFwieG1sXCI6XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLkRPTVBhcnNlciA/IHJlc3BvbnNlID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4aHIucmVzcG9uc2VUZXh0LCBcInRleHQveG1sXCIpIDogKHJlc3BvbnNlID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpLCByZXNwb25zZS5hc3luYyA9IFwiZmFsc2VcIiwgcmVzcG9uc2UubG9hZFhNTCh4aHIucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgfWlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmRvY3VtZW50RWxlbWVudCB8fCByZXNwb25zZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCkgdGhyb3cgXCJJbnZhbGlkIFhNTFwiO2JyZWFrO2RlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDt9XG4gICAgICAgICAgICAgIH1pZiAoXCJzdGF0dXNcIiBpbiB4aHIgJiYgIS9eMnwxMjIzLy50ZXN0KHhoci5zdGF0dXMpKSB0aHJvdyB4aHIuc3RhdHVzICsgXCIgKFwiICsgeGhyLnN0YXR1c1RleHQgKyBcIilcIjtwcm9taXNlKCEwLCBbeGhyLCByZXNwb25zZV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBwcm9taXNlKCExLCBbZSwgeGhyLCByZXNwb25zZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGhhbmRsZUVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoZSkge1xuICAgICAgICAgICAgLS1yZXF1ZXN0cywgcHJvbWlzZSghMSwgW25ldyBFcnJvcihcIkNvbm5lY3Rpb24gYWJvcnRlZFwiKSwgeGhyLCBudWxsXSk7XG4gICAgICAgICAgfTtpZiAoKG9wdGlvbnMuYXN5bmMgPSBcImFzeW5jXCIgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5hc3luYyA6ICEwLCBvcHRpb25zLmNhY2hlID0gXCJjYWNoZVwiIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMuY2FjaGUgOiAhMSwgb3B0aW9ucy5kYXRhVHlwZSA9IFwiZGF0YVR5cGVcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5kYXRhVHlwZS50b0xvd2VyQ2FzZSgpIDogZGVmYXVsdERhdGFUeXBlLCBvcHRpb25zLnJlc3BvbnNlVHlwZSA9IFwicmVzcG9uc2VUeXBlXCIgaW4gb3B0aW9ucyA/IG9wdGlvbnMucmVzcG9uc2VUeXBlLnRvTG93ZXJDYXNlKCkgOiBcImF1dG9cIiwgb3B0aW9ucy51c2VyID0gb3B0aW9ucy51c2VyIHx8IFwiXCIsIG9wdGlvbnMucGFzc3dvcmQgPSBvcHRpb25zLnBhc3N3b3JkIHx8IFwiXCIsIG9wdGlvbnMud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFscywgb3B0aW9ucy50aW1lb3V0ID0gXCJ0aW1lb3V0XCIgaW4gb3B0aW9ucyA/IHBhcnNlSW50KG9wdGlvbnMudGltZW91dCwgMTApIDogM2U0LCBvcHRpb25zLmF0dGVtcHRzID0gXCJhdHRlbXB0c1wiIGluIG9wdGlvbnMgPyBwYXJzZUludChvcHRpb25zLmF0dGVtcHRzLCAxMCkgOiAxLCBpID0gdXJsLm1hdGNoKC9cXC9cXC8oLis/KVxcLy8pLCBjcm9zc09yaWdpbiA9IGkgJiYgKGlbMV0gPyBpWzFdICE9IGxvY2F0aW9uLmhvc3QgOiAhMSksIFwiQXJyYXlCdWZmZXJcIiBpbiBnbG9iYWwgJiYgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gb3B0aW9ucy5kYXRhVHlwZSA9IFwiYXJyYXlidWZmZXJcIiA6IFwiQmxvYlwiIGluIGdsb2JhbCAmJiBkYXRhIGluc3RhbmNlb2YgQmxvYiA/IG9wdGlvbnMuZGF0YVR5cGUgPSBcImJsb2JcIiA6IFwiRG9jdW1lbnRcIiBpbiBnbG9iYWwgJiYgZGF0YSBpbnN0YW5jZW9mIERvY3VtZW50ID8gb3B0aW9ucy5kYXRhVHlwZSA9IFwiZG9jdW1lbnRcIiA6IFwiRm9ybURhdGFcIiBpbiBnbG9iYWwgJiYgZGF0YSBpbnN0YW5jZW9mIEZvcm1EYXRhICYmIChvcHRpb25zLmRhdGFUeXBlID0gXCJmb3JtZGF0YVwiKSwgbnVsbCAhPT0gZGF0YSkpIHN3aXRjaCAob3B0aW9ucy5kYXRhVHlwZSkge2Nhc2UgXCJqc29uXCI6XG4gICAgICAgICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTticmVhaztjYXNlIFwicG9zdFwiOlxuICAgICAgICAgICAgICBkYXRhID0ganBhcmFtKGRhdGEpO31pZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gZnVuY3Rpb24gZm9ybWF0KGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHQgKyBuLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9O2ZvciAoaSBpbiBvcHRpb25zLmhlYWRlcnMpIGhlYWRlcnNbaS5yZXBsYWNlKC8oXnwtKShbXi1dKS9nLCBmb3JtYXQpXSA9IG9wdGlvbnMuaGVhZGVyc1tpXTtcbiAgICAgICAgICB9cmV0dXJuIFwiQ29udGVudC1UeXBlXCIgaW4gaGVhZGVycyB8fCBcIkdFVFwiID09IG1ldGhvZCB8fCBvcHRpb25zLmRhdGFUeXBlIGluIG1pbWVUeXBlcyAmJiBtaW1lVHlwZXNbb3B0aW9ucy5kYXRhVHlwZV0gJiYgKGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBtaW1lVHlwZXNbb3B0aW9ucy5kYXRhVHlwZV0pLCBoZWFkZXJzLkFjY2VwdCB8fCAoaGVhZGVycy5BY2NlcHQgPSBvcHRpb25zLnJlc3BvbnNlVHlwZSBpbiBhY2NlcHQgPyBhY2NlcHRbb3B0aW9ucy5yZXNwb25zZVR5cGVdIDogXCIqLypcIiksIGNyb3NzT3JpZ2luIHx8IFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIGluIGhlYWRlcnMgfHwgKGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiKSwgb3B0aW9ucy5jYWNoZSB8fCBcIkNhY2hlLUNvbnRyb2xcIiBpbiBoZWFkZXJzIHx8IChoZWFkZXJzW1wiQ2FjaGUtQ29udHJvbFwiXSA9IFwibm8tY2FjaGVcIiksIFwiR0VUXCIgPT0gbWV0aG9kICYmIGRhdGEgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZGF0YSAmJiAodXJsICs9ICgvXFw/Ly50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIGRhdGEpLCBvcHRpb25zLmFzeW5jICYmIHByb21pc2Uuc2VuZCgpLCBwcm9taXNlO1xuICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0TmV3UHJvbWlzZSA9IGZ1bmN0aW9uIGdldE5ld1Byb21pc2UoZSkge1xuICAgICAgICAgIHZhciB0ID0gW10sXG4gICAgICAgICAgICAgIG4gPSAwLFxuICAgICAgICAgICAgICBvID0gW107cmV0dXJuIHBpbmt5c3dlYXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgIHZhciBzID0gLTEsXG4gICAgICAgICAgICAgICAgaSA9IGZ1bmN0aW9uIGkoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGksIGEsIHAsIHUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9ICsrcztyZXR1cm4gKytuLCB0LnB1c2gocXdlc3QoZSwgci5iYXNlICsgaSwgYSwgcCwgdSkudGhlbihmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgb1tmXSA9IGFyZ3VtZW50cywgLS1uIHx8IHIoITAsIDEgPT0gby5sZW5ndGggPyBvWzBdIDogW29dKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICByKCExLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH0pKSwgcjtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07ci5nZXQgPSBpKFwiR0VUXCIpLCByLnBvc3QgPSBpKFwiUE9TVFwiKSwgci5wdXQgPSBpKFwiUFVUXCIpLCByW1wiZGVsZXRlXCJdID0gaShcIkRFTEVURVwiKSwgcltcImNhdGNoXCJdID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbihudWxsLCBlKTtcbiAgICAgICAgICAgIH0sIHIuY29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB2YXIgdCA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICAgICAgZSgpO1xuICAgICAgICAgICAgICB9O3JldHVybiByLnRoZW4odCwgdCk7XG4gICAgICAgICAgICB9LCByLm1hcCA9IGZ1bmN0aW9uIChlLCB0LCBuLCBvLCByKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpKGUudG9VcHBlckNhc2UoKSkuY2FsbCh0aGlzLCB0LCBuLCBvLCByKTtcbiAgICAgICAgICAgIH07Zm9yICh2YXIgYSBpbiBlKSBhIGluIHIgfHwgKHJbYV0gPSBlW2FdKTtyZXR1cm4gci5zZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgbiA9IHQubGVuZ3RoOyBuID4gZTsgKytlKSB0W2VdLnNlbmQoKTtyZXR1cm4gcjtcbiAgICAgICAgICAgIH0sIHIuYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBuID0gdC5sZW5ndGg7IG4gPiBlOyArK2UpIHRbZV0uYWJvcnQoKTtyZXR1cm4gcjtcbiAgICAgICAgICAgIH0sIHI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgICAgICBxID0geyBiYXNlOiBcIlwiLCBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXROZXdQcm9taXNlKHEpLmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0sIHBvc3Q6IGZ1bmN0aW9uIHBvc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TmV3UHJvbWlzZShxKS5wb3N0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfSwgcHV0OiBmdW5jdGlvbiBwdXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TmV3UHJvbWlzZShxKS5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LCBcImRlbGV0ZVwiOiBmdW5jdGlvbiBfZGVsZXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE5ld1Byb21pc2UocSlbXCJkZWxldGVcIl0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9LCBtYXA6IGZ1bmN0aW9uIG1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXROZXdQcm9taXNlKHEpLm1hcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0sIHhocjI6IHhocjIsIGxpbWl0OiBmdW5jdGlvbiBsaW1pdChlKSB7XG4gICAgICAgICAgICByZXR1cm4gX2xpbWl0ID0gZSwgcTtcbiAgICAgICAgICB9LCBzZXREZWZhdWx0T3B0aW9uczogZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb25zID0gZSwgcTtcbiAgICAgICAgICB9LCBzZXREZWZhdWx0WGRyUmVzcG9uc2VUeXBlOiBmdW5jdGlvbiBzZXREZWZhdWx0WGRyUmVzcG9uc2VUeXBlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0WGRyUmVzcG9uc2VUeXBlID0gZS50b0xvd2VyQ2FzZSgpLCBxO1xuICAgICAgICAgIH0sIHNldERlZmF1bHREYXRhVHlwZTogZnVuY3Rpb24gc2V0RGVmYXVsdERhdGFUeXBlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RGF0YVR5cGUgPSBlLnRvTG93ZXJDYXNlKCksIHE7XG4gICAgICAgICAgfSwgZ2V0T3BlblJlcXVlc3RzOiBmdW5jdGlvbiBnZXRPcGVuUmVxdWVzdHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdHM7XG4gICAgICAgICAgfSB9O3JldHVybiBxO1xuICAgICAgfSkoKTtcbiAgICB9LCB7IFwianF1ZXJ5LXBhcmFtXCI6IDEsIHBpbmt5c3dlYXI6IDIgfV0gfSwge30sIFsxLCAyXSkoXCJxd2VzdFwiKTtcbn0pO1xuXG5jYy5fUkZwb3AoKTsiLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnNTJkN2UxcmhEWk9PWURoSnZkSjkybjcnLCAncmVnaXN0ZXInKTtcbi8vIGJpei9sb2dpbi9zY3JpcHQvcmVnaXN0ZXIuanNcblxudmFyIGFwaSA9IHJlcXVpcmUoJ2FwaScpO1xudmFyIHVzZXIgPSByZXF1aXJlKCd1c2VyJyk7XG5cbmNjLkNsYXNzKHtcbiAgICAnZXh0ZW5kcyc6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkVkaXRCb3hcbiAgICAgICAgfSxcblxuICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgICAgJ2RlZmF1bHQnOiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveFxuICAgICAgICB9LFxuXG4gICAgICAgIG5pY2tuYW1lOiB7XG4gICAgICAgICAgICAnZGVmYXVsdCc6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgb25SZWdpc3RlckJ0bkVudGVyOiBmdW5jdGlvbiBvblJlZ2lzdGVyQnRuRW50ZXIoKSB7XG4gICAgICAgIGFwaS5yZWdpc3Rlcih7XG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZS5zdHJpbmcsXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZC5zdHJpbmcsXG4gICAgICAgICAgICBuaWNrbmFtZTogdGhpcy5uaWNrbmFtZS5zdHJpbmdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdXNlci5pbml0KGRhdGEuZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnTWFpbicpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBhbGVydChlcnIuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHt9XG5cbn0pO1xuXG5jYy5fUkZwb3AoKTsiLCJcInVzZSBzdHJpY3RcIjtcbmNjLl9SRnB1c2gobW9kdWxlLCAnMzQyNzU2cFBsdFB2SXRpS3VkN3p1Y0QnLCAnc29ja2V0LmlvJyk7XG4vLyBsaWIvc29ja2V0LmlvLmpzXG5cblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGYpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGYoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGc7aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGcgPSB3aW5kb3c7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBnID0gZ2xvYmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGcgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICBnID0gdGhpcztcbiAgICB9Zy5pbyA9IGYoKTtcbiAgfVxufSkoZnVuY3Rpb24gKCkge1xuICB2YXIgZGVmaW5lLCBtb2R1bGUsIGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsIG4sIHIpIHtcbiAgICBmdW5jdGlvbiBzKG8sIHUpIHtcbiAgICAgIGlmICghbltvXSkge1xuICAgICAgICBpZiAoIXRbb10pIHtcbiAgICAgICAgICB2YXIgYSA9IHR5cGVvZiByZXF1aXJlID09IFwiZnVuY3Rpb25cIiAmJiByZXF1aXJlO2lmICghdSAmJiBhKSByZXR1cm4gYShvLCAhMCk7aWYgKGkpIHJldHVybiBpKG8sICEwKTt2YXIgZiA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyBvICsgXCInXCIpO3Rocm93IChmLmNvZGUgPSBcIk1PRFVMRV9OT1RfRk9VTkRcIiwgZik7XG4gICAgICAgIH12YXIgbCA9IG5bb10gPSB7IGV4cG9ydHM6IHt9IH07dFtvXVswXS5jYWxsKGwuZXhwb3J0cywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07cmV0dXJuIHMobiA/IG4gOiBlKTtcbiAgICAgICAgfSwgbCwgbC5leHBvcnRzLCBlLCB0LCBuLCByKTtcbiAgICAgIH1yZXR1cm4gbltvXS5leHBvcnRzO1xuICAgIH12YXIgaSA9IHR5cGVvZiByZXF1aXJlID09IFwiZnVuY3Rpb25cIiAmJiByZXF1aXJlO2ZvciAodmFyIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykgcyhyW29dKTtyZXR1cm4gcztcbiAgfSkoeyAxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfZGVyZXFfKFwiLi9saWIvXCIpO1xuICAgIH0sIHsgXCIuL2xpYi9cIjogMiB9XSwgMjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gX2RlcmVxXyhcIi4vc29ja2V0XCIpO21vZHVsZS5leHBvcnRzLnBhcnNlciA9IF9kZXJlcV8oXCJlbmdpbmUuaW8tcGFyc2VyXCIpO1xuICAgIH0sIHsgXCIuL3NvY2tldFwiOiAzLCBcImVuZ2luZS5pby1wYXJzZXJcIjogMTkgfV0sIDM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IF9kZXJlcV8oXCIuL3RyYW5zcG9ydHNcIik7dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7dmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwiZW5naW5lLmlvLWNsaWVudDpzb2NrZXRcIik7dmFyIGluZGV4ID0gX2RlcmVxXyhcImluZGV4b2ZcIik7dmFyIHBhcnNlciA9IF9kZXJlcV8oXCJlbmdpbmUuaW8tcGFyc2VyXCIpO3ZhciBwYXJzZXVyaSA9IF9kZXJlcV8oXCJwYXJzZXVyaVwiKTt2YXIgcGFyc2Vqc29uID0gX2RlcmVxXyhcInBhcnNlanNvblwiKTt2YXIgcGFyc2VxcyA9IF9kZXJlcV8oXCJwYXJzZXFzXCIpO21vZHVsZS5leHBvcnRzID0gU29ja2V0O2Z1bmN0aW9uIG5vb3AoKSB7fWZ1bmN0aW9uIFNvY2tldCh1cmksIG9wdHMpIHtcbiAgICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU29ja2V0KSkgcmV0dXJuIG5ldyBTb2NrZXQodXJpLCBvcHRzKTtvcHRzID0gb3B0cyB8fCB7fTtpZiAodXJpICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHVyaSkge1xuICAgICAgICAgICAgb3B0cyA9IHVyaTt1cmkgPSBudWxsO1xuICAgICAgICAgIH1pZiAodXJpKSB7XG4gICAgICAgICAgICB1cmkgPSBwYXJzZXVyaSh1cmkpO29wdHMuaG9zdG5hbWUgPSB1cmkuaG9zdDtvcHRzLnNlY3VyZSA9IHVyaS5wcm90b2NvbCA9PSBcImh0dHBzXCIgfHwgdXJpLnByb3RvY29sID09IFwid3NzXCI7b3B0cy5wb3J0ID0gdXJpLnBvcnQ7aWYgKHVyaS5xdWVyeSkgb3B0cy5xdWVyeSA9IHVyaS5xdWVyeTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuaG9zdCkge1xuICAgICAgICAgICAgb3B0cy5ob3N0bmFtZSA9IHBhcnNldXJpKG9wdHMuaG9zdCkuaG9zdDtcbiAgICAgICAgICB9dGhpcy5zZWN1cmUgPSBudWxsICE9IG9wdHMuc2VjdXJlID8gb3B0cy5zZWN1cmUgOiBnbG9iYWwubG9jYXRpb24gJiYgXCJodHRwczpcIiA9PSBsb2NhdGlvbi5wcm90b2NvbDtpZiAob3B0cy5ob3N0bmFtZSAmJiAhb3B0cy5wb3J0KSB7XG4gICAgICAgICAgICBvcHRzLnBvcnQgPSB0aGlzLnNlY3VyZSA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgICAgICAgfXRoaXMuYWdlbnQgPSBvcHRzLmFnZW50IHx8IGZhbHNlO3RoaXMuaG9zdG5hbWUgPSBvcHRzLmhvc3RuYW1lIHx8IChnbG9iYWwubG9jYXRpb24gPyBsb2NhdGlvbi5ob3N0bmFtZSA6IFwibG9jYWxob3N0XCIpO3RoaXMucG9ydCA9IG9wdHMucG9ydCB8fCAoZ2xvYmFsLmxvY2F0aW9uICYmIGxvY2F0aW9uLnBvcnQgPyBsb2NhdGlvbi5wb3J0IDogdGhpcy5zZWN1cmUgPyA0NDMgOiA4MCk7dGhpcy5xdWVyeSA9IG9wdHMucXVlcnkgfHwge307aWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHRoaXMucXVlcnkpIHRoaXMucXVlcnkgPSBwYXJzZXFzLmRlY29kZSh0aGlzLnF1ZXJ5KTt0aGlzLnVwZ3JhZGUgPSBmYWxzZSAhPT0gb3B0cy51cGdyYWRlO3RoaXMucGF0aCA9IChvcHRzLnBhdGggfHwgXCIvZW5naW5lLmlvXCIpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSArIFwiL1wiO3RoaXMuZm9yY2VKU09OUCA9ICEhb3B0cy5mb3JjZUpTT05QO3RoaXMuanNvbnAgPSBmYWxzZSAhPT0gb3B0cy5qc29ucDt0aGlzLmZvcmNlQmFzZTY0ID0gISFvcHRzLmZvcmNlQmFzZTY0O3RoaXMuZW5hYmxlc1hEUiA9ICEhb3B0cy5lbmFibGVzWERSO3RoaXMudGltZXN0YW1wUGFyYW0gPSBvcHRzLnRpbWVzdGFtcFBhcmFtIHx8IFwidFwiO3RoaXMudGltZXN0YW1wUmVxdWVzdHMgPSBvcHRzLnRpbWVzdGFtcFJlcXVlc3RzO3RoaXMudHJhbnNwb3J0cyA9IG9wdHMudHJhbnNwb3J0cyB8fCBbXCJwb2xsaW5nXCIsIFwid2Vic29ja2V0XCJdO3RoaXMucmVhZHlTdGF0ZSA9IFwiXCI7dGhpcy53cml0ZUJ1ZmZlciA9IFtdO3RoaXMucG9saWN5UG9ydCA9IG9wdHMucG9saWN5UG9ydCB8fCA4NDM7dGhpcy5yZW1lbWJlclVwZ3JhZGUgPSBvcHRzLnJlbWVtYmVyVXBncmFkZSB8fCBmYWxzZTt0aGlzLmJpbmFyeVR5cGUgPSBudWxsO3RoaXMub25seUJpbmFyeVVwZ3JhZGVzID0gb3B0cy5vbmx5QmluYXJ5VXBncmFkZXM7dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IGZhbHNlICE9PSBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlID8gb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSB8fCB7fSA6IGZhbHNlO2lmICh0cnVlID09PSB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlKSB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlID0ge307aWYgKHRoaXMucGVyTWVzc2FnZURlZmxhdGUgJiYgbnVsbCA9PSB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQgPSAxMDI0O1xuICAgICAgICAgIH10aGlzLnBmeCA9IG9wdHMucGZ4IHx8IG51bGw7dGhpcy5rZXkgPSBvcHRzLmtleSB8fCBudWxsO3RoaXMucGFzc3BocmFzZSA9IG9wdHMucGFzc3BocmFzZSB8fCBudWxsO3RoaXMuY2VydCA9IG9wdHMuY2VydCB8fCBudWxsO3RoaXMuY2EgPSBvcHRzLmNhIHx8IG51bGw7dGhpcy5jaXBoZXJzID0gb3B0cy5jaXBoZXJzIHx8IG51bGw7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdHMucmVqZWN0VW5hdXRob3JpemVkO3ZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbDtpZiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLmV4dHJhSGVhZGVycyAmJiBPYmplY3Qua2V5cyhvcHRzLmV4dHJhSGVhZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH10aGlzLm9wZW4oKTtcbiAgICAgICAgfVNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtFbWl0dGVyKFNvY2tldC5wcm90b3R5cGUpO1NvY2tldC5wcm90b2NvbCA9IHBhcnNlci5wcm90b2NvbDtTb2NrZXQuU29ja2V0ID0gU29ja2V0O1NvY2tldC5UcmFuc3BvcnQgPSBfZGVyZXFfKFwiLi90cmFuc3BvcnRcIik7U29ja2V0LnRyYW5zcG9ydHMgPSBfZGVyZXFfKFwiLi90cmFuc3BvcnRzXCIpO1NvY2tldC5wYXJzZXIgPSBfZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTtTb2NrZXQucHJvdG90eXBlLmNyZWF0ZVRyYW5zcG9ydCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgZGVidWcoJ2NyZWF0aW5nIHRyYW5zcG9ydCBcIiVzXCInLCBuYW1lKTt2YXIgcXVlcnkgPSBjbG9uZSh0aGlzLnF1ZXJ5KTtxdWVyeS5FSU8gPSBwYXJzZXIucHJvdG9jb2w7cXVlcnkudHJhbnNwb3J0ID0gbmFtZTtpZiAodGhpcy5pZCkgcXVlcnkuc2lkID0gdGhpcy5pZDt2YXIgdHJhbnNwb3J0ID0gbmV3IHRyYW5zcG9ydHNbbmFtZV0oeyBhZ2VudDogdGhpcy5hZ2VudCwgaG9zdG5hbWU6IHRoaXMuaG9zdG5hbWUsIHBvcnQ6IHRoaXMucG9ydCwgc2VjdXJlOiB0aGlzLnNlY3VyZSwgcGF0aDogdGhpcy5wYXRoLCBxdWVyeTogcXVlcnksIGZvcmNlSlNPTlA6IHRoaXMuZm9yY2VKU09OUCwganNvbnA6IHRoaXMuanNvbnAsIGZvcmNlQmFzZTY0OiB0aGlzLmZvcmNlQmFzZTY0LCBlbmFibGVzWERSOiB0aGlzLmVuYWJsZXNYRFIsIHRpbWVzdGFtcFJlcXVlc3RzOiB0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLCB0aW1lc3RhbXBQYXJhbTogdGhpcy50aW1lc3RhbXBQYXJhbSwgcG9saWN5UG9ydDogdGhpcy5wb2xpY3lQb3J0LCBzb2NrZXQ6IHRoaXMsIHBmeDogdGhpcy5wZngsIGtleTogdGhpcy5rZXksIHBhc3NwaHJhc2U6IHRoaXMucGFzc3BocmFzZSwgY2VydDogdGhpcy5jZXJ0LCBjYTogdGhpcy5jYSwgY2lwaGVyczogdGhpcy5jaXBoZXJzLCByZWplY3RVbmF1dGhvcml6ZWQ6IHRoaXMucmVqZWN0VW5hdXRob3JpemVkLCBwZXJNZXNzYWdlRGVmbGF0ZTogdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSwgZXh0cmFIZWFkZXJzOiB0aGlzLmV4dHJhSGVhZGVycyB9KTtyZXR1cm4gdHJhbnNwb3J0O1xuICAgICAgICB9O2Z1bmN0aW9uIGNsb25lKG9iaikge1xuICAgICAgICAgIHZhciBvID0ge307Zm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgb1tpXSA9IG9ialtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9cmV0dXJuIG87XG4gICAgICAgIH1Tb2NrZXQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHRyYW5zcG9ydDtpZiAodGhpcy5yZW1lbWJlclVwZ3JhZGUgJiYgU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyAmJiB0aGlzLnRyYW5zcG9ydHMuaW5kZXhPZihcIndlYnNvY2tldFwiKSAhPSAtMSkge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gXCJ3ZWJzb2NrZXRcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKDAgPT09IHRoaXMudHJhbnNwb3J0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgXCJObyB0cmFuc3BvcnRzIGF2YWlsYWJsZVwiKTtcbiAgICAgICAgICAgIH0sIDApO3JldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gdGhpcy50cmFuc3BvcnRzWzBdO1xuICAgICAgICAgIH10aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5pbmdcIjt0cnkge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gdGhpcy5jcmVhdGVUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKTt0aGlzLm9wZW4oKTtyZXR1cm47XG4gICAgICAgICAgfXRyYW5zcG9ydC5vcGVuKCk7dGhpcy5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLnNldFRyYW5zcG9ydCA9IGZ1bmN0aW9uICh0cmFuc3BvcnQpIHtcbiAgICAgICAgICBkZWJ1ZyhcInNldHRpbmcgdHJhbnNwb3J0ICVzXCIsIHRyYW5zcG9ydC5uYW1lKTt2YXIgc2VsZiA9IHRoaXM7aWYgKHRoaXMudHJhbnNwb3J0KSB7XG4gICAgICAgICAgICBkZWJ1ZyhcImNsZWFyaW5nIGV4aXN0aW5nIHRyYW5zcG9ydCAlc1wiLCB0aGlzLnRyYW5zcG9ydC5uYW1lKTt0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICB9dGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7dHJhbnNwb3J0Lm9uKFwiZHJhaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5vbkRyYWluKCk7XG4gICAgICAgICAgfSkub24oXCJwYWNrZXRcIiwgZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICAgICAgc2VsZi5vblBhY2tldChwYWNrZXQpO1xuICAgICAgICAgIH0pLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHNlbGYub25FcnJvcihlKTtcbiAgICAgICAgICB9KS5vbihcImNsb3NlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYub25DbG9zZShcInRyYW5zcG9ydCBjbG9zZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLnByb2JlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICBkZWJ1ZygncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJywgbmFtZSk7dmFyIHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KG5hbWUsIHsgcHJvYmU6IDEgfSksXG4gICAgICAgICAgICAgIGZhaWxlZCA9IGZhbHNlLFxuICAgICAgICAgICAgICBzZWxmID0gdGhpcztTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7ZnVuY3Rpb24gb25UcmFuc3BvcnRPcGVuKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYub25seUJpbmFyeVVwZ3JhZGVzKSB7XG4gICAgICAgICAgICAgIHZhciB1cGdyYWRlTG9zZXNCaW5hcnkgPSAhdGhpcy5zdXBwb3J0c0JpbmFyeSAmJiBzZWxmLnRyYW5zcG9ydC5zdXBwb3J0c0JpbmFyeTtmYWlsZWQgPSBmYWlsZWQgfHwgdXBncmFkZUxvc2VzQmluYXJ5O1xuICAgICAgICAgICAgfWlmIChmYWlsZWQpIHJldHVybjtkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBvcGVuZWQnLCBuYW1lKTt0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInBpbmdcIiwgZGF0YTogXCJwcm9iZVwiIH1dKTt0cmFuc3BvcnQub25jZShcInBhY2tldFwiLCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAgIGlmIChmYWlsZWQpIHJldHVybjtpZiAoXCJwb25nXCIgPT0gbXNnLnR5cGUgJiYgXCJwcm9iZVwiID09IG1zZy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgcG9uZycsIG5hbWUpO3NlbGYudXBncmFkaW5nID0gdHJ1ZTtzZWxmLmVtaXQoXCJ1cGdyYWRpbmdcIiwgdHJhbnNwb3J0KTtpZiAoIXRyYW5zcG9ydCkgcmV0dXJuO1NvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBcIndlYnNvY2tldFwiID09IHRyYW5zcG9ydC5uYW1lO2RlYnVnKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0IFwiJXNcIicsIHNlbGYudHJhbnNwb3J0Lm5hbWUpO3NlbGYudHJhbnNwb3J0LnBhdXNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChmYWlsZWQpIHJldHVybjtpZiAoXCJjbG9zZWRcIiA9PSBzZWxmLnJlYWR5U3RhdGUpIHJldHVybjtkZWJ1ZyhcImNoYW5naW5nIHRyYW5zcG9ydCBhbmQgc2VuZGluZyB1cGdyYWRlIHBhY2tldFwiKTtjbGVhbnVwKCk7c2VsZi5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTt0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInVwZ3JhZGVcIiB9XSk7c2VsZi5lbWl0KFwidXBncmFkZVwiLCB0cmFuc3BvcnQpO3RyYW5zcG9ydCA9IG51bGw7c2VsZi51cGdyYWRpbmcgPSBmYWxzZTtzZWxmLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgZmFpbGVkJywgbmFtZSk7dmFyIGVyciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yXCIpO2Vyci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtzZWxmLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWZ1bmN0aW9uIGZyZWV6ZVRyYW5zcG9ydCgpIHtcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHJldHVybjtmYWlsZWQgPSB0cnVlO2NsZWFudXAoKTt0cmFuc3BvcnQuY2xvc2UoKTt0cmFuc3BvcnQgPSBudWxsO1xuICAgICAgICAgIH1mdW5jdGlvbiBvbmVycm9yKGVycikge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKFwicHJvYmUgZXJyb3I6IFwiICsgZXJyKTtlcnJvci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtmcmVlemVUcmFuc3BvcnQoKTtkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQgYmVjYXVzZSBvZiBlcnJvcjogJXMnLCBuYW1lLCBlcnIpO3NlbGYuZW1pdChcInVwZ3JhZGVFcnJvclwiLCBlcnJvcik7XG4gICAgICAgICAgfWZ1bmN0aW9uIG9uVHJhbnNwb3J0Q2xvc2UoKSB7XG4gICAgICAgICAgICBvbmVycm9yKFwidHJhbnNwb3J0IGNsb3NlZFwiKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICAgICAgICAgIG9uZXJyb3IoXCJzb2NrZXQgY2xvc2VkXCIpO1xuICAgICAgICAgIH1mdW5jdGlvbiBvbnVwZ3JhZGUodG8pIHtcbiAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgJiYgdG8ubmFtZSAhPSB0cmFuc3BvcnQubmFtZSkge1xuICAgICAgICAgICAgICBkZWJ1ZygnXCIlc1wiIHdvcmtzIC0gYWJvcnRpbmcgXCIlc1wiJywgdG8ubmFtZSwgdHJhbnNwb3J0Lm5hbWUpO2ZyZWV6ZVRyYW5zcG9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1mdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICAgICAgdHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKFwib3BlblwiLCBvblRyYW5zcG9ydE9wZW4pO3RyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIG9uZXJyb3IpO3RyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsIG9uVHJhbnNwb3J0Q2xvc2UpO3NlbGYucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvbmNsb3NlKTtzZWxmLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkaW5nXCIsIG9udXBncmFkZSk7XG4gICAgICAgICAgfXRyYW5zcG9ydC5vbmNlKFwib3BlblwiLCBvblRyYW5zcG9ydE9wZW4pO3RyYW5zcG9ydC5vbmNlKFwiZXJyb3JcIiwgb25lcnJvcik7dHJhbnNwb3J0Lm9uY2UoXCJjbG9zZVwiLCBvblRyYW5zcG9ydENsb3NlKTt0aGlzLm9uY2UoXCJjbG9zZVwiLCBvbmNsb3NlKTt0aGlzLm9uY2UoXCJ1cGdyYWRpbmdcIiwgb251cGdyYWRlKTt0cmFuc3BvcnQub3BlbigpO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUub25PcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRlYnVnKFwic29ja2V0IG9wZW5cIik7dGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuXCI7U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IFwid2Vic29ja2V0XCIgPT0gdGhpcy50cmFuc3BvcnQubmFtZTt0aGlzLmVtaXQoXCJvcGVuXCIpO3RoaXMuZmx1c2goKTtpZiAoXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlICYmIHRoaXMudXBncmFkZSAmJiB0aGlzLnRyYW5zcG9ydC5wYXVzZSkge1xuICAgICAgICAgICAgZGVidWcoXCJzdGFydGluZyB1cGdyYWRlIHByb2Jlc1wiKTtmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMudXBncmFkZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgIHRoaXMucHJvYmUodGhpcy51cGdyYWRlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUub25QYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIGRlYnVnKCdzb2NrZXQgcmVjZWl2ZTogdHlwZSBcIiVzXCIsIGRhdGEgXCIlc1wiJywgcGFja2V0LnR5cGUsIHBhY2tldC5kYXRhKTt0aGlzLmVtaXQoXCJwYWNrZXRcIiwgcGFja2V0KTt0aGlzLmVtaXQoXCJoZWFydGJlYXRcIik7c3dpdGNoIChwYWNrZXQudHlwZSkge2Nhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhhbmRzaGFrZShwYXJzZWpzb24ocGFja2V0LmRhdGEpKTticmVhaztjYXNlIFwicG9uZ1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGluZygpO3RoaXMuZW1pdChcInBvbmdcIik7YnJlYWs7Y2FzZSBcImVycm9yXCI6XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihcInNlcnZlciBlcnJvclwiKTtlcnIuY29kZSA9IHBhY2tldC5kYXRhO3RoaXMub25FcnJvcihlcnIpO2JyZWFrO2Nhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZGF0YVwiLCBwYWNrZXQuZGF0YSk7dGhpcy5lbWl0KFwibWVzc2FnZVwiLCBwYWNrZXQuZGF0YSk7YnJlYWs7fVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWJ1ZygncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJywgdGhpcy5yZWFkeVN0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbkhhbmRzaGFrZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiaGFuZHNoYWtlXCIsIGRhdGEpO3RoaXMuaWQgPSBkYXRhLnNpZDt0aGlzLnRyYW5zcG9ydC5xdWVyeS5zaWQgPSBkYXRhLnNpZDt0aGlzLnVwZ3JhZGVzID0gdGhpcy5maWx0ZXJVcGdyYWRlcyhkYXRhLnVwZ3JhZGVzKTt0aGlzLnBpbmdJbnRlcnZhbCA9IGRhdGEucGluZ0ludGVydmFsO3RoaXMucGluZ1RpbWVvdXQgPSBkYXRhLnBpbmdUaW1lb3V0O3RoaXMub25PcGVuKCk7aWYgKFwiY2xvc2VkXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSByZXR1cm47dGhpcy5zZXRQaW5nKCk7dGhpcy5yZW1vdmVMaXN0ZW5lcihcImhlYXJ0YmVhdFwiLCB0aGlzLm9uSGVhcnRiZWF0KTt0aGlzLm9uKFwiaGVhcnRiZWF0XCIsIHRoaXMub25IZWFydGJlYXQpO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUub25IZWFydGJlYXQgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO3ZhciBzZWxmID0gdGhpcztzZWxmLnBpbmdUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChcImNsb3NlZFwiID09IHNlbGYucmVhZHlTdGF0ZSkgcmV0dXJuO3NlbGYub25DbG9zZShcInBpbmcgdGltZW91dFwiKTtcbiAgICAgICAgICB9LCB0aW1lb3V0IHx8IHNlbGYucGluZ0ludGVydmFsICsgc2VsZi5waW5nVGltZW91dCk7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5zZXRQaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztjbGVhclRpbWVvdXQoc2VsZi5waW5nSW50ZXJ2YWxUaW1lcik7c2VsZi5waW5nSW50ZXJ2YWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVidWcoXCJ3cml0aW5nIHBpbmcgcGFja2V0IC0gZXhwZWN0aW5nIHBvbmcgd2l0aGluICVzbXNcIiwgc2VsZi5waW5nVGltZW91dCk7c2VsZi5waW5nKCk7c2VsZi5vbkhlYXJ0YmVhdChzZWxmLnBpbmdUaW1lb3V0KTtcbiAgICAgICAgICB9LCBzZWxmLnBpbmdJbnRlcnZhbCk7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5waW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpczt0aGlzLnNlbmRQYWNrZXQoXCJwaW5nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuZW1pdChcInBpbmdcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbkRyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMud3JpdGVCdWZmZXIuc3BsaWNlKDAsIHRoaXMucHJldkJ1ZmZlckxlbik7dGhpcy5wcmV2QnVmZmVyTGVuID0gMDtpZiAoMCA9PT0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChcImRyYWluXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKFwiY2xvc2VkXCIgIT0gdGhpcy5yZWFkeVN0YXRlICYmIHRoaXMudHJhbnNwb3J0LndyaXRhYmxlICYmICF0aGlzLnVwZ3JhZGluZyAmJiB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVidWcoXCJmbHVzaGluZyAlZCBwYWNrZXRzIGluIHNvY2tldFwiLCB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCk7dGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLndyaXRlQnVmZmVyKTt0aGlzLnByZXZCdWZmZXJMZW4gPSB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aDt0aGlzLmVtaXQoXCJmbHVzaFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07U29ja2V0LnByb3RvdHlwZS53cml0ZSA9IFNvY2tldC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChtc2csIG9wdGlvbnMsIGZuKSB7XG4gICAgICAgICAgdGhpcy5zZW5kUGFja2V0KFwibWVzc2FnZVwiLCBtc2csIG9wdGlvbnMsIGZuKTtyZXR1cm4gdGhpcztcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLnNlbmRQYWNrZXQgPSBmdW5jdGlvbiAodHlwZSwgZGF0YSwgb3B0aW9ucywgZm4pIHtcbiAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBkYXRhKSB7XG4gICAgICAgICAgICBmbiA9IGRhdGE7ZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9aWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgZm4gPSBvcHRpb25zO29wdGlvbnMgPSBudWxsO1xuICAgICAgICAgIH1pZiAoXCJjbG9zaW5nXCIgPT0gdGhpcy5yZWFkeVN0YXRlIHx8IFwiY2xvc2VkXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfW9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O29wdGlvbnMuY29tcHJlc3MgPSBmYWxzZSAhPT0gb3B0aW9ucy5jb21wcmVzczt2YXIgcGFja2V0ID0geyB0eXBlOiB0eXBlLCBkYXRhOiBkYXRhLCBvcHRpb25zOiBvcHRpb25zIH07dGhpcy5lbWl0KFwicGFja2V0Q3JlYXRlXCIsIHBhY2tldCk7dGhpcy53cml0ZUJ1ZmZlci5wdXNoKHBhY2tldCk7aWYgKGZuKSB0aGlzLm9uY2UoXCJmbHVzaFwiLCBmbik7dGhpcy5mbHVzaCgpO1xuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2luZ1wiO3ZhciBzZWxmID0gdGhpcztpZiAodGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5vbmNlKFwiZHJhaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwZ3JhZGluZykge1xuICAgICAgICAgICAgICAgICAgd2FpdEZvclVwZ3JhZGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVwZ3JhZGluZykge1xuICAgICAgICAgICAgICB3YWl0Rm9yVXBncmFkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9ZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgICBzZWxmLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIik7ZGVidWcoXCJzb2NrZXQgY2xvc2luZyAtIHRlbGxpbmcgdHJhbnNwb3J0IHRvIGNsb3NlXCIpO3NlbGYudHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgfWZ1bmN0aW9uIGNsZWFudXBBbmRDbG9zZSgpIHtcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlXCIsIGNsZWFudXBBbmRDbG9zZSk7c2VsZi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVFcnJvclwiLCBjbGVhbnVwQW5kQ2xvc2UpO2Nsb3NlKCk7XG4gICAgICAgICAgfWZ1bmN0aW9uIHdhaXRGb3JVcGdyYWRlKCkge1xuICAgICAgICAgICAgc2VsZi5vbmNlKFwidXBncmFkZVwiLCBjbGVhbnVwQW5kQ2xvc2UpO3NlbGYub25jZShcInVwZ3JhZGVFcnJvclwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgZGVidWcoXCJzb2NrZXQgZXJyb3IgJWpcIiwgZXJyKTtTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7dGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTt0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAocmVhc29uLCBkZXNjKSB7XG4gICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgXCJjbG9zaW5nXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICBkZWJ1Zygnc29ja2V0IGNsb3NlIHdpdGggcmVhc29uOiBcIiVzXCInLCByZWFzb24pO3ZhciBzZWxmID0gdGhpcztjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lcik7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKFwiY2xvc2VcIik7dGhpcy50cmFuc3BvcnQuY2xvc2UoKTt0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO3RoaXMuaWQgPSBudWxsO3RoaXMuZW1pdChcImNsb3NlXCIsIHJlYXNvbiwgZGVzYyk7c2VsZi53cml0ZUJ1ZmZlciA9IFtdO3NlbGYucHJldkJ1ZmZlckxlbiA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9O1NvY2tldC5wcm90b3R5cGUuZmlsdGVyVXBncmFkZXMgPSBmdW5jdGlvbiAodXBncmFkZXMpIHtcbiAgICAgICAgICB2YXIgZmlsdGVyZWRVcGdyYWRlcyA9IFtdO2ZvciAodmFyIGkgPSAwLCBqID0gdXBncmFkZXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICBpZiAofmluZGV4KHRoaXMudHJhbnNwb3J0cywgdXBncmFkZXNbaV0pKSBmaWx0ZXJlZFVwZ3JhZGVzLnB1c2godXBncmFkZXNbaV0pO1xuICAgICAgICAgIH1yZXR1cm4gZmlsdGVyZWRVcGdyYWRlcztcbiAgICAgICAgfTtcbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBcIi4vdHJhbnNwb3J0XCI6IDQsIFwiLi90cmFuc3BvcnRzXCI6IDUsIFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMTUsIGRlYnVnOiAxNywgXCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5LCBpbmRleG9mOiAyMywgcGFyc2Vqc29uOiAyNiwgcGFyc2VxczogMjcsIHBhcnNldXJpOiAyOCB9XSwgNDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciBwYXJzZXIgPSBfZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTt2YXIgRW1pdHRlciA9IF9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTttb2R1bGUuZXhwb3J0cyA9IFRyYW5zcG9ydDtmdW5jdGlvbiBUcmFuc3BvcnQob3B0cykge1xuICAgICAgICB0aGlzLnBhdGggPSBvcHRzLnBhdGg7dGhpcy5ob3N0bmFtZSA9IG9wdHMuaG9zdG5hbWU7dGhpcy5wb3J0ID0gb3B0cy5wb3J0O3RoaXMuc2VjdXJlID0gb3B0cy5zZWN1cmU7dGhpcy5xdWVyeSA9IG9wdHMucXVlcnk7dGhpcy50aW1lc3RhbXBQYXJhbSA9IG9wdHMudGltZXN0YW1wUGFyYW07dGhpcy50aW1lc3RhbXBSZXF1ZXN0cyA9IG9wdHMudGltZXN0YW1wUmVxdWVzdHM7dGhpcy5yZWFkeVN0YXRlID0gXCJcIjt0aGlzLmFnZW50ID0gb3B0cy5hZ2VudCB8fCBmYWxzZTt0aGlzLnNvY2tldCA9IG9wdHMuc29ja2V0O3RoaXMuZW5hYmxlc1hEUiA9IG9wdHMuZW5hYmxlc1hEUjt0aGlzLnBmeCA9IG9wdHMucGZ4O3RoaXMua2V5ID0gb3B0cy5rZXk7dGhpcy5wYXNzcGhyYXNlID0gb3B0cy5wYXNzcGhyYXNlO3RoaXMuY2VydCA9IG9wdHMuY2VydDt0aGlzLmNhID0gb3B0cy5jYTt0aGlzLmNpcGhlcnMgPSBvcHRzLmNpcGhlcnM7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDt0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO1xuICAgICAgfUVtaXR0ZXIoVHJhbnNwb3J0LnByb3RvdHlwZSk7VHJhbnNwb3J0LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKG1zZywgZGVzYykge1xuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7ZXJyLnR5cGUgPSBcIlRyYW5zcG9ydEVycm9yXCI7ZXJyLmRlc2NyaXB0aW9uID0gZGVzYzt0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnIpO3JldHVybiB0aGlzO1xuICAgICAgfTtUcmFuc3BvcnQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcImNsb3NlZFwiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIlwiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlbmluZ1wiO3RoaXMuZG9PcGVuKCk7XG4gICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFwib3BlbmluZ1wiID09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLmRvQ2xvc2UoKTt0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgfXJldHVybiB0aGlzO1xuICAgICAgfTtUcmFuc3BvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAocGFja2V0cykge1xuICAgICAgICBpZiAoXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgdGhpcy53cml0ZShwYWNrZXRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc3BvcnQgbm90IG9wZW5cIik7XG4gICAgICAgIH1cbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5vbk9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO3RoaXMud3JpdGFibGUgPSB0cnVlO3RoaXMuZW1pdChcIm9wZW5cIik7XG4gICAgICB9O1RyYW5zcG9ydC5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHBhY2tldCA9IHBhcnNlci5kZWNvZGVQYWNrZXQoZGF0YSwgdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSk7dGhpcy5vblBhY2tldChwYWNrZXQpO1xuICAgICAgfTtUcmFuc3BvcnQucHJvdG90eXBlLm9uUGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICB0aGlzLmVtaXQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICAgIH07VHJhbnNwb3J0LnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO3RoaXMuZW1pdChcImNsb3NlXCIpO1xuICAgICAgfTtcbiAgICB9LCB7IFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMTUsIFwiZW5naW5lLmlvLXBhcnNlclwiOiAxOSB9XSwgNTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBYTUxIdHRwUmVxdWVzdCA9IF9kZXJlcV8oXCJ4bWxodHRwcmVxdWVzdC1zc2xcIik7dmFyIFhIUiA9IF9kZXJlcV8oXCIuL3BvbGxpbmcteGhyXCIpO3ZhciBKU09OUCA9IF9kZXJlcV8oXCIuL3BvbGxpbmctanNvbnBcIik7dmFyIHdlYnNvY2tldCA9IF9kZXJlcV8oXCIuL3dlYnNvY2tldFwiKTtleHBvcnRzLnBvbGxpbmcgPSBwb2xsaW5nO2V4cG9ydHMud2Vic29ja2V0ID0gd2Vic29ja2V0O2Z1bmN0aW9uIHBvbGxpbmcob3B0cykge1xuICAgICAgICAgIHZhciB4aHI7dmFyIHhkID0gZmFsc2U7dmFyIHhzID0gZmFsc2U7dmFyIGpzb25wID0gZmFsc2UgIT09IG9wdHMuanNvbnA7aWYgKGdsb2JhbC5sb2NhdGlvbikge1xuICAgICAgICAgICAgdmFyIGlzU1NMID0gXCJodHRwczpcIiA9PSBsb2NhdGlvbi5wcm90b2NvbDt2YXIgcG9ydCA9IGxvY2F0aW9uLnBvcnQ7aWYgKCFwb3J0KSB7XG4gICAgICAgICAgICAgIHBvcnQgPSBpc1NTTCA/IDQ0MyA6IDgwO1xuICAgICAgICAgICAgfXhkID0gb3B0cy5ob3N0bmFtZSAhPSBsb2NhdGlvbi5ob3N0bmFtZSB8fCBwb3J0ICE9IG9wdHMucG9ydDt4cyA9IG9wdHMuc2VjdXJlICE9IGlzU1NMO1xuICAgICAgICAgIH1vcHRzLnhkb21haW4gPSB4ZDtvcHRzLnhzY2hlbWUgPSB4czt4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qob3B0cyk7aWYgKFwib3BlblwiIGluIHhociAmJiAhb3B0cy5mb3JjZUpTT05QKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhIUihvcHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFqc29ucCkgdGhyb3cgbmV3IEVycm9yKFwiSlNPTlAgZGlzYWJsZWRcIik7cmV0dXJuIG5ldyBKU09OUChvcHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBcIi4vcG9sbGluZy1qc29ucFwiOiA2LCBcIi4vcG9sbGluZy14aHJcIjogNywgXCIuL3dlYnNvY2tldFwiOiA5LCBcInhtbGh0dHByZXF1ZXN0LXNzbFwiOiAxMCB9XSwgNjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBQb2xsaW5nID0gX2RlcmVxXyhcIi4vcG9sbGluZ1wiKTt2YXIgaW5oZXJpdCA9IF9kZXJlcV8oXCJjb21wb25lbnQtaW5oZXJpdFwiKTttb2R1bGUuZXhwb3J0cyA9IEpTT05QUG9sbGluZzt2YXIgck5ld2xpbmUgPSAvXFxuL2c7dmFyIHJFc2NhcGVkTmV3bGluZSA9IC9cXFxcbi9nO3ZhciBjYWxsYmFja3M7dmFyIGluZGV4ID0gMDtmdW5jdGlvbiBlbXB0eSgpIHt9ZnVuY3Rpb24gSlNPTlBQb2xsaW5nKG9wdHMpIHtcbiAgICAgICAgICBQb2xsaW5nLmNhbGwodGhpcywgb3B0cyk7dGhpcy5xdWVyeSA9IHRoaXMucXVlcnkgfHwge307aWYgKCFjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGlmICghZ2xvYmFsLl9fX2VpbykgZ2xvYmFsLl9fX2VpbyA9IFtdO2NhbGxiYWNrcyA9IGdsb2JhbC5fX19laW87XG4gICAgICAgICAgfXRoaXMuaW5kZXggPSBjYWxsYmFja3MubGVuZ3RoO3ZhciBzZWxmID0gdGhpcztjYWxsYmFja3MucHVzaChmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICBzZWxmLm9uRGF0YShtc2cpO1xuICAgICAgICAgIH0pO3RoaXMucXVlcnkuaiA9IHRoaXMuaW5kZXg7aWYgKGdsb2JhbC5kb2N1bWVudCAmJiBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoc2VsZi5zY3JpcHQpIHNlbGYuc2NyaXB0Lm9uZXJyb3IgPSBlbXB0eTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1pbmhlcml0KEpTT05QUG9sbGluZywgUG9sbGluZyk7SlNPTlBQb2xsaW5nLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeSA9IGZhbHNlO0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9DbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcy5zY3JpcHQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO3RoaXMuc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICB9aWYgKHRoaXMuZm9ybSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5mb3JtKTt0aGlzLmZvcm0gPSBudWxsO3RoaXMuaWZyYW1lID0gbnVsbDtcbiAgICAgICAgICB9UG9sbGluZy5wcm90b3R5cGUuZG9DbG9zZS5jYWxsKHRoaXMpO1xuICAgICAgICB9O0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Qb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpczt2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtpZiAodGhpcy5zY3JpcHQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO3RoaXMuc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICB9c2NyaXB0LmFzeW5jID0gdHJ1ZTtzY3JpcHQuc3JjID0gdGhpcy51cmkoKTtzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzZWxmLm9uRXJyb3IoXCJqc29ucCBwb2xsIGVycm9yXCIsIGUpO1xuICAgICAgICAgIH07dmFyIGluc2VydEF0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIilbMF07aWYgKGluc2VydEF0KSB7XG4gICAgICAgICAgICBpbnNlcnRBdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIGluc2VydEF0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICB9dGhpcy5zY3JpcHQgPSBzY3JpcHQ7dmFyIGlzVUFnZWNrbyA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIG5hdmlnYXRvciAmJiAvZ2Vja28vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO2lmIChpc1VBZ2Vja28pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07SlNPTlBQb2xsaW5nLnByb3RvdHlwZS5kb1dyaXRlID0gZnVuY3Rpb24gKGRhdGEsIGZuKSB7XG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO2lmICghdGhpcy5mb3JtKSB7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO3ZhciBhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO3ZhciBpZCA9IHRoaXMuaWZyYW1lSWQgPSBcImVpb19pZnJhbWVfXCIgKyB0aGlzLmluZGV4O3ZhciBpZnJhbWU7Zm9ybS5jbGFzc05hbWUgPSBcInNvY2tldGlvXCI7Zm9ybS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtmb3JtLnN0eWxlLnRvcCA9IFwiLTEwMDBweFwiO2Zvcm0uc3R5bGUubGVmdCA9IFwiLTEwMDBweFwiO2Zvcm0udGFyZ2V0ID0gaWQ7Zm9ybS5tZXRob2QgPSBcIlBPU1RcIjtmb3JtLnNldEF0dHJpYnV0ZShcImFjY2VwdC1jaGFyc2V0XCIsIFwidXRmLThcIik7YXJlYS5uYW1lID0gXCJkXCI7Zm9ybS5hcHBlbmRDaGlsZChhcmVhKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO3RoaXMuZm9ybSA9IGZvcm07dGhpcy5hcmVhID0gYXJlYTtcbiAgICAgICAgICB9dGhpcy5mb3JtLmFjdGlvbiA9IHRoaXMudXJpKCk7ZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgICBpbml0SWZyYW1lKCk7Zm4oKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gaW5pdElmcmFtZSgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmlmcmFtZSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNlbGYuZm9ybS5yZW1vdmVDaGlsZChzZWxmLmlmcmFtZSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm9uRXJyb3IoXCJqc29ucCBwb2xsaW5nIGlmcmFtZSByZW1vdmFsIGVycm9yXCIsIGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9dHJ5IHtcbiAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGlmcmFtZSBzcmM9XCJqYXZhc2NyaXB0OjBcIiBuYW1lPVwiJyArIHNlbGYuaWZyYW1lSWQgKyAnXCI+JztpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2lmcmFtZS5uYW1lID0gc2VsZi5pZnJhbWVJZDtpZnJhbWUuc3JjID0gXCJqYXZhc2NyaXB0OjBcIjtcbiAgICAgICAgICAgIH1pZnJhbWUuaWQgPSBzZWxmLmlmcmFtZUlkO3NlbGYuZm9ybS5hcHBlbmRDaGlsZChpZnJhbWUpO3NlbGYuaWZyYW1lID0gaWZyYW1lO1xuICAgICAgICAgIH1pbml0SWZyYW1lKCk7ZGF0YSA9IGRhdGEucmVwbGFjZShyRXNjYXBlZE5ld2xpbmUsIFwiXFxcXFxcblwiKTt0aGlzLmFyZWEudmFsdWUgPSBkYXRhLnJlcGxhY2Uock5ld2xpbmUsIFwiXFxcXG5cIik7dHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fWlmICh0aGlzLmlmcmFtZS5hdHRhY2hFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoc2VsZi5pZnJhbWUucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlmcmFtZS5vbmxvYWQgPSBjb21wbGV0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL3BvbGxpbmdcIjogOCwgXCJjb21wb25lbnQtaW5oZXJpdFwiOiAxNiB9XSwgNzogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBYTUxIdHRwUmVxdWVzdCA9IF9kZXJlcV8oXCJ4bWxodHRwcmVxdWVzdC1zc2xcIik7dmFyIFBvbGxpbmcgPSBfZGVyZXFfKFwiLi9wb2xsaW5nXCIpO3ZhciBFbWl0dGVyID0gX2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciBpbmhlcml0ID0gX2RlcmVxXyhcImNvbXBvbmVudC1pbmhlcml0XCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZy14aHJcIik7bW9kdWxlLmV4cG9ydHMgPSBYSFI7bW9kdWxlLmV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7ZnVuY3Rpb24gZW1wdHkoKSB7fWZ1bmN0aW9uIFhIUihvcHRzKSB7XG4gICAgICAgICAgUG9sbGluZy5jYWxsKHRoaXMsIG9wdHMpO2lmIChnbG9iYWwubG9jYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBpc1NTTCA9IFwiaHR0cHM6XCIgPT0gbG9jYXRpb24ucHJvdG9jb2w7dmFyIHBvcnQgPSBsb2NhdGlvbi5wb3J0O2lmICghcG9ydCkge1xuICAgICAgICAgICAgICBwb3J0ID0gaXNTU0wgPyA0NDMgOiA4MDtcbiAgICAgICAgICAgIH10aGlzLnhkID0gb3B0cy5ob3N0bmFtZSAhPSBnbG9iYWwubG9jYXRpb24uaG9zdG5hbWUgfHwgcG9ydCAhPSBvcHRzLnBvcnQ7dGhpcy54cyA9IG9wdHMuc2VjdXJlICE9IGlzU1NMO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgfWluaGVyaXQoWEhSLCBQb2xsaW5nKTtYSFIucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5ID0gdHJ1ZTtYSFIucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O29wdHMudXJpID0gdGhpcy51cmkoKTtvcHRzLnhkID0gdGhpcy54ZDtvcHRzLnhzID0gdGhpcy54cztvcHRzLmFnZW50ID0gdGhpcy5hZ2VudCB8fCBmYWxzZTtvcHRzLnN1cHBvcnRzQmluYXJ5ID0gdGhpcy5zdXBwb3J0c0JpbmFyeTtvcHRzLmVuYWJsZXNYRFIgPSB0aGlzLmVuYWJsZXNYRFI7b3B0cy5wZnggPSB0aGlzLnBmeDtvcHRzLmtleSA9IHRoaXMua2V5O29wdHMucGFzc3BocmFzZSA9IHRoaXMucGFzc3BocmFzZTtvcHRzLmNlcnQgPSB0aGlzLmNlcnQ7b3B0cy5jYSA9IHRoaXMuY2E7b3B0cy5jaXBoZXJzID0gdGhpcy5jaXBoZXJzO29wdHMucmVqZWN0VW5hdXRob3JpemVkID0gdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ7b3B0cy5leHRyYUhlYWRlcnMgPSB0aGlzLmV4dHJhSGVhZGVycztyZXR1cm4gbmV3IFJlcXVlc3Qob3B0cyk7XG4gICAgICAgIH07WEhSLnByb3RvdHlwZS5kb1dyaXRlID0gZnVuY3Rpb24gKGRhdGEsIGZuKSB7XG4gICAgICAgICAgdmFyIGlzQmluYXJ5ID0gdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgJiYgZGF0YSAhPT0gdW5kZWZpbmVkO3ZhciByZXEgPSB0aGlzLnJlcXVlc3QoeyBtZXRob2Q6IFwiUE9TVFwiLCBkYXRhOiBkYXRhLCBpc0JpbmFyeTogaXNCaW5hcnkgfSk7dmFyIHNlbGYgPSB0aGlzO3JlcS5vbihcInN1Y2Nlc3NcIiwgZm4pO3JlcS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYub25FcnJvcihcInhociBwb3N0IGVycm9yXCIsIGVycik7XG4gICAgICAgICAgfSk7dGhpcy5zZW5kWGhyID0gcmVxO1xuICAgICAgICB9O1hIUi5wcm90b3R5cGUuZG9Qb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRlYnVnKFwieGhyIHBvbGxcIik7dmFyIHJlcSA9IHRoaXMucmVxdWVzdCgpO3ZhciBzZWxmID0gdGhpcztyZXEub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBzZWxmLm9uRGF0YShkYXRhKTtcbiAgICAgICAgICB9KTtyZXEub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBzZWxmLm9uRXJyb3IoXCJ4aHIgcG9sbCBlcnJvclwiLCBlcnIpO1xuICAgICAgICAgIH0pO3RoaXMucG9sbFhociA9IHJlcTtcbiAgICAgICAgfTtmdW5jdGlvbiBSZXF1ZXN0KG9wdHMpIHtcbiAgICAgICAgICB0aGlzLm1ldGhvZCA9IG9wdHMubWV0aG9kIHx8IFwiR0VUXCI7dGhpcy51cmkgPSBvcHRzLnVyaTt0aGlzLnhkID0gISFvcHRzLnhkO3RoaXMueHMgPSAhIW9wdHMueHM7dGhpcy5hc3luYyA9IGZhbHNlICE9PSBvcHRzLmFzeW5jO3RoaXMuZGF0YSA9IHVuZGVmaW5lZCAhPSBvcHRzLmRhdGEgPyBvcHRzLmRhdGEgOiBudWxsO3RoaXMuYWdlbnQgPSBvcHRzLmFnZW50O3RoaXMuaXNCaW5hcnkgPSBvcHRzLmlzQmluYXJ5O3RoaXMuc3VwcG9ydHNCaW5hcnkgPSBvcHRzLnN1cHBvcnRzQmluYXJ5O3RoaXMuZW5hYmxlc1hEUiA9IG9wdHMuZW5hYmxlc1hEUjt0aGlzLnBmeCA9IG9wdHMucGZ4O3RoaXMua2V5ID0gb3B0cy5rZXk7dGhpcy5wYXNzcGhyYXNlID0gb3B0cy5wYXNzcGhyYXNlO3RoaXMuY2VydCA9IG9wdHMuY2VydDt0aGlzLmNhID0gb3B0cy5jYTt0aGlzLmNpcGhlcnMgPSBvcHRzLmNpcGhlcnM7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDt0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO3RoaXMuY3JlYXRlKCk7XG4gICAgICAgIH1FbWl0dGVyKFJlcXVlc3QucHJvdG90eXBlKTtSZXF1ZXN0LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9wdHMgPSB7IGFnZW50OiB0aGlzLmFnZW50LCB4ZG9tYWluOiB0aGlzLnhkLCB4c2NoZW1lOiB0aGlzLnhzLCBlbmFibGVzWERSOiB0aGlzLmVuYWJsZXNYRFIgfTtvcHRzLnBmeCA9IHRoaXMucGZ4O29wdHMua2V5ID0gdGhpcy5rZXk7b3B0cy5wYXNzcGhyYXNlID0gdGhpcy5wYXNzcGhyYXNlO29wdHMuY2VydCA9IHRoaXMuY2VydDtvcHRzLmNhID0gdGhpcy5jYTtvcHRzLmNpcGhlcnMgPSB0aGlzLmNpcGhlcnM7b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSB0aGlzLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgeGhyID0gdGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qob3B0cyk7dmFyIHNlbGYgPSB0aGlzO3RyeSB7XG4gICAgICAgICAgICBkZWJ1ZyhcInhociBvcGVuICVzOiAlc1wiLCB0aGlzLm1ldGhvZCwgdGhpcy51cmkpO3hoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVyaSwgdGhpcy5hc3luYyk7dHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgeGhyLnNldERpc2FibGVIZWFkZXJDaGVjayh0cnVlKTtmb3IgKHZhciBpIGluIHRoaXMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYUhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaSwgdGhpcy5leHRyYUhlYWRlcnNbaV0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31pZiAodGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuICAgICAgICAgICAgfWlmIChcIlBPU1RcIiA9PSB0aGlzLm1ldGhvZCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgfWlmIChcIndpdGhDcmVkZW50aWFsc1wiIGluIHhocikge1xuICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1pZiAodGhpcy5oYXNYRFIoKSkge1xuICAgICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYub25Mb2FkKCk7XG4gICAgICAgICAgICAgIH07eGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoNCAhPSB4aHIucmVhZHlTdGF0ZSkgcmV0dXJuO2lmICgyMDAgPT0geGhyLnN0YXR1cyB8fCAxMjIzID09IHhoci5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYub25Mb2FkKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXJyb3IoeGhyLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9ZGVidWcoXCJ4aHIgZGF0YSAlc1wiLCB0aGlzLmRhdGEpO3hoci5zZW5kKHRoaXMuZGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHNlbGYub25FcnJvcihlKTtcbiAgICAgICAgICAgIH0sIDApO3JldHVybjtcbiAgICAgICAgICB9aWYgKGdsb2JhbC5kb2N1bWVudCkge1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IFJlcXVlc3QucmVxdWVzdHNDb3VudCsrO1JlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF0gPSB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwic3VjY2Vzc1wiKTt0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHRoaXMuZW1pdChcImRhdGFcIiwgZGF0YSk7dGhpcy5vblN1Y2Nlc3MoKTtcbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7dGhpcy5jbGVhbnVwKHRydWUpO1xuICAgICAgICB9O1JlcXVlc3QucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbiAoZnJvbUVycm9yKSB7XG4gICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIHRoaXMueGhyIHx8IG51bGwgPT09IHRoaXMueGhyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfWlmICh0aGlzLmhhc1hEUigpKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5vbmxvYWQgPSB0aGlzLnhoci5vbmVycm9yID0gZW1wdHk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGVtcHR5O1xuICAgICAgICAgIH1pZiAoZnJvbUVycm9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB0aGlzLnhoci5hYm9ydCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICB9aWYgKGdsb2JhbC5kb2N1bWVudCkge1xuICAgICAgICAgICAgZGVsZXRlIFJlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF07XG4gICAgICAgICAgfXRoaXMueGhyID0gbnVsbDtcbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGRhdGE7dHJ5IHtcbiAgICAgICAgICAgIHZhciBjb250ZW50VHlwZTt0cnkge1xuICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLnNwbGl0KFwiO1wiKVswXTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9aWYgKGNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKSB7XG4gICAgICAgICAgICAgIGRhdGEgPSB0aGlzLnhoci5yZXNwb25zZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLnhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIHVpOEFyciA9IG5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKTt2YXIgZGF0YUFycmF5ID0gW107Zm9yICh2YXIgaWR4ID0gMCwgbGVuZ3RoID0gdWk4QXJyLmxlbmd0aDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhQXJyYXkucHVzaCh1aThBcnJbaWR4XSk7XG4gICAgICAgICAgICAgICAgICB9ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgZGF0YUFycmF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZSk7XG4gICAgICAgICAgfWlmIChudWxsICE9IGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMub25EYXRhKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtSZXF1ZXN0LnByb3RvdHlwZS5oYXNYRFIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBnbG9iYWwuWERvbWFpblJlcXVlc3QgJiYgIXRoaXMueHMgJiYgdGhpcy5lbmFibGVzWERSO1xuICAgICAgICB9O1JlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB9O2lmIChnbG9iYWwuZG9jdW1lbnQpIHtcbiAgICAgICAgICBSZXF1ZXN0LnJlcXVlc3RzQ291bnQgPSAwO1JlcXVlc3QucmVxdWVzdHMgPSB7fTtpZiAoZ2xvYmFsLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9ZnVuY3Rpb24gdW5sb2FkSGFuZGxlcigpIHtcbiAgICAgICAgICBmb3IgKHZhciBpIGluIFJlcXVlc3QucmVxdWVzdHMpIHtcbiAgICAgICAgICAgIGlmIChSZXF1ZXN0LnJlcXVlc3RzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgIFJlcXVlc3QucmVxdWVzdHNbaV0uYWJvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBcIi4vcG9sbGluZ1wiOiA4LCBcImNvbXBvbmVudC1lbWl0dGVyXCI6IDE1LCBcImNvbXBvbmVudC1pbmhlcml0XCI6IDE2LCBkZWJ1ZzogMTcsIFwieG1saHR0cHJlcXVlc3Qtc3NsXCI6IDEwIH1dLCA4OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIFRyYW5zcG9ydCA9IF9kZXJlcV8oXCIuLi90cmFuc3BvcnRcIik7dmFyIHBhcnNlcXMgPSBfZGVyZXFfKFwicGFyc2Vxc1wiKTt2YXIgcGFyc2VyID0gX2RlcmVxXyhcImVuZ2luZS5pby1wYXJzZXJcIik7dmFyIGluaGVyaXQgPSBfZGVyZXFfKFwiY29tcG9uZW50LWluaGVyaXRcIik7dmFyIHllYXN0ID0gX2RlcmVxXyhcInllYXN0XCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZ1wiKTttb2R1bGUuZXhwb3J0cyA9IFBvbGxpbmc7dmFyIGhhc1hIUjIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3QgPSBfZGVyZXFfKFwieG1saHR0cHJlcXVlc3Qtc3NsXCIpO3ZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoeyB4ZG9tYWluOiBmYWxzZSB9KTtyZXR1cm4gbnVsbCAhPSB4aHIucmVzcG9uc2VUeXBlO1xuICAgICAgfSkoKTtmdW5jdGlvbiBQb2xsaW5nKG9wdHMpIHtcbiAgICAgICAgdmFyIGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O2lmICghaGFzWEhSMiB8fCBmb3JjZUJhc2U2NCkge1xuICAgICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcbiAgICAgICAgfVRyYW5zcG9ydC5jYWxsKHRoaXMsIG9wdHMpO1xuICAgICAgfWluaGVyaXQoUG9sbGluZywgVHJhbnNwb3J0KTtQb2xsaW5nLnByb3RvdHlwZS5uYW1lID0gXCJwb2xsaW5nXCI7UG9sbGluZy5wcm90b3R5cGUuZG9PcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvbGwoKTtcbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAob25QYXVzZSkge1xuICAgICAgICB2YXIgcGVuZGluZyA9IDA7dmFyIHNlbGYgPSB0aGlzO3RoaXMucmVhZHlTdGF0ZSA9IFwicGF1c2luZ1wiO2Z1bmN0aW9uIHBhdXNlKCkge1xuICAgICAgICAgIGRlYnVnKFwicGF1c2VkXCIpO3NlbGYucmVhZHlTdGF0ZSA9IFwicGF1c2VkXCI7b25QYXVzZSgpO1xuICAgICAgICB9aWYgKHRoaXMucG9sbGluZyB8fCAhdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgIHZhciB0b3RhbCA9IDA7aWYgKHRoaXMucG9sbGluZykge1xuICAgICAgICAgICAgZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHBvbGxpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO3RvdGFsKys7dGhpcy5vbmNlKFwicG9sbENvbXBsZXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZGVidWcoXCJwcmUtcGF1c2UgcG9sbGluZyBjb21wbGV0ZVwiKTstLXRvdGFsIHx8IHBhdXNlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9aWYgKCF0aGlzLndyaXRhYmxlKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcIndlIGFyZSBjdXJyZW50bHkgd3JpdGluZyAtIHdhaXRpbmcgdG8gcGF1c2VcIik7dG90YWwrKzt0aGlzLm9uY2UoXCJkcmFpblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGRlYnVnKFwicHJlLXBhdXNlIHdyaXRpbmcgY29tcGxldGVcIik7LS10b3RhbCB8fCBwYXVzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUucG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVidWcoXCJwb2xsaW5nXCIpO3RoaXMucG9sbGluZyA9IHRydWU7dGhpcy5kb1BvbGwoKTt0aGlzLmVtaXQoXCJwb2xsXCIpO1xuICAgICAgfTtQb2xsaW5nLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7ZGVidWcoXCJwb2xsaW5nIGdvdCBkYXRhICVzXCIsIGRhdGEpO3ZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKHBhY2tldCwgaW5kZXgsIHRvdGFsKSB7XG4gICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09IHNlbGYucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgc2VsZi5vbk9wZW4oKTtcbiAgICAgICAgICB9aWYgKFwiY2xvc2VcIiA9PSBwYWNrZXQudHlwZSkge1xuICAgICAgICAgICAgc2VsZi5vbkNsb3NlKCk7cmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1zZWxmLm9uUGFja2V0KHBhY2tldCk7XG4gICAgICAgIH07cGFyc2VyLmRlY29kZVBheWxvYWQoZGF0YSwgdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSwgY2FsbGJhY2spO2lmIChcImNsb3NlZFwiICE9IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHRoaXMucG9sbGluZyA9IGZhbHNlO3RoaXMuZW1pdChcInBvbGxDb21wbGV0ZVwiKTtpZiAoXCJvcGVuXCIgPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnBvbGwoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWcoJ2lnbm9yaW5nIHBvbGwgLSB0cmFuc3BvcnQgc3RhdGUgXCIlc1wiJywgdGhpcy5yZWFkeVN0YXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUuZG9DbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO2Z1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgIGRlYnVnKFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIik7c2VsZi53cml0ZShbeyB0eXBlOiBcImNsb3NlXCIgfV0pO1xuICAgICAgICB9aWYgKFwib3BlblwiID09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgIGRlYnVnKFwidHJhbnNwb3J0IG9wZW4gLSBjbG9zaW5nXCIpO2Nsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWcoXCJ0cmFuc3BvcnQgbm90IG9wZW4gLSBkZWZlcnJpbmcgY2xvc2VcIik7dGhpcy5vbmNlKFwib3BlblwiLCBjbG9zZSk7XG4gICAgICAgIH1cbiAgICAgIH07UG9sbGluZy5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAocGFja2V0cykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dGhpcy53cml0YWJsZSA9IGZhbHNlO3ZhciBjYWxsYmFja2ZuID0gZnVuY3Rpb24gY2FsbGJhY2tmbigpIHtcbiAgICAgICAgICBzZWxmLndyaXRhYmxlID0gdHJ1ZTtzZWxmLmVtaXQoXCJkcmFpblwiKTtcbiAgICAgICAgfTt2YXIgc2VsZiA9IHRoaXM7cGFyc2VyLmVuY29kZVBheWxvYWQocGFja2V0cywgdGhpcy5zdXBwb3J0c0JpbmFyeSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBzZWxmLmRvV3JpdGUoZGF0YSwgY2FsbGJhY2tmbik7XG4gICAgICAgIH0pO1xuICAgICAgfTtQb2xsaW5nLnByb3RvdHlwZS51cmkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcnkgfHwge307dmFyIHNjaGVtYSA9IHRoaXMuc2VjdXJlID8gXCJodHRwc1wiIDogXCJodHRwXCI7dmFyIHBvcnQgPSBcIlwiO2lmIChmYWxzZSAhPT0gdGhpcy50aW1lc3RhbXBSZXF1ZXN0cykge1xuICAgICAgICAgIHF1ZXJ5W3RoaXMudGltZXN0YW1wUGFyYW1dID0geWVhc3QoKTtcbiAgICAgICAgfWlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSAmJiAhcXVlcnkuc2lkKSB7XG4gICAgICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICAgICAgfXF1ZXJ5ID0gcGFyc2Vxcy5lbmNvZGUocXVlcnkpO2lmICh0aGlzLnBvcnQgJiYgKFwiaHR0cHNcIiA9PSBzY2hlbWEgJiYgdGhpcy5wb3J0ICE9IDQ0MyB8fCBcImh0dHBcIiA9PSBzY2hlbWEgJiYgdGhpcy5wb3J0ICE9IDgwKSkge1xuICAgICAgICAgIHBvcnQgPSBcIjpcIiArIHRoaXMucG9ydDtcbiAgICAgICAgfWlmIChxdWVyeS5sZW5ndGgpIHtcbiAgICAgICAgICBxdWVyeSA9IFwiP1wiICsgcXVlcnk7XG4gICAgICAgIH12YXIgaXB2NiA9IHRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgIT09IC0xO3JldHVybiBzY2hlbWEgKyBcIjovL1wiICsgKGlwdjYgPyBcIltcIiArIHRoaXMuaG9zdG5hbWUgKyBcIl1cIiA6IHRoaXMuaG9zdG5hbWUpICsgcG9ydCArIHRoaXMucGF0aCArIHF1ZXJ5O1xuICAgICAgfTtcbiAgICB9LCB7IFwiLi4vdHJhbnNwb3J0XCI6IDQsIFwiY29tcG9uZW50LWluaGVyaXRcIjogMTYsIGRlYnVnOiAxNywgXCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5LCBwYXJzZXFzOiAyNywgXCJ4bWxodHRwcmVxdWVzdC1zc2xcIjogMTAsIHllYXN0OiAzMCB9XSwgOTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBUcmFuc3BvcnQgPSBfZGVyZXFfKFwiLi4vdHJhbnNwb3J0XCIpO3ZhciBwYXJzZXIgPSBfZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTt2YXIgcGFyc2VxcyA9IF9kZXJlcV8oXCJwYXJzZXFzXCIpO3ZhciBpbmhlcml0ID0gX2RlcmVxXyhcImNvbXBvbmVudC1pbmhlcml0XCIpO3ZhciB5ZWFzdCA9IF9kZXJlcV8oXCJ5ZWFzdFwiKTt2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OndlYnNvY2tldFwiKTt2YXIgQnJvd3NlcldlYlNvY2tldCA9IGdsb2JhbC5XZWJTb2NrZXQgfHwgZ2xvYmFsLk1veldlYlNvY2tldDt2YXIgV2ViU29ja2V0ID0gQnJvd3NlcldlYlNvY2tldDtpZiAoIVdlYlNvY2tldCAmJiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFdlYlNvY2tldCA9IF9kZXJlcV8oXCJ3c1wiKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9bW9kdWxlLmV4cG9ydHMgPSBXUztmdW5jdGlvbiBXUyhvcHRzKSB7XG4gICAgICAgICAgdmFyIGZvcmNlQmFzZTY0ID0gb3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O2lmIChmb3JjZUJhc2U2NCkge1xuICAgICAgICAgICAgdGhpcy5zdXBwb3J0c0JpbmFyeSA9IGZhbHNlO1xuICAgICAgICAgIH10aGlzLnBlck1lc3NhZ2VEZWZsYXRlID0gb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZTtUcmFuc3BvcnQuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICAgICAgfWluaGVyaXQoV1MsIFRyYW5zcG9ydCk7V1MucHJvdG90eXBlLm5hbWUgPSBcIndlYnNvY2tldFwiO1dTLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeSA9IHRydWU7V1MucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuY2hlY2soKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH12YXIgc2VsZiA9IHRoaXM7dmFyIHVyaSA9IHRoaXMudXJpKCk7dmFyIHByb3RvY29scyA9IHZvaWQgMDt2YXIgb3B0cyA9IHsgYWdlbnQ6IHRoaXMuYWdlbnQsIHBlck1lc3NhZ2VEZWZsYXRlOiB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlIH07b3B0cy5wZnggPSB0aGlzLnBmeDtvcHRzLmtleSA9IHRoaXMua2V5O29wdHMucGFzc3BocmFzZSA9IHRoaXMucGFzc3BocmFzZTtvcHRzLmNlcnQgPSB0aGlzLmNlcnQ7b3B0cy5jYSA9IHRoaXMuY2E7b3B0cy5jaXBoZXJzID0gdGhpcy5jaXBoZXJzO29wdHMucmVqZWN0VW5hdXRob3JpemVkID0gdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ7aWYgKHRoaXMuZXh0cmFIZWFkZXJzKSB7XG4gICAgICAgICAgICBvcHRzLmhlYWRlcnMgPSB0aGlzLmV4dHJhSGVhZGVycztcbiAgICAgICAgICB9dGhpcy53cyA9IEJyb3dzZXJXZWJTb2NrZXQgPyBuZXcgV2ViU29ja2V0KHVyaSkgOiBuZXcgV2ViU29ja2V0KHVyaSwgcHJvdG9jb2xzLCBvcHRzKTtpZiAodGhpcy53cy5iaW5hcnlUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtcbiAgICAgICAgICB9aWYgKHRoaXMud3Muc3VwcG9ydHMgJiYgdGhpcy53cy5zdXBwb3J0cy5iaW5hcnkpIHtcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSB0cnVlO3RoaXMud3MuYmluYXJ5VHlwZSA9IFwiYnVmZmVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3MuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgICAgICB9dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB9O1dTLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dGhpcy53cy5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLm9uT3BlbigpO1xuICAgICAgICAgIH07dGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5vbkNsb3NlKCk7XG4gICAgICAgICAgfTt0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgc2VsZi5vbkRhdGEoZXYuZGF0YSk7XG4gICAgICAgICAgfTt0aGlzLndzLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2VsZi5vbkVycm9yKFwid2Vic29ja2V0IGVycm9yXCIsIGUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07aWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIG5hdmlnYXRvciAmJiAvaVBhZHxpUGhvbmV8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICBXUy5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgVHJhbnNwb3J0LnByb3RvdHlwZS5vbkRhdGEuY2FsbChzZWxmLCBkYXRhKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH07XG4gICAgICAgIH1XUy5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAocGFja2V0cykge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpczt0aGlzLndyaXRhYmxlID0gZmFsc2U7dmFyIHRvdGFsID0gcGFja2V0cy5sZW5ndGg7Zm9yICh2YXIgaSA9IDAsIGwgPSB0b3RhbDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLmVuY29kZVBhY2tldChwYWNrZXQsIHNlbGYuc3VwcG9ydHNCaW5hcnksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFCcm93c2VyV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHt9O2lmIChwYWNrZXQub3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbXByZXNzID0gcGFja2V0Lm9wdGlvbnMuY29tcHJlc3M7XG4gICAgICAgICAgICAgICAgICB9aWYgKHNlbGYucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGRhdGEgPyBnbG9iYWwuQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSkgOiBkYXRhLmxlbmd0aDtpZiAobGVuIDwgc2VsZi5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbXByZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9dHJ5IHtcbiAgICAgICAgICAgICAgICAgIGlmIChCcm93c2VyV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYud3Muc2VuZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYud3Muc2VuZChkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICBkZWJ1ZyhcIndlYnNvY2tldCBjbG9zZWQgYmVmb3JlIG9uY2xvc2UgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgfS0tdG90YWwgfHwgZG9uZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKHBhY2tldHNbaV0pO1xuICAgICAgICAgIH1mdW5jdGlvbiBkb25lKCkge1xuICAgICAgICAgICAgc2VsZi5lbWl0KFwiZmx1c2hcIik7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHNlbGYud3JpdGFibGUgPSB0cnVlO3NlbGYuZW1pdChcImRyYWluXCIpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1dTLnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIFRyYW5zcG9ydC5wcm90b3R5cGUub25DbG9zZS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1dTLnByb3RvdHlwZS5kb0Nsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy53cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtXUy5wcm90b3R5cGUudXJpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcnkgfHwge307dmFyIHNjaGVtYSA9IHRoaXMuc2VjdXJlID8gXCJ3c3NcIiA6IFwid3NcIjt2YXIgcG9ydCA9IFwiXCI7aWYgKHRoaXMucG9ydCAmJiAoXCJ3c3NcIiA9PSBzY2hlbWEgJiYgdGhpcy5wb3J0ICE9IDQ0MyB8fCBcIndzXCIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA4MCkpIHtcbiAgICAgICAgICAgIHBvcnQgPSBcIjpcIiArIHRoaXMucG9ydDtcbiAgICAgICAgICB9aWYgKHRoaXMudGltZXN0YW1wUmVxdWVzdHMpIHtcbiAgICAgICAgICAgIHF1ZXJ5W3RoaXMudGltZXN0YW1wUGFyYW1dID0geWVhc3QoKTtcbiAgICAgICAgICB9aWYgKCF0aGlzLnN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICBxdWVyeS5iNjQgPSAxO1xuICAgICAgICAgIH1xdWVyeSA9IHBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtpZiAocXVlcnkubGVuZ3RoKSB7XG4gICAgICAgICAgICBxdWVyeSA9IFwiP1wiICsgcXVlcnk7XG4gICAgICAgICAgfXZhciBpcHY2ID0gdGhpcy5ob3N0bmFtZS5pbmRleE9mKFwiOlwiKSAhPT0gLTE7cmV0dXJuIHNjaGVtYSArIFwiOi8vXCIgKyAoaXB2NiA/IFwiW1wiICsgdGhpcy5ob3N0bmFtZSArIFwiXVwiIDogdGhpcy5ob3N0bmFtZSkgKyBwb3J0ICsgdGhpcy5wYXRoICsgcXVlcnk7XG4gICAgICAgIH07V1MucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhIVdlYlNvY2tldCAmJiAhKFwiX19pbml0aWFsaXplXCIgaW4gV2ViU29ja2V0ICYmIHRoaXMubmFtZSA9PT0gV1MucHJvdG90eXBlLm5hbWUpO1xuICAgICAgICB9O1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IFwiLi4vdHJhbnNwb3J0XCI6IDQsIFwiY29tcG9uZW50LWluaGVyaXRcIjogMTYsIGRlYnVnOiAxNywgXCJlbmdpbmUuaW8tcGFyc2VyXCI6IDE5LCBwYXJzZXFzOiAyNywgd3M6IHVuZGVmaW5lZCwgeWVhc3Q6IDMwIH1dLCAxMDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciBoYXNDT1JTID0gX2RlcmVxXyhcImhhcy1jb3JzXCIpO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgdmFyIHhkb21haW4gPSBvcHRzLnhkb21haW47dmFyIHhzY2hlbWUgPSBvcHRzLnhzY2hlbWU7dmFyIGVuYWJsZXNYRFIgPSBvcHRzLmVuYWJsZXNYRFI7dHJ5IHtcbiAgICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgJiYgKCF4ZG9tYWluIHx8IGhhc0NPUlMpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fXRyeSB7XG4gICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFhEb21haW5SZXF1ZXN0ICYmICF4c2NoZW1lICYmIGVuYWJsZXNYRFIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERvbWFpblJlcXVlc3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9aWYgKCF4ZG9tYWluKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSwgeyBcImhhcy1jb3JzXCI6IDIyIH1dLCAxMTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gYWZ0ZXI7ZnVuY3Rpb24gYWZ0ZXIoY291bnQsIGNhbGxiYWNrLCBlcnJfY2IpIHtcbiAgICAgICAgdmFyIGJhaWwgPSBmYWxzZTtlcnJfY2IgPSBlcnJfY2IgfHwgbm9vcDtwcm94eS5jb3VudCA9IGNvdW50O3JldHVybiBjb3VudCA9PT0gMCA/IGNhbGxiYWNrKCkgOiBwcm94eTtmdW5jdGlvbiBwcm94eShlcnIsIHJlc3VsdCkge1xuICAgICAgICAgIGlmIChwcm94eS5jb3VudCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhZnRlciBjYWxsZWQgdG9vIG1hbnkgdGltZXNcIik7XG4gICAgICAgICAgfS0tcHJveHkuY291bnQ7aWYgKGVycikge1xuICAgICAgICAgICAgYmFpbCA9IHRydWU7Y2FsbGJhY2soZXJyKTtjYWxsYmFjayA9IGVycl9jYjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHByb3h5LmNvdW50ID09PSAwICYmICFiYWlsKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfWZ1bmN0aW9uIG5vb3AoKSB7fVxuICAgIH0sIHt9XSwgMTI6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlciwgc3RhcnQsIGVuZCkge1xuICAgICAgICB2YXIgYnl0ZXMgPSBhcnJheWJ1ZmZlci5ieXRlTGVuZ3RoO3N0YXJ0ID0gc3RhcnQgfHwgMDtlbmQgPSBlbmQgfHwgYnl0ZXM7aWYgKGFycmF5YnVmZmVyLnNsaWNlKSB7XG4gICAgICAgICAgcmV0dXJuIGFycmF5YnVmZmVyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9aWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgIHN0YXJ0ICs9IGJ5dGVzO1xuICAgICAgICB9aWYgKGVuZCA8IDApIHtcbiAgICAgICAgICBlbmQgKz0gYnl0ZXM7XG4gICAgICAgIH1pZiAoZW5kID4gYnl0ZXMpIHtcbiAgICAgICAgICBlbmQgPSBieXRlcztcbiAgICAgICAgfWlmIChzdGFydCA+PSBieXRlcyB8fCBzdGFydCA+PSBlbmQgfHwgYnl0ZXMgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICB9dmFyIGFidiA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTt2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoZW5kIC0gc3RhcnQpO2ZvciAodmFyIGkgPSBzdGFydCwgaWkgPSAwOyBpIDwgZW5kOyBpKyssIGlpKyspIHtcbiAgICAgICAgICByZXN1bHRbaWldID0gYWJ2W2ldO1xuICAgICAgICB9cmV0dXJuIHJlc3VsdC5idWZmZXI7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMTM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGNoYXJzKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO2V4cG9ydHMuZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7XG4gICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLFxuICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICBsZW4gPSBieXRlcy5sZW5ndGgsXG4gICAgICAgICAgICAgIGJhc2U2NCA9IFwiXCI7Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAzKSB7XG4gICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07XG4gICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbKGJ5dGVzW2ldICYgMykgPDwgNCB8IGJ5dGVzW2kgKyAxXSA+PiA0XTtiYXNlNjQgKz0gY2hhcnNbKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyIHwgYnl0ZXNbaSArIDJdID4+IDZdO2Jhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107XG4gICAgICAgICAgfWlmIChsZW4gJSAzID09PSAyKSB7XG4gICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArIFwiPVwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAobGVuICUgMyA9PT0gMSkge1xuICAgICAgICAgICAgYmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLCBiYXNlNjQubGVuZ3RoIC0gMikgKyBcIj09XCI7XG4gICAgICAgICAgfXJldHVybiBiYXNlNjQ7XG4gICAgICAgIH07ZXhwb3J0cy5kZWNvZGUgPSBmdW5jdGlvbiAoYmFzZTY0KSB7XG4gICAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IGJhc2U2NC5sZW5ndGggKiAuNzUsXG4gICAgICAgICAgICAgIGxlbiA9IGJhc2U2NC5sZW5ndGgsXG4gICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgIHAgPSAwLFxuICAgICAgICAgICAgICBlbmNvZGVkMSxcbiAgICAgICAgICAgICAgZW5jb2RlZDIsXG4gICAgICAgICAgICAgIGVuY29kZWQzLFxuICAgICAgICAgICAgICBlbmNvZGVkNDtpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgIGJ1ZmZlckxlbmd0aC0tO2lmIChiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDJdID09PSBcIj1cIikge1xuICAgICAgICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9dmFyIGFycmF5YnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCksXG4gICAgICAgICAgICAgIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO2ZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICAgICAgZW5jb2RlZDEgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpXSk7ZW5jb2RlZDIgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpICsgMV0pO2VuY29kZWQzID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSArIDJdKTtlbmNvZGVkNCA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2kgKyAzXSk7Ynl0ZXNbcCsrXSA9IGVuY29kZWQxIDw8IDIgfCBlbmNvZGVkMiA+PiA0O2J5dGVzW3ArK10gPSAoZW5jb2RlZDIgJiAxNSkgPDwgNCB8IGVuY29kZWQzID4+IDI7Ynl0ZXNbcCsrXSA9IChlbmNvZGVkMyAmIDMpIDw8IDYgfCBlbmNvZGVkNCAmIDYzO1xuICAgICAgICAgIH1yZXR1cm4gYXJyYXlidWZmZXI7XG4gICAgICAgIH07XG4gICAgICB9KShcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIik7XG4gICAgfSwge31dLCAxNDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBCbG9iQnVpbGRlciA9IGdsb2JhbC5CbG9iQnVpbGRlciB8fCBnbG9iYWwuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1TQmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1vekJsb2JCdWlsZGVyO3ZhciBibG9iU3VwcG9ydGVkID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGEgPSBuZXcgQmxvYihbXCJoaVwiXSk7cmV0dXJuIGEuc2l6ZSA9PT0gMjtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO3ZhciBibG9iU3VwcG9ydHNBcnJheUJ1ZmZlclZpZXcgPSBibG9iU3VwcG9ydGVkICYmIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBiID0gbmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLCAyXSldKTtyZXR1cm4gYi5zaXplID09PSAyO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKCk7dmFyIGJsb2JCdWlsZGVyU3VwcG9ydGVkID0gQmxvYkJ1aWxkZXIgJiYgQmxvYkJ1aWxkZXIucHJvdG90eXBlLmFwcGVuZCAmJiBCbG9iQnVpbGRlci5wcm90b3R5cGUuZ2V0QmxvYjtmdW5jdGlvbiBtYXBBcnJheUJ1ZmZlclZpZXdzKGFyeSkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2h1bmsgPSBhcnlbaV07aWYgKGNodW5rLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgIHZhciBidWYgPSBjaHVuay5idWZmZXI7aWYgKGNodW5rLmJ5dGVMZW5ndGggIT09IGJ1Zi5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSBuZXcgVWludDhBcnJheShjaHVuay5ieXRlTGVuZ3RoKTtjb3B5LnNldChuZXcgVWludDhBcnJheShidWYsIGNodW5rLmJ5dGVPZmZzZXQsIGNodW5rLmJ5dGVMZW5ndGgpKTtidWYgPSBjb3B5LmJ1ZmZlcjtcbiAgICAgICAgICAgICAgfWFyeVtpXSA9IGJ1ZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1mdW5jdGlvbiBCbG9iQnVpbGRlckNvbnN0cnVjdG9yKGFyeSwgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O3ZhciBiYiA9IG5ldyBCbG9iQnVpbGRlcigpO21hcEFycmF5QnVmZmVyVmlld3MoYXJ5KTtmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYmIuYXBwZW5kKGFyeVtpXSk7XG4gICAgICAgICAgfXJldHVybiBvcHRpb25zLnR5cGUgPyBiYi5nZXRCbG9iKG9wdGlvbnMudHlwZSkgOiBiYi5nZXRCbG9iKCk7XG4gICAgICAgIH1mdW5jdGlvbiBCbG9iQ29uc3RydWN0b3IoYXJ5LCBvcHRpb25zKSB7XG4gICAgICAgICAgbWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpO3JldHVybiBuZXcgQmxvYihhcnksIG9wdGlvbnMgfHwge30pO1xuICAgICAgICB9bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChibG9iU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYmxvYlN1cHBvcnRzQXJyYXlCdWZmZXJWaWV3ID8gZ2xvYmFsLkJsb2IgOiBCbG9iQ29uc3RydWN0b3I7XG4gICAgICAgICAgfSBlbHNlIGlmIChibG9iQnVpbGRlclN1cHBvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIEJsb2JCdWlsZGVyQ29uc3RydWN0b3I7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7fV0sIDE1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO2Z1bmN0aW9uIEVtaXR0ZXIob2JqKSB7XG4gICAgICAgIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xuICAgICAgfWZ1bmN0aW9uIG1peGluKG9iaikge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XG4gICAgICAgIH1yZXR1cm4gb2JqO1xuICAgICAgfUVtaXR0ZXIucHJvdG90eXBlLm9uID0gRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9Oyh0aGlzLl9jYWxsYmFja3NbZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzW2V2ZW50XSB8fCBbXSkucHVzaChmbik7cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpczt0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307ZnVuY3Rpb24gb24oKSB7XG4gICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIG9uKTtmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9b24uZm4gPSBmbjt0aGlzLm9uKGV2ZW50LCBvbik7cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O2lmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtyZXR1cm4gdGhpcztcbiAgICAgICAgfXZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdO2lmICghY2FsbGJhY2tzKSByZXR1cm4gdGhpcztpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tldmVudF07cmV0dXJuIHRoaXM7XG4gICAgICAgIH12YXIgY2I7Zm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjYiA9IGNhbGxiYWNrc1tpXTtpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpLCAxKTticmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gdGhpcztcbiAgICAgIH07RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbZXZlbnRdO2lmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3JldHVybiB0aGlzLl9jYWxsYmFja3NbZXZlbnRdIHx8IFtdO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDtcbiAgICAgIH07XG4gICAgfSwge31dLCAxNjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gZm4oKSB7fTtmbi5wcm90b3R5cGUgPSBiLnByb3RvdHlwZTthLnByb3RvdHlwZSA9IG5ldyBmbigpO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gYTtcbiAgICAgIH07XG4gICAgfSwge31dLCAxNzogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oXCIuL2RlYnVnXCIpO2V4cG9ydHMubG9nID0gbG9nO2V4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7ZXhwb3J0cy5zYXZlID0gc2F2ZTtleHBvcnRzLmxvYWQgPSBsb2FkO2V4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO2V4cG9ydHMuc3RvcmFnZSA9IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGNocm9tZSAmJiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjaHJvbWUuc3RvcmFnZSA/IGNocm9tZS5zdG9yYWdlLmxvY2FsIDogbG9jYWxzdG9yYWdlKCk7ZXhwb3J0cy5jb2xvcnMgPSBbXCJsaWdodHNlYWdyZWVuXCIsIFwiZm9yZXN0Z3JlZW5cIiwgXCJnb2xkZW5yb2RcIiwgXCJkb2RnZXJibHVlXCIsIFwiZGFya29yY2hpZFwiLCBcImNyaW1zb25cIl07ZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuICAgICAgICByZXR1cm4gXCJXZWJraXRBcHBlYXJhbmNlXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlIHx8IHdpbmRvdy5jb25zb2xlICYmIChjb25zb2xlLmZpcmVidWcgfHwgY29uc29sZS5leGNlcHRpb24gJiYgY29uc29sZS50YWJsZSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzE7XG4gICAgICB9ZXhwb3J0cy5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICB9O2Z1bmN0aW9uIGZvcm1hdEFyZ3MoKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO3ZhciB1c2VDb2xvcnMgPSB0aGlzLnVzZUNvbG9yczthcmdzWzBdID0gKHVzZUNvbG9ycyA/IFwiJWNcIiA6IFwiXCIpICsgdGhpcy5uYW1lc3BhY2UgKyAodXNlQ29sb3JzID8gXCIgJWNcIiA6IFwiIFwiKSArIGFyZ3NbMF0gKyAodXNlQ29sb3JzID8gXCIlYyBcIiA6IFwiIFwiKSArIFwiK1wiICsgZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO2lmICghdXNlQ29sb3JzKSByZXR1cm4gYXJnczt2YXIgYyA9IFwiY29sb3I6IFwiICsgdGhpcy5jb2xvcjthcmdzID0gW2FyZ3NbMF0sIGMsIFwiY29sb3I6IGluaGVyaXRcIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDEpKTt2YXIgaW5kZXggPSAwO3ZhciBsYXN0QyA9IDA7YXJnc1swXS5yZXBsYWNlKC8lW2EteiVdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgIGlmIChcIiUlXCIgPT09IG1hdGNoKSByZXR1cm47aW5kZXgrKztpZiAoXCIlY1wiID09PSBtYXRjaCkge1xuICAgICAgICAgICAgbGFzdEMgPSBpbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO2FyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtyZXR1cm4gYXJncztcbiAgICAgIH1mdW5jdGlvbiBsb2coKSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09PSB0eXBlb2YgY29uc29sZSAmJiBjb25zb2xlLmxvZyAmJiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH1mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAobnVsbCA9PSBuYW1lc3BhY2VzKSB7XG4gICAgICAgICAgICBleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHBvcnRzLnN0b3JhZ2UuZGVidWcgPSBuYW1lc3BhY2VzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1mdW5jdGlvbiBsb2FkKCkge1xuICAgICAgICB2YXIgcjt0cnkge1xuICAgICAgICAgIHIgPSBleHBvcnRzLnN0b3JhZ2UuZGVidWc7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9cmV0dXJuIHI7XG4gICAgICB9ZXhwb3J0cy5lbmFibGUobG9hZCgpKTtmdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgfSwgeyBcIi4vZGVidWdcIjogMTggfV0sIDE4OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZGVidWc7ZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7ZXhwb3J0cy5kaXNhYmxlID0gZGlzYWJsZTtleHBvcnRzLmVuYWJsZSA9IGVuYWJsZTtleHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO2V4cG9ydHMuaHVtYW5pemUgPSBfZGVyZXFfKFwibXNcIik7ZXhwb3J0cy5uYW1lcyA9IFtdO2V4cG9ydHMuc2tpcHMgPSBbXTtleHBvcnRzLmZvcm1hdHRlcnMgPSB7fTt2YXIgcHJldkNvbG9yID0gMDt2YXIgcHJldlRpbWU7ZnVuY3Rpb24gc2VsZWN0Q29sb3IoKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLmNvbG9yc1twcmV2Q29sb3IrKyAlIGV4cG9ydHMuY29sb3JzLmxlbmd0aF07XG4gICAgICB9ZnVuY3Rpb24gZGVidWcobmFtZXNwYWNlKSB7XG4gICAgICAgIGZ1bmN0aW9uIGRpc2FibGVkKCkge31kaXNhYmxlZC5lbmFibGVkID0gZmFsc2U7ZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IGVuYWJsZWQ7dmFyIGN1cnIgPSArbmV3IERhdGUoKTt2YXIgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO3NlbGYuZGlmZiA9IG1zO3NlbGYucHJldiA9IHByZXZUaW1lO3NlbGYuY3VyciA9IGN1cnI7cHJldlRpbWUgPSBjdXJyO2lmIChudWxsID09IHNlbGYudXNlQ29sb3JzKSBzZWxmLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7aWYgKG51bGwgPT0gc2VsZi5jb2xvciAmJiBzZWxmLnVzZUNvbG9ycykgc2VsZi5jb2xvciA9IHNlbGVjdENvbG9yKCk7dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2FyZ3NbMF0gPSBleHBvcnRzLmNvZXJjZShhcmdzWzBdKTtpZiAoXCJzdHJpbmdcIiAhPT0gdHlwZW9mIGFyZ3NbMF0pIHtcbiAgICAgICAgICAgIGFyZ3MgPSBbXCIlb1wiXS5jb25jYXQoYXJncyk7XG4gICAgICAgICAgfXZhciBpbmRleCA9IDA7YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16JV0pL2csIGZ1bmN0aW9uIChtYXRjaCwgZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAobWF0Y2ggPT09IFwiJSVcIikgcmV0dXJuIG1hdGNoO2luZGV4Kys7dmFyIGZvcm1hdHRlciA9IGV4cG9ydHMuZm9ybWF0dGVyc1tmb3JtYXRdO2lmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBmb3JtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbCA9IGFyZ3NbaW5kZXhdO21hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTthcmdzLnNwbGljZShpbmRleCwgMSk7aW5kZXgtLTtcbiAgICAgICAgICAgIH1yZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgfSk7aWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGV4cG9ydHMuZm9ybWF0QXJncykge1xuICAgICAgICAgICAgYXJncyA9IGV4cG9ydHMuZm9ybWF0QXJncy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9dmFyIGxvZ0ZuID0gZW5hYmxlZC5sb2cgfHwgZXhwb3J0cy5sb2cgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKTtsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgfWVuYWJsZWQuZW5hYmxlZCA9IHRydWU7dmFyIGZuID0gZXhwb3J0cy5lbmFibGVkKG5hbWVzcGFjZSkgPyBlbmFibGVkIDogZGlzYWJsZWQ7Zm4ubmFtZXNwYWNlID0gbmFtZXNwYWNlO3JldHVybiBmbjtcbiAgICAgIH1mdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuICAgICAgICBleHBvcnRzLnNhdmUobmFtZXNwYWNlcyk7dmFyIHNwbGl0ID0gKG5hbWVzcGFjZXMgfHwgXCJcIikuc3BsaXQoL1tcXHMsXSsvKTt2YXIgbGVuID0gc3BsaXQubGVuZ3RoO2ZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNwbGl0W2ldKSBjb250aW51ZTtuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csIFwiLio/XCIpO2lmIChuYW1lc3BhY2VzWzBdID09PSBcIi1cIikge1xuICAgICAgICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIgKyBuYW1lc3BhY2VzLnN1YnN0cigxKSArIFwiJFwiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4cG9ydHMubmFtZXMucHVzaChuZXcgUmVnRXhwKFwiXlwiICsgbmFtZXNwYWNlcyArIFwiJFwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9ZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgZXhwb3J0cy5lbmFibGUoXCJcIik7XG4gICAgICB9ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gICAgICAgIHZhciBpLCBsZW47Zm9yIChpID0gMCwgbGVuID0gZXhwb3J0cy5za2lwcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGlmIChleHBvcnRzLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1mb3IgKGkgPSAwLCBsZW4gPSBleHBvcnRzLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKGV4cG9ydHMubmFtZXNbaV0udGVzdChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9cmV0dXJuIGZhbHNlO1xuICAgICAgfWZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO3JldHVybiB2YWw7XG4gICAgICB9XG4gICAgfSwgeyBtczogMjUgfV0sIDE5OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIGtleXMgPSBfZGVyZXFfKFwiLi9rZXlzXCIpO3ZhciBoYXNCaW5hcnkgPSBfZGVyZXFfKFwiaGFzLWJpbmFyeVwiKTt2YXIgc2xpY2VCdWZmZXIgPSBfZGVyZXFfKFwiYXJyYXlidWZmZXIuc2xpY2VcIik7dmFyIGJhc2U2NGVuY29kZXIgPSBfZGVyZXFfKFwiYmFzZTY0LWFycmF5YnVmZmVyXCIpO3ZhciBhZnRlciA9IF9kZXJlcV8oXCJhZnRlclwiKTt2YXIgdXRmOCA9IF9kZXJlcV8oXCJ1dGY4XCIpO3ZhciBpc0FuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpO3ZhciBpc1BoYW50b21KUyA9IC9QaGFudG9tSlMvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO3ZhciBkb250U2VuZEJsb2JzID0gaXNBbmRyb2lkIHx8IGlzUGhhbnRvbUpTO2V4cG9ydHMucHJvdG9jb2wgPSAzO3ZhciBwYWNrZXRzID0gZXhwb3J0cy5wYWNrZXRzID0geyBvcGVuOiAwLCBjbG9zZTogMSwgcGluZzogMiwgcG9uZzogMywgbWVzc2FnZTogNCwgdXBncmFkZTogNSwgbm9vcDogNiB9O3ZhciBwYWNrZXRzbGlzdCA9IGtleXMocGFja2V0cyk7dmFyIGVyciA9IHsgdHlwZTogXCJlcnJvclwiLCBkYXRhOiBcInBhcnNlciBlcnJvclwiIH07dmFyIEJsb2IgPSBfZGVyZXFfKFwiYmxvYlwiKTtleHBvcnRzLmVuY29kZVBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCB1dGY4ZW5jb2RlLCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHN1cHBvcnRzQmluYXJ5O3N1cHBvcnRzQmluYXJ5ID0gZmFsc2U7XG4gICAgICAgICAgfWlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHV0ZjhlbmNvZGUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdXRmOGVuY29kZTt1dGY4ZW5jb2RlID0gbnVsbDtcbiAgICAgICAgICB9dmFyIGRhdGEgPSBwYWNrZXQuZGF0YSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcGFja2V0LmRhdGEuYnVmZmVyIHx8IHBhY2tldC5kYXRhO2lmIChnbG9iYWwuQXJyYXlCdWZmZXIgJiYgZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQXJyYXlCdWZmZXIocGFja2V0LCBzdXBwb3J0c0JpbmFyeSwgY2FsbGJhY2spO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQmxvYiAmJiBkYXRhIGluc3RhbmNlb2YgZ2xvYmFsLkJsb2IpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVCbG9iKHBhY2tldCwgc3VwcG9ydHNCaW5hcnksIGNhbGxiYWNrKTtcbiAgICAgICAgICB9aWYgKGRhdGEgJiYgZGF0YS5iYXNlNjQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVCYXNlNjRPYmplY3QocGFja2V0LCBjYWxsYmFjayk7XG4gICAgICAgICAgfXZhciBlbmNvZGVkID0gcGFja2V0c1twYWNrZXQudHlwZV07aWYgKHVuZGVmaW5lZCAhPT0gcGFja2V0LmRhdGEpIHtcbiAgICAgICAgICAgIGVuY29kZWQgKz0gdXRmOGVuY29kZSA/IHV0ZjguZW5jb2RlKFN0cmluZyhwYWNrZXQuZGF0YSkpIDogU3RyaW5nKHBhY2tldC5kYXRhKTtcbiAgICAgICAgICB9cmV0dXJuIGNhbGxiYWNrKFwiXCIgKyBlbmNvZGVkKTtcbiAgICAgICAgfTtmdW5jdGlvbiBlbmNvZGVCYXNlNjRPYmplY3QocGFja2V0LCBjYWxsYmFjaykge1xuICAgICAgICAgIHZhciBtZXNzYWdlID0gXCJiXCIgKyBleHBvcnRzLnBhY2tldHNbcGFja2V0LnR5cGVdICsgcGFja2V0LmRhdGEuZGF0YTtyZXR1cm4gY2FsbGJhY2sobWVzc2FnZSk7XG4gICAgICAgIH1mdW5jdGlvbiBlbmNvZGVBcnJheUJ1ZmZlcihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICghc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldChwYWNrZXQsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9dmFyIGRhdGEgPSBwYWNrZXQuZGF0YTt2YXIgY29udGVudEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7dmFyIHJlc3VsdEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEgKyBkYXRhLmJ5dGVMZW5ndGgpO3Jlc3VsdEJ1ZmZlclswXSA9IHBhY2tldHNbcGFja2V0LnR5cGVdO2ZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHRCdWZmZXJbaSArIDFdID0gY29udGVudEFycmF5W2ldO1xuICAgICAgICAgIH1yZXR1cm4gY2FsbGJhY2socmVzdWx0QnVmZmVyLmJ1ZmZlcik7XG4gICAgICAgIH1mdW5jdGlvbiBlbmNvZGVCbG9iQXNBcnJheUJ1ZmZlcihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICghc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldChwYWNrZXQsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9dmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTtmci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwYWNrZXQuZGF0YSA9IGZyLnJlc3VsdDtleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCB0cnVlLCBjYWxsYmFjayk7XG4gICAgICAgICAgfTtyZXR1cm4gZnIucmVhZEFzQXJyYXlCdWZmZXIocGFja2V0LmRhdGEpO1xuICAgICAgICB9ZnVuY3Rpb24gZW5jb2RlQmxvYihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICghc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldChwYWNrZXQsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9aWYgKGRvbnRTZW5kQmxvYnMpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVCbG9iQXNBcnJheUJ1ZmZlcihwYWNrZXQsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjayk7XG4gICAgICAgICAgfXZhciBsZW5ndGggPSBuZXcgVWludDhBcnJheSgxKTtsZW5ndGhbMF0gPSBwYWNrZXRzW3BhY2tldC50eXBlXTt2YXIgYmxvYiA9IG5ldyBCbG9iKFtsZW5ndGguYnVmZmVyLCBwYWNrZXQuZGF0YV0pO3JldHVybiBjYWxsYmFjayhibG9iKTtcbiAgICAgICAgfWV4cG9ydHMuZW5jb2RlQmFzZTY0UGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgbWVzc2FnZSA9IFwiYlwiICsgZXhwb3J0cy5wYWNrZXRzW3BhY2tldC50eXBlXTtpZiAoQmxvYiAmJiBwYWNrZXQuZGF0YSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iKSB7XG4gICAgICAgICAgICB2YXIgZnIgPSBuZXcgRmlsZVJlYWRlcigpO2ZyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIGI2NCA9IGZyLnJlc3VsdC5zcGxpdChcIixcIilbMV07Y2FsbGJhY2sobWVzc2FnZSArIGI2NCk7XG4gICAgICAgICAgICB9O3JldHVybiBmci5yZWFkQXNEYXRhVVJMKHBhY2tldC5kYXRhKTtcbiAgICAgICAgICB9dmFyIGI2NGRhdGE7dHJ5IHtcbiAgICAgICAgICAgIGI2NGRhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KHBhY2tldC5kYXRhKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdmFyIHR5cGVkID0gbmV3IFVpbnQ4QXJyYXkocGFja2V0LmRhdGEpO3ZhciBiYXNpYyA9IG5ldyBBcnJheSh0eXBlZC5sZW5ndGgpO2ZvciAodmFyIGkgPSAwOyBpIDwgdHlwZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgYmFzaWNbaV0gPSB0eXBlZFtpXTtcbiAgICAgICAgICAgIH1iNjRkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBiYXNpYyk7XG4gICAgICAgICAgfW1lc3NhZ2UgKz0gZ2xvYmFsLmJ0b2EoYjY0ZGF0YSk7cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICB9O2V4cG9ydHMuZGVjb2RlUGFja2V0ID0gZnVuY3Rpb24gKGRhdGEsIGJpbmFyeVR5cGUsIHV0ZjhkZWNvZGUpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT0gXCJzdHJpbmdcIiB8fCBkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmNoYXJBdCgwKSA9PSBcImJcIikge1xuICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5kZWNvZGVCYXNlNjRQYWNrZXQoZGF0YS5zdWJzdHIoMSksIGJpbmFyeVR5cGUpO1xuICAgICAgICAgICAgfWlmICh1dGY4ZGVjb2RlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHV0ZjguZGVjb2RlKGRhdGEpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfXZhciB0eXBlID0gZGF0YS5jaGFyQXQoMCk7aWYgKE51bWJlcih0eXBlKSAhPSB0eXBlIHx8ICFwYWNrZXRzbGlzdFt0eXBlXSkge1xuICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfWlmIChkYXRhLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogcGFja2V0c2xpc3RbdHlwZV0sIGRhdGE6IGRhdGEuc3Vic3RyaW5nKDEpIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiBwYWNrZXRzbGlzdFt0eXBlXSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH12YXIgYXNBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO3ZhciB0eXBlID0gYXNBcnJheVswXTt2YXIgcmVzdCA9IHNsaWNlQnVmZmVyKGRhdGEsIDEpO2lmIChCbG9iICYmIGJpbmFyeVR5cGUgPT09IFwiYmxvYlwiKSB7XG4gICAgICAgICAgICByZXN0ID0gbmV3IEJsb2IoW3Jlc3RdKTtcbiAgICAgICAgICB9cmV0dXJuIHsgdHlwZTogcGFja2V0c2xpc3RbdHlwZV0sIGRhdGE6IHJlc3QgfTtcbiAgICAgICAgfTtleHBvcnRzLmRlY29kZUJhc2U2NFBhY2tldCA9IGZ1bmN0aW9uIChtc2csIGJpbmFyeVR5cGUpIHtcbiAgICAgICAgICB2YXIgdHlwZSA9IHBhY2tldHNsaXN0W21zZy5jaGFyQXQoMCldO2lmICghZ2xvYmFsLkFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiB0eXBlLCBkYXRhOiB7IGJhc2U2NDogdHJ1ZSwgZGF0YTogbXNnLnN1YnN0cigxKSB9IH07XG4gICAgICAgICAgfXZhciBkYXRhID0gYmFzZTY0ZW5jb2Rlci5kZWNvZGUobXNnLnN1YnN0cigxKSk7aWYgKGJpbmFyeVR5cGUgPT09IFwiYmxvYlwiICYmIEJsb2IpIHtcbiAgICAgICAgICAgIGRhdGEgPSBuZXcgQmxvYihbZGF0YV0pO1xuICAgICAgICAgIH1yZXR1cm4geyB0eXBlOiB0eXBlLCBkYXRhOiBkYXRhIH07XG4gICAgICAgIH07ZXhwb3J0cy5lbmNvZGVQYXlsb2FkID0gZnVuY3Rpb24gKHBhY2tldHMsIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3VwcG9ydHNCaW5hcnkgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHN1cHBvcnRzQmluYXJ5O3N1cHBvcnRzQmluYXJ5ID0gbnVsbDtcbiAgICAgICAgICB9dmFyIGlzQmluYXJ5ID0gaGFzQmluYXJ5KHBhY2tldHMpO2lmIChzdXBwb3J0c0JpbmFyeSAmJiBpc0JpbmFyeSkge1xuICAgICAgICAgICAgaWYgKEJsb2IgJiYgIWRvbnRTZW5kQmxvYnMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQmxvYihwYWNrZXRzLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9cmV0dXJuIGV4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIocGFja2V0cywgY2FsbGJhY2spO1xuICAgICAgICAgIH1pZiAoIXBhY2tldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soXCIwOlwiKTtcbiAgICAgICAgICB9ZnVuY3Rpb24gc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlLmxlbmd0aCArIFwiOlwiICsgbWVzc2FnZTtcbiAgICAgICAgICB9ZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCwgZG9uZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsICFpc0JpbmFyeSA/IGZhbHNlIDogc3VwcG9ydHNCaW5hcnksIHRydWUsIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgIGRvbmVDYWxsYmFjayhudWxsLCBzZXRMZW5ndGhIZWFkZXIobWVzc2FnZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfW1hcChwYWNrZXRzLCBlbmNvZGVPbmUsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZXN1bHRzLmpvaW4oXCJcIikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O2Z1bmN0aW9uIG1hcChhcnksIGVhY2gsIGRvbmUpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGFyeS5sZW5ndGgpO3ZhciBuZXh0ID0gYWZ0ZXIoYXJ5Lmxlbmd0aCwgZG9uZSk7dmFyIGVhY2hXaXRoSW5kZXggPSBmdW5jdGlvbiBlYWNoV2l0aEluZGV4KGksIGVsLCBjYikge1xuICAgICAgICAgICAgZWFjaChlbCwgZnVuY3Rpb24gKGVycm9yLCBtc2cpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W2ldID0gbXNnO2NiKGVycm9yLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtmb3IgKHZhciBpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWFjaFdpdGhJbmRleChpLCBhcnlbaV0sIG5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfWV4cG9ydHMuZGVjb2RlUGF5bG9hZCA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5kZWNvZGVQYXlsb2FkQXNCaW5hcnkoZGF0YSwgYmluYXJ5VHlwZSwgY2FsbGJhY2spO1xuICAgICAgICAgIH1pZiAodHlwZW9mIGJpbmFyeVR5cGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBiaW5hcnlUeXBlO2JpbmFyeVR5cGUgPSBudWxsO1xuICAgICAgICAgIH12YXIgcGFja2V0O2lmIChkYXRhID09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIDAsIDEpO1xuICAgICAgICAgIH12YXIgbGVuZ3RoID0gXCJcIixcbiAgICAgICAgICAgICAgbixcbiAgICAgICAgICAgICAgbXNnO2ZvciAodmFyIGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaHIgPSBkYXRhLmNoYXJBdChpKTtpZiAoXCI6XCIgIT0gY2hyKSB7XG4gICAgICAgICAgICAgIGxlbmd0aCArPSBjaHI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoXCJcIiA9PSBsZW5ndGggfHwgbGVuZ3RoICE9IChuID0gTnVtYmVyKGxlbmd0aCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7XG4gICAgICAgICAgICAgIH1tc2cgPSBkYXRhLnN1YnN0cihpICsgMSwgbik7aWYgKGxlbmd0aCAhPSBtc2cubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgMCwgMSk7XG4gICAgICAgICAgICAgIH1pZiAobXNnLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHBhY2tldCA9IGV4cG9ydHMuZGVjb2RlUGFja2V0KG1zZywgYmluYXJ5VHlwZSwgdHJ1ZSk7aWYgKGVyci50eXBlID09IHBhY2tldC50eXBlICYmIGVyci5kYXRhID09IHBhY2tldC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcbiAgICAgICAgICAgICAgICB9dmFyIHJldCA9IGNhbGxiYWNrKHBhY2tldCwgaSArIG4sIGwpO2lmIChmYWxzZSA9PT0gcmV0KSByZXR1cm47XG4gICAgICAgICAgICAgIH1pICs9IG47bGVuZ3RoID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9aWYgKGxlbmd0aCAhPSBcIlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07ZXhwb3J0cy5lbmNvZGVQYXlsb2FkQXNBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIChwYWNrZXRzLCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICghcGFja2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgQXJyYXlCdWZmZXIoMCkpO1xuICAgICAgICAgIH1mdW5jdGlvbiBlbmNvZGVPbmUocGFja2V0LCBkb25lQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGV4cG9ydHMuZW5jb2RlUGFja2V0KHBhY2tldCwgdHJ1ZSwgdHJ1ZSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRvbmVDYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1tYXAocGFja2V0cywgZW5jb2RlT25lLCBmdW5jdGlvbiAoZXJyLCBlbmNvZGVkUGFja2V0cykge1xuICAgICAgICAgICAgdmFyIHRvdGFsTGVuZ3RoID0gZW5jb2RlZFBhY2tldHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHApIHtcbiAgICAgICAgICAgICAgdmFyIGxlbjtpZiAodHlwZW9mIHAgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsZW4gPSBwLmxlbmd0aDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZW4gPSBwLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgIH1yZXR1cm4gYWNjICsgbGVuLnRvU3RyaW5nKCkubGVuZ3RoICsgbGVuICsgMjtcbiAgICAgICAgICAgIH0sIDApO3ZhciByZXN1bHRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTt2YXIgYnVmZmVySW5kZXggPSAwO2VuY29kZWRQYWNrZXRzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCI7dmFyIGFiID0gcDtpZiAoaXNTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KHAubGVuZ3RoKTtmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIHZpZXdbaV0gPSBwLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgfWFiID0gdmlldy5idWZmZXI7XG4gICAgICAgICAgICAgIH1pZiAoaXNTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK10gPSAxO1xuICAgICAgICAgICAgICB9dmFyIGxlblN0ciA9IGFiLmJ5dGVMZW5ndGgudG9TdHJpbmcoKTtmb3IgKHZhciBpID0gMDsgaSA8IGxlblN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gcGFyc2VJbnQobGVuU3RyW2ldKTtcbiAgICAgICAgICAgICAgfXJlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gMjU1O3ZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYWIpO2ZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gdmlld1tpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEFycmF5LmJ1ZmZlcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07ZXhwb3J0cy5lbmNvZGVQYXlsb2FkQXNCbG9iID0gZnVuY3Rpb24gKHBhY2tldHMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCwgZG9uZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICBleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsIHRydWUsIHRydWUsIGZ1bmN0aW9uIChlbmNvZGVkKSB7XG4gICAgICAgICAgICAgIHZhciBiaW5hcnlJZGVudGlmaWVyID0gbmV3IFVpbnQ4QXJyYXkoMSk7YmluYXJ5SWRlbnRpZmllclswXSA9IDE7aWYgKHR5cGVvZiBlbmNvZGVkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShlbmNvZGVkLmxlbmd0aCk7Zm9yICh2YXIgaSA9IDA7IGkgPCBlbmNvZGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICB2aWV3W2ldID0gZW5jb2RlZC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgIH1lbmNvZGVkID0gdmlldy5idWZmZXI7YmluYXJ5SWRlbnRpZmllclswXSA9IDA7XG4gICAgICAgICAgICAgIH12YXIgbGVuID0gZW5jb2RlZCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gZW5jb2RlZC5ieXRlTGVuZ3RoIDogZW5jb2RlZC5zaXplO3ZhciBsZW5TdHIgPSBsZW4udG9TdHJpbmcoKTt2YXIgbGVuZ3RoQXJ5ID0gbmV3IFVpbnQ4QXJyYXkobGVuU3RyLmxlbmd0aCArIDEpO2ZvciAodmFyIGkgPSAwOyBpIDwgbGVuU3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoQXJ5W2ldID0gcGFyc2VJbnQobGVuU3RyW2ldKTtcbiAgICAgICAgICAgICAgfWxlbmd0aEFyeVtsZW5TdHIubGVuZ3RoXSA9IDI1NTtpZiAoQmxvYikge1xuICAgICAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2JpbmFyeUlkZW50aWZpZXIuYnVmZmVyLCBsZW5ndGhBcnkuYnVmZmVyLCBlbmNvZGVkXSk7ZG9uZUNhbGxiYWNrKG51bGwsIGJsb2IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9bWFwKHBhY2tldHMsIGVuY29kZU9uZSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0cykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBCbG9iKHJlc3VsdHMpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtleHBvcnRzLmRlY29kZVBheWxvYWRBc0JpbmFyeSA9IGZ1bmN0aW9uIChkYXRhLCBiaW5hcnlUeXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgIGlmICh0eXBlb2YgYmluYXJ5VHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGJpbmFyeVR5cGU7YmluYXJ5VHlwZSA9IG51bGw7XG4gICAgICAgICAgfXZhciBidWZmZXJUYWlsID0gZGF0YTt2YXIgYnVmZmVycyA9IFtdO3ZhciBudW1iZXJUb29Mb25nID0gZmFsc2U7d2hpbGUgKGJ1ZmZlclRhaWwuYnl0ZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0YWlsQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJUYWlsKTt2YXIgaXNTdHJpbmcgPSB0YWlsQXJyYXlbMF0gPT09IDA7dmFyIG1zZ0xlbmd0aCA9IFwiXCI7Zm9yICh2YXIgaSA9IDE7OyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHRhaWxBcnJheVtpXSA9PSAyNTUpIGJyZWFrO2lmIChtc2dMZW5ndGgubGVuZ3RoID4gMzEwKSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyVG9vTG9uZyA9IHRydWU7YnJlYWs7XG4gICAgICAgICAgICAgIH1tc2dMZW5ndGggKz0gdGFpbEFycmF5W2ldO1xuICAgICAgICAgICAgfWlmIChudW1iZXJUb29Mb25nKSByZXR1cm4gY2FsbGJhY2soZXJyLCAwLCAxKTtidWZmZXJUYWlsID0gc2xpY2VCdWZmZXIoYnVmZmVyVGFpbCwgMiArIG1zZ0xlbmd0aC5sZW5ndGgpO21zZ0xlbmd0aCA9IHBhcnNlSW50KG1zZ0xlbmd0aCk7dmFyIG1zZyA9IHNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsIDAsIG1zZ0xlbmd0aCk7aWYgKGlzU3RyaW5nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbXNnID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShtc2cpKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlZCA9IG5ldyBVaW50OEFycmF5KG1zZyk7bXNnID0gXCJcIjtmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBtc2cgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0eXBlZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9YnVmZmVycy5wdXNoKG1zZyk7YnVmZmVyVGFpbCA9IHNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsIG1zZ0xlbmd0aCk7XG4gICAgICAgICAgfXZhciB0b3RhbCA9IGJ1ZmZlcnMubGVuZ3RoO2J1ZmZlcnMuZm9yRWFjaChmdW5jdGlvbiAoYnVmZmVyLCBpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhleHBvcnRzLmRlY29kZVBhY2tldChidWZmZXIsIGJpbmFyeVR5cGUsIHRydWUpLCBpLCB0b3RhbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgXCIuL2tleXNcIjogMjAsIGFmdGVyOiAxMSwgXCJhcnJheWJ1ZmZlci5zbGljZVwiOiAxMiwgXCJiYXNlNjQtYXJyYXlidWZmZXJcIjogMTMsIGJsb2I6IDE0LCBcImhhcy1iaW5hcnlcIjogMjEsIHV0Zjg6IDI5IH1dLCAyMDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhvYmopIHtcbiAgICAgICAgdmFyIGFyciA9IFtdO3ZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2ZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICAgICAgaWYgKGhhcy5jYWxsKG9iaiwgaSkpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiBhcnI7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMjE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgaXNBcnJheSA9IF9kZXJlcV8oXCJpc2FycmF5XCIpO21vZHVsZS5leHBvcnRzID0gaGFzQmluYXJ5O2Z1bmN0aW9uIGhhc0JpbmFyeShkYXRhKSB7XG4gICAgICAgICAgZnVuY3Rpb24gX2hhc0JpbmFyeShvYmopIHtcbiAgICAgICAgICAgIGlmICghb2JqKSByZXR1cm4gZmFsc2U7aWYgKGdsb2JhbC5CdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBnbG9iYWwuQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iIHx8IGdsb2JhbC5GaWxlICYmIG9iaiBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9aWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChfaGFzQmluYXJ5KG9ialtpXSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgXCJvYmplY3RcIiA9PSB0eXBlb2Ygb2JqKSB7XG4gICAgICAgICAgICAgIGlmIChvYmoudG9KU09OKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgICAgICAgICAgICB9Zm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIF9oYXNCaW5hcnkob2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfXJldHVybiBfaGFzQmluYXJ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgaXNhcnJheTogMjQgfV0sIDIyOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sIHt9XSwgMjM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgaW5kZXhPZiA9IFtdLmluZGV4T2Y7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyLCBvYmopIHtcbiAgICAgICAgaWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopO2ZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcbiAgICAgICAgfXJldHVybiAtMTtcbiAgICAgIH07XG4gICAgfSwge31dLCAyNDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMjU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgcyA9IDFlMzt2YXIgbSA9IHMgKiA2MDt2YXIgaCA9IG0gKiA2MDt2YXIgZCA9IGggKiAyNDt2YXIgeSA9IGQgKiAzNjUuMjU7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O2lmIChcInN0cmluZ1wiID09IHR5cGVvZiB2YWwpIHJldHVybiBwYXJzZSh2YWwpO3JldHVybiBvcHRpb25zLmxvbmcgPyBsb25nKHZhbCkgOiBzaG9ydCh2YWwpO1xuICAgICAgfTtmdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgICAgICAgc3RyID0gXCJcIiArIHN0cjtpZiAoc3RyLmxlbmd0aCA+IDFlNCkgcmV0dXJuO3ZhciBtYXRjaCA9IC9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoc3RyKTtpZiAoIW1hdGNoKSByZXR1cm47dmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTt2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCBcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoICh0eXBlKSB7Y2FzZSBcInllYXJzXCI6Y2FzZSBcInllYXJcIjpjYXNlIFwieXJzXCI6Y2FzZSBcInlyXCI6Y2FzZSBcInlcIjpcbiAgICAgICAgICAgIHJldHVybiBuICogeTtjYXNlIFwiZGF5c1wiOmNhc2UgXCJkYXlcIjpjYXNlIFwiZFwiOlxuICAgICAgICAgICAgcmV0dXJuIG4gKiBkO2Nhc2UgXCJob3Vyc1wiOmNhc2UgXCJob3VyXCI6Y2FzZSBcImhyc1wiOmNhc2UgXCJoclwiOmNhc2UgXCJoXCI6XG4gICAgICAgICAgICByZXR1cm4gbiAqIGg7Y2FzZSBcIm1pbnV0ZXNcIjpjYXNlIFwibWludXRlXCI6Y2FzZSBcIm1pbnNcIjpjYXNlIFwibWluXCI6Y2FzZSBcIm1cIjpcbiAgICAgICAgICAgIHJldHVybiBuICogbTtjYXNlIFwic2Vjb25kc1wiOmNhc2UgXCJzZWNvbmRcIjpjYXNlIFwic2Vjc1wiOmNhc2UgXCJzZWNcIjpjYXNlIFwic1wiOlxuICAgICAgICAgICAgcmV0dXJuIG4gKiBzO2Nhc2UgXCJtaWxsaXNlY29uZHNcIjpjYXNlIFwibWlsbGlzZWNvbmRcIjpjYXNlIFwibXNlY3NcIjpjYXNlIFwibXNlY1wiOmNhc2UgXCJtc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG47fVxuICAgICAgfWZ1bmN0aW9uIHNob3J0KG1zKSB7XG4gICAgICAgIGlmIChtcyA+PSBkKSByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgXCJkXCI7aWYgKG1zID49IGgpIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyBcImhcIjtpZiAobXMgPj0gbSkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArIFwibVwiO2lmIChtcyA+PSBzKSByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgXCJzXCI7cmV0dXJuIG1zICsgXCJtc1wiO1xuICAgICAgfWZ1bmN0aW9uIGxvbmcobXMpIHtcbiAgICAgICAgcmV0dXJuIHBsdXJhbChtcywgZCwgXCJkYXlcIikgfHwgcGx1cmFsKG1zLCBoLCBcImhvdXJcIikgfHwgcGx1cmFsKG1zLCBtLCBcIm1pbnV0ZVwiKSB8fCBwbHVyYWwobXMsIHMsIFwic2Vjb25kXCIpIHx8IG1zICsgXCIgbXNcIjtcbiAgICAgIH1mdW5jdGlvbiBwbHVyYWwobXMsIG4sIG5hbWUpIHtcbiAgICAgICAgaWYgKG1zIDwgbikgcmV0dXJuO2lmIChtcyA8IG4gKiAxLjUpIHJldHVybiBNYXRoLmZsb29yKG1zIC8gbikgKyBcIiBcIiArIG5hbWU7cmV0dXJuIE1hdGguY2VpbChtcyAvIG4pICsgXCIgXCIgKyBuYW1lICsgXCJzXCI7XG4gICAgICB9XG4gICAgfSwge31dLCAyNjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBydmFsaWRjaGFycyA9IC9eW1xcXSw6e31cXHNdKiQvO3ZhciBydmFsaWRlc2NhcGUgPSAvXFxcXCg/OltcIlxcXFxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nO3ZhciBydmFsaWR0b2tlbnMgPSAvXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2c7dmFyIHJ2YWxpZGJyYWNlcyA9IC8oPzpefDp8LCkoPzpcXHMqXFxbKSsvZzt2YXIgcnRyaW1MZWZ0ID0gL15cXHMrLzt2YXIgcnRyaW1SaWdodCA9IC9cXHMrJC87bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZWpzb24oZGF0YSkge1xuICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBkYXRhIHx8ICFkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9ZGF0YSA9IGRhdGEucmVwbGFjZShydHJpbUxlZnQsIFwiXCIpLnJlcGxhY2UocnRyaW1SaWdodCwgXCJcIik7aWYgKGdsb2JhbC5KU09OICYmIEpTT04ucGFyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgIH1pZiAocnZhbGlkY2hhcnMudGVzdChkYXRhLnJlcGxhY2UocnZhbGlkZXNjYXBlLCBcIkBcIikucmVwbGFjZShydmFsaWR0b2tlbnMsIFwiXVwiKS5yZXBsYWNlKHJ2YWxpZGJyYWNlcywgXCJcIikpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwicmV0dXJuIFwiICsgZGF0YSkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHt9XSwgMjc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBleHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIHN0ciA9IFwiXCI7Zm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCkgc3RyICs9IFwiJlwiO3N0ciArPSBlbmNvZGVVUklDb21wb25lbnQoaSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChvYmpbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiBzdHI7XG4gICAgICB9O2V4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24gKHFzKSB7XG4gICAgICAgIHZhciBxcnkgPSB7fTt2YXIgcGFpcnMgPSBxcy5zcGxpdChcIiZcIik7Zm9yICh2YXIgaSA9IDAsIGwgPSBwYWlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIgcGFpciA9IHBhaXJzW2ldLnNwbGl0KFwiPVwiKTtxcnlbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgICAgfXJldHVybiBxcnk7XG4gICAgICB9O1xuICAgIH0sIHt9XSwgMjg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgcmUgPSAvXig/Oig/IVteOkBdKzpbXjpAXFwvXSpAKShodHRwfGh0dHBzfHdzfHdzcyk6XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pLzt2YXIgcGFydHMgPSBbXCJzb3VyY2VcIiwgXCJwcm90b2NvbFwiLCBcImF1dGhvcml0eVwiLCBcInVzZXJJbmZvXCIsIFwidXNlclwiLCBcInBhc3N3b3JkXCIsIFwiaG9zdFwiLCBcInBvcnRcIiwgXCJyZWxhdGl2ZVwiLCBcInBhdGhcIiwgXCJkaXJlY3RvcnlcIiwgXCJmaWxlXCIsIFwicXVlcnlcIiwgXCJhbmNob3JcIl07bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZXVyaShzdHIpIHtcbiAgICAgICAgdmFyIHNyYyA9IHN0cixcbiAgICAgICAgICAgIGIgPSBzdHIuaW5kZXhPZihcIltcIiksXG4gICAgICAgICAgICBlID0gc3RyLmluZGV4T2YoXCJdXCIpO2lmIChiICE9IC0xICYmIGUgIT0gLTEpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGIpICsgc3RyLnN1YnN0cmluZyhiLCBlKS5yZXBsYWNlKC86L2csIFwiO1wiKSArIHN0ci5zdWJzdHJpbmcoZSwgc3RyLmxlbmd0aCk7XG4gICAgICAgIH12YXIgbSA9IHJlLmV4ZWMoc3RyIHx8IFwiXCIpLFxuICAgICAgICAgICAgdXJpID0ge30sXG4gICAgICAgICAgICBpID0gMTQ7d2hpbGUgKGktLSkge1xuICAgICAgICAgIHVyaVtwYXJ0c1tpXV0gPSBtW2ldIHx8IFwiXCI7XG4gICAgICAgIH1pZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG4gICAgICAgICAgdXJpLnNvdXJjZSA9IHNyYzt1cmkuaG9zdCA9IHVyaS5ob3N0LnN1YnN0cmluZygxLCB1cmkuaG9zdC5sZW5ndGggLSAxKS5yZXBsYWNlKC87L2csIFwiOlwiKTt1cmkuYXV0aG9yaXR5ID0gdXJpLmF1dGhvcml0eS5yZXBsYWNlKFwiW1wiLCBcIlwiKS5yZXBsYWNlKFwiXVwiLCBcIlwiKS5yZXBsYWNlKC87L2csIFwiOlwiKTt1cmkuaXB2NnVyaSA9IHRydWU7XG4gICAgICAgIH1yZXR1cm4gdXJpO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDI5OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgKGZ1bmN0aW9uIChyb290KSB7XG4gICAgICAgICAgdmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiBleHBvcnRzO3ZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiICYmIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cyAmJiBtb2R1bGU7dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsO2lmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCkge1xuICAgICAgICAgICAgcm9vdCA9IGZyZWVHbG9iYWw7XG4gICAgICAgICAgfXZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO2Z1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gW107dmFyIGNvdW50ZXIgPSAwO3ZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO3ZhciB2YWx1ZTt2YXIgZXh0cmE7d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO2lmICh2YWx1ZSA+PSA1NTI5NiAmJiB2YWx1ZSA8PSA1NjMxOSAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZXh0cmEgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO2lmICgoZXh0cmEgJiA2NDUxMikgPT0gNTYzMjApIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKCgodmFsdWUgJiAxMDIzKSA8PCAxMCkgKyAoZXh0cmEgJiAxMDIzKSArIDY1NTM2KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2godmFsdWUpO2NvdW50ZXItLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9cmV0dXJuIG91dHB1dDtcbiAgICAgICAgICB9ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDt2YXIgaW5kZXggPSAtMTt2YXIgdmFsdWU7dmFyIG91dHB1dCA9IFwiXCI7d2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBhcnJheVtpbmRleF07aWYgKHZhbHVlID4gNjU1MzUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSAtPSA2NTUzNjtvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDEwMjMgfCA1NTI5Nik7dmFsdWUgPSA1NjMyMCB8IHZhbHVlICYgMTAyMztcbiAgICAgICAgICAgICAgfW91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuICAgICAgICAgICAgfXJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgfWZ1bmN0aW9uIGNoZWNrU2NhbGFyVmFsdWUoY29kZVBvaW50KSB7XG4gICAgICAgICAgICBpZiAoY29kZVBvaW50ID49IDU1Mjk2ICYmIGNvZGVQb2ludCA8PSA1NzM0Mykge1xuICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkxvbmUgc3Vycm9nYXRlIFUrXCIgKyBjb2RlUG9pbnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgKyBcIiBpcyBub3QgYSBzY2FsYXIgdmFsdWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWZ1bmN0aW9uIGNyZWF0ZUJ5dGUoY29kZVBvaW50LCBzaGlmdCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gc2hpZnQgJiA2MyB8IDEyOCk7XG4gICAgICAgICAgfWZ1bmN0aW9uIGVuY29kZUNvZGVQb2ludChjb2RlUG9pbnQpIHtcbiAgICAgICAgICAgIGlmICgoY29kZVBvaW50ICYgNDI5NDk2NzE2OCkgPT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCk7XG4gICAgICAgICAgICB9dmFyIHN5bWJvbCA9IFwiXCI7aWYgKChjb2RlUG9pbnQgJiA0Mjk0OTY1MjQ4KSA9PSAwKSB7XG4gICAgICAgICAgICAgIHN5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gNiAmIDMxIHwgMTkyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGNvZGVQb2ludCAmIDQyOTQ5MDE3NjApID09IDApIHtcbiAgICAgICAgICAgICAgY2hlY2tTY2FsYXJWYWx1ZShjb2RlUG9pbnQpO3N5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gMTIgJiAxNSB8IDIyNCk7c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LCA2KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGNvZGVQb2ludCAmIDQyOTI4NzAxNDQpID09IDApIHtcbiAgICAgICAgICAgICAgc3ltYm9sID0gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCA+PiAxOCAmIDcgfCAyNDApO3N5bWJvbCArPSBjcmVhdGVCeXRlKGNvZGVQb2ludCwgMTIpO3N5bWJvbCArPSBjcmVhdGVCeXRlKGNvZGVQb2ludCwgNik7XG4gICAgICAgICAgICB9c3ltYm9sICs9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgJiA2MyB8IDEyOCk7cmV0dXJuIHN5bWJvbDtcbiAgICAgICAgICB9ZnVuY3Rpb24gdXRmOGVuY29kZShzdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBjb2RlUG9pbnRzID0gdWNzMmRlY29kZShzdHJpbmcpO3ZhciBsZW5ndGggPSBjb2RlUG9pbnRzLmxlbmd0aDt2YXIgaW5kZXggPSAtMTt2YXIgY29kZVBvaW50O3ZhciBieXRlU3RyaW5nID0gXCJcIjt3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSBjb2RlUG9pbnRzW2luZGV4XTtieXRlU3RyaW5nICs9IGVuY29kZUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgICAgICAgICAgfXJldHVybiBieXRlU3RyaW5nO1xuICAgICAgICAgIH1mdW5jdGlvbiByZWFkQ29udGludWF0aW9uQnl0ZSgpIHtcbiAgICAgICAgICAgIGlmIChieXRlSW5kZXggPj0gYnl0ZUNvdW50KSB7XG4gICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpO1xuICAgICAgICAgICAgfXZhciBjb250aW51YXRpb25CeXRlID0gYnl0ZUFycmF5W2J5dGVJbmRleF0gJiAyNTU7Ynl0ZUluZGV4Kys7aWYgKChjb250aW51YXRpb25CeXRlICYgMTkyKSA9PSAxMjgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRpbnVhdGlvbkJ5dGUgJiA2MztcbiAgICAgICAgICAgIH10aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIik7XG4gICAgICAgICAgfWZ1bmN0aW9uIGRlY29kZVN5bWJvbCgpIHtcbiAgICAgICAgICAgIHZhciBieXRlMTt2YXIgYnl0ZTI7dmFyIGJ5dGUzO3ZhciBieXRlNDt2YXIgY29kZVBvaW50O2lmIChieXRlSW5kZXggPiBieXRlQ291bnQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGJ5dGUgaW5kZXhcIik7XG4gICAgICAgICAgICB9aWYgKGJ5dGVJbmRleCA9PSBieXRlQ291bnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfWJ5dGUxID0gYnl0ZUFycmF5W2J5dGVJbmRleF0gJiAyNTU7Ynl0ZUluZGV4Kys7aWYgKChieXRlMSAmIDEyOCkgPT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gYnl0ZTE7XG4gICAgICAgICAgICB9aWYgKChieXRlMSAmIDIyNCkgPT0gMTkyKSB7XG4gICAgICAgICAgICAgIHZhciBieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50ID0gKGJ5dGUxICYgMzEpIDw8IDYgfCBieXRlMjtpZiAoY29kZVBvaW50ID49IDEyOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2RlUG9pbnQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9aWYgKChieXRlMSAmIDI0MCkgPT0gMjI0KSB7XG4gICAgICAgICAgICAgIGJ5dGUyID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtieXRlMyA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50ID0gKGJ5dGUxICYgMTUpIDw8IDEyIHwgYnl0ZTIgPDwgNiB8IGJ5dGUzO2lmIChjb2RlUG9pbnQgPj0gMjA0OCkge1xuICAgICAgICAgICAgICAgIGNoZWNrU2NhbGFyVmFsdWUoY29kZVBvaW50KTtyZXR1cm4gY29kZVBvaW50O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWlmICgoYnl0ZTEgJiAyNDgpID09IDI0MCkge1xuICAgICAgICAgICAgICBieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Ynl0ZTMgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO2J5dGU0ID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtjb2RlUG9pbnQgPSAoYnl0ZTEgJiAxNSkgPDwgMTggfCBieXRlMiA8PCAxMiB8IGJ5dGUzIDw8IDYgfCBieXRlNDtpZiAoY29kZVBvaW50ID49IDY1NTM2ICYmIGNvZGVQb2ludCA8PSAxMTE0MTExKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVQb2ludDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfXRocm93IEVycm9yKFwiSW52YWxpZCBVVEYtOCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICB9dmFyIGJ5dGVBcnJheTt2YXIgYnl0ZUNvdW50O3ZhciBieXRlSW5kZXg7ZnVuY3Rpb24gdXRmOGRlY29kZShieXRlU3RyaW5nKSB7XG4gICAgICAgICAgICBieXRlQXJyYXkgPSB1Y3MyZGVjb2RlKGJ5dGVTdHJpbmcpO2J5dGVDb3VudCA9IGJ5dGVBcnJheS5sZW5ndGg7Ynl0ZUluZGV4ID0gMDt2YXIgY29kZVBvaW50cyA9IFtdO3ZhciB0bXA7d2hpbGUgKCh0bXAgPSBkZWNvZGVTeW1ib2woKSkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludHMucHVzaCh0bXApO1xuICAgICAgICAgICAgfXJldHVybiB1Y3MyZW5jb2RlKGNvZGVQb2ludHMpO1xuICAgICAgICAgIH12YXIgdXRmOCA9IHsgdmVyc2lvbjogXCIyLjAuMFwiLCBlbmNvZGU6IHV0ZjhlbmNvZGUsIGRlY29kZTogdXRmOGRlY29kZSB9O2lmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSBcIm9iamVjdFwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1dGY4O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiAhZnJlZUV4cG9ydHMubm9kZVR5cGUpIHtcbiAgICAgICAgICAgIGlmIChmcmVlTW9kdWxlKSB7XG4gICAgICAgICAgICAgIGZyZWVNb2R1bGUuZXhwb3J0cyA9IHV0Zjg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0Lmhhc093blByb3BlcnR5O2ZvciAodmFyIGtleSBpbiB1dGY4KSB7XG4gICAgICAgICAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbCh1dGY4LCBrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gdXRmOFtrZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb290LnV0ZjggPSB1dGY4O1xuICAgICAgICAgIH1cbiAgICAgICAgfSkodGhpcyk7XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHt9XSwgMzA6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBcInVzZSBzdHJpY3RcIjt2YXIgYWxwaGFiZXQgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV9cIi5zcGxpdChcIlwiKSxcbiAgICAgICAgICBsZW5ndGggPSA2NCxcbiAgICAgICAgICBtYXAgPSB7fSxcbiAgICAgICAgICBzZWVkID0gMCxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICBwcmV2O2Z1bmN0aW9uIGVuY29kZShudW0pIHtcbiAgICAgICAgdmFyIGVuY29kZWQgPSBcIlwiO2RvIHtcbiAgICAgICAgICBlbmNvZGVkID0gYWxwaGFiZXRbbnVtICUgbGVuZ3RoXSArIGVuY29kZWQ7bnVtID0gTWF0aC5mbG9vcihudW0gLyBsZW5ndGgpO1xuICAgICAgICB9IHdoaWxlIChudW0gPiAwKTtyZXR1cm4gZW5jb2RlZDtcbiAgICAgIH1mdW5jdGlvbiBkZWNvZGUoc3RyKSB7XG4gICAgICAgIHZhciBkZWNvZGVkID0gMDtmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZGVjb2RlZCA9IGRlY29kZWQgKiBsZW5ndGggKyBtYXBbc3RyLmNoYXJBdChpKV07XG4gICAgICAgIH1yZXR1cm4gZGVjb2RlZDtcbiAgICAgIH1mdW5jdGlvbiB5ZWFzdCgpIHtcbiAgICAgICAgdmFyIG5vdyA9IGVuY29kZSgrbmV3IERhdGUoKSk7aWYgKG5vdyAhPT0gcHJldikgcmV0dXJuIHNlZWQgPSAwLCBwcmV2ID0gbm93O3JldHVybiBub3cgKyBcIi5cIiArIGVuY29kZShzZWVkKyspO1xuICAgICAgfWZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIG1hcFthbHBoYWJldFtpXV0gPSBpO3llYXN0LmVuY29kZSA9IGVuY29kZTt5ZWFzdC5kZWNvZGUgPSBkZWNvZGU7bW9kdWxlLmV4cG9ydHMgPSB5ZWFzdDtcbiAgICB9LCB7fV0sIDMxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIHVybCA9IF9kZXJlcV8oXCIuL3VybFwiKTt2YXIgcGFyc2VyID0gX2RlcmVxXyhcInNvY2tldC5pby1wYXJzZXJcIik7dmFyIE1hbmFnZXIgPSBfZGVyZXFfKFwiLi9tYW5hZ2VyXCIpO3ZhciBkZWJ1ZyA9IF9kZXJlcV8oXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnRcIik7bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gbG9va3VwO3ZhciBjYWNoZSA9IGV4cG9ydHMubWFuYWdlcnMgPSB7fTtmdW5jdGlvbiBsb29rdXAodXJpLCBvcHRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJpID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBvcHRzID0gdXJpO3VyaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfW9wdHMgPSBvcHRzIHx8IHt9O3ZhciBwYXJzZWQgPSB1cmwodXJpKTt2YXIgc291cmNlID0gcGFyc2VkLnNvdXJjZTt2YXIgaWQgPSBwYXJzZWQuaWQ7dmFyIHBhdGggPSBwYXJzZWQucGF0aDt2YXIgc2FtZU5hbWVzcGFjZSA9IGNhY2hlW2lkXSAmJiBwYXRoIGluIGNhY2hlW2lkXS5uc3BzO3ZhciBuZXdDb25uZWN0aW9uID0gb3B0cy5mb3JjZU5ldyB8fCBvcHRzW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl0gfHwgZmFsc2UgPT09IG9wdHMubXVsdGlwbGV4IHx8IHNhbWVOYW1lc3BhY2U7dmFyIGlvO2lmIChuZXdDb25uZWN0aW9uKSB7XG4gICAgICAgICAgZGVidWcoXCJpZ25vcmluZyBzb2NrZXQgY2FjaGUgZm9yICVzXCIsIHNvdXJjZSk7aW8gPSBNYW5hZ2VyKHNvdXJjZSwgb3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgICAgIGRlYnVnKFwibmV3IGlvIGluc3RhbmNlIGZvciAlc1wiLCBzb3VyY2UpO2NhY2hlW2lkXSA9IE1hbmFnZXIoc291cmNlLCBvcHRzKTtcbiAgICAgICAgICB9aW8gPSBjYWNoZVtpZF07XG4gICAgICAgIH1yZXR1cm4gaW8uc29ja2V0KHBhcnNlZC5wYXRoKTtcbiAgICAgIH1leHBvcnRzLnByb3RvY29sID0gcGFyc2VyLnByb3RvY29sO2V4cG9ydHMuY29ubmVjdCA9IGxvb2t1cDtleHBvcnRzLk1hbmFnZXIgPSBfZGVyZXFfKFwiLi9tYW5hZ2VyXCIpO2V4cG9ydHMuU29ja2V0ID0gX2RlcmVxXyhcIi4vc29ja2V0XCIpO1xuICAgIH0sIHsgXCIuL21hbmFnZXJcIjogMzIsIFwiLi9zb2NrZXRcIjogMzQsIFwiLi91cmxcIjogMzUsIGRlYnVnOiAzOSwgXCJzb2NrZXQuaW8tcGFyc2VyXCI6IDQ3IH1dLCAzMjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIHZhciBlaW8gPSBfZGVyZXFfKFwiZW5naW5lLmlvLWNsaWVudFwiKTt2YXIgU29ja2V0ID0gX2RlcmVxXyhcIi4vc29ja2V0XCIpO3ZhciBFbWl0dGVyID0gX2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciBwYXJzZXIgPSBfZGVyZXFfKFwic29ja2V0LmlvLXBhcnNlclwiKTt2YXIgb24gPSBfZGVyZXFfKFwiLi9vblwiKTt2YXIgYmluZCA9IF9kZXJlcV8oXCJjb21wb25lbnQtYmluZFwiKTt2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tY2xpZW50Om1hbmFnZXJcIik7dmFyIGluZGV4T2YgPSBfZGVyZXFfKFwiaW5kZXhvZlwiKTt2YXIgQmFja29mZiA9IF9kZXJlcV8oXCJiYWNrbzJcIik7dmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7bW9kdWxlLmV4cG9ydHMgPSBNYW5hZ2VyO2Z1bmN0aW9uIE1hbmFnZXIodXJpLCBvcHRzKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBNYW5hZ2VyKSkgcmV0dXJuIG5ldyBNYW5hZ2VyKHVyaSwgb3B0cyk7aWYgKHVyaSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB1cmkpIHtcbiAgICAgICAgICBvcHRzID0gdXJpO3VyaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfW9wdHMgPSBvcHRzIHx8IHt9O29wdHMucGF0aCA9IG9wdHMucGF0aCB8fCBcIi9zb2NrZXQuaW9cIjt0aGlzLm5zcHMgPSB7fTt0aGlzLnN1YnMgPSBbXTt0aGlzLm9wdHMgPSBvcHRzO3RoaXMucmVjb25uZWN0aW9uKG9wdHMucmVjb25uZWN0aW9uICE9PSBmYWxzZSk7dGhpcy5yZWNvbm5lY3Rpb25BdHRlbXB0cyhvcHRzLnJlY29ubmVjdGlvbkF0dGVtcHRzIHx8IEluZmluaXR5KTt0aGlzLnJlY29ubmVjdGlvbkRlbGF5KG9wdHMucmVjb25uZWN0aW9uRGVsYXkgfHwgMWUzKTt0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KG9wdHMucmVjb25uZWN0aW9uRGVsYXlNYXggfHwgNWUzKTt0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3Iob3B0cy5yYW5kb21pemF0aW9uRmFjdG9yIHx8IC41KTt0aGlzLmJhY2tvZmYgPSBuZXcgQmFja29mZih7IG1pbjogdGhpcy5yZWNvbm5lY3Rpb25EZWxheSgpLCBtYXg6IHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSwgaml0dGVyOiB0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoKSB9KTt0aGlzLnRpbWVvdXQobnVsbCA9PSBvcHRzLnRpbWVvdXQgPyAyZTQgOiBvcHRzLnRpbWVvdXQpO3RoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7dGhpcy51cmkgPSB1cmk7dGhpcy5jb25uZWN0aW5nID0gW107dGhpcy5sYXN0UGluZyA9IG51bGw7dGhpcy5lbmNvZGluZyA9IGZhbHNlO3RoaXMucGFja2V0QnVmZmVyID0gW107dGhpcy5lbmNvZGVyID0gbmV3IHBhcnNlci5FbmNvZGVyKCk7dGhpcy5kZWNvZGVyID0gbmV3IHBhcnNlci5EZWNvZGVyKCk7dGhpcy5hdXRvQ29ubmVjdCA9IG9wdHMuYXV0b0Nvbm5lY3QgIT09IGZhbHNlO2lmICh0aGlzLmF1dG9Db25uZWN0KSB0aGlzLm9wZW4oKTtcbiAgICAgIH1NYW5hZ2VyLnByb3RvdHlwZS5lbWl0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtmb3IgKHZhciBuc3AgaW4gdGhpcy5uc3BzKSB7XG4gICAgICAgICAgaWYgKGhhcy5jYWxsKHRoaXMubnNwcywgbnNwKSkge1xuICAgICAgICAgICAgdGhpcy5uc3BzW25zcF0uZW1pdC5hcHBseSh0aGlzLm5zcHNbbnNwXSwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUudXBkYXRlU29ja2V0SWRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBuc3AgaW4gdGhpcy5uc3BzKSB7XG4gICAgICAgICAgaWYgKGhhcy5jYWxsKHRoaXMubnNwcywgbnNwKSkge1xuICAgICAgICAgICAgdGhpcy5uc3BzW25zcF0uaWQgPSB0aGlzLmVuZ2luZS5pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07RW1pdHRlcihNYW5hZ2VyLnByb3RvdHlwZSk7TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uO3RoaXMuX3JlY29ubmVjdGlvbiA9ICEhdjtyZXR1cm4gdGhpcztcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uQXR0ZW1wdHMgPSBmdW5jdGlvbiAodikge1xuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0czt0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cyA9IHY7cmV0dXJuIHRoaXM7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5ID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uRGVsYXk7dGhpcy5fcmVjb25uZWN0aW9uRGVsYXkgPSB2O3RoaXMuYmFja29mZiAmJiB0aGlzLmJhY2tvZmYuc2V0TWluKHYpO3JldHVybiB0aGlzO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5yYW5kb21pemF0aW9uRmFjdG9yID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fcmFuZG9taXphdGlvbkZhY3Rvcjt0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yID0gdjt0aGlzLmJhY2tvZmYgJiYgdGhpcy5iYWNrb2ZmLnNldEppdHRlcih2KTtyZXR1cm4gdGhpcztcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uRGVsYXlNYXggPSBmdW5jdGlvbiAodikge1xuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heDt0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heCA9IHY7dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRNYXgodik7cmV0dXJuIHRoaXM7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnRpbWVvdXQgPSBmdW5jdGlvbiAodikge1xuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLl90aW1lb3V0O3RoaXMuX3RpbWVvdXQgPSB2O3JldHVybiB0aGlzO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5tYXliZVJlY29ubmVjdE9uT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlY29ubmVjdGluZyAmJiB0aGlzLl9yZWNvbm5lY3Rpb24gJiYgdGhpcy5iYWNrb2ZmLmF0dGVtcHRzID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5vcGVuID0gTWFuYWdlci5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBkZWJ1ZyhcInJlYWR5U3RhdGUgJXNcIiwgdGhpcy5yZWFkeVN0YXRlKTtpZiAofnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSkgcmV0dXJuIHRoaXM7ZGVidWcoXCJvcGVuaW5nICVzXCIsIHRoaXMudXJpKTt0aGlzLmVuZ2luZSA9IGVpbyh0aGlzLnVyaSwgdGhpcy5vcHRzKTt2YXIgc29ja2V0ID0gdGhpcy5lbmdpbmU7dmFyIHNlbGYgPSB0aGlzO3RoaXMucmVhZHlTdGF0ZSA9IFwib3BlbmluZ1wiO3RoaXMuc2tpcFJlY29ubmVjdCA9IGZhbHNlO3ZhciBvcGVuU3ViID0gb24oc29ja2V0LCBcIm9wZW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYub25vcGVuKCk7Zm4gJiYgZm4oKTtcbiAgICAgICAgfSk7dmFyIGVycm9yU3ViID0gb24oc29ja2V0LCBcImVycm9yXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgZGVidWcoXCJjb25uZWN0X2Vycm9yXCIpO3NlbGYuY2xlYW51cCgpO3NlbGYucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7c2VsZi5lbWl0QWxsKFwiY29ubmVjdF9lcnJvclwiLCBkYXRhKTtpZiAoZm4pIHtcbiAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJDb25uZWN0aW9uIGVycm9yXCIpO2Vyci5kYXRhID0gZGF0YTtmbihlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLm1heWJlUmVjb25uZWN0T25PcGVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtpZiAoZmFsc2UgIT09IHRoaXMuX3RpbWVvdXQpIHtcbiAgICAgICAgICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXQ7ZGVidWcoXCJjb25uZWN0IGF0dGVtcHQgd2lsbCB0aW1lb3V0IGFmdGVyICVkXCIsIHRpbWVvdXQpO3ZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVidWcoXCJjb25uZWN0IGF0dGVtcHQgdGltZWQgb3V0IGFmdGVyICVkXCIsIHRpbWVvdXQpO29wZW5TdWIuZGVzdHJveSgpO3NvY2tldC5jbG9zZSgpO3NvY2tldC5lbWl0KFwiZXJyb3JcIiwgXCJ0aW1lb3V0XCIpO3NlbGYuZW1pdEFsbChcImNvbm5lY3RfdGltZW91dFwiLCB0aW1lb3V0KTtcbiAgICAgICAgICB9LCB0aW1lb3V0KTt0aGlzLnN1YnMucHVzaCh7IGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9IH0pO1xuICAgICAgICB9dGhpcy5zdWJzLnB1c2gob3BlblN1Yik7dGhpcy5zdWJzLnB1c2goZXJyb3JTdWIpO3JldHVybiB0aGlzO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlYnVnKFwib3BlblwiKTt0aGlzLmNsZWFudXAoKTt0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5cIjt0aGlzLmVtaXQoXCJvcGVuXCIpO3ZhciBzb2NrZXQgPSB0aGlzLmVuZ2luZTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsIFwiZGF0YVwiLCBiaW5kKHRoaXMsIFwib25kYXRhXCIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCBcInBpbmdcIiwgYmluZCh0aGlzLCBcIm9ucGluZ1wiKSkpO3RoaXMuc3Vicy5wdXNoKG9uKHNvY2tldCwgXCJwb25nXCIsIGJpbmQodGhpcywgXCJvbnBvbmdcIikpKTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsIFwiZXJyb3JcIiwgYmluZCh0aGlzLCBcIm9uZXJyb3JcIikpKTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsIFwiY2xvc2VcIiwgYmluZCh0aGlzLCBcIm9uY2xvc2VcIikpKTt0aGlzLnN1YnMucHVzaChvbih0aGlzLmRlY29kZXIsIFwiZGVjb2RlZFwiLCBiaW5kKHRoaXMsIFwib25kZWNvZGVkXCIpKSk7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLm9ucGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sYXN0UGluZyA9IG5ldyBEYXRlKCk7dGhpcy5lbWl0QWxsKFwicGluZ1wiKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25wb25nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXRBbGwoXCJwb25nXCIsIG5ldyBEYXRlKCkgLSB0aGlzLmxhc3RQaW5nKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25kYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kZWNvZGVyLmFkZChkYXRhKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25kZWNvZGVkID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICB0aGlzLmVtaXQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZGVidWcoXCJlcnJvclwiLCBlcnIpO3RoaXMuZW1pdEFsbChcImVycm9yXCIsIGVycik7XG4gICAgICB9O01hbmFnZXIucHJvdG90eXBlLnNvY2tldCA9IGZ1bmN0aW9uIChuc3ApIHtcbiAgICAgICAgdmFyIHNvY2tldCA9IHRoaXMubnNwc1tuc3BdO2lmICghc29ja2V0KSB7XG4gICAgICAgICAgc29ja2V0ID0gbmV3IFNvY2tldCh0aGlzLCBuc3ApO3RoaXMubnNwc1tuc3BdID0gc29ja2V0O3ZhciBzZWxmID0gdGhpcztzb2NrZXQub24oXCJjb25uZWN0aW5nXCIsIG9uQ29ubmVjdGluZyk7XG4gICAgICAgICAgc29ja2V0Lm9uKFwiY29ubmVjdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb2NrZXQuaWQgPSBzZWxmLmVuZ2luZS5pZDtcbiAgICAgICAgICB9KTtpZiAodGhpcy5hdXRvQ29ubmVjdCkge1xuICAgICAgICAgICAgb25Db25uZWN0aW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9ZnVuY3Rpb24gb25Db25uZWN0aW5nKCkge1xuICAgICAgICAgIGlmICghIH5pbmRleE9mKHNlbGYuY29ubmVjdGluZywgc29ja2V0KSkge1xuICAgICAgICAgICAgc2VsZi5jb25uZWN0aW5nLnB1c2goc29ja2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1yZXR1cm4gc29ja2V0O1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKHNvY2tldCkge1xuICAgICAgICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMuY29ubmVjdGluZywgc29ja2V0KTtpZiAofmluZGV4KSB0aGlzLmNvbm5lY3Rpbmcuc3BsaWNlKGluZGV4LCAxKTtpZiAodGhpcy5jb25uZWN0aW5nLmxlbmd0aCkgcmV0dXJuO3RoaXMuY2xvc2UoKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICBkZWJ1ZyhcIndyaXRpbmcgcGFja2V0ICVqXCIsIHBhY2tldCk7dmFyIHNlbGYgPSB0aGlzO2lmICghc2VsZi5lbmNvZGluZykge1xuICAgICAgICAgIHNlbGYuZW5jb2RpbmcgPSB0cnVlO3RoaXMuZW5jb2Rlci5lbmNvZGUocGFja2V0LCBmdW5jdGlvbiAoZW5jb2RlZFBhY2tldHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5jb2RlZFBhY2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgc2VsZi5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0sIHBhY2tldC5vcHRpb25zKTtcbiAgICAgICAgICAgIH1zZWxmLmVuY29kaW5nID0gZmFsc2U7c2VsZi5wcm9jZXNzUGFja2V0UXVldWUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLnBhY2tldEJ1ZmZlci5wdXNoKHBhY2tldCk7XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucHJvY2Vzc1BhY2tldFF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wYWNrZXRCdWZmZXIubGVuZ3RoID4gMCAmJiAhdGhpcy5lbmNvZGluZykge1xuICAgICAgICAgIHZhciBwYWNrID0gdGhpcy5wYWNrZXRCdWZmZXIuc2hpZnQoKTt0aGlzLnBhY2tldChwYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWJ1ZyhcImNsZWFudXBcIik7dmFyIHN1Yjt3aGlsZSAoc3ViID0gdGhpcy5zdWJzLnNoaWZ0KCkpIHN1Yi5kZXN0cm95KCk7dGhpcy5wYWNrZXRCdWZmZXIgPSBbXTt0aGlzLmVuY29kaW5nID0gZmFsc2U7dGhpcy5sYXN0UGluZyA9IG51bGw7dGhpcy5kZWNvZGVyLmRlc3Ryb3koKTtcbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUuY2xvc2UgPSBNYW5hZ2VyLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWJ1ZyhcImRpc2Nvbm5lY3RcIik7dGhpcy5za2lwUmVjb25uZWN0ID0gdHJ1ZTt0aGlzLnJlY29ubmVjdGluZyA9IGZhbHNlO2lmIChcIm9wZW5pbmdcIiA9PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgfXRoaXMuYmFja29mZi5yZXNldCgpO3RoaXMucmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7aWYgKHRoaXMuZW5naW5lKSB0aGlzLmVuZ2luZS5jbG9zZSgpO1xuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBkZWJ1ZyhcIm9uY2xvc2VcIik7dGhpcy5jbGVhbnVwKCk7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjt0aGlzLmVtaXQoXCJjbG9zZVwiLCByZWFzb24pO2lmICh0aGlzLl9yZWNvbm5lY3Rpb24gJiYgIXRoaXMuc2tpcFJlY29ubmVjdCkge1xuICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZWNvbm5lY3RpbmcgfHwgdGhpcy5za2lwUmVjb25uZWN0KSByZXR1cm4gdGhpczt2YXIgc2VsZiA9IHRoaXM7aWYgKHRoaXMuYmFja29mZi5hdHRlbXB0cyA+PSB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cykge1xuICAgICAgICAgIGRlYnVnKFwicmVjb25uZWN0IGZhaWxlZFwiKTt0aGlzLmJhY2tvZmYucmVzZXQoKTt0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RfZmFpbGVkXCIpO3RoaXMucmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5iYWNrb2ZmLmR1cmF0aW9uKCk7ZGVidWcoXCJ3aWxsIHdhaXQgJWRtcyBiZWZvcmUgcmVjb25uZWN0IGF0dGVtcHRcIiwgZGVsYXkpO3RoaXMucmVjb25uZWN0aW5nID0gdHJ1ZTt2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnNraXBSZWNvbm5lY3QpIHJldHVybjtkZWJ1ZyhcImF0dGVtcHRpbmcgcmVjb25uZWN0XCIpO3NlbGYuZW1pdEFsbChcInJlY29ubmVjdF9hdHRlbXB0XCIsIHNlbGYuYmFja29mZi5hdHRlbXB0cyk7c2VsZi5lbWl0QWxsKFwicmVjb25uZWN0aW5nXCIsIHNlbGYuYmFja29mZi5hdHRlbXB0cyk7aWYgKHNlbGYuc2tpcFJlY29ubmVjdCkgcmV0dXJuO3NlbGYub3BlbihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcInJlY29ubmVjdCBhdHRlbXB0IGVycm9yXCIpO3NlbGYucmVjb25uZWN0aW5nID0gZmFsc2U7c2VsZi5yZWNvbm5lY3QoKTtzZWxmLmVtaXRBbGwoXCJyZWNvbm5lY3RfZXJyb3JcIiwgZXJyLmRhdGEpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlYnVnKFwicmVjb25uZWN0IHN1Y2Nlc3NcIik7c2VsZi5vbnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBkZWxheSk7dGhpcy5zdWJzLnB1c2goeyBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgfVxuICAgICAgfTtNYW5hZ2VyLnByb3RvdHlwZS5vbnJlY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGF0dGVtcHQgPSB0aGlzLmJhY2tvZmYuYXR0ZW1wdHM7dGhpcy5yZWNvbm5lY3RpbmcgPSBmYWxzZTt0aGlzLmJhY2tvZmYucmVzZXQoKTt0aGlzLnVwZGF0ZVNvY2tldElkcygpO3RoaXMuZW1pdEFsbChcInJlY29ubmVjdFwiLCBhdHRlbXB0KTtcbiAgICAgIH07XG4gICAgfSwgeyBcIi4vb25cIjogMzMsIFwiLi9zb2NrZXRcIjogMzQsIGJhY2tvMjogMzYsIFwiY29tcG9uZW50LWJpbmRcIjogMzcsIFwiY29tcG9uZW50LWVtaXR0ZXJcIjogMzgsIGRlYnVnOiAzOSwgXCJlbmdpbmUuaW8tY2xpZW50XCI6IDEsIGluZGV4b2Y6IDQyLCBcInNvY2tldC5pby1wYXJzZXJcIjogNDcgfV0sIDMzOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBvbjtmdW5jdGlvbiBvbihvYmosIGV2LCBmbikge1xuICAgICAgICBvYmoub24oZXYsIGZuKTtyZXR1cm4geyBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgb2JqLnJlbW92ZUxpc3RlbmVyKGV2LCBmbik7XG4gICAgICAgICAgfSB9O1xuICAgICAgfVxuICAgIH0sIHt9XSwgMzQ6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgcGFyc2VyID0gX2RlcmVxXyhcInNvY2tldC5pby1wYXJzZXJcIik7dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7dmFyIHRvQXJyYXkgPSBfZGVyZXFfKFwidG8tYXJyYXlcIik7dmFyIG9uID0gX2RlcmVxXyhcIi4vb25cIik7dmFyIGJpbmQgPSBfZGVyZXFfKFwiY29tcG9uZW50LWJpbmRcIik7dmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudDpzb2NrZXRcIik7dmFyIGhhc0JpbiA9IF9kZXJlcV8oXCJoYXMtYmluYXJ5XCIpO21vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IFNvY2tldDt2YXIgZXZlbnRzID0geyBjb25uZWN0OiAxLCBjb25uZWN0X2Vycm9yOiAxLCBjb25uZWN0X3RpbWVvdXQ6IDEsIGNvbm5lY3Rpbmc6IDEsIGRpc2Nvbm5lY3Q6IDEsIGVycm9yOiAxLCByZWNvbm5lY3Q6IDEsIHJlY29ubmVjdF9hdHRlbXB0OiAxLCByZWNvbm5lY3RfZmFpbGVkOiAxLCByZWNvbm5lY3RfZXJyb3I6IDEsIHJlY29ubmVjdGluZzogMSwgcGluZzogMSwgcG9uZzogMSB9O3ZhciBlbWl0ID0gRW1pdHRlci5wcm90b3R5cGUuZW1pdDtmdW5jdGlvbiBTb2NrZXQoaW8sIG5zcCkge1xuICAgICAgICB0aGlzLmlvID0gaW87dGhpcy5uc3AgPSBuc3A7dGhpcy5qc29uID0gdGhpczt0aGlzLmlkcyA9IDA7dGhpcy5hY2tzID0ge307dGhpcy5yZWNlaXZlQnVmZmVyID0gW107dGhpcy5zZW5kQnVmZmVyID0gW107dGhpcy5jb25uZWN0ZWQgPSBmYWxzZTt0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7aWYgKHRoaXMuaW8uYXV0b0Nvbm5lY3QpIHRoaXMub3BlbigpO1xuICAgICAgfUVtaXR0ZXIoU29ja2V0LnByb3RvdHlwZSk7U29ja2V0LnByb3RvdHlwZS5zdWJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMpIHJldHVybjt2YXIgaW8gPSB0aGlzLmlvO3RoaXMuc3VicyA9IFtvbihpbywgXCJvcGVuXCIsIGJpbmQodGhpcywgXCJvbm9wZW5cIikpLCBvbihpbywgXCJwYWNrZXRcIiwgYmluZCh0aGlzLCBcIm9ucGFja2V0XCIpKSwgb24oaW8sIFwiY2xvc2VcIiwgYmluZCh0aGlzLCBcIm9uY2xvc2VcIikpXTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vcGVuID0gU29ja2V0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHJldHVybiB0aGlzO3RoaXMuc3ViRXZlbnRzKCk7dGhpcy5pby5vcGVuKCk7aWYgKFwib3BlblwiID09IHRoaXMuaW8ucmVhZHlTdGF0ZSkgdGhpcy5vbm9wZW4oKTt0aGlzLmVtaXQoXCJjb25uZWN0aW5nXCIpO3JldHVybiB0aGlzO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO2FyZ3MudW5zaGlmdChcIm1lc3NhZ2VcIik7dGhpcy5lbWl0LmFwcGx5KHRoaXMsIGFyZ3MpO3JldHVybiB0aGlzO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldikpIHtcbiAgICAgICAgICBlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7XG4gICAgICAgIH12YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTt2YXIgcGFyc2VyVHlwZSA9IHBhcnNlci5FVkVOVDtpZiAoaGFzQmluKGFyZ3MpKSB7XG4gICAgICAgICAgcGFyc2VyVHlwZSA9IHBhcnNlci5CSU5BUllfRVZFTlQ7XG4gICAgICAgIH12YXIgcGFja2V0ID0geyB0eXBlOiBwYXJzZXJUeXBlLCBkYXRhOiBhcmdzIH07cGFja2V0Lm9wdGlvbnMgPSB7fTtwYWNrZXQub3B0aW9ucy5jb21wcmVzcyA9ICF0aGlzLmZsYWdzIHx8IGZhbHNlICE9PSB0aGlzLmZsYWdzLmNvbXByZXNzO2lmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkge1xuICAgICAgICAgIGRlYnVnKFwiZW1pdHRpbmcgcGFja2V0IHdpdGggYWNrIGlkICVkXCIsIHRoaXMuaWRzKTt0aGlzLmFja3NbdGhpcy5pZHNdID0gYXJncy5wb3AoKTtwYWNrZXQuaWQgPSB0aGlzLmlkcysrO1xuICAgICAgICB9aWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaChwYWNrZXQpO1xuICAgICAgICB9ZGVsZXRlIHRoaXMuZmxhZ3M7cmV0dXJuIHRoaXM7XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUucGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICBwYWNrZXQubnNwID0gdGhpcy5uc3A7dGhpcy5pby5wYWNrZXQocGFja2V0KTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlYnVnKFwidHJhbnNwb3J0IGlzIG9wZW4gLSBjb25uZWN0aW5nXCIpO2lmIChcIi9cIiAhPSB0aGlzLm5zcCkge1xuICAgICAgICAgIHRoaXMucGFja2V0KHsgdHlwZTogcGFyc2VyLkNPTk5FQ1QgfSk7XG4gICAgICAgIH1cbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBkZWJ1ZyhcImNsb3NlICglcylcIiwgcmVhc29uKTt0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO3RoaXMuZGlzY29ubmVjdGVkID0gdHJ1ZTtkZWxldGUgdGhpcy5pZDt0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIsIHJlYXNvbik7XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub25wYWNrZXQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgIGlmIChwYWNrZXQubnNwICE9IHRoaXMubnNwKSByZXR1cm47c3dpdGNoIChwYWNrZXQudHlwZSkge2Nhc2UgcGFyc2VyLkNPTk5FQ1Q6XG4gICAgICAgICAgICB0aGlzLm9uY29ubmVjdCgpO2JyZWFrO2Nhc2UgcGFyc2VyLkVWRU5UOlxuICAgICAgICAgICAgdGhpcy5vbmV2ZW50KHBhY2tldCk7YnJlYWs7Y2FzZSBwYXJzZXIuQklOQVJZX0VWRU5UOlxuICAgICAgICAgICAgdGhpcy5vbmV2ZW50KHBhY2tldCk7YnJlYWs7Y2FzZSBwYXJzZXIuQUNLOlxuICAgICAgICAgICAgdGhpcy5vbmFjayhwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkJJTkFSWV9BQ0s6XG4gICAgICAgICAgICB0aGlzLm9uYWNrKHBhY2tldCk7YnJlYWs7Y2FzZSBwYXJzZXIuRElTQ09OTkVDVDpcbiAgICAgICAgICAgIHRoaXMub25kaXNjb25uZWN0KCk7YnJlYWs7Y2FzZSBwYXJzZXIuRVJST1I6XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBwYWNrZXQuZGF0YSk7YnJlYWs7fVxuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uZXZlbnQgPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgIHZhciBhcmdzID0gcGFja2V0LmRhdGEgfHwgW107ZGVidWcoXCJlbWl0dGluZyBldmVudCAlalwiLCBhcmdzKTtpZiAobnVsbCAhPSBwYWNrZXQuaWQpIHtcbiAgICAgICAgICBkZWJ1ZyhcImF0dGFjaGluZyBhY2sgY2FsbGJhY2sgdG8gZXZlbnRcIik7YXJncy5wdXNoKHRoaXMuYWNrKHBhY2tldC5pZCkpO1xuICAgICAgICB9aWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIucHVzaChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmFjayA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7dmFyIHNlbnQgPSBmYWxzZTtyZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChzZW50KSByZXR1cm47c2VudCA9IHRydWU7dmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7ZGVidWcoXCJzZW5kaW5nIGFjayAlalwiLCBhcmdzKTt2YXIgdHlwZSA9IGhhc0JpbihhcmdzKSA/IHBhcnNlci5CSU5BUllfQUNLIDogcGFyc2VyLkFDSztzZWxmLnBhY2tldCh7IHR5cGU6IHR5cGUsIGlkOiBpZCwgZGF0YTogYXJncyB9KTtcbiAgICAgICAgfTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5vbmFjayA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgdmFyIGFjayA9IHRoaXMuYWNrc1twYWNrZXQuaWRdO2lmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGFjaykge1xuICAgICAgICAgIGRlYnVnKFwiY2FsbGluZyBhY2sgJXMgd2l0aCAlalwiLCBwYWNrZXQuaWQsIHBhY2tldC5kYXRhKTthY2suYXBwbHkodGhpcywgcGFja2V0LmRhdGEpO2RlbGV0ZSB0aGlzLmFja3NbcGFja2V0LmlkXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1ZyhcImJhZCBhY2sgJXNcIiwgcGFja2V0LmlkKTtcbiAgICAgICAgfVxuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLm9uY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO3RoaXMuZGlzY29ubmVjdGVkID0gZmFsc2U7dGhpcy5lbWl0KFwiY29ubmVjdFwiKTt0aGlzLmVtaXRCdWZmZXJlZCgpO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmVtaXRCdWZmZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGk7Zm9yIChpID0gMDsgaSA8IHRoaXMucmVjZWl2ZUJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGVtaXQuYXBwbHkodGhpcywgdGhpcy5yZWNlaXZlQnVmZmVyW2ldKTtcbiAgICAgICAgfXRoaXMucmVjZWl2ZUJ1ZmZlciA9IFtdO2ZvciAoaSA9IDA7IGkgPCB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnBhY2tldCh0aGlzLnNlbmRCdWZmZXJbaV0pO1xuICAgICAgICB9dGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUub25kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWJ1ZyhcInNlcnZlciBkaXNjb25uZWN0ICglcylcIiwgdGhpcy5uc3ApO3RoaXMuZGVzdHJveSgpO3RoaXMub25jbG9zZShcImlvIHNlcnZlciBkaXNjb25uZWN0XCIpO1xuICAgICAgfTtTb2NrZXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zdWJzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICB9dGhpcy5zdWJzID0gbnVsbDtcbiAgICAgICAgfXRoaXMuaW8uZGVzdHJveSh0aGlzKTtcbiAgICAgIH07U29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IFNvY2tldC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgZGVidWcoXCJwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKVwiLCB0aGlzLm5zcCk7dGhpcy5wYWNrZXQoeyB0eXBlOiBwYXJzZXIuRElTQ09OTkVDVCB9KTtcbiAgICAgICAgfXRoaXMuZGVzdHJveSgpO2lmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIHRoaXMub25jbG9zZShcImlvIGNsaWVudCBkaXNjb25uZWN0XCIpO1xuICAgICAgICB9cmV0dXJuIHRoaXM7XG4gICAgICB9O1NvY2tldC5wcm90b3R5cGUuY29tcHJlc3MgPSBmdW5jdGlvbiAoY29tcHJlc3MpIHtcbiAgICAgICAgdGhpcy5mbGFncyA9IHRoaXMuZmxhZ3MgfHwge307dGhpcy5mbGFncy5jb21wcmVzcyA9IGNvbXByZXNzO3JldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICB9LCB7IFwiLi9vblwiOiAzMywgXCJjb21wb25lbnQtYmluZFwiOiAzNywgXCJjb21wb25lbnQtZW1pdHRlclwiOiAzOCwgZGVidWc6IDM5LCBcImhhcy1iaW5hcnlcIjogNDEsIFwic29ja2V0LmlvLXBhcnNlclwiOiA0NywgXCJ0by1hcnJheVwiOiA1MSB9XSwgMzU6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgcGFyc2V1cmkgPSBfZGVyZXFfKFwicGFyc2V1cmlcIik7dmFyIGRlYnVnID0gX2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudDp1cmxcIik7bW9kdWxlLmV4cG9ydHMgPSB1cmw7ZnVuY3Rpb24gdXJsKHVyaSwgbG9jKSB7XG4gICAgICAgICAgdmFyIG9iaiA9IHVyaTt2YXIgbG9jID0gbG9jIHx8IGdsb2JhbC5sb2NhdGlvbjtpZiAobnVsbCA9PSB1cmkpIHVyaSA9IGxvYy5wcm90b2NvbCArIFwiLy9cIiArIGxvYy5ob3N0O2lmIChcInN0cmluZ1wiID09IHR5cGVvZiB1cmkpIHtcbiAgICAgICAgICAgIGlmIChcIi9cIiA9PSB1cmkuY2hhckF0KDApKSB7XG4gICAgICAgICAgICAgIGlmIChcIi9cIiA9PSB1cmkuY2hhckF0KDEpKSB7XG4gICAgICAgICAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgdXJpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVyaSA9IGxvYy5ob3N0ICsgdXJpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9aWYgKCEvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHVyaSkpIHtcbiAgICAgICAgICAgICAgZGVidWcoXCJwcm90b2NvbC1sZXNzIHVybCAlc1wiLCB1cmkpO2lmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBsb2MpIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXJpID0gXCJodHRwczovL1wiICsgdXJpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZGVidWcoXCJwYXJzZSAlc1wiLCB1cmkpO29iaiA9IHBhcnNldXJpKHVyaSk7XG4gICAgICAgICAgfWlmICghb2JqLnBvcnQpIHtcbiAgICAgICAgICAgIGlmICgvXihodHRwfHdzKSQvLnRlc3Qob2JqLnByb3RvY29sKSkge1xuICAgICAgICAgICAgICBvYmoucG9ydCA9IFwiODBcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoL14oaHR0cHx3cylzJC8udGVzdChvYmoucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICAgIG9iai5wb3J0ID0gXCI0NDNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9b2JqLnBhdGggPSBvYmoucGF0aCB8fCBcIi9cIjt2YXIgaXB2NiA9IG9iai5ob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMTt2YXIgaG9zdCA9IGlwdjYgPyBcIltcIiArIG9iai5ob3N0ICsgXCJdXCIgOiBvYmouaG9zdDtvYmouaWQgPSBvYmoucHJvdG9jb2wgKyBcIjovL1wiICsgaG9zdCArIFwiOlwiICsgb2JqLnBvcnQ7b2JqLmhyZWYgPSBvYmoucHJvdG9jb2wgKyBcIjovL1wiICsgaG9zdCArIChsb2MgJiYgbG9jLnBvcnQgPT0gb2JqLnBvcnQgPyBcIlwiIDogXCI6XCIgKyBvYmoucG9ydCk7cmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7IGRlYnVnOiAzOSwgcGFyc2V1cmk6IDQ1IH1dLCAzNjogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gQmFja29mZjtmdW5jdGlvbiBCYWNrb2ZmKG9wdHMpIHtcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307dGhpcy5tcyA9IG9wdHMubWluIHx8IDEwMDt0aGlzLm1heCA9IG9wdHMubWF4IHx8IDFlNDt0aGlzLmZhY3RvciA9IG9wdHMuZmFjdG9yIHx8IDI7dGhpcy5qaXR0ZXIgPSBvcHRzLmppdHRlciA+IDAgJiYgb3B0cy5qaXR0ZXIgPD0gMSA/IG9wdHMuaml0dGVyIDogMDt0aGlzLmF0dGVtcHRzID0gMDtcbiAgICAgIH1CYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1zID0gdGhpcy5tcyAqIE1hdGgucG93KHRoaXMuZmFjdG9yLCB0aGlzLmF0dGVtcHRzKyspO2lmICh0aGlzLmppdHRlcikge1xuICAgICAgICAgIHZhciByYW5kID0gTWF0aC5yYW5kb20oKTt2YXIgZGV2aWF0aW9uID0gTWF0aC5mbG9vcihyYW5kICogdGhpcy5qaXR0ZXIgKiBtcyk7bXMgPSAoTWF0aC5mbG9vcihyYW5kICogMTApICYgMSkgPT0gMCA/IG1zIC0gZGV2aWF0aW9uIDogbXMgKyBkZXZpYXRpb247XG4gICAgICAgIH1yZXR1cm4gTWF0aC5taW4obXMsIHRoaXMubWF4KSB8IDA7XG4gICAgICB9O0JhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmF0dGVtcHRzID0gMDtcbiAgICAgIH07QmFja29mZi5wcm90b3R5cGUuc2V0TWluID0gZnVuY3Rpb24gKG1pbikge1xuICAgICAgICB0aGlzLm1zID0gbWluO1xuICAgICAgfTtCYWNrb2ZmLnByb3RvdHlwZS5zZXRNYXggPSBmdW5jdGlvbiAobWF4KSB7XG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgICAgfTtCYWNrb2ZmLnByb3RvdHlwZS5zZXRKaXR0ZXIgPSBmdW5jdGlvbiAoaml0dGVyKSB7XG4gICAgICAgIHRoaXMuaml0dGVyID0gaml0dGVyO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDM3OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgdmFyIHNsaWNlID0gW10uc2xpY2U7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZm4pIGZuID0gb2JqW2ZuXTtpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBmbikgdGhyb3cgbmV3IEVycm9yKFwiYmluZCgpIHJlcXVpcmVzIGEgZnVuY3Rpb25cIik7dmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7cmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZm4uYXBwbHkob2JqLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSwge31dLCAzODogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID0gRW1pdHRlcjtmdW5jdGlvbiBFbWl0dGVyKG9iaikge1xuICAgICAgICBpZiAob2JqKSByZXR1cm4gbWl4aW4ob2JqKTtcbiAgICAgIH1mdW5jdGlvbiBtaXhpbihvYmopIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIEVtaXR0ZXIucHJvdG90eXBlKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBFbWl0dGVyLnByb3RvdHlwZVtrZXldO1xuICAgICAgICB9cmV0dXJuIG9iajtcbiAgICAgIH1FbWl0dGVyLnByb3RvdHlwZS5vbiA9IEVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsodGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdIHx8IFtdKS5wdXNoKGZuKTtyZXR1cm4gdGhpcztcbiAgICAgIH07RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgICAgZnVuY3Rpb24gb24oKSB7XG4gICAgICAgICAgdGhpcy5vZmYoZXZlbnQsIG9uKTtmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9b24uZm4gPSBmbjt0aGlzLm9uKGV2ZW50LCBvbik7cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O2lmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtyZXR1cm4gdGhpcztcbiAgICAgICAgfXZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbXCIkXCIgKyBldmVudF07aWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO2lmICgxID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdO3JldHVybiB0aGlzO1xuICAgICAgICB9dmFyIGNiO2ZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY2IgPSBjYWxsYmFja3NbaV07aWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7YnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9cmV0dXJuIHRoaXM7XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3ZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzW1wiJFwiICsgZXZlbnRdO2lmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3Muc2xpY2UoMCk7Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfXJldHVybiB0aGlzO1xuICAgICAgfTtFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3JldHVybiB0aGlzLl9jYWxsYmFja3NbXCIkXCIgKyBldmVudF0gfHwgW107XG4gICAgICB9O0VtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoO1xuICAgICAgfTtcbiAgICB9LCB7fV0sIDM5OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgYXJndW1lbnRzWzRdWzE3XVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgIH0sIHsgXCIuL2RlYnVnXCI6IDQwLCBkdXA6IDE3IH1dLCA0MDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsxOF1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IGR1cDogMTgsIG1zOiA0NCB9XSwgNDE6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgaXNBcnJheSA9IF9kZXJlcV8oXCJpc2FycmF5XCIpO21vZHVsZS5leHBvcnRzID0gaGFzQmluYXJ5O2Z1bmN0aW9uIGhhc0JpbmFyeShkYXRhKSB7XG4gICAgICAgICAgZnVuY3Rpb24gX2hhc0JpbmFyeShvYmopIHtcbiAgICAgICAgICAgIGlmICghb2JqKSByZXR1cm4gZmFsc2U7aWYgKGdsb2JhbC5CdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciAmJiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgZ2xvYmFsLkFycmF5QnVmZmVyICYmIG9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGdsb2JhbC5CbG9iICYmIG9iaiBpbnN0YW5jZW9mIEJsb2IgfHwgZ2xvYmFsLkZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1pZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9oYXNCaW5hcnkob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBvYmopIHtcbiAgICAgICAgICAgICAgaWYgKG9iai50b0pTT04gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBvYmoudG9KU09OKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgICAgICAgICAgICB9Zm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIF9oYXNCaW5hcnkob2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfXJldHVybiBfaGFzQmluYXJ5KGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xuICAgIH0sIHsgaXNhcnJheTogNDMgfV0sIDQyOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgYXJndW1lbnRzWzRdWzIzXVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgIH0sIHsgZHVwOiAyMyB9XSwgNDM6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICBhcmd1bWVudHNbNF1bMjRdWzBdLmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgfSwgeyBkdXA6IDI0IH1dLCA0NDogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsyNV1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IGR1cDogMjUgfV0sIDQ1OiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgYXJndW1lbnRzWzRdWzI4XVswXS5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgIH0sIHsgZHVwOiAyOCB9XSwgNDY6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgaXNBcnJheSA9IF9kZXJlcV8oXCJpc2FycmF5XCIpO3ZhciBpc0J1ZiA9IF9kZXJlcV8oXCIuL2lzLWJ1ZmZlclwiKTtleHBvcnRzLmRlY29uc3RydWN0UGFja2V0ID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICAgIHZhciBidWZmZXJzID0gW107dmFyIHBhY2tldERhdGEgPSBwYWNrZXQuZGF0YTtmdW5jdGlvbiBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gZGF0YTtpZiAoaXNCdWYoZGF0YSkpIHtcbiAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0geyBfcGxhY2Vob2xkZXI6IHRydWUsIG51bTogYnVmZmVycy5sZW5ndGggfTtidWZmZXJzLnB1c2goZGF0YSk7cmV0dXJuIHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgIHZhciBuZXdEYXRhID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW2ldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFbaV0pO1xuICAgICAgICAgICAgICB9cmV0dXJuIG5ld0RhdGE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGRhdGEgJiYgIShkYXRhIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSB7fTtmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIG5ld0RhdGFba2V5XSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO1xuICAgICAgICAgICAgICB9cmV0dXJuIG5ld0RhdGE7XG4gICAgICAgICAgICB9cmV0dXJuIGRhdGE7XG4gICAgICAgICAgfXZhciBwYWNrID0gcGFja2V0O3BhY2suZGF0YSA9IF9kZWNvbnN0cnVjdFBhY2tldChwYWNrZXREYXRhKTtwYWNrLmF0dGFjaG1lbnRzID0gYnVmZmVycy5sZW5ndGg7cmV0dXJuIHsgcGFja2V0OiBwYWNrLCBidWZmZXJzOiBidWZmZXJzIH07XG4gICAgICAgIH07ZXhwb3J0cy5yZWNvbnN0cnVjdFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQsIGJ1ZmZlcnMpIHtcbiAgICAgICAgICB2YXIgY3VyUGxhY2VIb2xkZXIgPSAwO2Z1bmN0aW9uIF9yZWNvbnN0cnVjdFBhY2tldChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLl9wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICB2YXIgYnVmID0gYnVmZmVyc1tkYXRhLm51bV07cmV0dXJuIGJ1ZjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkYXRhW2ldID0gX3JlY29uc3RydWN0UGFja2V0KGRhdGFbaV0pO1xuICAgICAgICAgICAgICB9cmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgZGF0YSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIGRhdGFba2V5XSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO1xuICAgICAgICAgICAgICB9cmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9cmV0dXJuIGRhdGE7XG4gICAgICAgICAgfXBhY2tldC5kYXRhID0gX3JlY29uc3RydWN0UGFja2V0KHBhY2tldC5kYXRhKTtwYWNrZXQuYXR0YWNobWVudHMgPSB1bmRlZmluZWQ7cmV0dXJuIHBhY2tldDtcbiAgICAgICAgfTtleHBvcnRzLnJlbW92ZUJsb2JzID0gZnVuY3Rpb24gKGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgZnVuY3Rpb24gX3JlbW92ZUJsb2JzKG9iaiwgY3VyS2V5LCBjb250YWluaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIW9iaikgcmV0dXJuIG9iajtpZiAoZ2xvYmFsLkJsb2IgJiYgb2JqIGluc3RhbmNlb2YgQmxvYiB8fCBnbG9iYWwuRmlsZSAmJiBvYmogaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgIHBlbmRpbmdCbG9icysrO3ZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmluZ09iamVjdCkge1xuICAgICAgICAgICAgICAgICAgY29udGFpbmluZ09iamVjdFtjdXJLZXldID0gdGhpcy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGJsb2JsZXNzRGF0YSA9IHRoaXMucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1pZiAoISAtLXBlbmRpbmdCbG9icykge1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYmxvYmxlc3NEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07ZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihvYmopO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfcmVtb3ZlQmxvYnMob2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBvYmogJiYgIWlzQnVmKG9iaikpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIF9yZW1vdmVCbG9icyhvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfXZhciBwZW5kaW5nQmxvYnMgPSAwO3ZhciBibG9ibGVzc0RhdGEgPSBkYXRhO19yZW1vdmVCbG9icyhibG9ibGVzc0RhdGEpO2lmICghcGVuZGluZ0Jsb2JzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhibG9ibGVzc0RhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwgeyBcIi4vaXMtYnVmZmVyXCI6IDQ4LCBpc2FycmF5OiA0MyB9XSwgNDc6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICB2YXIgZGVidWcgPSBfZGVyZXFfKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tcGFyc2VyXCIpO3ZhciBqc29uID0gX2RlcmVxXyhcImpzb24zXCIpO3ZhciBpc0FycmF5ID0gX2RlcmVxXyhcImlzYXJyYXlcIik7dmFyIEVtaXR0ZXIgPSBfZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7dmFyIGJpbmFyeSA9IF9kZXJlcV8oXCIuL2JpbmFyeVwiKTt2YXIgaXNCdWYgPSBfZGVyZXFfKFwiLi9pcy1idWZmZXJcIik7ZXhwb3J0cy5wcm90b2NvbCA9IDQ7ZXhwb3J0cy50eXBlcyA9IFtcIkNPTk5FQ1RcIiwgXCJESVNDT05ORUNUXCIsIFwiRVZFTlRcIiwgXCJCSU5BUllfRVZFTlRcIiwgXCJBQ0tcIiwgXCJCSU5BUllfQUNLXCIsIFwiRVJST1JcIl07ZXhwb3J0cy5DT05ORUNUID0gMDtleHBvcnRzLkRJU0NPTk5FQ1QgPSAxO2V4cG9ydHMuRVZFTlQgPSAyO2V4cG9ydHMuQUNLID0gMztleHBvcnRzLkVSUk9SID0gNDtleHBvcnRzLkJJTkFSWV9FVkVOVCA9IDU7ZXhwb3J0cy5CSU5BUllfQUNLID0gNjtleHBvcnRzLkVuY29kZXIgPSBFbmNvZGVyO2V4cG9ydHMuRGVjb2RlciA9IERlY29kZXI7ZnVuY3Rpb24gRW5jb2RlcigpIHt9RW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKG9iaiwgY2FsbGJhY2spIHtcbiAgICAgICAgZGVidWcoXCJlbmNvZGluZyBwYWNrZXQgJWpcIiwgb2JqKTtpZiAoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gb2JqLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IG9iai50eXBlKSB7XG4gICAgICAgICAgZW5jb2RlQXNCaW5hcnkob2JqLCBjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGVuY29kaW5nID0gZW5jb2RlQXNTdHJpbmcob2JqKTtjYWxsYmFjayhbZW5jb2RpbmddKTtcbiAgICAgICAgfVxuICAgICAgfTtmdW5jdGlvbiBlbmNvZGVBc1N0cmluZyhvYmopIHtcbiAgICAgICAgdmFyIHN0ciA9IFwiXCI7dmFyIG5zcCA9IGZhbHNlO3N0ciArPSBvYmoudHlwZTtpZiAoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gb2JqLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IG9iai50eXBlKSB7XG4gICAgICAgICAgc3RyICs9IG9iai5hdHRhY2htZW50cztzdHIgKz0gXCItXCI7XG4gICAgICAgIH1pZiAob2JqLm5zcCAmJiBcIi9cIiAhPSBvYmoubnNwKSB7XG4gICAgICAgICAgbnNwID0gdHJ1ZTtzdHIgKz0gb2JqLm5zcDtcbiAgICAgICAgfWlmIChudWxsICE9IG9iai5pZCkge1xuICAgICAgICAgIGlmIChuc3ApIHtcbiAgICAgICAgICAgIHN0ciArPSBcIixcIjtuc3AgPSBmYWxzZTtcbiAgICAgICAgICB9c3RyICs9IG9iai5pZDtcbiAgICAgICAgfWlmIChudWxsICE9IG9iai5kYXRhKSB7XG4gICAgICAgICAgaWYgKG5zcCkgc3RyICs9IFwiLFwiO3N0ciArPSBqc29uLnN0cmluZ2lmeShvYmouZGF0YSk7XG4gICAgICAgIH1kZWJ1ZyhcImVuY29kZWQgJWogYXMgJXNcIiwgb2JqLCBzdHIpO3JldHVybiBzdHI7XG4gICAgICB9ZnVuY3Rpb24gZW5jb2RlQXNCaW5hcnkob2JqLCBjYWxsYmFjaykge1xuICAgICAgICBmdW5jdGlvbiB3cml0ZUVuY29kaW5nKGJsb2JsZXNzRGF0YSkge1xuICAgICAgICAgIHZhciBkZWNvbnN0cnVjdGlvbiA9IGJpbmFyeS5kZWNvbnN0cnVjdFBhY2tldChibG9ibGVzc0RhdGEpO3ZhciBwYWNrID0gZW5jb2RlQXNTdHJpbmcoZGVjb25zdHJ1Y3Rpb24ucGFja2V0KTt2YXIgYnVmZmVycyA9IGRlY29uc3RydWN0aW9uLmJ1ZmZlcnM7YnVmZmVycy51bnNoaWZ0KHBhY2spO2NhbGxiYWNrKGJ1ZmZlcnMpO1xuICAgICAgICB9YmluYXJ5LnJlbW92ZUJsb2JzKG9iaiwgd3JpdGVFbmNvZGluZyk7XG4gICAgICB9ZnVuY3Rpb24gRGVjb2RlcigpIHtcbiAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yID0gbnVsbDtcbiAgICAgIH1FbWl0dGVyKERlY29kZXIucHJvdG90eXBlKTtEZWNvZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciBwYWNrZXQ7aWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIG9iaikge1xuICAgICAgICAgIHBhY2tldCA9IGRlY29kZVN0cmluZyhvYmopO2lmIChleHBvcnRzLkJJTkFSWV9FVkVOVCA9PSBwYWNrZXQudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gcGFja2V0LnR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb25zdHJ1Y3RvciA9IG5ldyBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCk7aWYgKHRoaXMucmVjb25zdHJ1Y3Rvci5yZWNvblBhY2suYXR0YWNobWVudHMgPT09IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZGVjb2RlZFwiLCBwYWNrZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzQnVmKG9iaikgfHwgb2JqLmJhc2U2NCkge1xuICAgICAgICAgIGlmICghdGhpcy5yZWNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhY2tldCA9IHRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YShvYmopO2lmIChwYWNrZXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yID0gbnVsbDt0aGlzLmVtaXQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHlwZTogXCIgKyBvYmopO1xuICAgICAgICB9XG4gICAgICB9O2Z1bmN0aW9uIGRlY29kZVN0cmluZyhzdHIpIHtcbiAgICAgICAgdmFyIHAgPSB7fTt2YXIgaSA9IDA7cC50eXBlID0gTnVtYmVyKHN0ci5jaGFyQXQoMCkpO2lmIChudWxsID09IGV4cG9ydHMudHlwZXNbcC50eXBlXSkgcmV0dXJuIGVycm9yKCk7aWYgKGV4cG9ydHMuQklOQVJZX0VWRU5UID09IHAudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gcC50eXBlKSB7XG4gICAgICAgICAgdmFyIGJ1ZiA9IFwiXCI7d2hpbGUgKHN0ci5jaGFyQXQoKytpKSAhPSBcIi1cIikge1xuICAgICAgICAgICAgYnVmICs9IHN0ci5jaGFyQXQoaSk7aWYgKGkgPT0gc3RyLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgICAgfWlmIChidWYgIT0gTnVtYmVyKGJ1ZikgfHwgc3RyLmNoYXJBdChpKSAhPSBcIi1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBhdHRhY2htZW50c1wiKTtcbiAgICAgICAgICB9cC5hdHRhY2htZW50cyA9IE51bWJlcihidWYpO1xuICAgICAgICB9aWYgKFwiL1wiID09IHN0ci5jaGFyQXQoaSArIDEpKSB7XG4gICAgICAgICAgcC5uc3AgPSBcIlwiO3doaWxlICgrK2kpIHtcbiAgICAgICAgICAgIHZhciBjID0gc3RyLmNoYXJBdChpKTtpZiAoXCIsXCIgPT0gYykgYnJlYWs7cC5uc3AgKz0gYztpZiAoaSA9PSBzdHIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcC5uc3AgPSBcIi9cIjtcbiAgICAgICAgfXZhciBuZXh0ID0gc3RyLmNoYXJBdChpICsgMSk7aWYgKFwiXCIgIT09IG5leHQgJiYgTnVtYmVyKG5leHQpID09IG5leHQpIHtcbiAgICAgICAgICBwLmlkID0gXCJcIjt3aGlsZSAoKytpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQXQoaSk7aWYgKG51bGwgPT0gYyB8fCBOdW1iZXIoYykgIT0gYykge1xuICAgICAgICAgICAgICAtLWk7YnJlYWs7XG4gICAgICAgICAgICB9cC5pZCArPSBzdHIuY2hhckF0KGkpO2lmIChpID09IHN0ci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgIH1wLmlkID0gTnVtYmVyKHAuaWQpO1xuICAgICAgICB9aWYgKHN0ci5jaGFyQXQoKytpKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwLmRhdGEgPSBqc29uLnBhcnNlKHN0ci5zdWJzdHIoaSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfWRlYnVnKFwiZGVjb2RlZCAlcyBhcyAlalwiLCBzdHIsIHApO3JldHVybiBwO1xuICAgICAgfURlY29kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY29uc3RydWN0b3IpIHtcbiAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IuZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9O2Z1bmN0aW9uIEJpbmFyeVJlY29uc3RydWN0b3IocGFja2V0KSB7XG4gICAgICAgIHRoaXMucmVjb25QYWNrID0gcGFja2V0O3RoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgfUJpbmFyeVJlY29uc3RydWN0b3IucHJvdG90eXBlLnRha2VCaW5hcnlEYXRhID0gZnVuY3Rpb24gKGJpbkRhdGEpIHtcbiAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYmluRGF0YSk7aWYgKHRoaXMuYnVmZmVycy5sZW5ndGggPT0gdGhpcy5yZWNvblBhY2suYXR0YWNobWVudHMpIHtcbiAgICAgICAgICB2YXIgcGFja2V0ID0gYmluYXJ5LnJlY29uc3RydWN0UGFja2V0KHRoaXMucmVjb25QYWNrLCB0aGlzLmJ1ZmZlcnMpO3RoaXMuZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpO3JldHVybiBwYWNrZXQ7XG4gICAgICAgIH1yZXR1cm4gbnVsbDtcbiAgICAgIH07QmluYXJ5UmVjb25zdHJ1Y3Rvci5wcm90b3R5cGUuZmluaXNoZWRSZWNvbnN0cnVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZWNvblBhY2sgPSBudWxsO3RoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgfTtmdW5jdGlvbiBlcnJvcihkYXRhKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IGV4cG9ydHMuRVJST1IsIGRhdGE6IFwicGFyc2VyIGVycm9yXCIgfTtcbiAgICAgIH1cbiAgICB9LCB7IFwiLi9iaW5hcnlcIjogNDYsIFwiLi9pcy1idWZmZXJcIjogNDgsIFwiY29tcG9uZW50LWVtaXR0ZXJcIjogNDksIGRlYnVnOiAzOSwgaXNhcnJheTogNDMsIGpzb24zOiA1MCB9XSwgNDg6IFtmdW5jdGlvbiAoX2RlcmVxXywgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGlzQnVmO2Z1bmN0aW9uIGlzQnVmKG9iaikge1xuICAgICAgICAgIHJldHVybiBnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIob2JqKSB8fCBnbG9iYWwuQXJyYXlCdWZmZXIgJiYgb2JqIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhbGwodGhpcywgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG4gICAgfSwge31dLCA0OTogW2Z1bmN0aW9uIChfZGVyZXFfLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAgIGFyZ3VtZW50c1s0XVsxNV1bMF0uYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICB9LCB7IGR1cDogMTUgfV0sIDUwOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgKGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgaXNMb2FkZXIgPSB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZDt2YXIgb2JqZWN0VHlwZXMgPSB7IFwiZnVuY3Rpb25cIjogdHJ1ZSwgb2JqZWN0OiB0cnVlIH07dmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czt2YXIgcm9vdCA9IG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyB8fCB0aGlzLFxuICAgICAgICAgICAgICBmcmVlR2xvYmFsID0gZnJlZUV4cG9ydHMgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbDtpZiAoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbFtcImdsb2JhbFwiXSA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsW1wid2luZG93XCJdID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWxbXCJzZWxmXCJdID09PSBmcmVlR2xvYmFsKSkge1xuICAgICAgICAgICAgcm9vdCA9IGZyZWVHbG9iYWw7XG4gICAgICAgICAgfWZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0LCBleHBvcnRzKSB7XG4gICAgICAgICAgICBjb250ZXh0IHx8IChjb250ZXh0ID0gcm9vdFtcIk9iamVjdFwiXSgpKTtleHBvcnRzIHx8IChleHBvcnRzID0gcm9vdFtcIk9iamVjdFwiXSgpKTt2YXIgTnVtYmVyID0gY29udGV4dFtcIk51bWJlclwiXSB8fCByb290W1wiTnVtYmVyXCJdLFxuICAgICAgICAgICAgICAgIFN0cmluZyA9IGNvbnRleHRbXCJTdHJpbmdcIl0gfHwgcm9vdFtcIlN0cmluZ1wiXSxcbiAgICAgICAgICAgICAgICBPYmplY3QgPSBjb250ZXh0W1wiT2JqZWN0XCJdIHx8IHJvb3RbXCJPYmplY3RcIl0sXG4gICAgICAgICAgICAgICAgRGF0ZSA9IGNvbnRleHRbXCJEYXRlXCJdIHx8IHJvb3RbXCJEYXRlXCJdLFxuICAgICAgICAgICAgICAgIFN5bnRheEVycm9yID0gY29udGV4dFtcIlN5bnRheEVycm9yXCJdIHx8IHJvb3RbXCJTeW50YXhFcnJvclwiXSxcbiAgICAgICAgICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0W1wiVHlwZUVycm9yXCJdIHx8IHJvb3RbXCJUeXBlRXJyb3JcIl0sXG4gICAgICAgICAgICAgICAgTWF0aCA9IGNvbnRleHRbXCJNYXRoXCJdIHx8IHJvb3RbXCJNYXRoXCJdLFxuICAgICAgICAgICAgICAgIG5hdGl2ZUpTT04gPSBjb250ZXh0W1wiSlNPTlwiXSB8fCByb290W1wiSlNPTlwiXTtpZiAodHlwZW9mIG5hdGl2ZUpTT04gPT0gXCJvYmplY3RcIiAmJiBuYXRpdmVKU09OKSB7XG4gICAgICAgICAgICAgIGV4cG9ydHMuc3RyaW5naWZ5ID0gbmF0aXZlSlNPTi5zdHJpbmdpZnk7ZXhwb3J0cy5wYXJzZSA9IG5hdGl2ZUpTT04ucGFyc2U7XG4gICAgICAgICAgICB9dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgICAgICAgICBnZXRDbGFzcyA9IG9iamVjdFByb3RvLnRvU3RyaW5nLFxuICAgICAgICAgICAgICAgIGlzUHJvcGVydHksXG4gICAgICAgICAgICAgICAgZm9yRWFjaCxcbiAgICAgICAgICAgICAgICB1bmRlZjt2YXIgaXNFeHRlbmRlZCA9IG5ldyBEYXRlKC0weGM3ODJiNWI4MDBjZWMpO3RyeSB7XG4gICAgICAgICAgICAgIGlzRXh0ZW5kZWQgPSBpc0V4dGVuZGVkLmdldFVUQ0Z1bGxZZWFyKCkgPT0gLTEwOTI1MiAmJiBpc0V4dGVuZGVkLmdldFVUQ01vbnRoKCkgPT09IDAgJiYgaXNFeHRlbmRlZC5nZXRVVENEYXRlKCkgPT09IDEgJiYgaXNFeHRlbmRlZC5nZXRVVENIb3VycygpID09IDEwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWludXRlcygpID09IDM3ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDU2Vjb25kcygpID09IDYgJiYgaXNFeHRlbmRlZC5nZXRVVENNaWxsaXNlY29uZHMoKSA9PSA3MDg7XG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHt9ZnVuY3Rpb24gaGFzKG5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKGhhc1tuYW1lXSAhPT0gdW5kZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzW25hbWVdO1xuICAgICAgICAgICAgICB9dmFyIGlzU3VwcG9ydGVkO2lmIChuYW1lID09IFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpIHtcbiAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZCA9IFwiYVwiWzBdICE9IFwiYVwiO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJqc29uXCIpIHtcbiAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZCA9IGhhcyhcImpzb24tc3RyaW5naWZ5XCIpICYmIGhhcyhcImpzb24tcGFyc2VcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkID0gXCJ7XFxcImFcXFwiOlsxLHRydWUsZmFsc2UsbnVsbCxcXFwiXFxcXHUwMDAwXFxcXGJcXFxcblxcXFxmXFxcXHJcXFxcdFxcXCJdfVwiO2lmIChuYW1lID09IFwianNvbi1zdHJpbmdpZnlcIikge1xuICAgICAgICAgICAgICAgICAgdmFyIHN0cmluZ2lmeSA9IGV4cG9ydHMuc3RyaW5naWZ5LFxuICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ2lmeVN1cHBvcnRlZCA9IHR5cGVvZiBzdHJpbmdpZnkgPT0gXCJmdW5jdGlvblwiICYmIGlzRXh0ZW5kZWQ7aWYgKHN0cmluZ2lmeVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAodmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRvSlNPTiA9IHZhbHVlO3RyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgc3RyaW5naWZ5U3VwcG9ydGVkID0gc3RyaW5naWZ5KDApID09PSBcIjBcIiAmJiBzdHJpbmdpZnkobmV3IE51bWJlcigpKSA9PT0gXCIwXCIgJiYgc3RyaW5naWZ5KG5ldyBTdHJpbmcoKSkgPT0gJ1wiXCInICYmIHN0cmluZ2lmeShnZXRDbGFzcykgPT09IHVuZGVmICYmIHN0cmluZ2lmeSh1bmRlZikgPT09IHVuZGVmICYmIHN0cmluZ2lmeSgpID09PSB1bmRlZiAmJiBzdHJpbmdpZnkodmFsdWUpID09PSBcIjFcIiAmJiBzdHJpbmdpZnkoW3ZhbHVlXSkgPT0gXCJbMV1cIiAmJiBzdHJpbmdpZnkoW3VuZGVmXSkgPT0gXCJbbnVsbF1cIiAmJiBzdHJpbmdpZnkobnVsbCkgPT0gXCJudWxsXCIgJiYgc3RyaW5naWZ5KFt1bmRlZiwgZ2V0Q2xhc3MsIG51bGxdKSA9PSBcIltudWxsLG51bGwsbnVsbF1cIiAmJiBzdHJpbmdpZnkoeyBhOiBbdmFsdWUsIHRydWUsIGZhbHNlLCBudWxsLCBcIlxceDAwXFxiXFxuXFxmXFxyXHRcIl0gfSkgPT0gc2VyaWFsaXplZCAmJiBzdHJpbmdpZnkobnVsbCwgdmFsdWUpID09PSBcIjFcIiAmJiBzdHJpbmdpZnkoWzEsIDJdLCBudWxsLCAxKSA9PSBcIltcXG4gMSxcXG4gMlxcbl1cIiAmJiBzdHJpbmdpZnkobmV3IERhdGUoLTg2NGUxMykpID09ICdcIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWlwiJyAmJiBzdHJpbmdpZnkobmV3IERhdGUoODY0ZTEzKSkgPT0gJ1wiKzI3NTc2MC0wOS0xM1QwMDowMDowMC4wMDBaXCInICYmIHN0cmluZ2lmeShuZXcgRGF0ZSgtNjIxOTg3NTUyZTUpKSA9PSAnXCItMDAwMDAxLTAxLTAxVDAwOjAwOjAwLjAwMFpcIicgJiYgc3RyaW5naWZ5KG5ldyBEYXRlKC0xKSkgPT0gJ1wiMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaXCInO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfWlzU3VwcG9ydGVkID0gc3RyaW5naWZ5U3VwcG9ydGVkO1xuICAgICAgICAgICAgICAgIH1pZiAobmFtZSA9PSBcImpzb24tcGFyc2VcIikge1xuICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlID0gZXhwb3J0cy5wYXJzZTtpZiAodHlwZW9mIHBhcnNlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZShcIjBcIikgPT09IDAgJiYgIXBhcnNlKGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZShzZXJpYWxpemVkKTt2YXIgcGFyc2VTdXBwb3J0ZWQgPSB2YWx1ZVtcImFcIl0ubGVuZ3RoID09IDUgJiYgdmFsdWVbXCJhXCJdWzBdID09PSAxO2lmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gIXBhcnNlKCdcIlx0XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fWlmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9IHBhcnNlKFwiMDFcIikgIT09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9aWYgKHBhcnNlU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gcGFyc2UoXCIxLlwiKSAhPT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1pc1N1cHBvcnRlZCA9IHBhcnNlU3VwcG9ydGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfXJldHVybiBoYXNbbmFtZV0gPSAhIWlzU3VwcG9ydGVkO1xuICAgICAgICAgICAgfWlmICghaGFzKFwianNvblwiKSkge1xuICAgICAgICAgICAgICB2YXIgZnVuY3Rpb25DbGFzcyA9IFwiW29iamVjdCBGdW5jdGlvbl1cIixcbiAgICAgICAgICAgICAgICAgIGRhdGVDbGFzcyA9IFwiW29iamVjdCBEYXRlXVwiLFxuICAgICAgICAgICAgICAgICAgbnVtYmVyQ2xhc3MgPSBcIltvYmplY3QgTnVtYmVyXVwiLFxuICAgICAgICAgICAgICAgICAgc3RyaW5nQ2xhc3MgPSBcIltvYmplY3QgU3RyaW5nXVwiLFxuICAgICAgICAgICAgICAgICAgYXJyYXlDbGFzcyA9IFwiW29iamVjdCBBcnJheV1cIixcbiAgICAgICAgICAgICAgICAgIGJvb2xlYW5DbGFzcyA9IFwiW29iamVjdCBCb29sZWFuXVwiO3ZhciBjaGFySW5kZXhCdWdneSA9IGhhcyhcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKTtpZiAoIWlzRXh0ZW5kZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO3ZhciBNb250aHMgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO3ZhciBnZXREYXkgPSBmdW5jdGlvbiBnZXREYXkoeWVhciwgbW9udGgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBNb250aHNbbW9udGhdICsgMzY1ICogKHllYXIgLSAxOTcwKSArIGZsb29yKCh5ZWFyIC0gMTk2OSArIChtb250aCA9ICsobW9udGggPiAxKSkpIC8gNCkgLSBmbG9vcigoeWVhciAtIDE5MDEgKyBtb250aCkgLyAxMDApICsgZmxvb3IoKHllYXIgLSAxNjAxICsgbW9udGgpIC8gNDAwKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9aWYgKCEoaXNQcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGlzUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBtZW1iZXJzID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3I7aWYgKChtZW1iZXJzLl9fcHJvdG9fXyA9IG51bGwsIG1lbWJlcnMuX19wcm90b19fID0geyB0b1N0cmluZzogMSB9LCBtZW1iZXJzKS50b1N0cmluZyAhPSBnZXRDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICBpc1Byb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gdGhpcy5fX3Byb3RvX18sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChwcm9wZXJ0eSBpbiAodGhpcy5fX3Byb3RvX18gPSBudWxsLCB0aGlzKSk7dGhpcy5fX3Byb3RvX18gPSBvcmlnaW5hbDtyZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3IgPSBtZW1iZXJzLmNvbnN0cnVjdG9yO2lzUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gKHRoaXMuY29uc3RydWN0b3IgfHwgY29uc3RydWN0b3IpLnByb3RvdHlwZTtyZXR1cm4gcHJvcGVydHkgaW4gdGhpcyAmJiAhKHByb3BlcnR5IGluIHBhcmVudCAmJiB0aGlzW3Byb3BlcnR5XSA9PT0gcGFyZW50W3Byb3BlcnR5XSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9bWVtYmVycyA9IG51bGw7cmV0dXJuIGlzUHJvcGVydHkuY2FsbCh0aGlzLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfWZvckVhY2ggPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gMCxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVycyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk7KFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlT2YgPSAwO1xuICAgICAgICAgICAgICAgIH0pLnByb3RvdHlwZS52YWx1ZU9mID0gMDttZW1iZXJzID0gbmV3IFByb3BlcnRpZXMoKTtmb3IgKHByb3BlcnR5IGluIG1lbWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpemUrKztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9UHJvcGVydGllcyA9IG1lbWJlcnMgPSBudWxsO2lmICghc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgbWVtYmVycyA9IFtcInZhbHVlT2ZcIiwgXCJ0b1N0cmluZ1wiLCBcInRvTG9jYWxlU3RyaW5nXCIsIFwicHJvcGVydHlJc0VudW1lcmFibGVcIiwgXCJpc1Byb3RvdHlwZU9mXCIsIFwiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXTtmb3JFYWNoID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoO3ZhciBoYXNQcm9wZXJ0eSA9ICFpc0Z1bmN0aW9uICYmIHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgIT0gXCJmdW5jdGlvblwiICYmIG9iamVjdFR5cGVzW3R5cGVvZiBvYmplY3QuaGFzT3duUHJvcGVydHldICYmIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSB8fCBpc1Byb3BlcnR5O2ZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNGdW5jdGlvbiAmJiBwcm9wZXJ0eSA9PSBcInByb3RvdHlwZVwiKSAmJiBoYXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9Zm9yIChsZW5ndGggPSBtZW1iZXJzLmxlbmd0aDsgcHJvcGVydHkgPSBtZW1iZXJzWy0tbGVuZ3RoXTsgaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSAmJiBjYWxsYmFjayhwcm9wZXJ0eSkpO1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNpemUgPT0gMikge1xuICAgICAgICAgICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZW1iZXJzID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTtmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgIWlzUHJvcGVydHkuY2FsbChtZW1iZXJzLCBwcm9wZXJ0eSkgJiYgKG1lbWJlcnNbcHJvcGVydHldID0gMSkgJiYgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBmb3JFYWNoID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb25zdHJ1Y3Rvcjtmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpICYmICEoaXNDb25zdHJ1Y3RvciA9IHByb3BlcnR5ID09PSBcImNvbnN0cnVjdG9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9aWYgKGlzQ29uc3RydWN0b3IgfHwgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkgPSBcImNvbnN0cnVjdG9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1yZXR1cm4gZm9yRWFjaChvYmplY3QsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfTtpZiAoIWhhcyhcImpzb24tc3RyaW5naWZ5XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIEVzY2FwZXMgPSB7IDkyOiBcIlxcXFxcXFxcXCIsIDM0OiAnXFxcXFwiJywgODogXCJcXFxcYlwiLCAxMjogXCJcXFxcZlwiLCAxMDogXCJcXFxcblwiLCAxMzogXCJcXFxcclwiLCA5OiBcIlxcXFx0XCIgfTt2YXIgbGVhZGluZ1plcm9lcyA9IFwiMDAwMDAwXCI7dmFyIHRvUGFkZGVkU3RyaW5nID0gZnVuY3Rpb24gdG9QYWRkZWRTdHJpbmcod2lkdGgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKGxlYWRpbmdaZXJvZXMgKyAodmFsdWUgfHwgMCkpLnNsaWNlKC13aWR0aCk7XG4gICAgICAgICAgICAgICAgfTt2YXIgdW5pY29kZVByZWZpeCA9IFwiXFxcXHUwMFwiO3ZhciBxdW90ZSA9IGZ1bmN0aW9uIHF1b3RlKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJ1wiJyxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gdmFsdWUubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIHVzZUNoYXJJbmRleCA9ICFjaGFySW5kZXhCdWdneSB8fCBsZW5ndGggPiAxMDt2YXIgc3ltYm9scyA9IHVzZUNoYXJJbmRleCAmJiAoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5zcGxpdChcIlwiKSA6IHZhbHVlKTtmb3IgKDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gdmFsdWUuY2hhckNvZGVBdChpbmRleCk7c3dpdGNoIChjaGFyQ29kZSkge2Nhc2UgODpjYXNlIDk6Y2FzZSAxMDpjYXNlIDEyOmNhc2UgMTM6Y2FzZSAzNDpjYXNlIDkyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IEVzY2FwZXNbY2hhckNvZGVdO2JyZWFrO2RlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPCAzMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdW5pY29kZVByZWZpeCArIHRvUGFkZGVkU3RyaW5nKDIsIGNoYXJDb2RlLnRvU3RyaW5nKDE2KSk7YnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9cmVzdWx0ICs9IHVzZUNoYXJJbmRleCA/IHN5bWJvbHNbaW5kZXhdIDogdmFsdWUuY2hhckF0KGluZGV4KTt9XG4gICAgICAgICAgICAgICAgICB9cmV0dXJuIHJlc3VsdCArICdcIic7XG4gICAgICAgICAgICAgICAgfTt2YXIgc2VyaWFsaXplID0gZnVuY3Rpb24gc2VyaWFsaXplKHByb3BlcnR5LCBvYmplY3QsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSwgY2xhc3NOYW1lLCB5ZWFyLCBtb250aCwgZGF0ZSwgdGltZSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcywgcmVzdWx0cywgZWxlbWVudCwgaW5kZXgsIGxlbmd0aCwgcHJlZml4LCByZXN1bHQ7dHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvYmplY3RbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fWlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtpZiAoY2xhc3NOYW1lID09IGRhdGVDbGFzcyAmJiAhaXNQcm9wZXJ0eS5jYWxsKHZhbHVlLCBcInRvSlNPTlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IC0xIC8gMCAmJiB2YWx1ZSA8IDEgLyAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0RGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBmbG9vcih2YWx1ZSAvIDg2NGU1KTtmb3IgKHllYXIgPSBmbG9vcihkYXRlIC8gMzY1LjI0MjUpICsgMTk3MCAtIDE7IGdldERheSh5ZWFyICsgMSwgMCkgPD0gZGF0ZTsgeWVhcisrKTtmb3IgKG1vbnRoID0gZmxvb3IoKGRhdGUgLSBnZXREYXkoeWVhciwgMCkpIC8gMzAuNDIpOyBnZXREYXkoeWVhciwgbW9udGggKyAxKSA8PSBkYXRlOyBtb250aCsrKTtkYXRlID0gMSArIGRhdGUgLSBnZXREYXkoeWVhciwgbW9udGgpO3RpbWUgPSAodmFsdWUgJSA4NjRlNSArIDg2NGU1KSAlIDg2NGU1O2hvdXJzID0gZmxvb3IodGltZSAvIDM2ZTUpICUgMjQ7bWludXRlcyA9IGZsb29yKHRpbWUgLyA2ZTQpICUgNjA7c2Vjb25kcyA9IGZsb29yKHRpbWUgLyAxZTMpICUgNjA7bWlsbGlzZWNvbmRzID0gdGltZSAlIDFlMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHllYXIgPSB2YWx1ZS5nZXRVVENGdWxsWWVhcigpO21vbnRoID0gdmFsdWUuZ2V0VVRDTW9udGgoKTtkYXRlID0gdmFsdWUuZ2V0VVRDRGF0ZSgpO2hvdXJzID0gdmFsdWUuZ2V0VVRDSG91cnMoKTttaW51dGVzID0gdmFsdWUuZ2V0VVRDTWludXRlcygpO3NlY29uZHMgPSB2YWx1ZS5nZXRVVENTZWNvbmRzKCk7bWlsbGlzZWNvbmRzID0gdmFsdWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9dmFsdWUgPSAoeWVhciA8PSAwIHx8IHllYXIgPj0gMWU0ID8gKHllYXIgPCAwID8gXCItXCIgOiBcIitcIikgKyB0b1BhZGRlZFN0cmluZyg2LCB5ZWFyIDwgMCA/IC15ZWFyIDogeWVhcikgOiB0b1BhZGRlZFN0cmluZyg0LCB5ZWFyKSkgKyBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1vbnRoICsgMSkgKyBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIGRhdGUpICsgXCJUXCIgKyB0b1BhZGRlZFN0cmluZygyLCBob3VycykgKyBcIjpcIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1pbnV0ZXMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBzZWNvbmRzKSArIFwiLlwiICsgdG9QYWRkZWRTdHJpbmcoMywgbWlsbGlzZWNvbmRzKSArIFwiWlwiO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZS50b0pTT04gPT0gXCJmdW5jdGlvblwiICYmIChjbGFzc05hbWUgIT0gbnVtYmVyQ2xhc3MgJiYgY2xhc3NOYW1lICE9IHN0cmluZ0NsYXNzICYmIGNsYXNzTmFtZSAhPSBhcnJheUNsYXNzIHx8IGlzUHJvcGVydHkuY2FsbCh2YWx1ZSwgXCJ0b0pTT05cIikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT04ocHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9aWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suY2FsbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9aWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgIH1jbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtpZiAoY2xhc3NOYW1lID09IGJvb2xlYW5DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUgPT0gbnVtYmVyQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDAgPyBcIlwiICsgdmFsdWUgOiBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBxdW90ZShcIlwiICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfWlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrW2xlbmd0aF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1zdGFjay5wdXNoKHZhbHVlKTtyZXN1bHRzID0gW107cHJlZml4ID0gaW5kZW50YXRpb247aW5kZW50YXRpb24gKz0gd2hpdGVzcGFjZTtpZiAoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IHNlcmlhbGl6ZShpbmRleCwgdmFsdWUsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spO3Jlc3VsdHMucHVzaChlbGVtZW50ID09PSB1bmRlZiA/IFwibnVsbFwiIDogZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgfXJlc3VsdCA9IHJlc3VsdHMubGVuZ3RoID8gd2hpdGVzcGFjZSA/IFwiW1xcblwiICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oXCIsXFxuXCIgKyBpbmRlbnRhdGlvbikgKyBcIlxcblwiICsgcHJlZml4ICsgXCJdXCIgOiBcIltcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIl1cIiA6IFwiW11cIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHByb3BlcnRpZXMgfHwgdmFsdWUsIGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZXJpYWxpemUocHJvcGVydHksIHZhbHVlLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKTtpZiAoZWxlbWVudCAhPT0gdW5kZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHF1b3RlKHByb3BlcnR5KSArIFwiOlwiICsgKHdoaXRlc3BhY2UgPyBcIiBcIiA6IFwiXCIpICsgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7cmVzdWx0ID0gcmVzdWx0cy5sZW5ndGggPyB3aGl0ZXNwYWNlID8gXCJ7XFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIn1cIiA6IFwie1wiICsgcmVzdWx0cy5qb2luKFwiLFwiKSArIFwifVwiIDogXCJ7fVwiO1xuICAgICAgICAgICAgICAgICAgICB9c3RhY2sucG9wKCk7cmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O2V4cG9ydHMuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKHNvdXJjZSwgZmlsdGVyLCB3aWR0aCkge1xuICAgICAgICAgICAgICAgICAgdmFyIHdoaXRlc3BhY2UsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCBjbGFzc05hbWU7aWYgKG9iamVjdFR5cGVzW3R5cGVvZiBmaWx0ZXJdICYmIGZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwoZmlsdGVyKSkgPT0gZnVuY3Rpb25DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IHt9O2ZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZmlsdGVyLmxlbmd0aCwgdmFsdWU7IGluZGV4IDwgbGVuZ3RoOyB2YWx1ZSA9IGZpbHRlcltpbmRleCsrXSwgKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpLCBjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MgfHwgY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSAmJiAocHJvcGVydGllc1t2YWx1ZV0gPSAxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1pZiAod2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHdpZHRoKSkgPT0gbnVtYmVyQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoKHdpZHRoIC09IHdpZHRoICUgMSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHdoaXRlc3BhY2UgPSBcIlwiLCB3aWR0aCA+IDEwICYmICh3aWR0aCA9IDEwKTsgd2hpdGVzcGFjZS5sZW5ndGggPCB3aWR0aDsgd2hpdGVzcGFjZSArPSBcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgIHdoaXRlc3BhY2UgPSB3aWR0aC5sZW5ndGggPD0gMTAgPyB3aWR0aCA6IHdpZHRoLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfXJldHVybiBzZXJpYWxpemUoXCJcIiwgKHZhbHVlID0ge30sIHZhbHVlW1wiXCJdID0gc291cmNlLCB2YWx1ZSksIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBcIlwiLCBbXSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfWlmICghaGFzKFwianNvbi1wYXJzZVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO3ZhciBVbmVzY2FwZXMgPSB7IDkyOiBcIlxcXFxcIiwgMzQ6ICdcIicsIDQ3OiBcIi9cIiwgOTg6IFwiXFxiXCIsIDExNjogXCJcdFwiLCAxMTA6IFwiXFxuXCIsIDEwMjogXCJcXGZcIiwgMTE0OiBcIlxcclwiIH07dmFyIEluZGV4LCBTb3VyY2U7dmFyIGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICAgICAgICAgICAgICBJbmRleCA9IFNvdXJjZSA9IG51bGw7dGhyb3cgU3ludGF4RXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9O3ZhciBsZXggPSBmdW5jdGlvbiBsZXgoKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gU291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgaXNTaWduZWQsXG4gICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGU7d2hpbGUgKEluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO3N3aXRjaCAoY2hhckNvZGUpIHtjYXNlIDk6Y2FzZSAxMDpjYXNlIDEzOmNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICBJbmRleCsrO2JyZWFrO2Nhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoYXJJbmRleEJ1Z2d5ID8gc291cmNlLmNoYXJBdChJbmRleCkgOiBzb3VyY2VbSW5kZXhdO0luZGV4Kys7cmV0dXJuIHZhbHVlO2Nhc2UgMzQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhbHVlID0gXCJAXCIsIEluZGV4Kys7IEluZGV4IDwgbGVuZ3RoOykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZiAoY2hhckNvZGUgPCAzMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhckNvZGUgPT0gOTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO3N3aXRjaCAoY2hhckNvZGUpIHtjYXNlIDkyOmNhc2UgMzQ6Y2FzZSA0NzpjYXNlIDk4OmNhc2UgMTE2OmNhc2UgMTEwOmNhc2UgMTAyOmNhc2UgMTE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBVbmVzY2FwZXNbY2hhckNvZGVdO0luZGV4Kys7YnJlYWs7Y2FzZSAxMTc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luID0gKytJbmRleDtmb3IgKHBvc2l0aW9uID0gSW5kZXggKyA0OyBJbmRleCA8IHBvc2l0aW9uOyBJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7aWYgKCEoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcgfHwgY2hhckNvZGUgPj0gOTcgJiYgY2hhckNvZGUgPD0gMTAyIHx8IGNoYXJDb2RlID49IDY1ICYmIGNoYXJDb2RlIDw9IDcwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH12YWx1ZSArPSBmcm9tQ2hhckNvZGUoXCIweFwiICsgc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCkpO2JyZWFrO2RlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSAzNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO2JlZ2luID0gSW5kZXg7d2hpbGUgKGNoYXJDb2RlID49IDMyICYmIGNoYXJDb2RlICE9IDkyICYmIGNoYXJDb2RlICE9IDM0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH12YWx1ZSArPSBzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfWlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kZXgrKztyZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9YWJvcnQoKTtkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW4gPSBJbmRleDtpZiAoY2hhckNvZGUgPT0gNDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZWQgPSB0cnVlO2NoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0OCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCArIDEpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1NykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9aXNTaWduZWQgPSBmYWxzZTtmb3IgKDsgSW5kZXggPCBsZW5ndGggJiYgKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IEluZGV4KyspO2lmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gNDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICsrSW5kZXg7Zm9yICg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmIChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKSwgY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpOyBwb3NpdGlvbisrKTtpZiAocG9zaXRpb24gPT0gSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfUluZGV4ID0gcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1jaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZiAoY2hhckNvZGUgPT0gMTAxIHx8IGNoYXJDb2RlID09IDY5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtpZiAoY2hhckNvZGUgPT0gNDMgfHwgY2hhckNvZGUgPT0gNDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWZvciAocG9zaXRpb24gPSBJbmRleDsgcG9zaXRpb24gPCBsZW5ndGggJiYgKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQocG9zaXRpb24pLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IHBvc2l0aW9uKyspO2lmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9SW5kZXggPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfXJldHVybiArc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKGlzU2lnbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKHNvdXJjZS5zbGljZShJbmRleCwgSW5kZXggKyA0KSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRleCArPSA0O3JldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNSkgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDU7cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJudWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNDtyZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1hYm9ydCgpO31cbiAgICAgICAgICAgICAgICAgIH1yZXR1cm4gXCIkXCI7XG4gICAgICAgICAgICAgICAgfTt2YXIgZ2V0ID0gZnVuY3Rpb24gZ2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cywgaGFzTWVtYmVycztpZiAodmFsdWUgPT0gXCIkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH1pZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjaGFySW5kZXhCdWdneSA/IHZhbHVlLmNoYXJBdCgwKSA6IHZhbHVlWzBdKSA9PSBcIkBcIikge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgfWlmICh2YWx1ZSA9PSBcIltcIikge1xuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtpZiAodmFsdWUgPT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9aWYgKGhhc01lbWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtpZiAodmFsdWUgPT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1pZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1yZXN1bHRzLnB1c2goZ2V0KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgfXJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IFwie1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHt9O2ZvciAoOzsgaGFzTWVtYmVycyB8fCAoaGFzTWVtYmVycyA9IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGxleCgpO2lmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1pZiAoaGFzTWVtYmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGxleCgpO2lmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfWlmICh2YWx1ZSA9PSBcIixcIiB8fCB0eXBlb2YgdmFsdWUgIT0gXCJzdHJpbmdcIiB8fCAoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgIT0gXCJAXCIgfHwgbGV4KCkgIT0gXCI6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1yZXN1bHRzW3ZhbHVlLnNsaWNlKDEpXSA9IGdldChsZXgoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgfXJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICB9YWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH1yZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgfTt2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHdhbGsoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spO2lmIChlbGVtZW50ID09PSB1bmRlZikge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc291cmNlW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVtwcm9wZXJ0eV0gPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07dmFyIHdhbGsgPSBmdW5jdGlvbiB3YWxrKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldLFxuICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDtpZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldENsYXNzLmNhbGwodmFsdWUpID09IGFycmF5Q2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIGxlbmd0aCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfXJldHVybiBjYWxsYmFjay5jYWxsKHNvdXJjZSwgcHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9O2V4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCwgdmFsdWU7SW5kZXggPSAwO1NvdXJjZSA9IFwiXCIgKyBzb3VyY2U7cmVzdWx0ID0gZ2V0KGxleCgpKTtpZiAobGV4KCkgIT0gXCIkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH1JbmRleCA9IFNvdXJjZSA9IG51bGw7cmV0dXJuIGNhbGxiYWNrICYmIGdldENsYXNzLmNhbGwoY2FsbGJhY2spID09IGZ1bmN0aW9uQ2xhc3MgPyB3YWxrKCh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHJlc3VsdCwgdmFsdWUpLCBcIlwiLCBjYWxsYmFjaykgOiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWV4cG9ydHNbXCJydW5JbkNvbnRleHRcIl0gPSBydW5JbkNvbnRleHQ7cmV0dXJuIGV4cG9ydHM7XG4gICAgICAgICAgfWlmIChmcmVlRXhwb3J0cyAmJiAhaXNMb2FkZXIpIHtcbiAgICAgICAgICAgIHJ1bkluQ29udGV4dChyb290LCBmcmVlRXhwb3J0cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBuYXRpdmVKU09OID0gcm9vdC5KU09OLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSlNPTiA9IHJvb3RbXCJKU09OM1wiXSxcbiAgICAgICAgICAgICAgICBpc1Jlc3RvcmVkID0gZmFsc2U7dmFyIEpTT04zID0gcnVuSW5Db250ZXh0KHJvb3QsIHJvb3RbXCJKU09OM1wiXSA9IHsgbm9Db25mbGljdDogZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVzdG9yZWQpIHtcbiAgICAgICAgICAgICAgICAgIGlzUmVzdG9yZWQgPSB0cnVlO3Jvb3QuSlNPTiA9IG5hdGl2ZUpTT047cm9vdFtcIkpTT04zXCJdID0gcHJldmlvdXNKU09OO25hdGl2ZUpTT04gPSBwcmV2aW91c0pTT04gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1yZXR1cm4gSlNPTjM7XG4gICAgICAgICAgICAgIH0gfSk7cm9vdC5KU09OID0geyBwYXJzZTogSlNPTjMucGFyc2UsIHN0cmluZ2lmeTogSlNPTjMuc3RyaW5naWZ5IH07XG4gICAgICAgICAgfWlmIChpc0xvYWRlcikge1xuICAgICAgICAgICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIEpTT04zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHt9KTtcbiAgICB9LCB7fV0sIDUxOiBbZnVuY3Rpb24gKF9kZXJlcV8sIG1vZHVsZSwgZXhwb3J0cykge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSB0b0FycmF5O2Z1bmN0aW9uIHRvQXJyYXkobGlzdCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107aW5kZXggPSBpbmRleCB8fCAwO2ZvciAodmFyIGkgPSBpbmRleCB8fCAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFycmF5W2kgLSBpbmRleF0gPSBsaXN0W2ldO1xuICAgICAgICB9cmV0dXJuIGFycmF5O1xuICAgICAgfVxuICAgIH0sIHt9XSB9LCB7fSwgWzMxXSkoMzEpO1xufSk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICc0M2M2Njk4OHJGSDZiK3h4eVdTc2JUaScsICd1c2VyJyk7XG4vLyBiaXovdXNlci9zY3JpcHQvdXNlci5qc1xuXG5mdW5jdGlvbiBVc2VyKHVzZXIpIHtcbiAgICAvLyB0aGlzLnRhbmtCb2R5ID0gMDtcbiAgICAvLyB0aGlzLnRhbmtIZWFkID0gMDtcbiAgICAvLyB0aGlzLnRhbmtXaGVlbCA9IDA7XG4gICAgLy8gdGhpcy5kaWFtb25kID0gMTAwMDtcbiAgICAvLyB0aGlzLmtpbGwgPSAxMDtcbiAgICAvLyB0aGlzLmRlYWQgPSAxMDtcbn1cblxuVXNlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgLy8gdGhpcy5faWQgPSB1c2VyLklkO1xuICAgIC8vIHRoaXMudXNlcm5hbWUgPSB1c2VyLlVzZXJuYW1lO1xuICAgIC8vIHRoaXMubmlja25hbWUgPSB1c2VyLk5pY2tuYW1lO1xuICAgIHRoaXMuZGlhbW9uZCA9IHVzZXIuRGlhbW9uZDtcbiAgICB0aGlzLmtpbGwgPSB1c2VyLktpbGw7XG4gICAgdGhpcy5kZWFkID0gdXNlci5EZWFkO1xuICAgIHRoaXMudGFua0JvZHkgPSB1c2VyLlRhbmtCb2R5O1xuICAgIHRoaXMudGFua0hlYWQgPSB1c2VyLlRhbmtIZWFkO1xuICAgIHRoaXMudGFua1doZWVsID0gdXNlci5UYW5rV2hlZWw7XG59O1xuXG5Vc2VyLnByb3RvdHlwZS5jb3N0ID0gZnVuY3Rpb24gKHR5cGUsIGNvc3QpIHtcbiAgICB0aGlzW3R5cGVdKys7XG4gICAgdGhpcy5kaWFtb25kIC09IGNvc3Q7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBVc2VyKCk7XG5cbmNjLl9SRnBvcCgpOyIsIlwidXNlIHN0cmljdFwiO1xuY2MuX1JGcHVzaChtb2R1bGUsICcwODlhYVRObmJCQkE1cDBFUGNSeFU1dycsICd1dGlscycpO1xuLy8gbGliL3V0aWxzLmpzXG5cblxuXG5jYy5fUkZwb3AoKTsiXX0=
